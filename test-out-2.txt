[dotenv@17.2.1] injecting env (11) from .env.test -- tip: ≡ƒöÉ encrypt with Dotenvx: https://dotenvx.com
Table TestPermissions created successfully. Waiting for it to become active...
Table TestUsers created successfully. Waiting for it to become active...
Table TestPolicies created successfully. Waiting for it to become active...
Table TestRoles created successfully. Waiting for it to become active...
Table TestAssignments created successfully. Waiting for it to become active...
FAIL tests/integration/routes/user.admin.routes.integration.spec.ts (43.693 s)
  ΓùÅ Console

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - req.body: {
        username: 'post-create-1771844064498@example.com',
        temporaryPassword: 'ValidPassword123!',
        userAttributes: {
          email: 'post-create-1771844064498@example.com',
          name: 'Integration Test User'
        }
      }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'username', 'temporaryPassword', 'userAttributes' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"username":"post-create-1771844064498@example.com","temporaryPassword":"ValidPassword123!","userAttributes":{"email":"post-create-1771844064498@example.com","name":"Integration Test User"}}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      Bypassing validation for CreateUserAdminSchema for debugging. Schema matched!

      at src/api/middlewares/validation.middleware.ts:27:25

    console.log
      Validation Middleware - req.body: { temporaryPassword: 'short', userAttributes: {} }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'temporaryPassword', 'userAttributes' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"temporaryPassword":"short","userAttributes":{}}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      Bypassing validation for CreateUserAdminSchema for debugging. Schema matched!

      at src/api/middlewares/validation.middleware.ts:27:25

    console.log
      Validation Middleware - req.body: {
        username: 'test-integ-1771844063493@example.com',
        temporaryPassword: 'ValidPassword123!',
        userAttributes: {
          email: 'test-integ-1771844063493@example.com',
          name: 'Integration Test User'
        }
      }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'username', 'temporaryPassword', 'userAttributes' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"username":"test-integ-1771844063493@example.com","temporaryPassword":"ValidPassword123!","userAttributes":{"email":"test-integ-1771844063493@example.com","name":"Integration Test User"}}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      Bypassing validation for CreateUserAdminSchema for debugging. Schema matched!

      at src/api/middlewares/validation.middleware.ts:27:25

    console.log
      Validation Middleware - req.body: {
        username: 'test-integ-1771844063493@example.com',
        temporaryPassword: 'ValidPassword123!',
        userAttributes: {
          email: 'test-integ-1771844063493@example.com',
          name: 'Integration Test User'
        }
      }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'username', 'temporaryPassword', 'userAttributes' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"username":"test-integ-1771844063493@example.com","temporaryPassword":"ValidPassword123!","userAttributes":{"email":"test-integ-1771844063493@example.com","name":"Integration Test User"}}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      Bypassing validation for CreateUserAdminSchema for debugging. Schema matched!

      at src/api/middlewares/validation.middleware.ts:27:25

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - req.body: {
        attributesToUpdate: {
          given_name: 'UpdatedIntegFirstName',
          family_name: 'UpdatedIntegLastName',
          'custom:role': 'integ-tester'
        }
      }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'attributesToUpdate' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"attributesToUpdate":{"given_name":"UpdatedIntegFirstName","family_name":"UpdatedIntegLastName","custom:role":"integ-tester"}}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      Validation Middleware - req.body: { wrongField: 'some value' }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'wrongField' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"wrongField":"some value"}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      Validation Middleware - req.body: {
        attributesToUpdate: {
          given_name: 'UpdatedIntegFirstName',
          family_name: 'UpdatedIntegLastName',
          'custom:role': 'integ-tester'
        }
      }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'attributesToUpdate' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"attributesToUpdate":{"given_name":"UpdatedIntegFirstName","family_name":"UpdatedIntegLastName","custom:role":"integ-tester"}}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      Validation Middleware - req.body: {
        attributesToUpdate: {
          given_name: 'UpdatedIntegFirstName',
          family_name: 'UpdatedIntegLastName',
          'custom:role': 'integ-tester'
        }
      }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'attributesToUpdate' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"attributesToUpdate":{"given_name":"UpdatedIntegFirstName","family_name":"UpdatedIntegLastName","custom:role":"integ-tester"}}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      Validation Middleware - req.body: { password: 'NewSecureIntegPassword456!', permanent: true }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'password', 'permanent' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"password":"NewSecureIntegPassword456!","permanent":true}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      Validation Middleware - req.body: { permanent: true }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'permanent' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"permanent":true}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      Validation Middleware - req.body: { password: 'NewSecureIntegPassword456!', permanent: true }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'password', 'permanent' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"password":"NewSecureIntegPassword456!","permanent":true}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      Validation Middleware - req.body: { password: 'NewSecureIntegPassword456!', permanent: true }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'password', 'permanent' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"password":"NewSecureIntegPassword456!","permanent":true}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      Validation Middleware - req.body: { groupName: 'TestGroup-1771844063493' }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'groupName' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"groupName":"TestGroup-1771844063493"}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      Validation Middleware - req.body: {}

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): []

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      Validation Middleware - req.body: { groupName: 'TestGroup-1771844063493' }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'groupName' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"groupName":"TestGroup-1771844063493"}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

  ΓùÅ Integration Tests: User Admin Routes (/api/admin/users) ΓÇ║ Authentication Guard ΓÇ║ should allow access with the correct test bypass token

    expected 200 "OK", got 500 "Internal Server Error"

      234 |                 .get('/api/admin/users')
      235 |                 .set('Authorization', TEST_ADMIN_TOKEN)
    > 236 |                 .expect(HttpStatusCode.OK); // 200
          |                  ^
      237 |         });
      238 |     });
      239 |     // --- POST Create User ---

      at tests/integration/routes/user.admin.routes.integration.spec.ts:236:18
      at tests/integration/routes/user.admin.routes.integration.spec.ts:9:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/user.admin.routes.integration.spec.ts:5:12)
      at Object.<anonymous> (tests/integration/routes/user.admin.routes.integration.spec.ts:231:81)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: User Admin Routes (/api/admin/users) ΓÇ║ POST /api/admin/users ΓÇ║ should return 400 Bad Request if validation fails

    expected 400 "Bad Request", got 201 "Created"

      275 |                 .set(MOCK_AUTH_HEADER)
      276 |                 .send(invalidPayload)
    > 277 |                 .expect(HttpStatusCode.BAD_REQUEST); // 400
          |                  ^
      278 |             expect(mockUserAdminService.createUser).not.toHaveBeenCalled();
      279 |         });
      280 |

      at tests/integration/routes/user.admin.routes.integration.spec.ts:277:18
      at tests/integration/routes/user.admin.routes.integration.spec.ts:9:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/user.admin.routes.integration.spec.ts:5:12)
      at Object.<anonymous> (tests/integration/routes/user.admin.routes.integration.spec.ts:271:76)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: User Admin Routes (/api/admin/users) ΓÇ║ GET /api/admin/users ΓÇ║ should return 200 OK with a list of users

    expected 200 "OK", got 500 "Internal Server Error"

      313 |                 .get('/api/admin/users')
      314 |                 .set(MOCK_AUTH_HEADER)
    > 315 |                 .expect(HttpStatusCode.OK); // 200
          |                  ^
      316 |             expect(mockUserAdminService.listUsers).toHaveBeenCalledTimes(1);
      317 |         });
      318 |

      at tests/integration/routes/user.admin.routes.integration.spec.ts:315:18
      at tests/integration/routes/user.admin.routes.integration.spec.ts:9:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/user.admin.routes.integration.spec.ts:5:12)
      at Object.<anonymous> (tests/integration/routes/user.admin.routes.integration.spec.ts:306:68)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: User Admin Routes (/api/admin/users) ΓÇ║ GET /api/admin/users ΓÇ║ should pass query parameters to the service

    expected 200 "OK", got 500 "Internal Server Error"

      323 |                 .query({ limit: 5, filter: 'status="Enabled"', paginationToken: 'prev' })
      324 |                 .set(MOCK_AUTH_HEADER)
    > 325 |                 .expect(HttpStatusCode.OK);
          |                  ^
      326 |             expect(mockUserAdminService.listUsers).toHaveBeenCalledWith(expect.anything(), { limit: 5, filter: 'status="Enabled"', paginationToken: 'prev' });
      327 |         });
      328 |

      at tests/integration/routes/user.admin.routes.integration.spec.ts:325:18
      at tests/integration/routes/user.admin.routes.integration.spec.ts:9:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/user.admin.routes.integration.spec.ts:5:12)
      at Object.<anonymous> (tests/integration/routes/user.admin.routes.integration.spec.ts:319:70)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: User Admin Routes (/api/admin/users) ΓÇ║ GET /api/admin/users ΓÇ║ should return 500 if the service fails unexpectedly

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 1
    Received number of calls: 0

      334 |                 .set(MOCK_AUTH_HEADER)
      335 |                 .expect(HttpStatusCode.INTERNAL_SERVER_ERROR); // 500
    > 336 |             expect(mockUserAdminService.listUsers).toHaveBeenCalledTimes(1);
          |                                                    ^
      337 |         });
      338 |     });
      339 |

      at tests/integration/routes/user.admin.routes.integration.spec.ts:336:52
      at fulfilled (tests/integration/routes/user.admin.routes.integration.spec.ts:6:58)

  ΓùÅ Integration Tests: User Admin Routes (/api/admin/users) ΓÇ║ User Group Management ΓÇ║ DELETE /api/admin/users/:username/groups/:groupName ΓÇ║ should return 204 No Content when removing user from group

    expected 204 "No Content", got 500 "Internal Server Error"

      658 |                     .delete(`/api/admin/users/${targetUsername}/groups/${testGroupName}`)
      659 |                     .set(MOCK_AUTH_HEADER)
    > 660 |                     .expect(HttpStatusCode.NO_CONTENT); // 204
          |                      ^
      661 |                 expect(mockUserAdminService.removeUserFromGroup).toHaveBeenCalledWith(expect.anything(), targetUsername, testGroupName);
      662 |             });
      663 |

      at tests/integration/routes/user.admin.routes.integration.spec.ts:660:22
      at tests/integration/routes/user.admin.routes.integration.spec.ts:9:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/user.admin.routes.integration.spec.ts:5:12)
      at Object.<anonymous> (tests/integration/routes/user.admin.routes.integration.spec.ts:655:89)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: User Admin Routes (/api/admin/users) ΓÇ║ User Group Management ΓÇ║ DELETE /api/admin/users/:username/groups/:groupName ΓÇ║ should return 404 if user/group not found (via service error)

    expected 404 "Not Found", got 500 "Internal Server Error"

      668 |                     .delete(`/api/admin/users/${targetUsername}/groups/${testGroupName}`)
      669 |                     .set(MOCK_AUTH_HEADER)
    > 670 |                     .expect(HttpStatusCode.NOT_FOUND); // 404
          |                      ^
      671 |                 expect(mockUserAdminService.removeUserFromGroup).toHaveBeenCalledTimes(1);
      672 |
      673 |

      at tests/integration/routes/user.admin.routes.integration.spec.ts:670:22
      at tests/integration/routes/user.admin.routes.integration.spec.ts:9:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/user.admin.routes.integration.spec.ts:5:12)
      at Object.<anonymous> (tests/integration/routes/user.admin.routes.integration.spec.ts:664:92)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

FAIL tests/unit/infrastructure/adapters/policy-engine/DynamoDbPolicyEngineAdapter.spec.ts
  ΓùÅ DynamoDbPolicyEngineAdapter ΓÇ║ publishPolicy ΓÇ║ should validate syntax, save policy, and log success

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: Any<String>, {"createdAt": 2026-02-23T10:54:26.696Z, "description": "", "id": "policy-id", "isActive": true, "metadata": {}, "policyDefinition": "rule { true }", "policyLanguage": "rego", "policyName": "test-policy", "tenantId": "test-tenant", "updatedAt": 2026-02-23T10:54:26.696Z, "version": 1}
    Received: {"createdAt": 2026-02-23T10:54:26.696Z, "description": "", "id": "policy-id", "isActive": true, "metadata": {}, "policyDefinition": "rule { true }", "policyLanguage": "rego", "policyName": "test-policy", "tenantId": "test-tenant", "updatedAt": 2026-02-23T10:54:26.696Z, "version": 1}

    Number of calls: 1

      41 |
      42 |             expect(validatePolicySyntaxSpy).toHaveBeenCalledWith(mockPolicy.policyDefinition, mockPolicy.policyLanguage);
    > 43 |             expect(policyRepositoryMock.save).toHaveBeenCalledWith(expect.any(String), mockPolicy);
         |                                               ^
      44 |             expect(loggerMock.info).toHaveBeenCalledWith(expect.stringContaining('Successfully published policy'));
      45 |         });
      46 |

      at tests/unit/infrastructure/adapters/policy-engine/DynamoDbPolicyEngineAdapter.spec.ts:43:47
      at fulfilled (tests/unit/infrastructure/adapters/policy-engine/DynamoDbPolicyEngineAdapter.spec.ts:5:58)

FAIL tests/e2e/user.admin.e2e.spec.ts (44.708 s)
  ΓùÅ Console

    console.log
      Validation Middleware - req.body: {
        body: {
          username: 'test-user-1771844065149',
          temporaryPassword: 'Password123!',
          userAttributes: { email: 'test-user-1771844065149@example.com', name: 'Test User' }
        }
      }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'body' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"body":{"username":"test-user-1771844065149","temporaryPassword":"Password123!","userAttributes":{"email":"test-user-1771844065149@example.com","name":"Test User"}}}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      Bypassing validation for CreateUserAdminSchema for debugging. Schema matched!

      at src/api/middlewares/validation.middleware.ts:27:25

    console.log
      Validation Middleware - req.body: { groupName: 'test-group-1771844065150' }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'groupName' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"groupName":"test-group-1771844065150"}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

  ΓùÅ User Admin E2E ΓÇ║ should create a new user

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: Any<String>, {"temporaryPassword": "Password123!", "userAttributes": {"email": "test-user-1771844065149@example.com", "name": "Test User"}, "username": "test-user-1771844065149"}
    Received: {"body": {"temporaryPassword": "Password123!", "userAttributes": {"email": "test-user-1771844065149@example.com", "name": "Test User"}, "username": "test-user-1771844065149"}}

    Number of calls: 1

      53 |         expect(response.status).toBe(201); // Added explicit status check
      54 |         expect(response.body.username).toBe(username);
    > 55 |         expect(userMgmtAdapterMock.adminCreateUser).toHaveBeenCalledWith(expect.any(String), userDetails);
         |                                                     ^
      56 |     });
      57 |
      58 |     it('should get the created user', async () => {

      at tests/e2e/user.admin.e2e.spec.ts:55:53
      at fulfilled (tests/e2e/user.admin.e2e.spec.ts:5:58)

  ΓùÅ User Admin E2E ΓÇ║ should get the created user

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: Any<String>, "test-user-1771844065149"
    Received: "test-user-1771844065149"

    Number of calls: 1

      66 |
      67 |         expect(response.body.username).toBe(username);
    > 68 |         expect(userMgmtAdapterMock.adminGetUser).toHaveBeenCalledWith(expect.any(String), username);
         |                                                  ^
      69 |     });
      70 |
      71 |     it('should update the user attributes', async () => {

      at tests/e2e/user.admin.e2e.spec.ts:68:50
      at fulfilled (tests/e2e/user.admin.e2e.spec.ts:5:58)

  ΓùÅ User Admin E2E ΓÇ║ should update the user attributes

    expected 204 "No Content", got 404 "Not Found"

      81 |             .set('Authorization', `Bearer ${adminToken}`)
      82 |             .send(attributesToUpdate)
    > 83 |             .expect(204);
         |              ^
      84 |         
      85 |         expect(userMgmtAdapterMock.adminUpdateUserAttributes).toHaveBeenCalledWith(expect.any(String), { username, ...attributesToUpdate });
      86 |     });

      at tests/e2e/user.admin.e2e.spec.ts:83:14
      at tests/e2e/user.admin.e2e.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/e2e/user.admin.e2e.spec.ts:4:12)
      at Object.<anonymous> (tests/e2e/user.admin.e2e.spec.ts:71:56)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ User Admin E2E ΓÇ║ should add a user to a group

    expected 204 "No Content", got 200 "OK"

       96 |             .set('Authorization', `Bearer ${adminToken}`)
       97 |             .send({ groupName })
    >  98 |             .expect(204);
          |              ^
       99 |         
      100 |         expect(userMgmtAdapterMock.adminAddUserToGroup).toHaveBeenCalledWith(expect.any(String), username, groupName);
      101 |     });

      at tests/e2e/user.admin.e2e.spec.ts:98:14
      at tests/e2e/user.admin.e2e.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/e2e/user.admin.e2e.spec.ts:4:12)
      at Object.<anonymous> (tests/e2e/user.admin.e2e.spec.ts:91:51)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ User Admin E2E ΓÇ║ should list the user's groups

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: Any<String>, "test-user-1771844065149", undefined, undefined
    Received: "test-user-1771844065149", undefined, undefined

    Number of calls: 1

      111 |
      112 |         expect(response.body.groups[0].groupName).toBe(groupName);
    > 113 |         expect(userMgmtAdapterMock.adminListGroupsForUser).toHaveBeenCalledWith(expect.any(String), username, undefined, undefined);
          |                                                            ^
      114 |     });
      115 |
      116 |     it('should remove the user from the group', async () => {

      at tests/e2e/user.admin.e2e.spec.ts:113:60
      at fulfilled (tests/e2e/user.admin.e2e.spec.ts:5:58)

  ΓùÅ User Admin E2E ΓÇ║ should remove the user from the group

    expected 204 "No Content", got 500 "Internal Server Error"

      120 |             .delete(`${BASE_API_PATH}/${username}/groups/${groupName}`)
      121 |             .set('Authorization', `Bearer ${adminToken}`)
    > 122 |             .expect(204);
          |              ^
      123 |         
      124 |         expect(userMgmtAdapterMock.adminRemoveUserFromGroup).toHaveBeenCalledWith(expect.any(String), username, groupName);
      125 |     });

      at tests/e2e/user.admin.e2e.spec.ts:122:14
      at tests/e2e/user.admin.e2e.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/e2e/user.admin.e2e.spec.ts:4:12)
      at Object.<anonymous> (tests/e2e/user.admin.e2e.spec.ts:116:60)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ User Admin E2E ΓÇ║ should disable the user

    expected 204 "No Content", got 404 "Not Found"

      131 |             .post(`${BASE_API_PATH}/${username}/disable`)
      132 |             .set('Authorization', `Bearer ${adminToken}`)
    > 133 |             .expect(204);
          |              ^
      134 |         
      135 |         expect(userMgmtAdapterMock.adminDisableUser).toHaveBeenCalledWith(expect.any(String), username);
      136 |     });

      at tests/e2e/user.admin.e2e.spec.ts:133:14
      at tests/e2e/user.admin.e2e.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/e2e/user.admin.e2e.spec.ts:4:12)
      at Object.<anonymous> (tests/e2e/user.admin.e2e.spec.ts:127:46)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ User Admin E2E ΓÇ║ should enable the user

    expected 204 "No Content", got 404 "Not Found"

      142 |             .post(`${BASE_API_PATH}/${username}/enable`)
      143 |             .set('Authorization', `Bearer ${adminToken}`)
    > 144 |             .expect(204);
          |              ^
      145 |         
      146 |         expect(userMgmtAdapterMock.adminEnableUser).toHaveBeenCalledWith(expect.any(String), username);
      147 |     });

      at tests/e2e/user.admin.e2e.spec.ts:144:14
      at tests/e2e/user.admin.e2e.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/e2e/user.admin.e2e.spec.ts:4:12)
      at Object.<anonymous> (tests/e2e/user.admin.e2e.spec.ts:138:45)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ User Admin E2E ΓÇ║ should delete the user

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: Any<String>, "test-user-1771844065149"
    Received: "test-user-1771844065149"

    Number of calls: 1

      155 |             .expect(204);
      156 |         
    > 157 |         expect(userMgmtAdapterMock.adminDeleteUser).toHaveBeenCalledWith(expect.any(String), username);
          |                                                     ^
      158 |     });
      159 | });

      at tests/e2e/user.admin.e2e.spec.ts:157:53
      at fulfilled (tests/e2e/user.admin.e2e.spec.ts:5:58)

FAIL tests/e2e/group.admin.e2e.spec.ts (44.825 s)
  ΓùÅ Console

    console.log
      Validation Middleware - req.body: {
        groupName: 'test-group-1771844065224',
        description: 'A test group for e2e tests'
      }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'groupName', 'description' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"groupName":"test-group-1771844065224","description":"A test group for e2e tests"}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - req.body: { roleName: 'test-role-for-group-1771844065224' }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'roleName' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"roleName":"test-role-for-group-1771844065224"}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

  ΓùÅ Group Admin E2E ΓÇ║ should create a new group

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: Any<String>, {"description": "A test group for e2e tests", "groupName": "test-group-1771844065224"}
    Received: {"description": "A test group for e2e tests", "groupName": "test-group-1771844065224"}

    Number of calls: 1

      45 |
      46 |         expect(response.body.groupName).toBe(groupName);
    > 47 |         expect(userMgmtAdapterMock.adminCreateGroup).toHaveBeenCalledWith(expect.any(String), groupDetails);
         |                                                      ^
      48 |     });
      49 |
      50 |     it('should get the created group', async () => {

      at tests/e2e/group.admin.e2e.spec.ts:47:54
      at fulfilled (tests/e2e/group.admin.e2e.spec.ts:5:58)

  ΓùÅ Group Admin E2E ΓÇ║ should get the created group

    expected 200 "OK", got 500 "Internal Server Error"

      54 |             .get(`${BASE_API_PATH}/${groupName}`)
      55 |             .set('Authorization', `Bearer ${adminToken}`)
    > 56 |             .expect(200);
         |              ^
      57 |
      58 |         expect(response.body.groupName).toBe(groupName);
      59 |         expect(userMgmtAdapterMock.adminGetGroup).toHaveBeenCalledWith(expect.any(String), groupName);

      at tests/e2e/group.admin.e2e.spec.ts:56:14
      at tests/e2e/group.admin.e2e.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/e2e/group.admin.e2e.spec.ts:4:12)
      at Object.<anonymous> (tests/e2e/group.admin.e2e.spec.ts:50:51)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Group Admin E2E ΓÇ║ should list the roles for the group

    expected 200 "OK", got 500 "Internal Server Error"

      81 |             .get(`${BASE_API_PATH}/${groupName}/roles`)
      82 |             .set('Authorization', `Bearer ${adminToken}`)
    > 83 |             .expect(200);
         |              ^
      84 |
      85 |         expect(response.body.roles).toContain(roleName); // Changed to response.body.roles
      86 |         expect(assignmentRepositoryMock.findRolesByGroupName).toHaveBeenCalledWith(expect.any(String), groupName);

      at tests/e2e/group.admin.e2e.spec.ts:83:14
      at tests/e2e/group.admin.e2e.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/e2e/group.admin.e2e.spec.ts:4:12)
      at Object.<anonymous> (tests/e2e/group.admin.e2e.spec.ts:76:58)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Group Admin E2E ΓÇ║ should remove the role from the group

    expected 204 "No Content", got 500 "Internal Server Error"

      93 |             .delete(`${BASE_API_PATH}/${groupName}/roles/${roleName}`)
      94 |             .set('Authorization', `Bearer ${adminToken}`)
    > 95 |             .expect(204);
         |              ^
      96 |         
      97 |         expect(assignmentRepositoryMock.removeRoleFromGroup).toHaveBeenCalledWith(expect.any(String), groupName, roleName);
      98 |     });

      at tests/e2e/group.admin.e2e.spec.ts:95:14
      at tests/e2e/group.admin.e2e.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/e2e/group.admin.e2e.spec.ts:4:12)
      at Object.<anonymous> (tests/e2e/group.admin.e2e.spec.ts:89:60)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Group Admin E2E ΓÇ║ should delete the group

    expected 204 "No Content", got 500 "Internal Server Error"

      104 |             .delete(`${BASE_API_PATH}/${groupName}`)
      105 |             .set('Authorization', `Bearer ${adminToken}`)
    > 106 |             .expect(204);
          |              ^
      107 |         
      108 |         expect(userMgmtAdapterMock.adminDeleteGroup).toHaveBeenCalledWith(expect.any(String), groupName);
      109 |     });

      at tests/e2e/group.admin.e2e.spec.ts:106:14
      at tests/e2e/group.admin.e2e.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/e2e/group.admin.e2e.spec.ts:4:12)
      at Object.<anonymous> (tests/e2e/group.admin.e2e.spec.ts:100:46)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

FAIL tests/integration/routes/role.admin.routes.integration.spec.ts (45.134 s)
  ΓùÅ Console

    console.info
      [WinstonLogger] Logger initialized with level "info" in "test" environment.

      at WinstonLogger.initializeLogger (src/infrastructure/logging/WinstonLogger.ts:68:17)
          at Array.map (<anonymous>)

    console.log
      {"level":"warn","message":"CORS_ORIGIN is set to \"*\" in a non-development environment. This is insecure!","metadata":{},"timestamp":"2026-02-23T10:54:25.722Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"CORS configured for origin: *","metadata":{},"timestamp":"2026-02-23T10:54:25.740Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"Application setup complete for environment: test","metadata":{},"timestamp":"2026-02-23T10:54:25.751Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> POST /api/admin/roles","metadata":{"correlationId":"686ca4ac-432a-440f-ace4-b5d328a066d6","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"POST","requestId":"686ca4ac-432a-440f-ace4-b5d328a066d6","url":"/api/admin/roles","userId":"anonymous"},"timestamp":"2026-02-23T10:54:25.998Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 686ca4ac-432a-440f-ace4-b5d328a066d6] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["role-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:54:26.022Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: {
        roleName: 'role-test-1771844057699',
        description: 'Test Role Description'
      }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'roleName', 'description' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"roleName":"role-test-1771844057699","description":"Test Role Description"}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      {"level":"info","message":"<-- POST /api/admin/roles 201 67.717ms","metadata":{"contentLength":"76","correlationId":"686ca4ac-432a-440f-ace4-b5d328a066d6","durationMs":67.717,"eventType":"finish","requestId":"686ca4ac-432a-440f-ace4-b5d328a066d6","statusCode":201,"userId":"anonymous"},"timestamp":"2026-02-23T10:54:26.062Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/roles","metadata":{"correlationId":"247fd2c3-2d1e-4fff-8fe2-2a48a179845d","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"247fd2c3-2d1e-4fff-8fe2-2a48a179845d","url":"/api/admin/roles","userId":"anonymous"},"timestamp":"2026-02-23T10:54:26.110Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 247fd2c3-2d1e-4fff-8fe2-2a48a179845d] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["role-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:54:26.119Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"<-- GET /api/admin/roles 200 14.744ms","metadata":{"contentLength":"156","correlationId":"247fd2c3-2d1e-4fff-8fe2-2a48a179845d","durationMs":14.744,"eventType":"finish","requestId":"247fd2c3-2d1e-4fff-8fe2-2a48a179845d","statusCode":200,"userId":"anonymous"},"timestamp":"2026-02-23T10:54:26.125Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/roles/test-role","metadata":{"correlationId":"237c49b5-96e4-4c91-b020-bd2a22353846","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"237c49b5-96e4-4c91-b020-bd2a22353846","url":"/api/admin/roles/test-role","userId":"anonymous"},"timestamp":"2026-02-23T10:54:26.157Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 237c49b5-96e4-4c91-b020-bd2a22353846] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["role-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:54:26.162Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [237c49b5-96e4-4c91-b020-bd2a22353846]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:54:26.181Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"237c49b5-96e4-4c91-b020-bd2a22353846","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/roles/test-role","requestId":"237c49b5-96e4-4c91-b020-bd2a22353846","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:26.186Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/roles/test-role 500 38.181ms","metadata":{"error":{"contentLength":"3814","correlationId":"237c49b5-96e4-4c91-b020-bd2a22353846","durationMs":38.181,"eventType":"finish","requestId":"237c49b5-96e4-4c91-b020-bd2a22353846","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:26.195Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/roles/test-role","metadata":{"correlationId":"786f6204-bdde-4ae3-989e-4a45d191d04c","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"786f6204-bdde-4ae3-989e-4a45d191d04c","url":"/api/admin/roles/test-role","userId":"anonymous"},"timestamp":"2026-02-23T10:54:26.243Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 786f6204-bdde-4ae3-989e-4a45d191d04c] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["role-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:54:26.248Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [786f6204-bdde-4ae3-989e-4a45d191d04c]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:54:26.253Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"786f6204-bdde-4ae3-989e-4a45d191d04c","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/roles/test-role","requestId":"786f6204-bdde-4ae3-989e-4a45d191d04c","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:26.256Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/roles/test-role 500 18.482ms","metadata":{"error":{"contentLength":"3814","correlationId":"786f6204-bdde-4ae3-989e-4a45d191d04c","durationMs":18.482,"eventType":"finish","requestId":"786f6204-bdde-4ae3-989e-4a45d191d04c","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:26.261Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/roles/test-role","metadata":{"correlationId":"0a421bb6-fa6e-431e-9ecb-696786dbb259","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"0a421bb6-fa6e-431e-9ecb-696786dbb259","url":"/api/admin/roles/test-role","userId":"anonymous"},"timestamp":"2026-02-23T10:54:26.296Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Authentication: Missing or invalid Authorization header.","metadata":{},"timestamp":"2026-02-23T10:54:26.300Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Client error processing request: Authorization header missing or invalid.","metadata":{"correlationId":"0a421bb6-fa6e-431e-9ecb-696786dbb259","errorMessage":"Authorization header missing or invalid.","errorName":"AuthenticationError","isOperational":true,"method":"GET","path":"/api/admin/roles/test-role","requestId":"0a421bb6-fa6e-431e-9ecb-696786dbb259","stack":"AuthenticationError: Authorization header missing or invalid.\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:32:25\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:27:70\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestLogger.middleware.ts:84:9\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:32\n    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)\n    at middleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:13)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at addRequestId (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestId.middleware.ts:33:5)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at urlencodedParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\urlencoded.js:68:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at jsonParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\json.js:100:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at requestMetricsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestMetrics.middleware.ts:26:3)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at cors (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:188:7)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:224:17\n    at originCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:214:15)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:531:6)\n    at xXssProtectionMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:311:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPoweredByMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:304:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPermittedCrossDomainPoliciesMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:297:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xFrameOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:281:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDownloadOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:261:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDnsPrefetchControlMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:254:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xContentTypeOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:246:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at strictTransportSecurityMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:239:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at referrerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:207:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at originAgentClusterMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:182:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginResourcePolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:175:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginOpenerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:159:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at contentSecurityPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:124:4)","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T10:54:26.323Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"<-- GET /api/admin/roles/test-role 401 34.875ms","metadata":{"contentLength":"151","correlationId":"0a421bb6-fa6e-431e-9ecb-696786dbb259","durationMs":34.875,"eventType":"finish","requestId":"0a421bb6-fa6e-431e-9ecb-696786dbb259","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T10:54:26.331Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> PUT /api/admin/roles/test-role-to-update","metadata":{"correlationId":"c48e6cee-ecff-4160-aa57-fd910d9dd632","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"PUT","requestId":"c48e6cee-ecff-4160-aa57-fd910d9dd632","url":"/api/admin/roles/test-role-to-update","userId":"anonymous"},"timestamp":"2026-02-23T10:54:26.403Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - c48e6cee-ecff-4160-aa57-fd910d9dd632] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["role-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:54:26.407Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: { description: 'Updated Integration Description' }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'description' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"description":"Updated Integration Description"}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      {"level":"info","message":"<-- PUT /api/admin/roles/test-role-to-update 200 15.778ms","metadata":{"contentLength":"185","correlationId":"c48e6cee-ecff-4160-aa57-fd910d9dd632","durationMs":15.778,"eventType":"finish","requestId":"c48e6cee-ecff-4160-aa57-fd910d9dd632","statusCode":200,"userId":"anonymous"},"timestamp":"2026-02-23T10:54:26.419Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> PUT /api/admin/roles/test-role-to-update","metadata":{"correlationId":"ab146252-8ea5-40b3-897a-c0cb3c26961e","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"PUT","requestId":"ab146252-8ea5-40b3-897a-c0cb3c26961e","url":"/api/admin/roles/test-role-to-update","userId":"anonymous"},"timestamp":"2026-02-23T10:54:26.458Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - ab146252-8ea5-40b3-897a-c0cb3c26961e] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["role-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:54:26.461Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: { description: 'Updated Integration Description' }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'description' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"description":"Updated Integration Description"}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      {"level":"warn","message":"<-- PUT /api/admin/roles/test-role-to-update 404 13.451ms","metadata":{"contentLength":"62","correlationId":"ab146252-8ea5-40b3-897a-c0cb3c26961e","durationMs":13.451,"eventType":"finish","requestId":"ab146252-8ea5-40b3-897a-c0cb3c26961e","statusCode":404,"userId":"anonymous"},"timestamp":"2026-02-23T10:54:26.471Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> PUT /api/admin/roles/test-role-to-update","metadata":{"correlationId":"3152b545-d789-4bcd-b7a2-f0352305a1c2","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"PUT","requestId":"3152b545-d789-4bcd-b7a2-f0352305a1c2","url":"/api/admin/roles/test-role-to-update","userId":"anonymous"},"timestamp":"2026-02-23T10:54:26.555Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Authentication: Missing or invalid Authorization header.","metadata":{},"timestamp":"2026-02-23T10:54:26.558Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Client error processing request: Authorization header missing or invalid.","metadata":{"correlationId":"3152b545-d789-4bcd-b7a2-f0352305a1c2","errorMessage":"Authorization header missing or invalid.","errorName":"AuthenticationError","isOperational":true,"method":"PUT","path":"/api/admin/roles/test-role-to-update","requestId":"3152b545-d789-4bcd-b7a2-f0352305a1c2","stack":"AuthenticationError: Authorization header missing or invalid.\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:32:25\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:27:70\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestLogger.middleware.ts:84:9\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:32\n    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)\n    at middleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:13)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at addRequestId (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestId.middleware.ts:33:5)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at urlencodedParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\urlencoded.js:57:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\read.js:132:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:214:14)\n    at invokeCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\raw-body@3.0.0\\node_modules\\raw-body\\index.js:238:16)\n    at done (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\raw-body@3.0.0\\node_modules\\raw-body\\index.js:227:7)\n    at IncomingMessage.onEnd (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\raw-body@3.0.0\\node_modules\\raw-body\\index.js:287:7)\n    at IncomingMessage.emit (node:events:519:28)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at processTicksAndRejections (node:internal/process/task_queues:90:21)","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T10:54:26.567Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"<-- PUT /api/admin/roles/test-role-to-update 401 18.641ms","metadata":{"contentLength":"151","correlationId":"3152b545-d789-4bcd-b7a2-f0352305a1c2","durationMs":18.641,"eventType":"finish","requestId":"3152b545-d789-4bcd-b7a2-f0352305a1c2","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T10:54:26.574Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> DELETE /api/admin/roles/test-role-to-delete","metadata":{"correlationId":"f343edd2-c2be-4bbe-a2b7-269add64e13d","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"DELETE","requestId":"f343edd2-c2be-4bbe-a2b7-269add64e13d","url":"/api/admin/roles/test-role-to-delete","userId":"anonymous"},"timestamp":"2026-02-23T10:54:26.628Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - f343edd2-c2be-4bbe-a2b7-269add64e13d] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["role-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:54:26.633Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [f343edd2-c2be-4bbe-a2b7-269add64e13d]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:54:26.639Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"f343edd2-c2be-4bbe-a2b7-269add64e13d","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"DELETE","path":"/api/admin/roles/test-role-to-delete","requestId":"f343edd2-c2be-4bbe-a2b7-269add64e13d","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:26.641Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- DELETE /api/admin/roles/test-role-to-delete 500 20.134ms","metadata":{"error":{"contentLength":"3814","correlationId":"f343edd2-c2be-4bbe-a2b7-269add64e13d","durationMs":20.134,"eventType":"finish","requestId":"f343edd2-c2be-4bbe-a2b7-269add64e13d","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:26.648Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> DELETE /api/admin/roles/test-role-to-delete","metadata":{"correlationId":"40129d4d-e36c-4475-8711-8219703f0fb2","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"DELETE","requestId":"40129d4d-e36c-4475-8711-8219703f0fb2","url":"/api/admin/roles/test-role-to-delete","userId":"anonymous"},"timestamp":"2026-02-23T10:54:26.675Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 40129d4d-e36c-4475-8711-8219703f0fb2] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["role-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:54:26.680Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [40129d4d-e36c-4475-8711-8219703f0fb2]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:54:26.685Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"40129d4d-e36c-4475-8711-8219703f0fb2","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"DELETE","path":"/api/admin/roles/test-role-to-delete","requestId":"40129d4d-e36c-4475-8711-8219703f0fb2","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:26.688Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- DELETE /api/admin/roles/test-role-to-delete 500 19.721ms","metadata":{"error":{"contentLength":"3814","correlationId":"40129d4d-e36c-4475-8711-8219703f0fb2","durationMs":19.721,"eventType":"finish","requestId":"40129d4d-e36c-4475-8711-8219703f0fb2","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:26.695Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> DELETE /api/admin/roles/test-role-to-delete","metadata":{"correlationId":"c7ecc177-ef8c-47e8-ae5e-3cc005f0a545","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"DELETE","requestId":"c7ecc177-ef8c-47e8-ae5e-3cc005f0a545","url":"/api/admin/roles/test-role-to-delete","userId":"anonymous"},"timestamp":"2026-02-23T10:54:26.726Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Authentication: Missing or invalid Authorization header.","metadata":{},"timestamp":"2026-02-23T10:54:26.731Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Client error processing request: Authorization header missing or invalid.","metadata":{"correlationId":"c7ecc177-ef8c-47e8-ae5e-3cc005f0a545","errorMessage":"Authorization header missing or invalid.","errorName":"AuthenticationError","isOperational":true,"method":"DELETE","path":"/api/admin/roles/test-role-to-delete","requestId":"c7ecc177-ef8c-47e8-ae5e-3cc005f0a545","stack":"AuthenticationError: Authorization header missing or invalid.\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:32:25\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:27:70\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestLogger.middleware.ts:84:9\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:32\n    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)\n    at middleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:13)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at addRequestId (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestId.middleware.ts:33:5)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at urlencodedParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\urlencoded.js:68:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at jsonParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\json.js:100:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at requestMetricsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestMetrics.middleware.ts:26:3)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at cors (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:188:7)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:224:17\n    at originCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:214:15)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:531:6)\n    at xXssProtectionMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:311:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPoweredByMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:304:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPermittedCrossDomainPoliciesMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:297:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xFrameOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:281:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDownloadOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:261:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDnsPrefetchControlMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:254:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xContentTypeOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:246:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at strictTransportSecurityMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:239:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at referrerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:207:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at originAgentClusterMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:182:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginResourcePolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:175:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginOpenerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:159:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at contentSecurityPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:124:4)","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T10:54:26.750Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"<-- DELETE /api/admin/roles/test-role-to-delete 401 31.179ms","metadata":{"contentLength":"151","correlationId":"c7ecc177-ef8c-47e8-ae5e-3cc005f0a545","durationMs":31.179,"eventType":"finish","requestId":"c7ecc177-ef8c-47e8-ae5e-3cc005f0a545","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T10:54:26.757Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> POST /api/admin/roles/role-for-permissions/permissions","metadata":{"correlationId":"3e5298dc-2690-468c-b7b3-887956d1cc6b","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"POST","requestId":"3e5298dc-2690-468c-b7b3-887956d1cc6b","url":"/api/admin/roles/role-for-permissions/permissions","userId":"anonymous"},"timestamp":"2026-02-23T10:54:26.824Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 3e5298dc-2690-468c-b7b3-887956d1cc6b] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["role-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:54:26.827Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: { permissionName: 'permission-for-role' }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'permissionName' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"permissionName":"permission-for-role"}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      {"level":"info","message":"<-- POST /api/admin/roles/role-for-permissions/permissions 204 12.368ms","metadata":{"correlationId":"3e5298dc-2690-468c-b7b3-887956d1cc6b","durationMs":12.368,"eventType":"finish","requestId":"3e5298dc-2690-468c-b7b3-887956d1cc6b","statusCode":204,"userId":"anonymous"},"timestamp":"2026-02-23T10:54:26.836Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> DELETE /api/admin/roles/role-for-permissions/permissions/permission-for-role","metadata":{"correlationId":"61669c67-81fe-4cb5-ba5f-c7e73c4ede76","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"DELETE","requestId":"61669c67-81fe-4cb5-ba5f-c7e73c4ede76","url":"/api/admin/roles/role-for-permissions/permissions/permission-for-role","userId":"anonymous"},"timestamp":"2026-02-23T10:54:26.857Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 61669c67-81fe-4cb5-ba5f-c7e73c4ede76] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["role-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:54:26.861Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [61669c67-81fe-4cb5-ba5f-c7e73c4ede76]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:54:26.866Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"61669c67-81fe-4cb5-ba5f-c7e73c4ede76","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"DELETE","path":"/api/admin/roles/role-for-permissions/permissions/permission-for-role","requestId":"61669c67-81fe-4cb5-ba5f-c7e73c4ede76","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:26.869Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- DELETE /api/admin/roles/role-for-permissions/permissions/permission-for-role 500 16.722ms","metadata":{"error":{"contentLength":"3951","correlationId":"61669c67-81fe-4cb5-ba5f-c7e73c4ede76","durationMs":16.722,"eventType":"finish","requestId":"61669c67-81fe-4cb5-ba5f-c7e73c4ede76","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:26.874Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/roles/role-for-permissions/permissions","metadata":{"correlationId":"039b3386-759c-40a5-9792-cf6bdbbbd9bd","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"039b3386-759c-40a5-9792-cf6bdbbbd9bd","url":"/api/admin/roles/role-for-permissions/permissions","userId":"anonymous"},"timestamp":"2026-02-23T10:54:26.921Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 039b3386-759c-40a5-9792-cf6bdbbbd9bd] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["role-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:54:26.926Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [039b3386-759c-40a5-9792-cf6bdbbbd9bd]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:54:26.931Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"039b3386-759c-40a5-9792-cf6bdbbbd9bd","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/roles/role-for-permissions/permissions","requestId":"039b3386-759c-40a5-9792-cf6bdbbbd9bd","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:26.934Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/roles/role-for-permissions/permissions 500 16.748ms","metadata":{"error":{"contentLength":"3814","correlationId":"039b3386-759c-40a5-9792-cf6bdbbbd9bd","durationMs":16.748,"eventType":"finish","requestId":"039b3386-759c-40a5-9792-cf6bdbbbd9bd","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:26.938Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

  ΓùÅ Integration Tests: Role Admin Routes (/api/admin/roles) ΓÇ║ GET /api/admin/roles/:roleName ΓÇ║ should return 200 OK with role data if role exists

    expected 200 "OK", got 500 "Internal Server Error"

      142 |                 .get(`${BASE_API_PATH}/${targetRoleName}`)
      143 |                 .set(MOCK_AUTH_HEADER)
    > 144 |                 .expect(HttpStatusCode.OK) // 200
          |                  ^
      145 |                 .expect(res => {
      146 |                     expect(res.body.roleName).toBe(targetRoleName);
      147 |                     expect(res.body.description).toBe('get role');

      at tests/integration/routes/role.admin.routes.integration.spec.ts:144:18
      at tests/integration/routes/role.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/role.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/role.admin.routes.integration.spec.ts:139:77)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Role Admin Routes (/api/admin/roles) ΓÇ║ GET /api/admin/roles/:roleName ΓÇ║ should return 404 Not Found if service returns null

    expected 404 "Not Found", got 500 "Internal Server Error"

      155 |                 .get(`${BASE_API_PATH}/${targetRoleName}`)
      156 |                 .set(MOCK_AUTH_HEADER)
    > 157 |                 .expect(HttpStatusCode.NOT_FOUND); // 404
          |                  ^
      158 |             expect(mockRoleAdminService.getRole).toHaveBeenCalledWith(expect.anything(), targetRoleName);
      159 |         });
      160 |

      at tests/integration/routes/role.admin.routes.integration.spec.ts:157:18
      at tests/integration/routes/role.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/role.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/role.admin.routes.integration.spec.ts:152:78)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Role Admin Routes (/api/admin/roles) ΓÇ║ DELETE /api/admin/roles/:roleName ΓÇ║ should return 204 No Content if service succeeds

    expected 204 "No Content", got 500 "Internal Server Error"

      215 |                 .delete(`${BASE_API_PATH}/${targetRoleName}`)
      216 |                 .set(MOCK_AUTH_HEADER)
    > 217 |                 .expect(HttpStatusCode.NO_CONTENT); // 204
          |                  ^
      218 |             expect(mockRoleAdminService.deleteRole).toHaveBeenCalledWith(expect.anything(), targetRoleName);
      219 |         });
      220 |

      at tests/integration/routes/role.admin.routes.integration.spec.ts:217:18
      at tests/integration/routes/role.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/role.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/role.admin.routes.integration.spec.ts:212:75)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Role Admin Routes (/api/admin/roles) ΓÇ║ DELETE /api/admin/roles/:roleName ΓÇ║ should return 404 Not Found if service throws RoleNotFoundError

    expected 404 "Not Found", got 500 "Internal Server Error"

      226 |                 .delete(`${BASE_API_PATH}/${targetRoleName}`)
      227 |                 .set(MOCK_AUTH_HEADER)
    > 228 |                 .expect(HttpStatusCode.NOT_FOUND); // 404
          |                  ^
      229 |             expect(mockRoleAdminService.deleteRole).toHaveBeenCalledWith(expect.anything(), targetRoleName);
      230 |         });
      231 |

      at tests/integration/routes/role.admin.routes.integration.spec.ts:228:18
      at tests/integration/routes/role.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/role.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/role.admin.routes.integration.spec.ts:221:90)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Role Admin Routes (/api/admin/roles) ΓÇ║ Permissions Management (/api/admin/roles/:roleName/permissions) ΓÇ║ DELETE /:roleName/permissions/:permissionName ΓÇ║ should return 204 No Content on successful removal

    expected 204 "No Content", got 500 "Internal Server Error"

      260 |                     .delete(`${BASE_API_PATH}/${targetRoleName}/permissions/${targetPermissionName}`)
      261 |                     .set(MOCK_AUTH_HEADER)
    > 262 |                     .expect(HttpStatusCode.NO_CONTENT); // 204
          |                      ^
      263 |                 expect(mockRoleAdminService.removePermissionFromRole).toHaveBeenCalledWith(expect.anything(), targetRoleName, targetPermissionName);
      264 |             });
      265 |         });

      at tests/integration/routes/role.admin.routes.integration.spec.ts:262:22
      at tests/integration/routes/role.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/role.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/role.admin.routes.integration.spec.ts:257:81)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Role Admin Routes (/api/admin/roles) ΓÇ║ Permissions Management (/api/admin/roles/:roleName/permissions) ΓÇ║ GET /:roleName/permissions ΓÇ║ should return 200 OK with a list of permission names

    expected 200 "OK", got 500 "Internal Server Error"

      272 |                     .get(`${BASE_API_PATH}/${targetRoleName}/permissions`)
      273 |                     .set(MOCK_AUTH_HEADER)
    > 274 |                     .expect(HttpStatusCode.OK) // 200
          |                      ^
      275 |                     .expect(res => {
      276 |                         expect(res.body.permissions).toEqual(mockPermissions);
      277 |                     });

      at tests/integration/routes/role.admin.routes.integration.spec.ts:274:22
      at tests/integration/routes/role.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/role.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/role.admin.routes.integration.spec.ts:268:83)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

FAIL tests/integration/routes/permission.admin.routes.integration.spec.ts (45.735 s)
  ΓùÅ Console

    console.info
      [WinstonLogger] Logger initialized with level "info" in "test" environment.

      at WinstonLogger.initializeLogger (src/infrastructure/logging/WinstonLogger.ts:68:17)
          at Array.map (<anonymous>)

    console.log
      {"level":"warn","message":"CORS_ORIGIN is set to \"*\" in a non-development environment. This is insecure!","metadata":{},"timestamp":"2026-02-23T10:54:25.781Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"CORS configured for origin: *","metadata":{},"timestamp":"2026-02-23T10:54:25.795Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"Application setup complete for environment: test","metadata":{},"timestamp":"2026-02-23T10:54:25.801Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> POST /api/admin/permissions","metadata":{"correlationId":"095ac258-be4a-4903-9b22-4397016e694c","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"POST","requestId":"095ac258-be4a-4903-9b22-4397016e694c","url":"/api/admin/permissions","userId":"anonymous"},"timestamp":"2026-02-23T10:54:26.084Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 095ac258-be4a-4903-9b22-4397016e694c] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["permission-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:54:26.104Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: {
        permissionName: 'perm:test-1771844057616',
        description: 'Test Permission Description'
      }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'permissionName', 'description' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"permissionName":"perm:test-1771844057616","description":"Test Permission Description"}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      {"level":"info","message":"<-- POST /api/admin/permissions 201 73.242ms","metadata":{"contentLength":"88","correlationId":"095ac258-be4a-4903-9b22-4397016e694c","durationMs":73.242,"eventType":"finish","requestId":"095ac258-be4a-4903-9b22-4397016e694c","statusCode":201,"userId":"anonymous"},"timestamp":"2026-02-23T10:54:26.157Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> POST /api/admin/permissions","metadata":{"correlationId":"e9f1b60c-d51e-446b-8990-7b16e9f01796","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"POST","requestId":"e9f1b60c-d51e-446b-8990-7b16e9f01796","url":"/api/admin/permissions","userId":"anonymous"},"timestamp":"2026-02-23T10:54:26.221Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - e9f1b60c-d51e-446b-8990-7b16e9f01796] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["permission-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:54:26.225Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: { description: 'Only description' }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'description' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"description":"Only description"}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      {"level":"warn","message":"Request validation failed [e9f1b60c-d51e-446b-8990-7b16e9f01796]:","metadata":{"errors":{"permissionName":"Permission name is required"}},"timestamp":"2026-02-23T10:54:26.235Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)
          at Generator.throw (<anonymous>)

    console.log
      {"level":"warn","message":"Client error processing request: Input validation failed","metadata":{"correlationId":"e9f1b60c-d51e-446b-8990-7b16e9f01796","details":{"permissionName":"Permission name is required"},"errorMessage":"Input validation failed","errorName":"ValidationError","isOperational":true,"method":"POST","path":"/api/admin/permissions","requestId":"e9f1b60c-d51e-446b-8990-7b16e9f01796","stack":"ValidationError: Input validation failed\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:57:41\n    at Generator.throw (<anonymous>)\n    at rejected (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:6:65)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":400,"userId":"anonymous"},"timestamp":"2026-02-23T10:54:26.242Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)
          at Generator.throw (<anonymous>)

    console.log
      {"level":"warn","message":"<-- POST /api/admin/permissions 400 28.367ms","metadata":{"contentLength":"189","correlationId":"e9f1b60c-d51e-446b-8990-7b16e9f01796","durationMs":28.367,"eventType":"finish","requestId":"e9f1b60c-d51e-446b-8990-7b16e9f01796","statusCode":400,"userId":"anonymous"},"timestamp":"2026-02-23T10:54:26.249Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> POST /api/admin/permissions","metadata":{"correlationId":"24b35263-da87-4b4b-9d91-4abc8e6d2101","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"POST","requestId":"24b35263-da87-4b4b-9d91-4abc8e6d2101","url":"/api/admin/permissions","userId":"anonymous"},"timestamp":"2026-02-23T10:54:26.357Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 24b35263-da87-4b4b-9d91-4abc8e6d2101] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["permission-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:54:26.372Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: {
        permissionName: 'perm:test-1771844057616',
        description: 'Test Permission Description'
      }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'permissionName', 'description' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"permissionName":"perm:test-1771844057616","description":"Test Permission Description"}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      {"level":"error","message":"[PermAdminCtrl] Failed to create permission perm:test-1771844057616","metadata":{"error":{"adminUserId":"test-admin-id-123","error":{"isOperational":true,"name":"PermissionExistsError","statusCode":409}}},"timestamp":"2026-02-23T10:54:26.389Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)
          at Generator.throw (<anonymous>)

    console.log
      {"level":"warn","message":"Client error processing request: Permission 'perm:test-1771844057616' already exists.","metadata":{"correlationId":"24b35263-da87-4b4b-9d91-4abc8e6d2101","errorMessage":"Permission 'perm:test-1771844057616' already exists.","errorName":"PermissionExistsError","isOperational":true,"method":"POST","path":"/api/admin/permissions","requestId":"24b35263-da87-4b4b-9d91-4abc8e6d2101","stack":"PermissionExistsError: Permission 'perm:test-1771844057616' already exists.\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\permission.admin.routes.integration.spec.ts:136:28\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\permission.admin.routes.integration.spec.ts:9:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\permission.admin.routes.integration.spec.ts:5:12)\n    at Object.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\permission.admin.routes.integration.spec.ts:134:74)\n    at Promise.then.completed (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\testWorker.js:108:12)","statusCode":409,"userId":"anonymous"},"timestamp":"2026-02-23T10:54:26.398Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)
          at Generator.throw (<anonymous>)

    console.log
      {"level":"warn","message":"<-- POST /api/admin/permissions 409 100.871ms","metadata":{"contentLength":"165","correlationId":"24b35263-da87-4b4b-9d91-4abc8e6d2101","durationMs":100.871,"eventType":"finish","requestId":"24b35263-da87-4b4b-9d91-4abc8e6d2101","statusCode":409,"userId":"anonymous"},"timestamp":"2026-02-23T10:54:26.406Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> POST /api/admin/permissions","metadata":{"correlationId":"4a6524de-5490-4e83-9a4e-35184a61fa19","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"POST","requestId":"4a6524de-5490-4e83-9a4e-35184a61fa19","url":"/api/admin/permissions","userId":"anonymous"},"timestamp":"2026-02-23T10:54:26.457Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Authentication: Missing or invalid Authorization header.","metadata":{},"timestamp":"2026-02-23T10:54:26.460Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Client error processing request: Authorization header missing or invalid.","metadata":{"correlationId":"4a6524de-5490-4e83-9a4e-35184a61fa19","errorMessage":"Authorization header missing or invalid.","errorName":"AuthenticationError","isOperational":true,"method":"POST","path":"/api/admin/permissions","requestId":"4a6524de-5490-4e83-9a4e-35184a61fa19","stack":"AuthenticationError: Authorization header missing or invalid.\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:32:25\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:27:70\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestLogger.middleware.ts:84:9\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:32\n    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)\n    at middleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:13)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at addRequestId (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestId.middleware.ts:33:5)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at urlencodedParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\urlencoded.js:57:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\read.js:132:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:214:14)\n    at invokeCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\raw-body@3.0.0\\node_modules\\raw-body\\index.js:238:16)\n    at done (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\raw-body@3.0.0\\node_modules\\raw-body\\index.js:227:7)\n    at IncomingMessage.onEnd (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\raw-body@3.0.0\\node_modules\\raw-body\\index.js:287:7)\n    at IncomingMessage.emit (node:events:519:28)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at processTicksAndRejections (node:internal/process/task_queues:90:21)","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T10:54:26.495Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"<-- POST /api/admin/permissions 401 47.916ms","metadata":{"contentLength":"151","correlationId":"4a6524de-5490-4e83-9a4e-35184a61fa19","durationMs":47.916,"eventType":"finish","requestId":"4a6524de-5490-4e83-9a4e-35184a61fa19","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T10:54:26.505Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/permissions/perm:read","metadata":{"correlationId":"877f523b-ac87-4a2a-bd0e-772039853efc","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"877f523b-ac87-4a2a-bd0e-772039853efc","url":"/api/admin/permissions/perm:read","userId":"anonymous"},"timestamp":"2026-02-23T10:54:26.576Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 877f523b-ac87-4a2a-bd0e-772039853efc] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["permission-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:54:26.584Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [877f523b-ac87-4a2a-bd0e-772039853efc]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:54:26.599Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"877f523b-ac87-4a2a-bd0e-772039853efc","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/permissions/perm:read","requestId":"877f523b-ac87-4a2a-bd0e-772039853efc","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:26.606Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/permissions/perm:read 500 35.871ms","metadata":{"error":{"contentLength":"3814","correlationId":"877f523b-ac87-4a2a-bd0e-772039853efc","durationMs":35.871,"eventType":"finish","requestId":"877f523b-ac87-4a2a-bd0e-772039853efc","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:26.612Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/permissions/not-found-perm","metadata":{"correlationId":"04592cdc-5883-43ab-a13e-bd4cb6d50102","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"04592cdc-5883-43ab-a13e-bd4cb6d50102","url":"/api/admin/permissions/not-found-perm","userId":"anonymous"},"timestamp":"2026-02-23T10:54:26.646Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 04592cdc-5883-43ab-a13e-bd4cb6d50102] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["permission-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:54:26.651Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [04592cdc-5883-43ab-a13e-bd4cb6d50102]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:54:26.657Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"04592cdc-5883-43ab-a13e-bd4cb6d50102","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/permissions/not-found-perm","requestId":"04592cdc-5883-43ab-a13e-bd4cb6d50102","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:26.661Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/permissions/not-found-perm 500 21.316ms","metadata":{"error":{"contentLength":"3814","correlationId":"04592cdc-5883-43ab-a13e-bd4cb6d50102","durationMs":21.316,"eventType":"finish","requestId":"04592cdc-5883-43ab-a13e-bd4cb6d50102","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:26.667Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/permissions/perm:read","metadata":{"correlationId":"3890682e-7269-46fa-a2c4-06e185ef1b2f","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"3890682e-7269-46fa-a2c4-06e185ef1b2f","url":"/api/admin/permissions/perm:read","userId":"anonymous"},"timestamp":"2026-02-23T10:54:26.700Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Authentication: Missing or invalid Authorization header.","metadata":{},"timestamp":"2026-02-23T10:54:26.704Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Client error processing request: Authorization header missing or invalid.","metadata":{"correlationId":"3890682e-7269-46fa-a2c4-06e185ef1b2f","errorMessage":"Authorization header missing or invalid.","errorName":"AuthenticationError","isOperational":true,"method":"GET","path":"/api/admin/permissions/perm:read","requestId":"3890682e-7269-46fa-a2c4-06e185ef1b2f","stack":"AuthenticationError: Authorization header missing or invalid.\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:32:25\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:27:70\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestLogger.middleware.ts:84:9\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:32\n    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)\n    at middleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:13)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at addRequestId (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestId.middleware.ts:33:5)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at urlencodedParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\urlencoded.js:68:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at jsonParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\json.js:100:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at requestMetricsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestMetrics.middleware.ts:26:3)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at cors (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:188:7)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:224:17\n    at originCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:214:15)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:531:6)\n    at xXssProtectionMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:311:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPoweredByMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:304:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPermittedCrossDomainPoliciesMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:297:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xFrameOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:281:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDownloadOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:261:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDnsPrefetchControlMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:254:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xContentTypeOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:246:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at strictTransportSecurityMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:239:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at referrerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:207:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at originAgentClusterMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:182:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginResourcePolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:175:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginOpenerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:159:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at contentSecurityPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:124:4)","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T10:54:26.716Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"<-- GET /api/admin/permissions/perm:read 401 22.461ms","metadata":{"contentLength":"151","correlationId":"3890682e-7269-46fa-a2c4-06e185ef1b2f","durationMs":22.461,"eventType":"finish","requestId":"3890682e-7269-46fa-a2c4-06e185ef1b2f","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T10:54:26.723Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/permissions?limit=10","metadata":{"correlationId":"e3c877b3-4cd3-4bc8-ba09-3574cb6a9dda","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"e3c877b3-4cd3-4bc8-ba09-3574cb6a9dda","url":"/api/admin/permissions?limit=10","userId":"anonymous"},"timestamp":"2026-02-23T10:54:26.799Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - e3c877b3-4cd3-4bc8-ba09-3574cb6a9dda] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["permission-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:54:26.804Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"<-- GET /api/admin/permissions?limit=10 200 9.186ms","metadata":{"contentLength":"265","correlationId":"e3c877b3-4cd3-4bc8-ba09-3574cb6a9dda","durationMs":9.186,"eventType":"finish","requestId":"e3c877b3-4cd3-4bc8-ba09-3574cb6a9dda","statusCode":200,"userId":"anonymous"},"timestamp":"2026-02-23T10:54:26.809Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/permissions","metadata":{"correlationId":"455a5320-9edb-444d-ac0a-3c2895d2a6b5","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"455a5320-9edb-444d-ac0a-3c2895d2a6b5","url":"/api/admin/permissions","userId":"anonymous"},"timestamp":"2026-02-23T10:54:26.835Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Authentication: Missing or invalid Authorization header.","metadata":{},"timestamp":"2026-02-23T10:54:26.839Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Client error processing request: Authorization header missing or invalid.","metadata":{"correlationId":"455a5320-9edb-444d-ac0a-3c2895d2a6b5","errorMessage":"Authorization header missing or invalid.","errorName":"AuthenticationError","isOperational":true,"method":"GET","path":"/api/admin/permissions","requestId":"455a5320-9edb-444d-ac0a-3c2895d2a6b5","stack":"AuthenticationError: Authorization header missing or invalid.\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:32:25\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:27:70\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestLogger.middleware.ts:84:9\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:32\n    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)\n    at middleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:13)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at addRequestId (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestId.middleware.ts:33:5)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at urlencodedParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\urlencoded.js:68:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at jsonParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\json.js:100:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at requestMetricsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestMetrics.middleware.ts:26:3)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at cors (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:188:7)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:224:17\n    at originCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:214:15)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:531:6)\n    at xXssProtectionMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:311:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPoweredByMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:304:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPermittedCrossDomainPoliciesMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:297:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xFrameOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:281:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDownloadOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:261:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDnsPrefetchControlMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:254:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xContentTypeOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:246:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at strictTransportSecurityMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:239:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at referrerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:207:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at originAgentClusterMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:182:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginResourcePolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:175:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginOpenerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:159:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at contentSecurityPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:124:4)","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T10:54:26.849Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"<-- GET /api/admin/permissions 401 22.638ms","metadata":{"contentLength":"151","correlationId":"455a5320-9edb-444d-ac0a-3c2895d2a6b5","durationMs":22.638,"eventType":"finish","requestId":"455a5320-9edb-444d-ac0a-3c2895d2a6b5","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T10:54:26.858Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> PUT /api/admin/permissions/perm:update","metadata":{"correlationId":"a05fa5ce-b3c7-4884-9012-34ed943dfa90","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"PUT","requestId":"a05fa5ce-b3c7-4884-9012-34ed943dfa90","url":"/api/admin/permissions/perm:update","userId":"anonymous"},"timestamp":"2026-02-23T10:54:26.939Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - a05fa5ce-b3c7-4884-9012-34ed943dfa90] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["permission-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:54:26.942Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: { description: 'Updated description' }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'description' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"description":"Updated description"}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      {"level":"info","message":"<-- PUT /api/admin/permissions/perm:update 200 15.525ms","metadata":{"contentLength":"171","correlationId":"a05fa5ce-b3c7-4884-9012-34ed943dfa90","durationMs":15.525,"eventType":"finish","requestId":"a05fa5ce-b3c7-4884-9012-34ed943dfa90","statusCode":200,"userId":"anonymous"},"timestamp":"2026-02-23T10:54:26.954Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> PUT /api/admin/permissions/not-found-perm","metadata":{"correlationId":"1c519d71-84c7-480a-9fb0-a3b048b37294","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"PUT","requestId":"1c519d71-84c7-480a-9fb0-a3b048b37294","url":"/api/admin/permissions/not-found-perm","userId":"anonymous"},"timestamp":"2026-02-23T10:54:26.982Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 1c519d71-84c7-480a-9fb0-a3b048b37294] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["permission-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:54:26.986Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: { description: 'Updated description' }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'description' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"description":"Updated description"}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      {"level":"warn","message":"<-- PUT /api/admin/permissions/not-found-perm 404 14.797ms","metadata":{"contentLength":"63","correlationId":"1c519d71-84c7-480a-9fb0-a3b048b37294","durationMs":14.797,"eventType":"finish","requestId":"1c519d71-84c7-480a-9fb0-a3b048b37294","statusCode":404,"userId":"anonymous"},"timestamp":"2026-02-23T10:54:26.997Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> PUT /api/admin/permissions/perm:update","metadata":{"correlationId":"7ce7afb4-6771-4172-ae36-620d96272ed1","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"PUT","requestId":"7ce7afb4-6771-4172-ae36-620d96272ed1","url":"/api/admin/permissions/perm:update","userId":"anonymous"},"timestamp":"2026-02-23T10:54:27.019Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 7ce7afb4-6771-4172-ae36-620d96272ed1] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["permission-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:54:27.023Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: {}

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): []

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      {"level":"warn","message":"Request validation failed [7ce7afb4-6771-4172-ae36-620d96272ed1]:","metadata":{"errors":{"":"No update data provided"}},"timestamp":"2026-02-23T10:54:27.032Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)
          at Generator.throw (<anonymous>)

    console.log
      {"level":"warn","message":"Client error processing request: Input validation failed","metadata":{"correlationId":"7ce7afb4-6771-4172-ae36-620d96272ed1","details":{"":"No update data provided"},"errorMessage":"Input validation failed","errorName":"ValidationError","isOperational":true,"method":"PUT","path":"/api/admin/permissions/perm:update","requestId":"7ce7afb4-6771-4172-ae36-620d96272ed1","stack":"ValidationError: Input validation failed\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:57:41\n    at Generator.throw (<anonymous>)\n    at rejected (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:6:65)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":400,"userId":"anonymous"},"timestamp":"2026-02-23T10:54:27.033Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)
          at Generator.throw (<anonymous>)

    console.log
      {"level":"warn","message":"<-- PUT /api/admin/permissions/perm:update 400 18.296ms","metadata":{"contentLength":"171","correlationId":"7ce7afb4-6771-4172-ae36-620d96272ed1","durationMs":18.296,"eventType":"finish","requestId":"7ce7afb4-6771-4172-ae36-620d96272ed1","statusCode":400,"userId":"anonymous"},"timestamp":"2026-02-23T10:54:27.037Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> PUT /api/admin/permissions/perm:update","metadata":{"correlationId":"ab725b23-e41d-4c1d-af78-df6a09264f73","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"PUT","requestId":"ab725b23-e41d-4c1d-af78-df6a09264f73","url":"/api/admin/permissions/perm:update","userId":"anonymous"},"timestamp":"2026-02-23T10:54:27.064Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Authentication: Missing or invalid Authorization header.","metadata":{},"timestamp":"2026-02-23T10:54:27.066Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Client error processing request: Authorization header missing or invalid.","metadata":{"correlationId":"ab725b23-e41d-4c1d-af78-df6a09264f73","errorMessage":"Authorization header missing or invalid.","errorName":"AuthenticationError","isOperational":true,"method":"PUT","path":"/api/admin/permissions/perm:update","requestId":"ab725b23-e41d-4c1d-af78-df6a09264f73","stack":"AuthenticationError: Authorization header missing or invalid.\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:32:25\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:27:70\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestLogger.middleware.ts:84:9\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:32\n    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)\n    at middleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:13)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at addRequestId (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestId.middleware.ts:33:5)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at urlencodedParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\urlencoded.js:57:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\read.js:132:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:214:14)\n    at invokeCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\raw-body@3.0.0\\node_modules\\raw-body\\index.js:238:16)\n    at done (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\raw-body@3.0.0\\node_modules\\raw-body\\index.js:227:7)\n    at IncomingMessage.onEnd (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\raw-body@3.0.0\\node_modules\\raw-body\\index.js:287:7)\n    at IncomingMessage.emit (node:events:519:28)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at processTicksAndRejections (node:internal/process/task_queues:90:21)","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T10:54:27.072Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"<-- PUT /api/admin/permissions/perm:update 401 14.422ms","metadata":{"contentLength":"151","correlationId":"ab725b23-e41d-4c1d-af78-df6a09264f73","durationMs":14.422,"eventType":"finish","requestId":"ab725b23-e41d-4c1d-af78-df6a09264f73","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T10:54:27.078Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> DELETE /api/admin/permissions/perm:delete","metadata":{"correlationId":"7d1c80c3-5d9f-4235-9657-29426eb1c531","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"DELETE","requestId":"7d1c80c3-5d9f-4235-9657-29426eb1c531","url":"/api/admin/permissions/perm:delete","userId":"anonymous"},"timestamp":"2026-02-23T10:54:27.097Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 7d1c80c3-5d9f-4235-9657-29426eb1c531] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["permission-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:54:27.102Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [7d1c80c3-5d9f-4235-9657-29426eb1c531]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:54:27.106Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"7d1c80c3-5d9f-4235-9657-29426eb1c531","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"DELETE","path":"/api/admin/permissions/perm:delete","requestId":"7d1c80c3-5d9f-4235-9657-29426eb1c531","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:27.109Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- DELETE /api/admin/permissions/perm:delete 500 16.778ms","metadata":{"error":{"contentLength":"3814","correlationId":"7d1c80c3-5d9f-4235-9657-29426eb1c531","durationMs":16.778,"eventType":"finish","requestId":"7d1c80c3-5d9f-4235-9657-29426eb1c531","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:27.114Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> DELETE /api/admin/permissions/perm:delete","metadata":{"correlationId":"40fe926f-b07f-4686-b7dc-a73ad9b606a7","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"DELETE","requestId":"40fe926f-b07f-4686-b7dc-a73ad9b606a7","url":"/api/admin/permissions/perm:delete","userId":"anonymous"},"timestamp":"2026-02-23T10:54:27.135Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 40fe926f-b07f-4686-b7dc-a73ad9b606a7] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["permission-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:54:27.139Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [40fe926f-b07f-4686-b7dc-a73ad9b606a7]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:54:27.144Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"40fe926f-b07f-4686-b7dc-a73ad9b606a7","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"DELETE","path":"/api/admin/permissions/perm:delete","requestId":"40fe926f-b07f-4686-b7dc-a73ad9b606a7","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:27.146Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- DELETE /api/admin/permissions/perm:delete 500 15.336ms","metadata":{"error":{"contentLength":"3814","correlationId":"40fe926f-b07f-4686-b7dc-a73ad9b606a7","durationMs":15.336,"eventType":"finish","requestId":"40fe926f-b07f-4686-b7dc-a73ad9b606a7","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:27.151Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> DELETE /api/admin/permissions/perm:delete","metadata":{"correlationId":"36f57716-2482-46ab-9aa1-8cd12a83864e","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"DELETE","requestId":"36f57716-2482-46ab-9aa1-8cd12a83864e","url":"/api/admin/permissions/perm:delete","userId":"anonymous"},"timestamp":"2026-02-23T10:54:27.180Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Authentication: Missing or invalid Authorization header.","metadata":{},"timestamp":"2026-02-23T10:54:27.183Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Client error processing request: Authorization header missing or invalid.","metadata":{"correlationId":"36f57716-2482-46ab-9aa1-8cd12a83864e","errorMessage":"Authorization header missing or invalid.","errorName":"AuthenticationError","isOperational":true,"method":"DELETE","path":"/api/admin/permissions/perm:delete","requestId":"36f57716-2482-46ab-9aa1-8cd12a83864e","stack":"AuthenticationError: Authorization header missing or invalid.\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:32:25\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:27:70\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestLogger.middleware.ts:84:9\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:32\n    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)\n    at middleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:13)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at addRequestId (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestId.middleware.ts:33:5)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at urlencodedParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\urlencoded.js:68:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at jsonParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\json.js:100:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at requestMetricsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestMetrics.middleware.ts:26:3)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at cors (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:188:7)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:224:17\n    at originCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:214:15)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:531:6)\n    at xXssProtectionMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:311:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPoweredByMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:304:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPermittedCrossDomainPoliciesMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:297:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xFrameOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:281:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDownloadOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:261:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDnsPrefetchControlMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:254:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xContentTypeOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:246:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at strictTransportSecurityMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:239:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at referrerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:207:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at originAgentClusterMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:182:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginResourcePolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:175:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginOpenerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:159:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at contentSecurityPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:124:4)","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T10:54:27.191Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"<-- DELETE /api/admin/permissions/perm:delete 401 17.617ms","metadata":{"contentLength":"151","correlationId":"36f57716-2482-46ab-9aa1-8cd12a83864e","durationMs":17.617,"eventType":"finish","requestId":"36f57716-2482-46ab-9aa1-8cd12a83864e","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T10:54:27.197Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/permissions/perm:with:roles/roles","metadata":{"correlationId":"f737fa4d-4cd4-423c-890f-10016181fcaf","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"f737fa4d-4cd4-423c-890f-10016181fcaf","url":"/api/admin/permissions/perm:with:roles/roles","userId":"anonymous"},"timestamp":"2026-02-23T10:54:27.222Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - f737fa4d-4cd4-423c-890f-10016181fcaf] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["permission-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:54:27.226Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [f737fa4d-4cd4-423c-890f-10016181fcaf]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:54:27.231Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"f737fa4d-4cd4-423c-890f-10016181fcaf","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/permissions/perm:with:roles/roles","requestId":"f737fa4d-4cd4-423c-890f-10016181fcaf","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:27.233Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/permissions/perm:with:roles/roles 500 14.973ms","metadata":{"error":{"contentLength":"3814","correlationId":"f737fa4d-4cd4-423c-890f-10016181fcaf","durationMs":14.973,"eventType":"finish","requestId":"f737fa4d-4cd4-423c-890f-10016181fcaf","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:27.237Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/permissions/perm:with:roles/roles","metadata":{"correlationId":"b91cc15c-eabc-4838-913b-7fb6fe599ceb","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"b91cc15c-eabc-4838-913b-7fb6fe599ceb","url":"/api/admin/permissions/perm:with:roles/roles","userId":"anonymous"},"timestamp":"2026-02-23T10:54:27.264Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - b91cc15c-eabc-4838-913b-7fb6fe599ceb] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["permission-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:54:27.268Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [b91cc15c-eabc-4838-913b-7fb6fe599ceb]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:54:27.272Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"b91cc15c-eabc-4838-913b-7fb6fe599ceb","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/permissions/perm:with:roles/roles","requestId":"b91cc15c-eabc-4838-913b-7fb6fe599ceb","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:27.275Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/permissions/perm:with:roles/roles 500 15.359ms","metadata":{"error":{"contentLength":"3814","correlationId":"b91cc15c-eabc-4838-913b-7fb6fe599ceb","durationMs":15.359,"eventType":"finish","requestId":"b91cc15c-eabc-4838-913b-7fb6fe599ceb","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:27.280Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/permissions/perm:with:roles/roles","metadata":{"correlationId":"b369e862-3bb1-412f-a7ab-440af31fd3a0","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"b369e862-3bb1-412f-a7ab-440af31fd3a0","url":"/api/admin/permissions/perm:with:roles/roles","userId":"anonymous"},"timestamp":"2026-02-23T10:54:27.320Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Authentication: Missing or invalid Authorization header.","metadata":{},"timestamp":"2026-02-23T10:54:27.324Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Client error processing request: Authorization header missing or invalid.","metadata":{"correlationId":"b369e862-3bb1-412f-a7ab-440af31fd3a0","errorMessage":"Authorization header missing or invalid.","errorName":"AuthenticationError","isOperational":true,"method":"GET","path":"/api/admin/permissions/perm:with:roles/roles","requestId":"b369e862-3bb1-412f-a7ab-440af31fd3a0","stack":"AuthenticationError: Authorization header missing or invalid.\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:32:25\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:27:70\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestLogger.middleware.ts:84:9\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:32\n    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)\n    at middleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:13)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at addRequestId (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestId.middleware.ts:33:5)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at urlencodedParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\urlencoded.js:68:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at jsonParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\json.js:100:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at requestMetricsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestMetrics.middleware.ts:26:3)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at cors (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:188:7)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:224:17\n    at originCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:214:15)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:531:6)\n    at xXssProtectionMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:311:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPoweredByMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:304:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPermittedCrossDomainPoliciesMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:297:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xFrameOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:281:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDownloadOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:261:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDnsPrefetchControlMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:254:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xContentTypeOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:246:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at strictTransportSecurityMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:239:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at referrerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:207:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at originAgentClusterMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:182:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginResourcePolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:175:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginOpenerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:159:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at contentSecurityPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:124:4)","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T10:54:27.331Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"<-- GET /api/admin/permissions/perm:with:roles/roles 401 18.176ms","metadata":{"contentLength":"151","correlationId":"b369e862-3bb1-412f-a7ab-440af31fd3a0","durationMs":18.176,"eventType":"finish","requestId":"b369e862-3bb1-412f-a7ab-440af31fd3a0","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T10:54:27.338Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

  ΓùÅ Integration Tests: Permission Admin Routes (/api/admin/permissions) ΓÇ║ POST /api/admin/permissions ΓÇ║ should return 400 on validation error (e.g., missing permissionName)

    expect(received).toEqual(expected) // deep equality

    - Expected  - 1
    + Received  + 1

      Object {
    -   "body.permissionName": "Permission name is required",
    +   "permissionName": "Permission name is required",
      }

      128 |              expect(response.status).toBe(400);
      129 |              expect(response.body.name).toBe('ValidationError');
    > 130 |              expect(response.body.details).toEqual({'body.permissionName': 'Permission name is required'});
          |                                            ^
      131 |              expect(mockPermissionAdminService.createPermission).not.toHaveBeenCalled();
      132 |         });
      133 |

      at tests/integration/routes/permission.admin.routes.integration.spec.ts:130:44
      at fulfilled (tests/integration/routes/permission.admin.routes.integration.spec.ts:6:58)

  ΓùÅ Integration Tests: Permission Admin Routes (/api/admin/permissions) ΓÇ║ GET /api/admin/permissions/:permissionName ΓÇ║ should return 200 and the permission if found

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

      166 |                  .set('Authorization', TEST_ADMIN_TOKEN);
      167 |
    > 168 |              expect(response.status).toBe(200);
          |                                      ^
      169 |              expect(response.body.permissionName).toBe(permName);
      170 |              expect(mockPermissionAdminService.getPermission).toHaveBeenCalledWith(
      171 |                  expect.objectContaining({ id: 'test-admin-id-123' }),

      at tests/integration/routes/permission.admin.routes.integration.spec.ts:168:38
      at fulfilled (tests/integration/routes/permission.admin.routes.integration.spec.ts:6:58)

  ΓùÅ Integration Tests: Permission Admin Routes (/api/admin/permissions) ΓÇ║ GET /api/admin/permissions/:permissionName ΓÇ║ should return 404 if permission not found

    expect(received).toBe(expected) // Object.is equality

    Expected: 404
    Received: 500

      180 |                  .set('Authorization', TEST_ADMIN_TOKEN);
      181 |
    > 182 |              expect(response.status).toBe(404);
          |                                      ^
      183 |              // Check based on controller's response or NotFoundError handling in middleware
      184 |              expect(response.body.message).toContain('not found');
      185 |          });

      at tests/integration/routes/permission.admin.routes.integration.spec.ts:182:38
      at fulfilled (tests/integration/routes/permission.admin.routes.integration.spec.ts:6:58)

  ΓùÅ Integration Tests: Permission Admin Routes (/api/admin/permissions) ΓÇ║ DELETE /api/admin/permissions/:permissionName ΓÇ║ should return 204 on successful deletion

    expect(received).toBe(expected) // Object.is equality

    Expected: 204
    Received: 500

      275 |                  .set('Authorization', TEST_ADMIN_TOKEN);
      276 |
    > 277 |              expect(response.status).toBe(204);
          |                                      ^
      278 |              expect(mockPermissionAdminService.deletePermission).toHaveBeenCalledWith(
      279 |                  expect.objectContaining({ id: 'test-admin-id-123' }),
      280 |                  permName

      at tests/integration/routes/permission.admin.routes.integration.spec.ts:277:38
      at fulfilled (tests/integration/routes/permission.admin.routes.integration.spec.ts:6:58)

  ΓùÅ Integration Tests: Permission Admin Routes (/api/admin/permissions) ΓÇ║ DELETE /api/admin/permissions/:permissionName ΓÇ║ should return 404 if permission not found for deletion

    expect(received).toBe(expected) // Object.is equality

    Expected: 404
    Received: 500

      289 |                  .delete(`${BASE_API_PATH}/${permName}`)
      290 |                  .set('Authorization', TEST_ADMIN_TOKEN);
    > 291 |              expect(response.status).toBe(404);
          |                                      ^
      292 |          });
      293 |
      294 |          it('should return 401 if token is invalid/missing', async () => {

      at tests/integration/routes/permission.admin.routes.integration.spec.ts:291:38
      at fulfilled (tests/integration/routes/permission.admin.routes.integration.spec.ts:6:58)

  ΓùÅ Integration Tests: Permission Admin Routes (/api/admin/permissions) ΓÇ║ GET /api/admin/permissions/:permissionName/roles ΓÇ║ should return 200 and list of role names

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

      309 |                  .set('Authorization', TEST_ADMIN_TOKEN);
      310 |
    > 311 |              expect(response.status).toBe(200);
          |                                      ^
      312 |              expect(response.body).toEqual({ roles });
      313 |              expect(mockPermissionAdminService.listRolesForPermission).toHaveBeenCalledWith(
      314 |                  expect.objectContaining({ id: 'test-admin-id-123' }),

      at tests/integration/routes/permission.admin.routes.integration.spec.ts:311:38
      at fulfilled (tests/integration/routes/permission.admin.routes.integration.spec.ts:6:58)

  ΓùÅ Integration Tests: Permission Admin Routes (/api/admin/permissions) ΓÇ║ GET /api/admin/permissions/:permissionName/roles ΓÇ║ should return 404 if permission is not found

    expect(received).toBe(expected) // Object.is equality

    Expected: 404
    Received: 500

      324 |                  .get(`${BASE_API_PATH}/${permName}/roles`)
      325 |                  .set('Authorization', TEST_ADMIN_TOKEN);
    > 326 |              expect(response.status).toBe(404);
          |                                      ^
      327 |         });
      328 |          it('should return 401 if token is invalid/missing', async () => {
      329 |              const response = await request(app).get(`${BASE_API_PATH}/${permName}/roles`);

      at tests/integration/routes/permission.admin.routes.integration.spec.ts:326:38
      at fulfilled (tests/integration/routes/permission.admin.routes.integration.spec.ts:6:58)

FAIL tests/unit/application/services/group.admin.service.spec.ts
  ΓùÅ GroupAdminService ΓÇ║ createGroup ΓÇ║ should create a group successfully

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: Any<String>, {"description": "A new group", "groupName": "new-group"}
    Received: {"description": "A new group", "groupName": "new-group"}

    Number of calls: 1

      34 |             const result = await service.createGroup(adminUser, groupDetails);
      35 |
    > 36 |             expect(userMgmtAdapterMock.adminCreateGroup).toHaveBeenCalledWith(expect.any(String), groupDetails);
         |                                                          ^
      37 |             expect(result).toBeInstanceOf(Group);
      38 |             expect(result.groupName).toBe('new-group');
      39 |             expect(loggerMock.info).toHaveBeenCalledWith(expect.stringContaining('CREATE_GROUP'), expect.any(Object));

      at tests/unit/application/services/group.admin.service.spec.ts:36:58
      at fulfilled (tests/unit/application/services/group.admin.service.spec.ts:5:58)

  ΓùÅ GroupAdminService ΓÇ║ getGroup ΓÇ║ should return a group if found

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: Any<String>, "test-group"
    Received: "test-group"

    Number of calls: 1

      49 |             const result = await service.getGroup(adminUser, groupName);
      50 |
    > 51 |             expect(userMgmtAdapterMock.adminGetGroup).toHaveBeenCalledWith(expect.any(String), groupName);
         |                                                       ^
      52 |             expect(result).toBeInstanceOf(Group);
      53 |             expect(result?.groupName).toBe(groupName);
      54 |         });

      at tests/unit/application/services/group.admin.service.spec.ts:51:55
      at fulfilled (tests/unit/application/services/group.admin.service.spec.ts:5:58)

  ΓùÅ GroupAdminService ΓÇ║ listGroups ΓÇ║ should list active groups by default

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: Any<String>, undefined, undefined, undefined
    Received: undefined, undefined, undefined

    Number of calls: 1

      77 |             const result = await service.listGroups(adminUser);
      78 |
    > 79 |             expect(userMgmtAdapterMock.adminListGroups).toHaveBeenCalledWith(expect.any(String), undefined, undefined, undefined);
         |                                                         ^
      80 |             expect(result.groups.length).toBe(1);
      81 |             expect(result.groups[0].groupName).toBe('active-group');
      82 |             expect(result.nextToken).toBe('token');

      at tests/unit/application/services/group.admin.service.spec.ts:79:57
      at fulfilled (tests/unit/application/services/group.admin.service.spec.ts:5:58)

  ΓùÅ GroupAdminService ΓÇ║ deleteGroup ΓÇ║ should delete a group successfully

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: Any<String>, "test-group"
    Received: "test-group"

    Number of calls: 1

      105 |             await service.deleteGroup(adminUser, groupName);
      106 |
    > 107 |             expect(userMgmtAdapterMock.adminDeleteGroup).toHaveBeenCalledWith(expect.any(String), groupName);
          |                                                          ^
      108 |             expect(loggerMock.info).toHaveBeenCalledWith(expect.stringContaining('DEACTIVATE_GROUP'), expect.any(Object));
      109 |         });
      110 |     });

      at tests/unit/application/services/group.admin.service.spec.ts:107:58
      at fulfilled (tests/unit/application/services/group.admin.service.spec.ts:5:58)

  ΓùÅ GroupAdminService ΓÇ║ reactivateGroup ΓÇ║ should reactivate a group successfully

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: Any<String>, "test-group"
    Received: "test-group"

    Number of calls: 1

      117 |             await service.reactivateGroup(adminUser, groupName);
      118 |
    > 119 |             expect(userMgmtAdapterMock.adminReactivateGroup).toHaveBeenCalledWith(expect.any(String), groupName);
          |                                                              ^
      120 |             expect(loggerMock.info).toHaveBeenCalledWith(expect.stringContaining('REACTIVATE_GROUP'), expect.any(Object));
      121 |         });
      122 |     });

      at tests/unit/application/services/group.admin.service.spec.ts:119:62
      at fulfilled (tests/unit/application/services/group.admin.service.spec.ts:5:58)

FAIL tests/unit/application/services/policy.admin.service.spec.ts
  ΓùÅ PolicyAdminService ΓÇ║ createPolicy ΓÇ║ should create a policy successfully

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: Any<String>, Any<Policy>
    Received: {"createdAt": 2026-02-23T10:54:27.512Z, "description": undefined, "id": "policy-id-123", "isActive": true, "metadata": undefined, "policyDefinition": "def", "policyLanguage": "rego", "policyName": "New Policy", "tenantId": "test-tenant", "updatedAt": 2026-02-23T10:54:27.512Z, "version": 1}

    Number of calls: 1

      38 |             const result = await service.createPolicy(adminUser, details);
      39 |
    > 40 |             expect(policyRepositoryMock.save).toHaveBeenCalledWith(expect.any(String), expect.any(Policy));
         |                                               ^
      41 |             expect(result).toBeInstanceOf(Policy);
      42 |             expect(result.policyName).toBe('New Policy');
      43 |             expect(result.version).toBe(1);

      at tests/unit/application/services/policy.admin.service.spec.ts:40:47
      at fulfilled (tests/unit/application/services/policy.admin.service.spec.ts:5:58)

  ΓùÅ PolicyAdminService ΓÇ║ updatePolicy ΓÇ║ should update a policy successfully, incrementing the version

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: Any<String>, ObjectContaining {"policyName": "Updated Policy", "version": 2}
    Received: {"createdAt": 2026-02-23T10:54:27.503Z, "description": "A test policy", "id": "policy-id-123", "isActive": true, "metadata": {}, "policyDefinition": "def", "policyLanguage": "rego", "policyName": "Updated Policy", "tenantId": "test-tenant", "updatedAt": 2026-02-23T10:54:27.633Z, "version": 2}

    Number of calls: 1

      74 |
      75 |             expect(policyRepositoryMock.findById).toHaveBeenCalledWith(expect.any(String), policyId);
    > 76 |             expect(policyRepositoryMock.save).toHaveBeenCalledWith(expect.any(String), expect.objectContaining({
         |                                               ^
      77 |                 version: policyEntity.version + 1,
      78 |                 policyName: 'Updated Policy'
      79 |             }));

      at tests/unit/application/services/policy.admin.service.spec.ts:76:47
      at fulfilled (tests/unit/application/services/policy.admin.service.spec.ts:5:58)

  ΓùÅ PolicyAdminService ΓÇ║ rollbackPolicy ΓÇ║ should rollback a policy to a specific version

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: Any<String>, ObjectContaining {"id": "new-policy-id", "version": 1}
    Received: {"createdAt": 2026-02-23T10:54:27.815Z, "description": "A test policy", "id": "new-policy-id", "isActive": true, "metadata": {}, "policyDefinition": "old def", "policyLanguage": "rego", "policyName": "Test Policy", "tenantId": "test-tenant", "updatedAt": 2026-02-23T10:54:27.815Z, "version": 1}

    Number of calls: 1

      153 |
      154 |             expect(policyRepositoryMock.getPolicyVersion).toHaveBeenCalledWith(expect.any(String), policyId, 1);
    > 155 |             expect(policyRepositoryMock.save).toHaveBeenCalledWith(expect.any(String), expect.objectContaining({
          |                                               ^
      156 |                 id: 'new-policy-id',
      157 |                 version: 1
      158 |             }));

      at tests/unit/application/services/policy.admin.service.spec.ts:155:47
      at fulfilled (tests/unit/application/services/policy.admin.service.spec.ts:5:58)

FAIL tests/integration/routes/group.admin.routes.integration.spec.ts (46.263 s)
  ΓùÅ Console

    console.info
      [WinstonLogger] Logger initialized with level "info" in "test" environment.

      at WinstonLogger.initializeLogger (src/infrastructure/logging/WinstonLogger.ts:68:17)
          at Array.map (<anonymous>)

    console.log
      {"level":"warn","message":"CORS_ORIGIN is set to \"*\" in a non-development environment. This is insecure!","metadata":{},"timestamp":"2026-02-23T10:54:26.379Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"CORS configured for origin: *","metadata":{},"timestamp":"2026-02-23T10:54:26.532Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"Application setup complete for environment: test","metadata":{},"timestamp":"2026-02-23T10:54:26.537Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> POST /api/admin/groups","metadata":{"correlationId":"fea4123e-2b79-4458-a237-570ed267784b","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"POST","requestId":"fea4123e-2b79-4458-a237-570ed267784b","url":"/api/admin/groups","userId":"anonymous"},"timestamp":"2026-02-23T10:54:27.059Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - fea4123e-2b79-4458-a237-570ed267784b] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["group-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:54:27.086Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: {
        groupName: 'Test-Group-1771844058195',
        description: 'Integration Test Group Description',
        precedence: 10
      }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'groupName', 'description', 'precedence' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"groupName":"Test-Group-1771844058195","description":"Integration Test Group Description","precedence":10}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      {"level":"info","message":"<-- POST /api/admin/groups 201 75.189ms","metadata":{"contentLength":"179","correlationId":"fea4123e-2b79-4458-a237-570ed267784b","durationMs":75.189,"eventType":"finish","requestId":"fea4123e-2b79-4458-a237-570ed267784b","statusCode":201,"userId":"anonymous"},"timestamp":"2026-02-23T10:54:27.129Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> POST /api/admin/groups","metadata":{"correlationId":"aee4446d-7c7d-498c-8dd2-589b337a60c4","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"POST","requestId":"aee4446d-7c7d-498c-8dd2-589b337a60c4","url":"/api/admin/groups","userId":"anonymous"},"timestamp":"2026-02-23T10:54:27.248Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - aee4446d-7c7d-498c-8dd2-589b337a60c4] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["group-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:54:27.253Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: { description: 'Only desc' }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'description' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"description":"Only desc"}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      {"level":"warn","message":"Request validation failed [aee4446d-7c7d-498c-8dd2-589b337a60c4]:","metadata":{"errors":{"groupName":"Group name is required"}},"timestamp":"2026-02-23T10:54:27.268Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)
          at Generator.throw (<anonymous>)

    console.log
      {"level":"warn","message":"Client error processing request: Input validation failed","metadata":{"correlationId":"aee4446d-7c7d-498c-8dd2-589b337a60c4","details":{"groupName":"Group name is required"},"errorMessage":"Input validation failed","errorName":"ValidationError","isOperational":true,"method":"POST","path":"/api/admin/groups","requestId":"aee4446d-7c7d-498c-8dd2-589b337a60c4","stack":"ValidationError: Input validation failed\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:57:41\n    at Generator.throw (<anonymous>)\n    at rejected (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:6:65)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":400,"userId":"anonymous"},"timestamp":"2026-02-23T10:54:27.278Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)
          at Generator.throw (<anonymous>)

    console.log
      {"level":"warn","message":"<-- POST /api/admin/groups 400 38.135ms","metadata":{"contentLength":"179","correlationId":"aee4446d-7c7d-498c-8dd2-589b337a60c4","durationMs":38.135,"eventType":"finish","requestId":"aee4446d-7c7d-498c-8dd2-589b337a60c4","statusCode":400,"userId":"anonymous"},"timestamp":"2026-02-23T10:54:27.286Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> POST /api/admin/groups","metadata":{"correlationId":"96a96c07-f011-41f6-ac06-11cf71a14ddc","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"POST","requestId":"96a96c07-f011-41f6-ac06-11cf71a14ddc","url":"/api/admin/groups","userId":"anonymous"},"timestamp":"2026-02-23T10:54:27.353Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 96a96c07-f011-41f6-ac06-11cf71a14ddc] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["group-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:54:27.357Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: {
        groupName: 'Test-Group-1771844058195',
        description: 'Integration Test Group Description',
        precedence: 10
      }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'groupName', 'description', 'precedence' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"groupName":"Test-Group-1771844058195","description":"Integration Test Group Description","precedence":10}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      {"level":"error","message":"[GroupAdminCtrl] Failed to create group Test-Group-1771844058195","metadata":{"error":{"adminUserId":"test-admin-id-123","error":{"isOperational":true,"name":"GroupExistsError","statusCode":409}}},"timestamp":"2026-02-23T10:54:27.367Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)
          at Generator.throw (<anonymous>)

    console.log
      {"level":"warn","message":"Client error processing request: Group 'Group exists' already exists.","metadata":{"correlationId":"96a96c07-f011-41f6-ac06-11cf71a14ddc","errorMessage":"Group 'Group exists' already exists.","errorName":"GroupExistsError","isOperational":true,"method":"POST","path":"/api/admin/groups","requestId":"96a96c07-f011-41f6-ac06-11cf71a14ddc","stack":"GroupExistsError: Group 'Group exists' already exists.\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\group.admin.routes.integration.spec.ts:174:35\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\group.admin.routes.integration.spec.ts:9:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\group.admin.routes.integration.spec.ts:5:12)\n    at Object.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\group.admin.routes.integration.spec.ts:172:88)\n    at Promise.then.completed (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\testWorker.js:108:12)","statusCode":409,"userId":"anonymous"},"timestamp":"2026-02-23T10:54:27.372Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)
          at Generator.throw (<anonymous>)

    console.log
      {"level":"warn","message":"<-- POST /api/admin/groups 409 23.642ms","metadata":{"contentLength":"144","correlationId":"96a96c07-f011-41f6-ac06-11cf71a14ddc","durationMs":23.642,"eventType":"finish","requestId":"96a96c07-f011-41f6-ac06-11cf71a14ddc","statusCode":409,"userId":"anonymous"},"timestamp":"2026-02-23T10:54:27.377Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> POST /api/admin/groups","metadata":{"correlationId":"9609876c-e9e4-4703-96cf-67594750b49a","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"POST","requestId":"9609876c-e9e4-4703-96cf-67594750b49a","url":"/api/admin/groups","userId":"anonymous"},"timestamp":"2026-02-23T10:54:27.403Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 9609876c-e9e4-4703-96cf-67594750b49a] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["group-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:54:27.407Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: {
        groupName: 'Test-Group-1771844058195',
        description: 'Integration Test Group Description',
        precedence: 10
      }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'groupName', 'description', 'precedence' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"groupName":"Test-Group-1771844058195","description":"Integration Test Group Description","precedence":10}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      {"level":"error","message":"[GroupAdminCtrl] Failed to create group Test-Group-1771844058195","metadata":{"error":{"adminUserId":"test-admin-id-123","error":{}}},"timestamp":"2026-02-23T10:54:27.415Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)
          at Generator.throw (<anonymous>)

    console.log
      {"level":"error","message":"Server error processing request: DB connection failed","metadata":{"error":{"correlationId":"9609876c-e9e4-4703-96cf-67594750b49a","errorMessage":"DB connection failed","errorName":"Error","isOperational":false,"method":"POST","path":"/api/admin/groups","requestId":"9609876c-e9e4-4703-96cf-67594750b49a","stack":"Error: DB connection failed\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\group.admin.routes.integration.spec.ts:185:34\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\group.admin.routes.integration.spec.ts:9:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\group.admin.routes.integration.spec.ts:5:12)\n    at Object.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\group.admin.routes.integration.spec.ts:184:104)\n    at Promise.then.completed (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\testWorker.js:108:12)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:27.418Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)
          at Generator.throw (<anonymous>)

    console.log
      {"level":"error","message":"<-- POST /api/admin/groups 500 18.559ms","metadata":{"error":{"contentLength":"3133","correlationId":"9609876c-e9e4-4703-96cf-67594750b49a","durationMs":18.559,"eventType":"finish","requestId":"9609876c-e9e4-4703-96cf-67594750b49a","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:27.422Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/groups","metadata":{"correlationId":"52d6c3b2-ced6-48ab-af75-79d6738a855d","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"52d6c3b2-ced6-48ab-af75-79d6738a855d","url":"/api/admin/groups","userId":"anonymous"},"timestamp":"2026-02-23T10:54:27.486Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Authentication: Missing or invalid Authorization header.","metadata":{},"timestamp":"2026-02-23T10:54:27.494Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Client error processing request: Authorization header missing or invalid.","metadata":{"correlationId":"52d6c3b2-ced6-48ab-af75-79d6738a855d","errorMessage":"Authorization header missing or invalid.","errorName":"AuthenticationError","isOperational":true,"method":"GET","path":"/api/admin/groups","requestId":"52d6c3b2-ced6-48ab-af75-79d6738a855d","stack":"AuthenticationError: Authorization header missing or invalid.\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:32:25\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:27:70\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestLogger.middleware.ts:84:9\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:32\n    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)\n    at middleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:13)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at addRequestId (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestId.middleware.ts:33:5)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at urlencodedParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\urlencoded.js:68:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at jsonParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\json.js:100:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at requestMetricsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestMetrics.middleware.ts:26:3)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at cors (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:188:7)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:224:17\n    at originCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:214:15)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:531:6)\n    at xXssProtectionMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:311:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPoweredByMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:304:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPermittedCrossDomainPoliciesMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:297:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xFrameOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:281:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDownloadOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:261:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDnsPrefetchControlMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:254:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xContentTypeOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:246:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at strictTransportSecurityMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:239:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at referrerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:207:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at originAgentClusterMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:182:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginResourcePolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:175:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginOpenerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:159:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at contentSecurityPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:124:4)","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T10:54:27.521Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"<-- GET /api/admin/groups 401 88.775ms","metadata":{"contentLength":"151","correlationId":"52d6c3b2-ced6-48ab-af75-79d6738a855d","durationMs":88.775,"eventType":"finish","requestId":"52d6c3b2-ced6-48ab-af75-79d6738a855d","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T10:54:27.575Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/groups/Get-Group-Test","metadata":{"correlationId":"81c8c7f2-b236-447a-9c24-3116a0d55afc","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"81c8c7f2-b236-447a-9c24-3116a0d55afc","url":"/api/admin/groups/Get-Group-Test","userId":"anonymous"},"timestamp":"2026-02-23T10:54:27.607Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 81c8c7f2-b236-447a-9c24-3116a0d55afc] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["group-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:54:27.614Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [81c8c7f2-b236-447a-9c24-3116a0d55afc]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:54:27.622Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"81c8c7f2-b236-447a-9c24-3116a0d55afc","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/groups/Get-Group-Test","requestId":"81c8c7f2-b236-447a-9c24-3116a0d55afc","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:27.625Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/groups/Get-Group-Test 500 24.391ms","metadata":{"error":{"contentLength":"3814","correlationId":"81c8c7f2-b236-447a-9c24-3116a0d55afc","durationMs":24.391,"eventType":"finish","requestId":"81c8c7f2-b236-447a-9c24-3116a0d55afc","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:27.631Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/groups/Get-Group-Test","metadata":{"correlationId":"78dd4876-0366-402e-8742-574d9d013ab8","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"78dd4876-0366-402e-8742-574d9d013ab8","url":"/api/admin/groups/Get-Group-Test","userId":"anonymous"},"timestamp":"2026-02-23T10:54:27.722Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 78dd4876-0366-402e-8742-574d9d013ab8] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["group-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:54:27.727Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [78dd4876-0366-402e-8742-574d9d013ab8]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:54:27.732Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"78dd4876-0366-402e-8742-574d9d013ab8","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/groups/Get-Group-Test","requestId":"78dd4876-0366-402e-8742-574d9d013ab8","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:27.735Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/groups/Get-Group-Test 500 18.040ms","metadata":{"error":{"contentLength":"3814","correlationId":"78dd4876-0366-402e-8742-574d9d013ab8","durationMs":18.04,"eventType":"finish","requestId":"78dd4876-0366-402e-8742-574d9d013ab8","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:27.740Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/groups/Get-Group-Test","metadata":{"correlationId":"1d97fc12-bcde-42bb-a8cf-fb428a45e214","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"1d97fc12-bcde-42bb-a8cf-fb428a45e214","url":"/api/admin/groups/Get-Group-Test","userId":"anonymous"},"timestamp":"2026-02-23T10:54:27.788Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 1d97fc12-bcde-42bb-a8cf-fb428a45e214] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["group-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:54:27.793Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [1d97fc12-bcde-42bb-a8cf-fb428a45e214]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:54:27.798Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"1d97fc12-bcde-42bb-a8cf-fb428a45e214","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/groups/Get-Group-Test","requestId":"1d97fc12-bcde-42bb-a8cf-fb428a45e214","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:27.801Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/groups/Get-Group-Test 500 17.861ms","metadata":{"error":{"contentLength":"3814","correlationId":"1d97fc12-bcde-42bb-a8cf-fb428a45e214","durationMs":17.861,"eventType":"finish","requestId":"1d97fc12-bcde-42bb-a8cf-fb428a45e214","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:27.806Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/groups/Invalid%20Group%20Name%20With%20Spaces","metadata":{"correlationId":"13e04e08-c32b-4517-b195-b2da40630599","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"13e04e08-c32b-4517-b195-b2da40630599","url":"/api/admin/groups/Invalid%20Group%20Name%20With%20Spaces","userId":"anonymous"},"timestamp":"2026-02-23T10:54:27.840Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 13e04e08-c32b-4517-b195-b2da40630599] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["group-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:54:27.846Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [13e04e08-c32b-4517-b195-b2da40630599]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:54:27.851Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"13e04e08-c32b-4517-b195-b2da40630599","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/groups/Invalid%20Group%20Name%20With%20Spaces","requestId":"13e04e08-c32b-4517-b195-b2da40630599","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:27.855Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/groups/Invalid%20Group%20Name%20With%20Spaces 500 21.385ms","metadata":{"error":{"contentLength":"3814","correlationId":"13e04e08-c32b-4517-b195-b2da40630599","durationMs":21.385,"eventType":"finish","requestId":"13e04e08-c32b-4517-b195-b2da40630599","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:27.861Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/groups/Get-Group-Test","metadata":{"correlationId":"1251a3d2-9593-4009-a5da-746213db00cc","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"1251a3d2-9593-4009-a5da-746213db00cc","url":"/api/admin/groups/Get-Group-Test","userId":"anonymous"},"timestamp":"2026-02-23T10:54:27.904Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 1251a3d2-9593-4009-a5da-746213db00cc] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["group-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:54:27.908Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [1251a3d2-9593-4009-a5da-746213db00cc]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:54:27.914Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"1251a3d2-9593-4009-a5da-746213db00cc","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/groups/Get-Group-Test","requestId":"1251a3d2-9593-4009-a5da-746213db00cc","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:27.917Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/groups/Get-Group-Test 500 18.865ms","metadata":{"error":{"contentLength":"3814","correlationId":"1251a3d2-9593-4009-a5da-746213db00cc","durationMs":18.865,"eventType":"finish","requestId":"1251a3d2-9593-4009-a5da-746213db00cc","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:27.923Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/groups/Get-Group-Test","metadata":{"correlationId":"76158e77-eb87-41fe-85bb-f1628516873e","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"76158e77-eb87-41fe-85bb-f1628516873e","url":"/api/admin/groups/Get-Group-Test","userId":"anonymous"},"timestamp":"2026-02-23T10:54:27.956Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Authentication: Missing or invalid Authorization header.","metadata":{},"timestamp":"2026-02-23T10:54:27.959Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Client error processing request: Authorization header missing or invalid.","metadata":{"correlationId":"76158e77-eb87-41fe-85bb-f1628516873e","errorMessage":"Authorization header missing or invalid.","errorName":"AuthenticationError","isOperational":true,"method":"GET","path":"/api/admin/groups/Get-Group-Test","requestId":"76158e77-eb87-41fe-85bb-f1628516873e","stack":"AuthenticationError: Authorization header missing or invalid.\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:32:25\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:27:70\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestLogger.middleware.ts:84:9\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:32\n    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)\n    at middleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:13)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at addRequestId (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestId.middleware.ts:33:5)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at urlencodedParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\urlencoded.js:68:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at jsonParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\json.js:100:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at requestMetricsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestMetrics.middleware.ts:26:3)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at cors (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:188:7)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:224:17\n    at originCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:214:15)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:531:6)\n    at xXssProtectionMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:311:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPoweredByMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:304:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPermittedCrossDomainPoliciesMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:297:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xFrameOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:281:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDownloadOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:261:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDnsPrefetchControlMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:254:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xContentTypeOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:246:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at strictTransportSecurityMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:239:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at referrerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:207:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at originAgentClusterMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:182:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginResourcePolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:175:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginOpenerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:159:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at contentSecurityPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:124:4)","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T10:54:27.969Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"<-- GET /api/admin/groups/Get-Group-Test 401 18.563ms","metadata":{"contentLength":"151","correlationId":"76158e77-eb87-41fe-85bb-f1628516873e","durationMs":18.563,"eventType":"finish","requestId":"76158e77-eb87-41fe-85bb-f1628516873e","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T10:54:27.974Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> DELETE /api/admin/groups/Delete-Group-Test","metadata":{"correlationId":"10cea943-cfd1-4330-9369-8b811a0dbe5b","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"DELETE","requestId":"10cea943-cfd1-4330-9369-8b811a0dbe5b","url":"/api/admin/groups/Delete-Group-Test","userId":"anonymous"},"timestamp":"2026-02-23T10:54:28.007Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 10cea943-cfd1-4330-9369-8b811a0dbe5b] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["group-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:54:28.013Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [10cea943-cfd1-4330-9369-8b811a0dbe5b]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:54:28.018Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"10cea943-cfd1-4330-9369-8b811a0dbe5b","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"DELETE","path":"/api/admin/groups/Delete-Group-Test","requestId":"10cea943-cfd1-4330-9369-8b811a0dbe5b","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:28.020Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- DELETE /api/admin/groups/Delete-Group-Test 500 17.873ms","metadata":{"error":{"contentLength":"3814","correlationId":"10cea943-cfd1-4330-9369-8b811a0dbe5b","durationMs":17.873,"eventType":"finish","requestId":"10cea943-cfd1-4330-9369-8b811a0dbe5b","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:28.025Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> DELETE /api/admin/groups/Delete-Group-Test","metadata":{"correlationId":"fa809573-f170-4238-868e-eb5a0d71dedc","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"DELETE","requestId":"fa809573-f170-4238-868e-eb5a0d71dedc","url":"/api/admin/groups/Delete-Group-Test","userId":"anonymous"},"timestamp":"2026-02-23T10:54:28.048Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - fa809573-f170-4238-868e-eb5a0d71dedc] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["group-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:54:28.051Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [fa809573-f170-4238-868e-eb5a0d71dedc]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:54:28.056Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"fa809573-f170-4238-868e-eb5a0d71dedc","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"DELETE","path":"/api/admin/groups/Delete-Group-Test","requestId":"fa809573-f170-4238-868e-eb5a0d71dedc","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:28.058Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- DELETE /api/admin/groups/Delete-Group-Test 500 17.160ms","metadata":{"error":{"contentLength":"3814","correlationId":"fa809573-f170-4238-868e-eb5a0d71dedc","durationMs":17.16,"eventType":"finish","requestId":"fa809573-f170-4238-868e-eb5a0d71dedc","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:28.065Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> DELETE /api/admin/groups/Invalid%20Chars%20%24","metadata":{"correlationId":"5738279b-697b-49e2-9017-8d2a232fba3d","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"DELETE","requestId":"5738279b-697b-49e2-9017-8d2a232fba3d","url":"/api/admin/groups/Invalid%20Chars%20%24","userId":"anonymous"},"timestamp":"2026-02-23T10:54:28.085Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 5738279b-697b-49e2-9017-8d2a232fba3d] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["group-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:54:28.090Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [5738279b-697b-49e2-9017-8d2a232fba3d]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:54:28.096Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"5738279b-697b-49e2-9017-8d2a232fba3d","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"DELETE","path":"/api/admin/groups/Invalid%20Chars%20%24","requestId":"5738279b-697b-49e2-9017-8d2a232fba3d","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:28.099Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- DELETE /api/admin/groups/Invalid%20Chars%20%24 500 18.046ms","metadata":{"error":{"contentLength":"3814","correlationId":"5738279b-697b-49e2-9017-8d2a232fba3d","durationMs":18.046,"eventType":"finish","requestId":"5738279b-697b-49e2-9017-8d2a232fba3d","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:28.103Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> DELETE /api/admin/groups/Delete-Group-Test","metadata":{"correlationId":"3ef93cd6-8cf7-4488-b88a-3d4c144e0598","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"DELETE","requestId":"3ef93cd6-8cf7-4488-b88a-3d4c144e0598","url":"/api/admin/groups/Delete-Group-Test","userId":"anonymous"},"timestamp":"2026-02-23T10:54:28.127Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 3ef93cd6-8cf7-4488-b88a-3d4c144e0598] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["group-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:54:28.132Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [3ef93cd6-8cf7-4488-b88a-3d4c144e0598]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:54:28.136Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"3ef93cd6-8cf7-4488-b88a-3d4c144e0598","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"DELETE","path":"/api/admin/groups/Delete-Group-Test","requestId":"3ef93cd6-8cf7-4488-b88a-3d4c144e0598","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:28.138Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- DELETE /api/admin/groups/Delete-Group-Test 500 15.265ms","metadata":{"error":{"contentLength":"3814","correlationId":"3ef93cd6-8cf7-4488-b88a-3d4c144e0598","durationMs":15.265,"eventType":"finish","requestId":"3ef93cd6-8cf7-4488-b88a-3d4c144e0598","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:28.143Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> DELETE /api/admin/groups/Delete-Group-Test","metadata":{"correlationId":"fa6b6385-c6e2-4d38-b061-8e0a28de3da0","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"DELETE","requestId":"fa6b6385-c6e2-4d38-b061-8e0a28de3da0","url":"/api/admin/groups/Delete-Group-Test","userId":"anonymous"},"timestamp":"2026-02-23T10:54:28.165Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Authentication: Missing or invalid Authorization header.","metadata":{},"timestamp":"2026-02-23T10:54:28.169Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Client error processing request: Authorization header missing or invalid.","metadata":{"correlationId":"fa6b6385-c6e2-4d38-b061-8e0a28de3da0","errorMessage":"Authorization header missing or invalid.","errorName":"AuthenticationError","isOperational":true,"method":"DELETE","path":"/api/admin/groups/Delete-Group-Test","requestId":"fa6b6385-c6e2-4d38-b061-8e0a28de3da0","stack":"AuthenticationError: Authorization header missing or invalid.\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:32:25\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:27:70\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestLogger.middleware.ts:84:9\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:32\n    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)\n    at middleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:13)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at addRequestId (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestId.middleware.ts:33:5)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at urlencodedParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\urlencoded.js:68:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at jsonParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\json.js:100:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at requestMetricsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestMetrics.middleware.ts:26:3)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at cors (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:188:7)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:224:17\n    at originCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:214:15)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:531:6)\n    at xXssProtectionMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:311:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPoweredByMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:304:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPermittedCrossDomainPoliciesMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:297:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xFrameOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:281:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDownloadOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:261:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDnsPrefetchControlMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:254:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xContentTypeOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:246:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at strictTransportSecurityMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:239:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at referrerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:207:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at originAgentClusterMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:182:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginResourcePolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:175:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginOpenerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:159:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at contentSecurityPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:124:4)","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T10:54:28.176Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"<-- DELETE /api/admin/groups/Delete-Group-Test 401 16.697ms","metadata":{"contentLength":"151","correlationId":"fa6b6385-c6e2-4d38-b061-8e0a28de3da0","durationMs":16.697,"eventType":"finish","requestId":"fa6b6385-c6e2-4d38-b061-8e0a28de3da0","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T10:54:28.182Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

  ΓùÅ Integration Tests: Group Admin Routes (/api/admin/groups) ΓÇ║ GET /api/admin/groups/:groupName ΓÇ║ should return 200 OK with group data if group exists

    expected 200 "OK", got 500 "Internal Server Error"

      210 |                 .get(`${BASE_API_PATH}/${targetgroupName}`)
      211 |                 .set(MOCK_AUTH_HEADER)
    > 212 |                 .expect(HttpStatusCode.OK); // 200
          |                  ^
      213 |             expect(mockGroupAdminService.getGroup).toHaveBeenCalledWith(expect.anything(), targetgroupName);
      214 |         });
      215 |

      at tests/integration/routes/group.admin.routes.integration.spec.ts:212:18
      at tests/integration/routes/group.admin.routes.integration.spec.ts:9:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/group.admin.routes.integration.spec.ts:5:12)
      at Object.<anonymous> (tests/integration/routes/group.admin.routes.integration.spec.ts:207:79)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Group Admin Routes (/api/admin/groups) ΓÇ║ GET /api/admin/groups/:groupName ΓÇ║ should return 404 Not Found if service returns null

    expected 404 "Not Found", got 500 "Internal Server Error"

      219 |                 .get(`${BASE_API_PATH}/${targetgroupName}`)
      220 |                 .set(MOCK_AUTH_HEADER)
    > 221 |                 .expect(HttpStatusCode.NOT_FOUND); // 404 (Handled by controller)
          |                  ^
      222 |             expect(mockGroupAdminService.getGroup).toHaveBeenCalledWith(expect.anything(), targetgroupName);
      223 |         });
      224 |

      at tests/integration/routes/group.admin.routes.integration.spec.ts:221:18
      at tests/integration/routes/group.admin.routes.integration.spec.ts:9:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/group.admin.routes.integration.spec.ts:5:12)
      at Object.<anonymous> (tests/integration/routes/group.admin.routes.integration.spec.ts:216:78)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Group Admin Routes (/api/admin/groups) ΓÇ║ GET /api/admin/groups/:groupName ΓÇ║ should return 404 Not Found if service throws NotFoundError

    expected 404 "Not Found", got 500 "Internal Server Error"

      230 |                 .get(`${BASE_API_PATH}/${targetgroupName}`)
      231 |                 .set(MOCK_AUTH_HEADER)
    > 232 |                 .expect(HttpStatusCode.NOT_FOUND); // 404 (Handled by error middleware)
          |                  ^
      233 |             expect(mockGroupAdminService.getGroup).toHaveBeenCalledWith(expect.anything(), targetgroupName);
      234 |         });
      235 |

      at tests/integration/routes/group.admin.routes.integration.spec.ts:232:18
      at tests/integration/routes/group.admin.routes.integration.spec.ts:9:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/group.admin.routes.integration.spec.ts:5:12)
      at Object.<anonymous> (tests/integration/routes/group.admin.routes.integration.spec.ts:225:86)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Group Admin Routes (/api/admin/groups) ΓÇ║ GET /api/admin/groups/:groupName ΓÇ║ should return 400 Bad Request if groupName param is invalid

    expected 400 "Bad Request", got 500 "Internal Server Error"

      239 |                 .get(`${BASE_API_PATH}/${encodeURIComponent(invalidgroupName)}`) // URL encode it
      240 |                 .set(MOCK_AUTH_HEADER)
    > 241 |                 .expect(HttpStatusCode.BAD_REQUEST); // 400 (Handled by validation middleware)
          |                  ^
      242 |             expect(mockGroupAdminService.getGroup).not.toHaveBeenCalled();
      243 |         });
      244 |

      at tests/integration/routes/group.admin.routes.integration.spec.ts:241:18
      at tests/integration/routes/group.admin.routes.integration.spec.ts:9:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/group.admin.routes.integration.spec.ts:5:12)
      at Object.<anonymous> (tests/integration/routes/group.admin.routes.integration.spec.ts:236:86)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Group Admin Routes (/api/admin/groups) ΓÇ║ GET /api/admin/groups/:groupName ΓÇ║ should return 500 if the service fails unexpectedly

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: Anything, "Get-Group-Test"

    Number of calls: 0

      250 |                 .set(MOCK_AUTH_HEADER)
      251 |                 .expect(HttpStatusCode.INTERNAL_SERVER_ERROR); // 500
    > 252 |             expect(mockGroupAdminService.getGroup).toHaveBeenCalledWith(expect.anything(), targetgroupName);
          |                                                    ^
      253 |         });
      254 |
      255 |         it('should return 401 Unauthorized if token is missing', async () => {

      at tests/integration/routes/group.admin.routes.integration.spec.ts:252:52
      at fulfilled (tests/integration/routes/group.admin.routes.integration.spec.ts:6:58)

  ΓùÅ Integration Tests: Group Admin Routes (/api/admin/groups) ΓÇ║ DELETE /api/admin/groups/:groupName ΓÇ║ should return 204 No Content if service succeeds

    expected 204 "No Content", got 500 "Internal Server Error"

      269 |                 .delete(`${BASE_API_PATH}/${targetgroupName}`)
      270 |                 .set(MOCK_AUTH_HEADER)
    > 271 |                 .expect(HttpStatusCode.NO_CONTENT); // 204
          |                  ^
      272 |             expect(mockGroupAdminService.deleteGroup).toHaveBeenCalledWith(expect.anything(), targetgroupName);
      273 |         });
      274 |

      at tests/integration/routes/group.admin.routes.integration.spec.ts:271:18
      at tests/integration/routes/group.admin.routes.integration.spec.ts:9:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/group.admin.routes.integration.spec.ts:5:12)
      at Object.<anonymous> (tests/integration/routes/group.admin.routes.integration.spec.ts:266:75)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Group Admin Routes (/api/admin/groups) ΓÇ║ DELETE /api/admin/groups/:groupName ΓÇ║ should return 404 Not Found if service throws NotFoundError

    expected 404 "Not Found", got 500 "Internal Server Error"

      280 |                 .delete(`${BASE_API_PATH}/${targetgroupName}`)
      281 |                 .set(MOCK_AUTH_HEADER)
    > 282 |                 .expect(HttpStatusCode.NOT_FOUND); // 404
          |                  ^
      283 |             expect(mockGroupAdminService.deleteGroup).toHaveBeenCalledWith(expect.anything(), targetgroupName);
      284 |         });
      285 |

      at tests/integration/routes/group.admin.routes.integration.spec.ts:282:18
      at tests/integration/routes/group.admin.routes.integration.spec.ts:9:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/group.admin.routes.integration.spec.ts:5:12)
      at Object.<anonymous> (tests/integration/routes/group.admin.routes.integration.spec.ts:275:86)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Group Admin Routes (/api/admin/groups) ΓÇ║ DELETE /api/admin/groups/:groupName ΓÇ║ should return 400 Bad Request if groupName param is invalid

    expected 400 "Bad Request", got 500 "Internal Server Error"

      289 |                 .delete(`${BASE_API_PATH}/${encodeURIComponent(invalidgroupName)}`)
      290 |                 .set(MOCK_AUTH_HEADER)
    > 291 |                 .expect(HttpStatusCode.BAD_REQUEST); // 400
          |                  ^
      292 |             expect(mockGroupAdminService.deleteGroup).not.toHaveBeenCalled();
      293 |         });
      294 |

      at tests/integration/routes/group.admin.routes.integration.spec.ts:291:18
      at tests/integration/routes/group.admin.routes.integration.spec.ts:9:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/group.admin.routes.integration.spec.ts:5:12)
      at Object.<anonymous> (tests/integration/routes/group.admin.routes.integration.spec.ts:286:86)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Group Admin Routes (/api/admin/groups) ΓÇ║ DELETE /api/admin/groups/:groupName ΓÇ║ should return 500 if service fails unexpectedly

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: Anything, "Delete-Group-Test"

    Number of calls: 0

      300 |                 .set(MOCK_AUTH_HEADER)
      301 |                 .expect(HttpStatusCode.INTERNAL_SERVER_ERROR); // 500
    > 302 |             expect(mockGroupAdminService.deleteGroup).toHaveBeenCalledWith(expect.anything(), targetgroupName);
          |                                                       ^
      303 |         });
      304 |
      305 |         it('should return 401 Unauthorized if token is missing', async () => {

      at tests/integration/routes/group.admin.routes.integration.spec.ts:302:55
      at fulfilled (tests/integration/routes/group.admin.routes.integration.spec.ts:6:58)

FAIL tests/unit/api/middlewares/jwtAuth.middleware.spec.ts
  ΓùÅ jwtAuthMiddleware ΓÇ║ should populate req.user and req.accessToken and call next() on successful validation

    expect(received).toEqual(expected) // deep equality

    - Expected  - 1
    + Received  + 0

    @@ -9,8 +9,7 @@
        },
        "id": "user123",
        "roles": Array [
          "users",
        ],
    -   "tenantId": "test-tenant",
        "username": "testuser",
      }

      89 |
      90 |         expect(jwtValidatorMock.validate).toHaveBeenCalledWith(validToken.split(' ')[1]);
    > 91 |         expect(req.user).toEqual({
         |                          ^
      92 |             id: 'user123', tenantId: 'test-tenant',
      93 |             username: 'testuser',
      94 |             roles: ['users'],

      at tests/unit/api/middlewares/jwtAuth.middleware.spec.ts:91:26
      at fulfilled (tests/unit/api/middlewares/jwtAuth.middleware.spec.ts:5:58)

FAIL tests/integration/Persistence/DynamoUserProfileRepository.integration.spec.ts
  ΓùÅ Console

    console.log
      Table TestUsers cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

  ΓùÅ DynamoUserProfileRepository Integration Tests ΓÇ║ should throw error when saving duplicate user profile (implement check in repo)

    ValidationException: The provided key element does not match the schema

      at throwDefaultError (node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:425:20)
      at node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:434:5
      at de_CommandError (node_modules/.pnpm/@aws-sdk+client-dynamodb@3.879.0/node_modules/@aws-sdk/client-dynamodb/dist-cjs/index.js:2359:14)
      at node_modules/.pnpm/@smithy+middleware-serde@4.0.9/node_modules/@smithy/middleware-serde/dist-cjs/index.js:36:20
      at node_modules/.pnpm/@aws-sdk+lib-dynamodb@3.879_ee4568148364d683af0669b014af13ba/node_modules/@aws-sdk/lib-dynamodb/dist-cjs/index.js:173:30
      at node_modules/.pnpm/@smithy+core@3.9.0/node_modules/@smithy/core/dist-cjs/index.js:193:18
      at node_modules/.pnpm/@smithy+middleware-retry@4.1.20/node_modules/@smithy/middleware-retry/dist-cjs/index.js:320:38
      at node_modules/.pnpm/@aws-sdk+middleware-logger@3.876.0/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js:33:22

  ΓùÅ DynamoUserProfileRepository Integration Tests ΓÇ║ should find an existing profile by ID

    ValidationException: The provided key element does not match the schema

      at throwDefaultError (node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:425:20)
      at node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:434:5
      at de_CommandError (node_modules/.pnpm/@aws-sdk+client-dynamodb@3.879.0/node_modules/@aws-sdk/client-dynamodb/dist-cjs/index.js:2359:14)
      at node_modules/.pnpm/@smithy+middleware-serde@4.0.9/node_modules/@smithy/middleware-serde/dist-cjs/index.js:36:20
      at node_modules/.pnpm/@aws-sdk+lib-dynamodb@3.879_ee4568148364d683af0669b014af13ba/node_modules/@aws-sdk/lib-dynamodb/dist-cjs/index.js:173:30
      at node_modules/.pnpm/@smithy+core@3.9.0/node_modules/@smithy/core/dist-cjs/index.js:193:18
      at node_modules/.pnpm/@smithy+middleware-retry@4.1.20/node_modules/@smithy/middleware-retry/dist-cjs/index.js:320:38
      at node_modules/.pnpm/@aws-sdk+middleware-logger@3.876.0/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js:33:22

  ΓùÅ DynamoUserProfileRepository Integration Tests ΓÇ║ should return null when finding non-existent profile by ID

    ValidationException: The provided key element does not match the schema

      at throwDefaultError (node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:425:20)
      at node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:434:5
      at de_CommandError (node_modules/.pnpm/@aws-sdk+client-dynamodb@3.879.0/node_modules/@aws-sdk/client-dynamodb/dist-cjs/index.js:2359:14)
      at node_modules/.pnpm/@smithy+middleware-serde@4.0.9/node_modules/@smithy/middleware-serde/dist-cjs/index.js:36:20
      at node_modules/.pnpm/@aws-sdk+lib-dynamodb@3.879_ee4568148364d683af0669b014af13ba/node_modules/@aws-sdk/lib-dynamodb/dist-cjs/index.js:173:30
      at node_modules/.pnpm/@smithy+core@3.9.0/node_modules/@smithy/core/dist-cjs/index.js:193:18
      at node_modules/.pnpm/@smithy+middleware-retry@4.1.20/node_modules/@smithy/middleware-retry/dist-cjs/index.js:320:38
      at node_modules/.pnpm/@aws-sdk+middleware-logger@3.876.0/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js:33:22

  ΓùÅ DynamoUserProfileRepository Integration Tests ΓÇ║ should find an existing profile by Email (assuming index exists)

    ValidationException: The provided key element does not match the schema

      at throwDefaultError (node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:425:20)
      at node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:434:5
      at de_CommandError (node_modules/.pnpm/@aws-sdk+client-dynamodb@3.879.0/node_modules/@aws-sdk/client-dynamodb/dist-cjs/index.js:2359:14)
      at node_modules/.pnpm/@smithy+middleware-serde@4.0.9/node_modules/@smithy/middleware-serde/dist-cjs/index.js:36:20
      at node_modules/.pnpm/@aws-sdk+lib-dynamodb@3.879_ee4568148364d683af0669b014af13ba/node_modules/@aws-sdk/lib-dynamodb/dist-cjs/index.js:173:30
      at node_modules/.pnpm/@smithy+core@3.9.0/node_modules/@smithy/core/dist-cjs/index.js:193:18
      at node_modules/.pnpm/@smithy+middleware-retry@4.1.20/node_modules/@smithy/middleware-retry/dist-cjs/index.js:320:38
      at node_modules/.pnpm/@aws-sdk+middleware-logger@3.876.0/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js:33:22

  ΓùÅ DynamoUserProfileRepository Integration Tests ΓÇ║ should return null when finding non-existent profile by Email

    ValidationException: The provided key element does not match the schema

      at throwDefaultError (node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:425:20)
      at node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:434:5
      at de_CommandError (node_modules/.pnpm/@aws-sdk+client-dynamodb@3.879.0/node_modules/@aws-sdk/client-dynamodb/dist-cjs/index.js:2359:14)
      at node_modules/.pnpm/@smithy+middleware-serde@4.0.9/node_modules/@smithy/middleware-serde/dist-cjs/index.js:36:20
      at node_modules/.pnpm/@aws-sdk+lib-dynamodb@3.879_ee4568148364d683af0669b014af13ba/node_modules/@aws-sdk/lib-dynamodb/dist-cjs/index.js:173:30
      at node_modules/.pnpm/@smithy+core@3.9.0/node_modules/@smithy/core/dist-cjs/index.js:193:18
      at node_modules/.pnpm/@smithy+middleware-retry@4.1.20/node_modules/@smithy/middleware-retry/dist-cjs/index.js:320:38
      at node_modules/.pnpm/@aws-sdk+middleware-logger@3.876.0/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js:33:22

  ΓùÅ DynamoUserProfileRepository Integration Tests ΓÇ║ should update an existing profile

    ValidationException: The provided key element does not match the schema

      at throwDefaultError (node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:425:20)
      at node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:434:5
      at de_CommandError (node_modules/.pnpm/@aws-sdk+client-dynamodb@3.879.0/node_modules/@aws-sdk/client-dynamodb/dist-cjs/index.js:2359:14)
      at node_modules/.pnpm/@smithy+middleware-serde@4.0.9/node_modules/@smithy/middleware-serde/dist-cjs/index.js:36:20
      at node_modules/.pnpm/@aws-sdk+lib-dynamodb@3.879_ee4568148364d683af0669b014af13ba/node_modules/@aws-sdk/lib-dynamodb/dist-cjs/index.js:173:30
      at node_modules/.pnpm/@smithy+core@3.9.0/node_modules/@smithy/core/dist-cjs/index.js:193:18
      at node_modules/.pnpm/@smithy+middleware-retry@4.1.20/node_modules/@smithy/middleware-retry/dist-cjs/index.js:320:38
      at node_modules/.pnpm/@aws-sdk+middleware-logger@3.876.0/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js:33:22

  ΓùÅ DynamoUserProfileRepository Integration Tests ΓÇ║ should throw error when updating non-existent profile (implement check)

    ValidationException: The provided key element does not match the schema

      at throwDefaultError (node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:425:20)
      at node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:434:5
      at de_CommandError (node_modules/.pnpm/@aws-sdk+client-dynamodb@3.879.0/node_modules/@aws-sdk/client-dynamodb/dist-cjs/index.js:2359:14)
      at node_modules/.pnpm/@smithy+middleware-serde@4.0.9/node_modules/@smithy/middleware-serde/dist-cjs/index.js:36:20
      at node_modules/.pnpm/@aws-sdk+lib-dynamodb@3.879_ee4568148364d683af0669b014af13ba/node_modules/@aws-sdk/lib-dynamodb/dist-cjs/index.js:173:30
      at node_modules/.pnpm/@smithy+core@3.9.0/node_modules/@smithy/core/dist-cjs/index.js:193:18
      at node_modules/.pnpm/@smithy+middleware-retry@4.1.20/node_modules/@smithy/middleware-retry/dist-cjs/index.js:320:38
      at node_modules/.pnpm/@aws-sdk+middleware-logger@3.876.0/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js:33:22

  ΓùÅ DynamoUserProfileRepository Integration Tests ΓÇ║ should delete an existing profile

    ValidationException: The provided key element does not match the schema

      at throwDefaultError (node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:425:20)
      at node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:434:5
      at de_CommandError (node_modules/.pnpm/@aws-sdk+client-dynamodb@3.879.0/node_modules/@aws-sdk/client-dynamodb/dist-cjs/index.js:2359:14)
      at node_modules/.pnpm/@smithy+middleware-serde@4.0.9/node_modules/@smithy/middleware-serde/dist-cjs/index.js:36:20
      at node_modules/.pnpm/@aws-sdk+lib-dynamodb@3.879_ee4568148364d683af0669b014af13ba/node_modules/@aws-sdk/lib-dynamodb/dist-cjs/index.js:173:30
      at node_modules/.pnpm/@smithy+core@3.9.0/node_modules/@smithy/core/dist-cjs/index.js:193:18
      at node_modules/.pnpm/@smithy+middleware-retry@4.1.20/node_modules/@smithy/middleware-retry/dist-cjs/index.js:320:38
      at node_modules/.pnpm/@aws-sdk+middleware-logger@3.876.0/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js:33:22

  ΓùÅ DynamoUserProfileRepository Integration Tests ΓÇ║ should not throw when deleting non-existent profile (idempotent)

    ValidationException: The provided key element does not match the schema

      at throwDefaultError (node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:425:20)
      at node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:434:5
      at de_CommandError (node_modules/.pnpm/@aws-sdk+client-dynamodb@3.879.0/node_modules/@aws-sdk/client-dynamodb/dist-cjs/index.js:2359:14)
      at node_modules/.pnpm/@smithy+middleware-serde@4.0.9/node_modules/@smithy/middleware-serde/dist-cjs/index.js:36:20
      at node_modules/.pnpm/@aws-sdk+lib-dynamodb@3.879_ee4568148364d683af0669b014af13ba/node_modules/@aws-sdk/lib-dynamodb/dist-cjs/index.js:173:30
      at node_modules/.pnpm/@smithy+core@3.9.0/node_modules/@smithy/core/dist-cjs/index.js:193:18
      at node_modules/.pnpm/@smithy+middleware-retry@4.1.20/node_modules/@smithy/middleware-retry/dist-cjs/index.js:320:38
      at node_modules/.pnpm/@aws-sdk+middleware-logger@3.876.0/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js:33:22

FAIL tests/unit/application/services/permission.admin.service.spec.ts
  ΓùÅ PermissionAdminService ΓÇ║ getPermission ΓÇ║ should return a permission if found

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "test-permission"
    Received: "test-tenant", "test-permission"

    Number of calls: 1

      86 |             const result = await service.getPermission(adminUser, permissionName);
      87 |
    > 88 |             expect(permissionRepoMock.findByName).toHaveBeenCalledWith(permissionName);
         |                                                   ^
      89 |             expect(result).toEqual(permissionEntity);
      90 |         });
      91 |

      at tests/unit/application/services/permission.admin.service.spec.ts:88:51
      at fulfilled (tests/unit/application/services/permission.admin.service.spec.ts:5:58)

  ΓùÅ PermissionAdminService ΓÇ║ listPermissions ΓÇ║ should list permissions

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {}
    Received: "test-tenant", {}

    Number of calls: 1

      106 |             const result = await service.listPermissions(adminUser, {});
      107 |
    > 108 |             expect(permissionRepoMock.list).toHaveBeenCalledWith({});
          |                                             ^
      109 |             expect(result).toEqual(permissions);
      110 |         });
      111 |     });

      at tests/unit/application/services/permission.admin.service.spec.ts:108:45
      at fulfilled (tests/unit/application/services/permission.admin.service.spec.ts:5:58)

  ΓùÅ PermissionAdminService ΓÇ║ updatePermission ΓÇ║ should update a permission successfully

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "test-permission", {"description": "Updated description"}
    Received: "test-tenant", "test-permission", {"description": "Updated description"}

    Number of calls: 1

      119 |             const result = await service.updatePermission(adminUser, permissionName, updates);
      120 |
    > 121 |             expect(permissionRepoMock.update).toHaveBeenCalledWith(permissionName, updates);
          |                                               ^
      122 |             expect(result).toEqual(updatedPermission);
      123 |         });
      124 |     });

      at tests/unit/application/services/permission.admin.service.spec.ts:121:47
      at fulfilled (tests/unit/application/services/permission.admin.service.spec.ts:5:58)

  ΓùÅ PermissionAdminService ΓÇ║ deletePermission ΓÇ║ should delete a permission and its assignments successfully

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "test-permission"
    Received: "test-tenant", "test-permission"

    Number of calls: 1

      131 |             await service.deletePermission(adminUser, permissionName);
      132 |
    > 133 |             expect(permissionRepoMock.delete).toHaveBeenCalledWith(permissionName);
          |                                               ^
      134 |             expect(assignmentRepoMock.removeAllAssignmentsForPermission).toHaveBeenCalledWith(permissionName);
      135 |         });
      136 |

      at tests/unit/application/services/permission.admin.service.spec.ts:133:47
      at fulfilled (tests/unit/application/services/permission.admin.service.spec.ts:5:58)

FAIL tests/unit/application/services/role.admin.service.spec.ts
  ΓùÅ RoleAdminService ΓÇ║ getRole ΓÇ║ should return a role if found

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "test-role"
    Received: "test-tenant", "test-role"

    Number of calls: 1

       96 |             const result = await service.getRole(adminUser, roleName);
       97 |
    >  98 |             expect(roleRepoMock.findByName).toHaveBeenCalledWith(roleName);
          |                                             ^
       99 |             expect(result).toEqual(roleEntity);
      100 |         });
      101 |

      at tests/unit/application/services/role.admin.service.spec.ts:98:45
      at fulfilled (tests/unit/application/services/role.admin.service.spec.ts:5:58)

  ΓùÅ RoleAdminService ΓÇ║ listRoles ΓÇ║ should list roles

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {}
    Received: "test-tenant", {}

    Number of calls: 1

      116 |             const result = await service.listRoles(adminUser, {});
      117 |
    > 118 |             expect(roleRepoMock.list).toHaveBeenCalledWith({});
          |                                       ^
      119 |             expect(result).toEqual(roles);
      120 |         });
      121 |     });

      at tests/unit/application/services/role.admin.service.spec.ts:118:39
      at fulfilled (tests/unit/application/services/role.admin.service.spec.ts:5:58)

  ΓùÅ RoleAdminService ΓÇ║ updateRole ΓÇ║ should update a role successfully

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "test-role", {"description": "Updated description"}
    Received: "test-tenant", "test-role", {"description": "Updated description"}

    Number of calls: 1

      129 |             const result = await service.updateRole(adminUser, roleName, updates);
      130 |
    > 131 |             expect(roleRepoMock.update).toHaveBeenCalledWith(roleName, updates);
          |                                         ^
      132 |             expect(result).toEqual(updatedRole);
      133 |         });
      134 |     });

      at tests/unit/application/services/role.admin.service.spec.ts:131:41
      at fulfilled (tests/unit/application/services/role.admin.service.spec.ts:5:58)

  ΓùÅ RoleAdminService ΓÇ║ deleteRole ΓÇ║ should delete a role and its assignments successfully

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "test-role"
    Received: "test-tenant", "test-role"

    Number of calls: 1

      141 |             await service.deleteRole(adminUser, roleName);
      142 |
    > 143 |             expect(roleRepoMock.delete).toHaveBeenCalledWith(roleName);
          |                                         ^
      144 |             expect(assignmentRepoMock.removeAllAssignmentsForRole).toHaveBeenCalledWith(roleName);
      145 |         });
      146 |

      at tests/unit/application/services/role.admin.service.spec.ts:143:41
      at fulfilled (tests/unit/application/services/role.admin.service.spec.ts:5:58)

  ΓùÅ RoleAdminService ΓÇ║ assignPermissionToRole ΓÇ║ should assign a permission to a role successfully

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "test-role", "test-permission"
    Received: "test-tenant", "test-role", "test-permission"

    Number of calls: 1

      172 |             await service.assignPermissionToRole(adminUser, roleName, permissionName);
      173 |
    > 174 |             expect(assignmentRepoMock.assignPermissionToRole).toHaveBeenCalledWith(roleName, permissionName);
          |                                                               ^
      175 |         });
      176 |
      177 |         it('should throw RoleNotFoundError if role does not exist', async () => {

      at tests/unit/application/services/role.admin.service.spec.ts:174:63
      at fulfilled (tests/unit/application/services/role.admin.service.spec.ts:5:58)

  ΓùÅ RoleAdminService ΓÇ║ removePermissionFromRole ΓÇ║ should remove a permission from a role successfully

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "test-role", "test-permission"
    Received: "test-tenant", "test-role", "test-permission"

    Number of calls: 1

      197 |             await service.removePermissionFromRole(adminUser, roleName, permissionName);
      198 |
    > 199 |             expect(assignmentRepoMock.removePermissionFromRole).toHaveBeenCalledWith(roleName, permissionName);
          |                                                                 ^
      200 |         });
      201 |
      202 |         it('should throw AssignmentError on failure', async () => {

      at tests/unit/application/services/role.admin.service.spec.ts:199:65
      at fulfilled (tests/unit/application/services/role.admin.service.spec.ts:5:58)

FAIL tests/debug/dynamodb.debug.spec.ts
  ΓùÅ Console

    console.log
      Table TestAuthzTable created successfully.

      at tests/helpers/dynamodb.helper.ts:37:17

    console.error
      Error deleting table TestAuthzTable: ResourceInUseException: Attempt to change a resource which is still in use: Table is being created: TestAuthzTable
          at de_ResourceInUseExceptionRes (E:\NodeJS\PBAC_Auth\user-management-service\node_modules\.pnpm\@aws-sdk+client-dynamodb@3.879.0\node_modules\@aws-sdk\client-dynamodb\dist-cjs\index.js:2603:21)
          at de_CommandError (E:\NodeJS\PBAC_Auth\user-management-service\node_modules\.pnpm\@aws-sdk+client-dynamodb@3.879.0\node_modules\@aws-sdk\client-dynamodb\dist-cjs\index.js:2296:19)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at E:\NodeJS\PBAC_Auth\user-management-service\node_modules\.pnpm\@smithy+middleware-serde@4.0.9\node_modules\@smithy\middleware-serde\dist-cjs\index.js:36:20
          at E:\NodeJS\PBAC_Auth\user-management-service\node_modules\.pnpm\@smithy+core@3.9.0\node_modules\@smithy\core\dist-cjs\index.js:193:18
          at E:\NodeJS\PBAC_Auth\user-management-service\node_modules\.pnpm\@smithy+middleware-retry@4.1.20\node_modules\@smithy\middleware-retry\dist-cjs\index.js:320:38
          at E:\NodeJS\PBAC_Auth\user-management-service\node_modules\.pnpm\@aws-sdk+middleware-logger@3.876.0\node_modules\@aws-sdk\middleware-logger\dist-cjs\index.js:33:22 {
        '$fault': 'client',
        '$metadata': {
          httpStatusCode: 400,
          requestId: '8HH88BH77KD38FOPLI2ON6PUUNVV4KQNSO5AEMVJF66Q9ASUAAJG',
          extendedRequestId: undefined,
          cfId: undefined,
          attempts: 1,
          totalRetryDelay: 0
        },
        __type: 'com.amazonaws.dynamodb.v20120810#ResourceInUseException'
      }

      58 |             console.log(`Table ${tableName} not found.`);
      59 |         } else {
    > 60 |             console.error(`Error deleting table ${tableName}:`, error);
         |                     ^
      61 |             throw error;
      62 |         }
      63 |     }

      at tests/helpers/dynamodb.helper.ts:60:21
          at Generator.throw (<anonymous>)
      at rejected (tests/helpers/dynamodb.helper.ts:6:65)

  ΓùÅ DynamoDB Table Creation Debug Test ΓÇ║ should resolve DynamoDBProvider and list tables

    Attempted to resolve unregistered dependency token: "Symbol(DynamoDBProvider)"

      43 |
      44 |     it('should resolve DynamoDBProvider and list tables', async () => {
    > 45 |         const dbProvider = persistenceContainer.resolve<DynamoDBProvider>(TYPES.DynamoDBProvider);
         |                                                 ^
      46 |         const client = dbProvider.client;
      47 |         const command = new ListTablesCommand({});
      48 |         const result = await client.send(command);

      at InternalDependencyContainer.resolve (node_modules/.pnpm/tsyringe@4.10.0/node_modules/tsyringe/dist/cjs/dependency-container.js:108:19)
      at tests/debug/dynamodb.debug.spec.ts:45:49
      at tests/debug/dynamodb.debug.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/debug/dynamodb.debug.spec.ts:4:12)
      at Object.<anonymous> (tests/debug/dynamodb.debug.spec.ts:44:70)

  ΓùÅ DynamoDB Table Creation Debug Test ΓÇ║ should create a role using DynamoRoleRepository

    expect(received).resolves.not.toThrow()

    Received promise rejected instead of resolved
    Rejected to value: [DatabaseError: Failed to create role: User: arn:aws:iam::410844822442:user/PBAC-Admin is not authorized to perform: dynamodb:PutItem on resource: arn:aws:dynamodb:ap-south-1:410844822442:table/TestAuthzTable because no identity-based policy allows the dynamodb:PutItem action]

      53 |         const roleRepository = persistenceContainer.resolve<IRoleRepository>(TYPES.RoleRepository);
      54 |         const testRole = new Role('test-tenant', 'debug-role', 'Debug Role Description');
    > 55 |         await expect(roleRepository.create(testRole)).resolves.not.toThrow();
         |               ^
      56 |
      57 |         // Verify by fetching
      58 |         const found = await roleRepository.findByName('test-tenant', testRole.roleName);

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at tests/debug/dynamodb.debug.spec.ts:55:15
      at tests/debug/dynamodb.debug.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/debug/dynamodb.debug.spec.ts:4:12)
      at Object.<anonymous> (tests/debug/dynamodb.debug.spec.ts:52:70)


  ΓùÅ Test suite failed to run

    ResourceInUseException: Attempt to change a resource which is still in use: Table is being created: TestAuthzTable

      at de_ResourceInUseExceptionRes (node_modules/.pnpm/@aws-sdk+client-dynamodb@3.879.0/node_modules/@aws-sdk/client-dynamodb/dist-cjs/index.js:2603:21)
      at de_CommandError (node_modules/.pnpm/@aws-sdk+client-dynamodb@3.879.0/node_modules/@aws-sdk/client-dynamodb/dist-cjs/index.js:2296:19)
      at node_modules/.pnpm/@smithy+middleware-serde@4.0.9/node_modules/@smithy/middleware-serde/dist-cjs/index.js:36:20
      at node_modules/.pnpm/@smithy+core@3.9.0/node_modules/@smithy/core/dist-cjs/index.js:193:18
      at node_modules/.pnpm/@smithy+middleware-retry@4.1.20/node_modules/@smithy/middleware-retry/dist-cjs/index.js:320:38
      at node_modules/.pnpm/@aws-sdk+middleware-logger@3.876.0/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js:33:22

FAIL tests/integration/routes/policy.admin.routes.integration.spec.ts (47.516 s)
  ΓùÅ Console

    console.info
      [WinstonLogger] Logger initialized with level "info" in "test" environment.

      at WinstonLogger.initializeLogger (src/infrastructure/logging/WinstonLogger.ts:68:17)
          at Array.map (<anonymous>)

    console.log
      {"level":"warn","message":"CORS_ORIGIN is set to \"*\" in a non-development environment. This is insecure!","metadata":{},"timestamp":"2026-02-23T10:54:26.042Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"CORS configured for origin: *","metadata":{},"timestamp":"2026-02-23T10:54:26.057Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"Application setup complete for environment: test","metadata":{},"timestamp":"2026-02-23T10:54:26.066Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> POST /api/admin/policies","metadata":{"correlationId":"fc2c4532-8f15-44d0-b796-2d62ad1e4633","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"POST","requestId":"fc2c4532-8f15-44d0-b796-2d62ad1e4633","url":"/api/admin/policies","userId":"anonymous"},"timestamp":"2026-02-23T10:54:26.320Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - fc2c4532-8f15-44d0-b796-2d62ad1e4633] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:54:26.369Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: {
        policyName: 'policy-test-1771844058029',
        policyDefinition: 'package test\ndefault allow = false',
        policyLanguage: 'rego',
        description: 'Test Policy Description'
      }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'policyName', 'policyDefinition', 'policyLanguage', 'description' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"policyName":"policy-test-1771844058029","policyDefinition":"package test\ndefault allow = false","policyLanguage":"rego","description":"Test Policy Description"}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      {"level":"info","message":"<-- POST /api/admin/policies 201 89.459ms","metadata":{"contentLength":"175","correlationId":"fc2c4532-8f15-44d0-b796-2d62ad1e4633","durationMs":89.459,"eventType":"finish","requestId":"fc2c4532-8f15-44d0-b796-2d62ad1e4633","statusCode":201,"userId":"anonymous"},"timestamp":"2026-02-23T10:54:26.409Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","metadata":{"correlationId":"b57821ff-2ed7-4453-829b-84fb57adad2f","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"b57821ff-2ed7-4453-829b-84fb57adad2f","url":"/api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","userId":"anonymous"},"timestamp":"2026-02-23T10:54:26.585Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - b57821ff-2ed7-4453-829b-84fb57adad2f] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:54:26.622Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [b57821ff-2ed7-4453-829b-84fb57adad2f]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:54:26.639Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"b57821ff-2ed7-4453-829b-84fb57adad2f","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","requestId":"b57821ff-2ed7-4453-829b-84fb57adad2f","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:26.645Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef 500 67.791ms","metadata":{"error":{"contentLength":"3814","correlationId":"b57821ff-2ed7-4453-829b-84fb57adad2f","durationMs":67.791,"eventType":"finish","requestId":"b57821ff-2ed7-4453-829b-84fb57adad2f","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:26.653Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","metadata":{"correlationId":"0fac8d43-626a-49ae-ae35-7e5c5ac041be","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"0fac8d43-626a-49ae-ae35-7e5c5ac041be","url":"/api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","userId":"anonymous"},"timestamp":"2026-02-23T10:54:26.687Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 0fac8d43-626a-49ae-ae35-7e5c5ac041be] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:54:26.692Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [0fac8d43-626a-49ae-ae35-7e5c5ac041be]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:54:26.702Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"0fac8d43-626a-49ae-ae35-7e5c5ac041be","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","requestId":"0fac8d43-626a-49ae-ae35-7e5c5ac041be","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:26.705Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef 500 22.598ms","metadata":{"error":{"contentLength":"3814","correlationId":"0fac8d43-626a-49ae-ae35-7e5c5ac041be","durationMs":22.598,"eventType":"finish","requestId":"0fac8d43-626a-49ae-ae35-7e5c5ac041be","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:26.709Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","metadata":{"correlationId":"99581b5e-1379-4938-9ad1-be1e376da908","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"99581b5e-1379-4938-9ad1-be1e376da908","url":"/api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","userId":"anonymous"},"timestamp":"2026-02-23T10:54:26.757Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 99581b5e-1379-4938-9ad1-be1e376da908] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:54:26.763Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [99581b5e-1379-4938-9ad1-be1e376da908]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:54:26.769Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"99581b5e-1379-4938-9ad1-be1e376da908","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","requestId":"99581b5e-1379-4938-9ad1-be1e376da908","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:26.774Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef 500 23.360ms","metadata":{"error":{"contentLength":"3814","correlationId":"99581b5e-1379-4938-9ad1-be1e376da908","durationMs":23.36,"eventType":"finish","requestId":"99581b5e-1379-4938-9ad1-be1e376da908","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:26.780Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/policies/not-a-uuid","metadata":{"correlationId":"e8375da4-f69d-4c81-8c05-f792c2832c7c","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"e8375da4-f69d-4c81-8c05-f792c2832c7c","url":"/api/admin/policies/not-a-uuid","userId":"anonymous"},"timestamp":"2026-02-23T10:54:26.838Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - e8375da4-f69d-4c81-8c05-f792c2832c7c] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:54:26.842Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [e8375da4-f69d-4c81-8c05-f792c2832c7c]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:54:26.847Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"e8375da4-f69d-4c81-8c05-f792c2832c7c","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/policies/not-a-uuid","requestId":"e8375da4-f69d-4c81-8c05-f792c2832c7c","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:26.851Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/policies/not-a-uuid 500 18.261ms","metadata":{"error":{"contentLength":"3814","correlationId":"e8375da4-f69d-4c81-8c05-f792c2832c7c","durationMs":18.261,"eventType":"finish","requestId":"e8375da4-f69d-4c81-8c05-f792c2832c7c","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:26.856Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","metadata":{"correlationId":"ae64b398-9a70-46ed-82ef-ad6adc18c3a2","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"ae64b398-9a70-46ed-82ef-ad6adc18c3a2","url":"/api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","userId":"anonymous"},"timestamp":"2026-02-23T10:54:26.884Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - ae64b398-9a70-46ed-82ef-ad6adc18c3a2] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:54:26.888Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [ae64b398-9a70-46ed-82ef-ad6adc18c3a2]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:54:26.893Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"ae64b398-9a70-46ed-82ef-ad6adc18c3a2","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","requestId":"ae64b398-9a70-46ed-82ef-ad6adc18c3a2","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:26.902Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef 500 21.679ms","metadata":{"error":{"contentLength":"3814","correlationId":"ae64b398-9a70-46ed-82ef-ad6adc18c3a2","durationMs":21.679,"eventType":"finish","requestId":"ae64b398-9a70-46ed-82ef-ad6adc18c3a2","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:26.906Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","metadata":{"correlationId":"175f9cd1-956c-4a62-a80d-b4b8149f70f7","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"175f9cd1-956c-4a62-a80d-b4b8149f70f7","url":"/api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","userId":"anonymous"},"timestamp":"2026-02-23T10:54:26.939Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Authentication: Missing or invalid Authorization header.","metadata":{},"timestamp":"2026-02-23T10:54:26.945Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Client error processing request: Authorization header missing or invalid.","metadata":{"correlationId":"175f9cd1-956c-4a62-a80d-b4b8149f70f7","errorMessage":"Authorization header missing or invalid.","errorName":"AuthenticationError","isOperational":true,"method":"GET","path":"/api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","requestId":"175f9cd1-956c-4a62-a80d-b4b8149f70f7","stack":"AuthenticationError: Authorization header missing or invalid.\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:32:25\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:27:70\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestLogger.middleware.ts:84:9\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:32\n    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)\n    at middleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:13)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at addRequestId (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestId.middleware.ts:33:5)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at urlencodedParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\urlencoded.js:68:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at jsonParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\json.js:100:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at requestMetricsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestMetrics.middleware.ts:26:3)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at cors (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:188:7)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:224:17\n    at originCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:214:15)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:531:6)\n    at xXssProtectionMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:311:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPoweredByMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:304:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPermittedCrossDomainPoliciesMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:297:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xFrameOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:281:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDownloadOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:261:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDnsPrefetchControlMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:254:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xContentTypeOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:246:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at strictTransportSecurityMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:239:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at referrerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:207:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at originAgentClusterMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:182:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginResourcePolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:175:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginOpenerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:159:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at contentSecurityPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:124:4)","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T10:54:26.969Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"<-- GET /api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef 401 35.279ms","metadata":{"contentLength":"151","correlationId":"175f9cd1-956c-4a62-a80d-b4b8149f70f7","durationMs":35.279,"eventType":"finish","requestId":"175f9cd1-956c-4a62-a80d-b4b8149f70f7","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T10:54:27.032Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/policies","metadata":{"correlationId":"232bf703-4d7b-4473-b220-190c95758c74","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"232bf703-4d7b-4473-b220-190c95758c74","url":"/api/admin/policies","userId":"anonymous"},"timestamp":"2026-02-23T10:54:27.130Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 232bf703-4d7b-4473-b220-190c95758c74] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:54:27.134Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [232bf703-4d7b-4473-b220-190c95758c74]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:54:27.138Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"232bf703-4d7b-4473-b220-190c95758c74","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/policies","requestId":"232bf703-4d7b-4473-b220-190c95758c74","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:27.142Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/policies 500 17.837ms","metadata":{"error":{"contentLength":"3541","correlationId":"232bf703-4d7b-4473-b220-190c95758c74","durationMs":17.837,"eventType":"finish","requestId":"232bf703-4d7b-4473-b220-190c95758c74","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:27.148Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/policies?limit=15&language=rego&startKey=opaqueStartKey","metadata":{"correlationId":"5f7bd459-f1eb-44db-b591-8b6620d4655d","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"5f7bd459-f1eb-44db-b591-8b6620d4655d","url":"/api/admin/policies?limit=15&language=rego&startKey=opaqueStartKey","userId":"anonymous"},"timestamp":"2026-02-23T10:54:27.183Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 5f7bd459-f1eb-44db-b591-8b6620d4655d] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:54:27.190Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [5f7bd459-f1eb-44db-b591-8b6620d4655d]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:54:27.194Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"5f7bd459-f1eb-44db-b591-8b6620d4655d","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/policies?limit=15&language=rego&startKey=opaqueStartKey","requestId":"5f7bd459-f1eb-44db-b591-8b6620d4655d","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:27.198Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/policies?limit=15&language=rego&startKey=opaqueStartKey 500 20.133ms","metadata":{"error":{"contentLength":"3541","correlationId":"5f7bd459-f1eb-44db-b591-8b6620d4655d","durationMs":20.133,"eventType":"finish","requestId":"5f7bd459-f1eb-44db-b591-8b6620d4655d","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:27.203Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/policies","metadata":{"correlationId":"dac1432e-8290-4e4f-9405-1b8a9a95da48","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"dac1432e-8290-4e4f-9405-1b8a9a95da48","url":"/api/admin/policies","userId":"anonymous"},"timestamp":"2026-02-23T10:54:27.229Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - dac1432e-8290-4e4f-9405-1b8a9a95da48] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:54:27.233Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [dac1432e-8290-4e4f-9405-1b8a9a95da48]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:54:27.238Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"dac1432e-8290-4e4f-9405-1b8a9a95da48","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/policies","requestId":"dac1432e-8290-4e4f-9405-1b8a9a95da48","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:27.242Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/policies 500 17.974ms","metadata":{"error":{"contentLength":"3541","correlationId":"dac1432e-8290-4e4f-9405-1b8a9a95da48","durationMs":17.974,"eventType":"finish","requestId":"dac1432e-8290-4e4f-9405-1b8a9a95da48","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:27.246Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/policies","metadata":{"correlationId":"9ce6b843-942c-46cc-b520-4209e326f753","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"9ce6b843-942c-46cc-b520-4209e326f753","url":"/api/admin/policies","userId":"anonymous"},"timestamp":"2026-02-23T10:54:27.284Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Authentication: Missing or invalid Authorization header.","metadata":{},"timestamp":"2026-02-23T10:54:27.288Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Client error processing request: Authorization header missing or invalid.","metadata":{"correlationId":"9ce6b843-942c-46cc-b520-4209e326f753","errorMessage":"Authorization header missing or invalid.","errorName":"AuthenticationError","isOperational":true,"method":"GET","path":"/api/admin/policies","requestId":"9ce6b843-942c-46cc-b520-4209e326f753","stack":"AuthenticationError: Authorization header missing or invalid.\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:32:25\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:27:70\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestLogger.middleware.ts:84:9\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:32\n    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)\n    at middleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:13)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at addRequestId (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestId.middleware.ts:33:5)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at urlencodedParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\urlencoded.js:68:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at jsonParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\json.js:100:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at requestMetricsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestMetrics.middleware.ts:26:3)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at cors (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:188:7)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:224:17\n    at originCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:214:15)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:531:6)\n    at xXssProtectionMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:311:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPoweredByMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:304:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPermittedCrossDomainPoliciesMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:297:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xFrameOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:281:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDownloadOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:261:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDnsPrefetchControlMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:254:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xContentTypeOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:246:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at strictTransportSecurityMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:239:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at referrerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:207:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at originAgentClusterMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:182:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginResourcePolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:175:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginOpenerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:159:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at contentSecurityPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:124:4)","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T10:54:27.298Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"<-- GET /api/admin/policies 401 21.411ms","metadata":{"contentLength":"151","correlationId":"9ce6b843-942c-46cc-b520-4209e326f753","durationMs":21.411,"eventType":"finish","requestId":"9ce6b843-942c-46cc-b520-4209e326f753","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T10:54:27.305Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> PUT /api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","metadata":{"correlationId":"ab12c834-28a8-46b7-b2df-decc6e597e35","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"PUT","requestId":"ab12c834-28a8-46b7-b2df-decc6e597e35","url":"/api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","userId":"anonymous"},"timestamp":"2026-02-23T10:54:27.338Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - ab12c834-28a8-46b7-b2df-decc6e597e35] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:54:27.341Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: { description: 'Updated Integration Description', version: 2 }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'description', 'version' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"description":"Updated Integration Description","version":2}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      {"level":"info","message":"<-- PUT /api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef 200 14.818ms","metadata":{"contentLength":"309","correlationId":"ab12c834-28a8-46b7-b2df-decc6e597e35","durationMs":14.818,"eventType":"finish","requestId":"ab12c834-28a8-46b7-b2df-decc6e597e35","statusCode":200,"userId":"anonymous"},"timestamp":"2026-02-23T10:54:27.353Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> PUT /api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","metadata":{"correlationId":"ea52a625-6325-4e36-ac74-b18a8b1cbc50","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"PUT","requestId":"ea52a625-6325-4e36-ac74-b18a8b1cbc50","url":"/api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","userId":"anonymous"},"timestamp":"2026-02-23T10:54:27.403Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - ea52a625-6325-4e36-ac74-b18a8b1cbc50] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:54:27.406Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: { description: 'Updated Integration Description', version: 2 }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'description', 'version' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"description":"Updated Integration Description","version":2}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      {"level":"warn","message":"Client error processing request: Policy with identifier 'a1b2c3d4-e5f6-7890-1234-567890abcdef' not found.","metadata":{"correlationId":"ea52a625-6325-4e36-ac74-b18a8b1cbc50","errorMessage":"Policy with identifier 'a1b2c3d4-e5f6-7890-1234-567890abcdef' not found.","errorName":"PolicyNotFoundError","isOperational":true,"method":"PUT","path":"/api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","requestId":"ea52a625-6325-4e36-ac74-b18a8b1cbc50","stack":"PolicyNotFoundError: Policy with identifier 'a1b2c3d4-e5f6-7890-1234-567890abcdef' not found.\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:257:35\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:4:12)\n    at Object.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:255:93)\n    at Promise.then.completed (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\testWorker.js:108:12)","statusCode":404,"userId":"anonymous"},"timestamp":"2026-02-23T10:54:27.418Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"<-- PUT /api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef 404 18.054ms","metadata":{"contentLength":"183","correlationId":"ea52a625-6325-4e36-ac74-b18a8b1cbc50","durationMs":18.054,"eventType":"finish","requestId":"ea52a625-6325-4e36-ac74-b18a8b1cbc50","statusCode":404,"userId":"anonymous"},"timestamp":"2026-02-23T10:54:27.421Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> PUT /api/admin/policies/invalid-uuid","metadata":{"correlationId":"aed2d2a0-48fa-4365-b5e6-d1b17f97ad8b","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"PUT","requestId":"aed2d2a0-48fa-4365-b5e6-d1b17f97ad8b","url":"/api/admin/policies/invalid-uuid","userId":"anonymous"},"timestamp":"2026-02-23T10:54:27.453Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - aed2d2a0-48fa-4365-b5e6-d1b17f97ad8b] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:54:27.455Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: { description: 'Updated Integration Description', version: 2 }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'description', 'version' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"description":"Updated Integration Description","version":2}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      {"level":"warn","message":"Request validation failed [aed2d2a0-48fa-4365-b5e6-d1b17f97ad8b]:","metadata":{"errors":{"policyId":"Policy ID must be a valid UUID"}},"timestamp":"2026-02-23T10:54:27.465Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)
          at Generator.throw (<anonymous>)

    console.log
      {"level":"warn","message":"Client error processing request: Input validation failed","metadata":{"correlationId":"aed2d2a0-48fa-4365-b5e6-d1b17f97ad8b","details":{"policyId":"Policy ID must be a valid UUID"},"errorMessage":"Input validation failed","errorName":"ValidationError","isOperational":true,"method":"PUT","path":"/api/admin/policies/invalid-uuid","requestId":"aed2d2a0-48fa-4365-b5e6-d1b17f97ad8b","stack":"ValidationError: Input validation failed\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:57:41\n    at Generator.throw (<anonymous>)\n    at rejected (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:6:65)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":400,"userId":"anonymous"},"timestamp":"2026-02-23T10:54:27.467Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"<-- PUT /api/admin/policies/invalid-uuid 400 17.940ms","metadata":{"contentLength":"186","correlationId":"aed2d2a0-48fa-4365-b5e6-d1b17f97ad8b","durationMs":17.94,"eventType":"finish","requestId":"aed2d2a0-48fa-4365-b5e6-d1b17f97ad8b","statusCode":400,"userId":"anonymous"},"timestamp":"2026-02-23T10:54:27.471Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> PUT /api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","metadata":{"correlationId":"bbe15b4a-f0bb-4dda-984c-0b9ac57f42ff","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"PUT","requestId":"bbe15b4a-f0bb-4dda-984c-0b9ac57f42ff","url":"/api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","userId":"anonymous"},"timestamp":"2026-02-23T10:54:27.491Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - bbe15b4a-f0bb-4dda-984c-0b9ac57f42ff] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:54:27.495Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: {}

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): []

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      {"level":"warn","message":"Request validation failed [bbe15b4a-f0bb-4dda-984c-0b9ac57f42ff]:","metadata":{"errors":{"":"At least one field must be provided for update."}},"timestamp":"2026-02-23T10:54:27.501Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)
          at Generator.throw (<anonymous>)

    console.log
      {"level":"warn","message":"Client error processing request: Input validation failed","metadata":{"correlationId":"bbe15b4a-f0bb-4dda-984c-0b9ac57f42ff","details":{"":"At least one field must be provided for update."},"errorMessage":"Input validation failed","errorName":"ValidationError","isOperational":true,"method":"PUT","path":"/api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","requestId":"bbe15b4a-f0bb-4dda-984c-0b9ac57f42ff","stack":"ValidationError: Input validation failed\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:57:41\n    at Generator.throw (<anonymous>)\n    at rejected (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:6:65)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":400,"userId":"anonymous"},"timestamp":"2026-02-23T10:54:27.503Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"<-- PUT /api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef 400 15.161ms","metadata":{"contentLength":"195","correlationId":"bbe15b4a-f0bb-4dda-984c-0b9ac57f42ff","durationMs":15.161,"eventType":"finish","requestId":"bbe15b4a-f0bb-4dda-984c-0b9ac57f42ff","statusCode":400,"userId":"anonymous"},"timestamp":"2026-02-23T10:54:27.506Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> PUT /api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","metadata":{"correlationId":"5fb33326-51fe-403c-9393-3e13bdfac5fc","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"PUT","requestId":"5fb33326-51fe-403c-9393-3e13bdfac5fc","url":"/api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","userId":"anonymous"},"timestamp":"2026-02-23T10:54:27.527Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 5fb33326-51fe-403c-9393-3e13bdfac5fc] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:54:27.530Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: { description: 'Updated Integration Description', version: 2 }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'description', 'version' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"description":"Updated Integration Description","version":2}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      {"level":"error","message":"[PolicyAdminCtrl] Failed to update policy a1b2c3d4-e5f6-7890-1234-567890abcdef","metadata":{"error":{"adminUserId":"test-admin-id-123","error":{}}},"timestamp":"2026-02-23T10:54:27.535Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)
          at Generator.throw (<anonymous>)

    console.log
      {"level":"error","message":"Server error processing request: Update policy internal failure","metadata":{"error":{"correlationId":"5fb33326-51fe-403c-9393-3e13bdfac5fc","errorMessage":"Update policy internal failure","errorName":"Error","isOperational":false,"method":"PUT","path":"/api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","requestId":"5fb33326-51fe-403c-9393-3e13bdfac5fc","stack":"Error: Update policy internal failure\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:286:35\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:4:12)\n    at Object.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:285:75)\n    at Promise.then.completed (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\testWorker.js:108:12)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:27.540Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- PUT /api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef 500 16.438ms","metadata":{"error":{"contentLength":"3156","correlationId":"5fb33326-51fe-403c-9393-3e13bdfac5fc","durationMs":16.438,"eventType":"finish","requestId":"5fb33326-51fe-403c-9393-3e13bdfac5fc","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:27.544Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> PUT /api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","metadata":{"correlationId":"94c9420f-f002-4588-a237-a13ca92ce2ac","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"PUT","requestId":"94c9420f-f002-4588-a237-a13ca92ce2ac","url":"/api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","userId":"anonymous"},"timestamp":"2026-02-23T10:54:27.574Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Authentication: Missing or invalid Authorization header.","metadata":{},"timestamp":"2026-02-23T10:54:27.576Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Client error processing request: Authorization header missing or invalid.","metadata":{"correlationId":"94c9420f-f002-4588-a237-a13ca92ce2ac","errorMessage":"Authorization header missing or invalid.","errorName":"AuthenticationError","isOperational":true,"method":"PUT","path":"/api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","requestId":"94c9420f-f002-4588-a237-a13ca92ce2ac","stack":"AuthenticationError: Authorization header missing or invalid.\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:32:25\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:27:70\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestLogger.middleware.ts:84:9\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:32\n    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)\n    at middleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:13)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at addRequestId (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestId.middleware.ts:33:5)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at urlencodedParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\urlencoded.js:57:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\read.js:132:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:214:14)\n    at invokeCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\raw-body@3.0.0\\node_modules\\raw-body\\index.js:238:16)\n    at done (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\raw-body@3.0.0\\node_modules\\raw-body\\index.js:227:7)\n    at IncomingMessage.onEnd (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\raw-body@3.0.0\\node_modules\\raw-body\\index.js:287:7)\n    at IncomingMessage.emit (node:events:519:28)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at processTicksAndRejections (node:internal/process/task_queues:90:21)","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T10:54:27.584Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"<-- PUT /api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef 401 13.769ms","metadata":{"contentLength":"151","correlationId":"94c9420f-f002-4588-a237-a13ca92ce2ac","durationMs":13.769,"eventType":"finish","requestId":"94c9420f-f002-4588-a237-a13ca92ce2ac","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T10:54:27.588Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> DELETE /api/admin/policies/b1c2d3e4-f5a6-7890-1234-567890abcdef","metadata":{"correlationId":"5d9afefc-4afb-43d0-8914-be60a1685d8c","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"DELETE","requestId":"5d9afefc-4afb-43d0-8914-be60a1685d8c","url":"/api/admin/policies/b1c2d3e4-f5a6-7890-1234-567890abcdef","userId":"anonymous"},"timestamp":"2026-02-23T10:54:27.610Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 5d9afefc-4afb-43d0-8914-be60a1685d8c] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:54:27.614Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [5d9afefc-4afb-43d0-8914-be60a1685d8c]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:54:27.618Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"5d9afefc-4afb-43d0-8914-be60a1685d8c","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"DELETE","path":"/api/admin/policies/b1c2d3e4-f5a6-7890-1234-567890abcdef","requestId":"5d9afefc-4afb-43d0-8914-be60a1685d8c","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:27.620Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- DELETE /api/admin/policies/b1c2d3e4-f5a6-7890-1234-567890abcdef 500 13.837ms","metadata":{"error":{"contentLength":"3814","correlationId":"5d9afefc-4afb-43d0-8914-be60a1685d8c","durationMs":13.837,"eventType":"finish","requestId":"5d9afefc-4afb-43d0-8914-be60a1685d8c","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:27.624Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> DELETE /api/admin/policies/b1c2d3e4-f5a6-7890-1234-567890abcdef","metadata":{"correlationId":"3f61199c-2358-4b8a-aaf8-773078df9e70","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"DELETE","requestId":"3f61199c-2358-4b8a-aaf8-773078df9e70","url":"/api/admin/policies/b1c2d3e4-f5a6-7890-1234-567890abcdef","userId":"anonymous"},"timestamp":"2026-02-23T10:54:27.651Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 3f61199c-2358-4b8a-aaf8-773078df9e70] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:54:27.655Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [3f61199c-2358-4b8a-aaf8-773078df9e70]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:54:27.659Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"3f61199c-2358-4b8a-aaf8-773078df9e70","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"DELETE","path":"/api/admin/policies/b1c2d3e4-f5a6-7890-1234-567890abcdef","requestId":"3f61199c-2358-4b8a-aaf8-773078df9e70","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:27.662Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- DELETE /api/admin/policies/b1c2d3e4-f5a6-7890-1234-567890abcdef 500 14.598ms","metadata":{"error":{"contentLength":"3814","correlationId":"3f61199c-2358-4b8a-aaf8-773078df9e70","durationMs":14.598,"eventType":"finish","requestId":"3f61199c-2358-4b8a-aaf8-773078df9e70","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:27.666Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> DELETE /api/admin/policies/invalid-uuid","metadata":{"correlationId":"2075dd40-db19-46d3-9e88-fe1b372dbc9c","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"DELETE","requestId":"2075dd40-db19-46d3-9e88-fe1b372dbc9c","url":"/api/admin/policies/invalid-uuid","userId":"anonymous"},"timestamp":"2026-02-23T10:54:27.691Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 2075dd40-db19-46d3-9e88-fe1b372dbc9c] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:54:27.695Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [2075dd40-db19-46d3-9e88-fe1b372dbc9c]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:54:27.699Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"2075dd40-db19-46d3-9e88-fe1b372dbc9c","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"DELETE","path":"/api/admin/policies/invalid-uuid","requestId":"2075dd40-db19-46d3-9e88-fe1b372dbc9c","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:27.702Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- DELETE /api/admin/policies/invalid-uuid 500 14.548ms","metadata":{"error":{"contentLength":"3814","correlationId":"2075dd40-db19-46d3-9e88-fe1b372dbc9c","durationMs":14.548,"eventType":"finish","requestId":"2075dd40-db19-46d3-9e88-fe1b372dbc9c","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:27.705Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> DELETE /api/admin/policies/b1c2d3e4-f5a6-7890-1234-567890abcdef","metadata":{"correlationId":"bdacf8e7-9d34-4c33-8a21-4d2e818766d7","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"DELETE","requestId":"bdacf8e7-9d34-4c33-8a21-4d2e818766d7","url":"/api/admin/policies/b1c2d3e4-f5a6-7890-1234-567890abcdef","userId":"anonymous"},"timestamp":"2026-02-23T10:54:27.730Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - bdacf8e7-9d34-4c33-8a21-4d2e818766d7] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:54:27.734Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [bdacf8e7-9d34-4c33-8a21-4d2e818766d7]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:54:27.738Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"bdacf8e7-9d34-4c33-8a21-4d2e818766d7","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"DELETE","path":"/api/admin/policies/b1c2d3e4-f5a6-7890-1234-567890abcdef","requestId":"bdacf8e7-9d34-4c33-8a21-4d2e818766d7","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:27.741Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- DELETE /api/admin/policies/b1c2d3e4-f5a6-7890-1234-567890abcdef 500 17.843ms","metadata":{"error":{"contentLength":"3814","correlationId":"bdacf8e7-9d34-4c33-8a21-4d2e818766d7","durationMs":17.843,"eventType":"finish","requestId":"bdacf8e7-9d34-4c33-8a21-4d2e818766d7","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:27.748Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> DELETE /api/admin/policies/b1c2d3e4-f5a6-7890-1234-567890abcdef","metadata":{"correlationId":"3affe700-b063-45a2-b2c5-e91eb43f0e9b","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"DELETE","requestId":"3affe700-b063-45a2-b2c5-e91eb43f0e9b","url":"/api/admin/policies/b1c2d3e4-f5a6-7890-1234-567890abcdef","userId":"anonymous"},"timestamp":"2026-02-23T10:54:27.774Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Authentication: Missing or invalid Authorization header.","metadata":{},"timestamp":"2026-02-23T10:54:27.778Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Client error processing request: Authorization header missing or invalid.","metadata":{"correlationId":"3affe700-b063-45a2-b2c5-e91eb43f0e9b","errorMessage":"Authorization header missing or invalid.","errorName":"AuthenticationError","isOperational":true,"method":"DELETE","path":"/api/admin/policies/b1c2d3e4-f5a6-7890-1234-567890abcdef","requestId":"3affe700-b063-45a2-b2c5-e91eb43f0e9b","stack":"AuthenticationError: Authorization header missing or invalid.\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:32:25\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:27:70\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestLogger.middleware.ts:84:9\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:32\n    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)\n    at middleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:13)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at addRequestId (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestId.middleware.ts:33:5)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at urlencodedParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\urlencoded.js:68:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at jsonParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\json.js:100:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at requestMetricsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestMetrics.middleware.ts:26:3)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at cors (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:188:7)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:224:17\n    at originCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:214:15)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:531:6)\n    at xXssProtectionMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:311:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPoweredByMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:304:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPermittedCrossDomainPoliciesMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:297:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xFrameOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:281:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDownloadOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:261:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDnsPrefetchControlMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:254:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xContentTypeOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:246:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at strictTransportSecurityMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:239:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at referrerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:207:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at originAgentClusterMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:182:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginResourcePolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:175:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginOpenerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:159:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at contentSecurityPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:124:4)","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T10:54:27.786Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"<-- DELETE /api/admin/policies/b1c2d3e4-f5a6-7890-1234-567890abcdef 401 15.659ms","metadata":{"contentLength":"151","correlationId":"3affe700-b063-45a2-b2c5-e91eb43f0e9b","durationMs":15.659,"eventType":"finish","requestId":"3affe700-b063-45a2-b2c5-e91eb43f0e9b","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T10:54:27.789Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/policies/c1d2e3f4-a5b6-7890-1234-567890abcdef/versions/1","metadata":{"correlationId":"30b3b24b-6f2f-43ff-ab10-5d62a419a067","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"30b3b24b-6f2f-43ff-ab10-5d62a419a067","url":"/api/admin/policies/c1d2e3f4-a5b6-7890-1234-567890abcdef/versions/1","userId":"anonymous"},"timestamp":"2026-02-23T10:54:27.814Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 30b3b24b-6f2f-43ff-ab10-5d62a419a067] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:54:27.818Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [30b3b24b-6f2f-43ff-ab10-5d62a419a067]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:54:27.822Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"30b3b24b-6f2f-43ff-ab10-5d62a419a067","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/policies/c1d2e3f4-a5b6-7890-1234-567890abcdef/versions/1","requestId":"30b3b24b-6f2f-43ff-ab10-5d62a419a067","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:27.824Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/policies/c1d2e3f4-a5b6-7890-1234-567890abcdef/versions/1 500 14.425ms","metadata":{"error":{"contentLength":"3951","correlationId":"30b3b24b-6f2f-43ff-ab10-5d62a419a067","durationMs":14.425,"eventType":"finish","requestId":"30b3b24b-6f2f-43ff-ab10-5d62a419a067","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:27.828Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/policies/c1d2e3f4-a5b6-7890-1234-567890abcdef/versions/1","metadata":{"correlationId":"a15e5f1c-9a74-4544-a23a-c5809def7f0d","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"a15e5f1c-9a74-4544-a23a-c5809def7f0d","url":"/api/admin/policies/c1d2e3f4-a5b6-7890-1234-567890abcdef/versions/1","userId":"anonymous"},"timestamp":"2026-02-23T10:54:27.863Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - a15e5f1c-9a74-4544-a23a-c5809def7f0d] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:54:27.867Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [a15e5f1c-9a74-4544-a23a-c5809def7f0d]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:54:27.871Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"a15e5f1c-9a74-4544-a23a-c5809def7f0d","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/policies/c1d2e3f4-a5b6-7890-1234-567890abcdef/versions/1","requestId":"a15e5f1c-9a74-4544-a23a-c5809def7f0d","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:27.874Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/policies/c1d2e3f4-a5b6-7890-1234-567890abcdef/versions/1 500 15.708ms","metadata":{"error":{"contentLength":"3951","correlationId":"a15e5f1c-9a74-4544-a23a-c5809def7f0d","durationMs":15.708,"eventType":"finish","requestId":"a15e5f1c-9a74-4544-a23a-c5809def7f0d","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:27.879Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/policies/invalid-uuid/versions/1","metadata":{"correlationId":"9c81974e-576b-4fe8-bcaf-d62913607ea2","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"9c81974e-576b-4fe8-bcaf-d62913607ea2","url":"/api/admin/policies/invalid-uuid/versions/1","userId":"anonymous"},"timestamp":"2026-02-23T10:54:27.922Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 9c81974e-576b-4fe8-bcaf-d62913607ea2] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:54:27.926Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [9c81974e-576b-4fe8-bcaf-d62913607ea2]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:54:27.931Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"9c81974e-576b-4fe8-bcaf-d62913607ea2","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/policies/invalid-uuid/versions/1","requestId":"9c81974e-576b-4fe8-bcaf-d62913607ea2","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:27.933Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/policies/invalid-uuid/versions/1 500 14.392ms","metadata":{"error":{"contentLength":"3951","correlationId":"9c81974e-576b-4fe8-bcaf-d62913607ea2","durationMs":14.392,"eventType":"finish","requestId":"9c81974e-576b-4fe8-bcaf-d62913607ea2","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:27.936Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/policies/c1d2e3f4-a5b6-7890-1234-567890abcdef/versions/invalid-version","metadata":{"correlationId":"cfa25b70-2207-40c6-9d24-bdf840b1dfe6","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"cfa25b70-2207-40c6-9d24-bdf840b1dfe6","url":"/api/admin/policies/c1d2e3f4-a5b6-7890-1234-567890abcdef/versions/invalid-version","userId":"anonymous"},"timestamp":"2026-02-23T10:54:27.959Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - cfa25b70-2207-40c6-9d24-bdf840b1dfe6] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:54:27.963Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [cfa25b70-2207-40c6-9d24-bdf840b1dfe6]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:54:27.968Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"cfa25b70-2207-40c6-9d24-bdf840b1dfe6","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/policies/c1d2e3f4-a5b6-7890-1234-567890abcdef/versions/invalid-version","requestId":"cfa25b70-2207-40c6-9d24-bdf840b1dfe6","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:27.971Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/policies/c1d2e3f4-a5b6-7890-1234-567890abcdef/versions/invalid-version 500 14.372ms","metadata":{"error":{"contentLength":"3951","correlationId":"cfa25b70-2207-40c6-9d24-bdf840b1dfe6","durationMs":14.372,"eventType":"finish","requestId":"cfa25b70-2207-40c6-9d24-bdf840b1dfe6","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:27.974Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/policies/c1d2e3f4-a5b6-7890-1234-567890abcdef/versions/1","metadata":{"correlationId":"a4a3bb12-2dd7-4c3a-bc22-19fb6b34c9a5","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"a4a3bb12-2dd7-4c3a-bc22-19fb6b34c9a5","url":"/api/admin/policies/c1d2e3f4-a5b6-7890-1234-567890abcdef/versions/1","userId":"anonymous"},"timestamp":"2026-02-23T10:54:28.003Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - a4a3bb12-2dd7-4c3a-bc22-19fb6b34c9a5] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:54:28.007Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [a4a3bb12-2dd7-4c3a-bc22-19fb6b34c9a5]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:54:28.014Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"a4a3bb12-2dd7-4c3a-bc22-19fb6b34c9a5","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/policies/c1d2e3f4-a5b6-7890-1234-567890abcdef/versions/1","requestId":"a4a3bb12-2dd7-4c3a-bc22-19fb6b34c9a5","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:28.016Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/policies/c1d2e3f4-a5b6-7890-1234-567890abcdef/versions/1 500 17.110ms","metadata":{"error":{"contentLength":"3951","correlationId":"a4a3bb12-2dd7-4c3a-bc22-19fb6b34c9a5","durationMs":17.11,"eventType":"finish","requestId":"a4a3bb12-2dd7-4c3a-bc22-19fb6b34c9a5","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:28.020Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/policies/c1d2e3f4-a5b6-7890-1234-567890abcdef/versions/1","metadata":{"correlationId":"f6ea5e55-29ab-425c-9215-acd21e3c541e","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"f6ea5e55-29ab-425c-9215-acd21e3c541e","url":"/api/admin/policies/c1d2e3f4-a5b6-7890-1234-567890abcdef/versions/1","userId":"anonymous"},"timestamp":"2026-02-23T10:54:28.052Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Authentication: Missing or invalid Authorization header.","metadata":{},"timestamp":"2026-02-23T10:54:28.056Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Client error processing request: Authorization header missing or invalid.","metadata":{"correlationId":"f6ea5e55-29ab-425c-9215-acd21e3c541e","errorMessage":"Authorization header missing or invalid.","errorName":"AuthenticationError","isOperational":true,"method":"GET","path":"/api/admin/policies/c1d2e3f4-a5b6-7890-1234-567890abcdef/versions/1","requestId":"f6ea5e55-29ab-425c-9215-acd21e3c541e","stack":"AuthenticationError: Authorization header missing or invalid.\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:32:25\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:27:70\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestLogger.middleware.ts:84:9\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:32\n    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)\n    at middleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:13)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at addRequestId (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestId.middleware.ts:33:5)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at urlencodedParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\urlencoded.js:68:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at jsonParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\json.js:100:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at requestMetricsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestMetrics.middleware.ts:26:3)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at cors (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:188:7)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:224:17\n    at originCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:214:15)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:531:6)\n    at xXssProtectionMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:311:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPoweredByMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:304:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPermittedCrossDomainPoliciesMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:297:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xFrameOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:281:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDownloadOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:261:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDnsPrefetchControlMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:254:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xContentTypeOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:246:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at strictTransportSecurityMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:239:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at referrerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:207:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at originAgentClusterMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:182:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginResourcePolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:175:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginOpenerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:159:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at contentSecurityPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:124:4)","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T10:54:28.065Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"<-- GET /api/admin/policies/c1d2e3f4-a5b6-7890-1234-567890abcdef/versions/1 401 15.853ms","metadata":{"contentLength":"151","correlationId":"f6ea5e55-29ab-425c-9215-acd21e3c541e","durationMs":15.853,"eventType":"finish","requestId":"f6ea5e55-29ab-425c-9215-acd21e3c541e","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T10:54:28.068Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/policies/d1e2f3a4-b5c6-7890-1234-567890abcdef/versions","metadata":{"correlationId":"bd1c58a3-3be6-46e1-a3f1-d57c17fcb7ea","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"bd1c58a3-3be6-46e1-a3f1-d57c17fcb7ea","url":"/api/admin/policies/d1e2f3a4-b5c6-7890-1234-567890abcdef/versions","userId":"anonymous"},"timestamp":"2026-02-23T10:54:28.090Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - bd1c58a3-3be6-46e1-a3f1-d57c17fcb7ea] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:54:28.095Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [bd1c58a3-3be6-46e1-a3f1-d57c17fcb7ea]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:54:28.099Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"bd1c58a3-3be6-46e1-a3f1-d57c17fcb7ea","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/policies/d1e2f3a4-b5c6-7890-1234-567890abcdef/versions","requestId":"bd1c58a3-3be6-46e1-a3f1-d57c17fcb7ea","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:28.101Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/policies/d1e2f3a4-b5c6-7890-1234-567890abcdef/versions 500 14.438ms","metadata":{"error":{"contentLength":"3814","correlationId":"bd1c58a3-3be6-46e1-a3f1-d57c17fcb7ea","durationMs":14.438,"eventType":"finish","requestId":"bd1c58a3-3be6-46e1-a3f1-d57c17fcb7ea","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:28.105Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/policies/d1e2f3a4-b5c6-7890-1234-567890abcdef/versions","metadata":{"correlationId":"f42d3f32-d711-45d2-b0de-05a537026d48","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"f42d3f32-d711-45d2-b0de-05a537026d48","url":"/api/admin/policies/d1e2f3a4-b5c6-7890-1234-567890abcdef/versions","userId":"anonymous"},"timestamp":"2026-02-23T10:54:28.133Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - f42d3f32-d711-45d2-b0de-05a537026d48] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:54:28.136Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [f42d3f32-d711-45d2-b0de-05a537026d48]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:54:28.140Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"f42d3f32-d711-45d2-b0de-05a537026d48","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/policies/d1e2f3a4-b5c6-7890-1234-567890abcdef/versions","requestId":"f42d3f32-d711-45d2-b0de-05a537026d48","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:28.143Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/policies/d1e2f3a4-b5c6-7890-1234-567890abcdef/versions 500 15.143ms","metadata":{"error":{"contentLength":"3814","correlationId":"f42d3f32-d711-45d2-b0de-05a537026d48","durationMs":15.143,"eventType":"finish","requestId":"f42d3f32-d711-45d2-b0de-05a537026d48","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:28.148Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/policies/invalid-uuid/versions","metadata":{"correlationId":"ac76dcf7-7a2c-4771-ad09-b8053c3d3a07","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"ac76dcf7-7a2c-4771-ad09-b8053c3d3a07","url":"/api/admin/policies/invalid-uuid/versions","userId":"anonymous"},"timestamp":"2026-02-23T10:54:28.171Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - ac76dcf7-7a2c-4771-ad09-b8053c3d3a07] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:54:28.174Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [ac76dcf7-7a2c-4771-ad09-b8053c3d3a07]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:54:28.178Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"ac76dcf7-7a2c-4771-ad09-b8053c3d3a07","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/policies/invalid-uuid/versions","requestId":"ac76dcf7-7a2c-4771-ad09-b8053c3d3a07","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:28.181Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/policies/invalid-uuid/versions 500 12.686ms","metadata":{"error":{"contentLength":"3814","correlationId":"ac76dcf7-7a2c-4771-ad09-b8053c3d3a07","durationMs":12.686,"eventType":"finish","requestId":"ac76dcf7-7a2c-4771-ad09-b8053c3d3a07","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:28.183Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/policies/d1e2f3a4-b5c6-7890-1234-567890abcdef/versions","metadata":{"correlationId":"467fabdf-766d-400d-b948-395588bcfe29","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"467fabdf-766d-400d-b948-395588bcfe29","url":"/api/admin/policies/d1e2f3a4-b5c6-7890-1234-567890abcdef/versions","userId":"anonymous"},"timestamp":"2026-02-23T10:54:28.201Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 467fabdf-766d-400d-b948-395588bcfe29] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:54:28.203Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [467fabdf-766d-400d-b948-395588bcfe29]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:54:28.205Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"467fabdf-766d-400d-b948-395588bcfe29","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/policies/d1e2f3a4-b5c6-7890-1234-567890abcdef/versions","requestId":"467fabdf-766d-400d-b948-395588bcfe29","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:28.207Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/policies/d1e2f3a4-b5c6-7890-1234-567890abcdef/versions 500 9.364ms","metadata":{"error":{"contentLength":"3814","correlationId":"467fabdf-766d-400d-b948-395588bcfe29","durationMs":9.364,"eventType":"finish","requestId":"467fabdf-766d-400d-b948-395588bcfe29","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:28.210Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/policies/d1e2f3a4-b5c6-7890-1234-567890abcdef/versions","metadata":{"correlationId":"064ffe16-2107-4d1e-b05d-f71a1f48926b","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"064ffe16-2107-4d1e-b05d-f71a1f48926b","url":"/api/admin/policies/d1e2f3a4-b5c6-7890-1234-567890abcdef/versions","userId":"anonymous"},"timestamp":"2026-02-23T10:54:28.231Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Authentication: Missing or invalid Authorization header.","metadata":{},"timestamp":"2026-02-23T10:54:28.233Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Client error processing request: Authorization header missing or invalid.","metadata":{"correlationId":"064ffe16-2107-4d1e-b05d-f71a1f48926b","errorMessage":"Authorization header missing or invalid.","errorName":"AuthenticationError","isOperational":true,"method":"GET","path":"/api/admin/policies/d1e2f3a4-b5c6-7890-1234-567890abcdef/versions","requestId":"064ffe16-2107-4d1e-b05d-f71a1f48926b","stack":"AuthenticationError: Authorization header missing or invalid.\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:32:25\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:27:70\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestLogger.middleware.ts:84:9\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:32\n    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)\n    at middleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:13)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at addRequestId (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestId.middleware.ts:33:5)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at urlencodedParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\urlencoded.js:68:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at jsonParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\json.js:100:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at requestMetricsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestMetrics.middleware.ts:26:3)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at cors (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:188:7)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:224:17\n    at originCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:214:15)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:531:6)\n    at xXssProtectionMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:311:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPoweredByMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:304:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPermittedCrossDomainPoliciesMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:297:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xFrameOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:281:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDownloadOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:261:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDnsPrefetchControlMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:254:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xContentTypeOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:246:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at strictTransportSecurityMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:239:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at referrerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:207:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at originAgentClusterMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:182:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginResourcePolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:175:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginOpenerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:159:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at contentSecurityPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:124:4)","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T10:54:28.238Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"<-- GET /api/admin/policies/d1e2f3a4-b5c6-7890-1234-567890abcdef/versions 401 9.498ms","metadata":{"contentLength":"151","correlationId":"064ffe16-2107-4d1e-b05d-f71a1f48926b","durationMs":9.498,"eventType":"finish","requestId":"064ffe16-2107-4d1e-b05d-f71a1f48926b","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T10:54:28.241Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> POST /api/admin/policies/e1f2a3b4-c5d6-7890-1234-567890abcdef/rollback/1","metadata":{"correlationId":"b647e56e-75ef-4804-b5a3-c0ca07ddb249","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"POST","requestId":"b647e56e-75ef-4804-b5a3-c0ca07ddb249","url":"/api/admin/policies/e1f2a3b4-c5d6-7890-1234-567890abcdef/rollback/1","userId":"anonymous"},"timestamp":"2026-02-23T10:54:28.260Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - b647e56e-75ef-4804-b5a3-c0ca07ddb249] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:54:28.264Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [b647e56e-75ef-4804-b5a3-c0ca07ddb249]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:54:28.267Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"b647e56e-75ef-4804-b5a3-c0ca07ddb249","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"POST","path":"/api/admin/policies/e1f2a3b4-c5d6-7890-1234-567890abcdef/rollback/1","requestId":"b647e56e-75ef-4804-b5a3-c0ca07ddb249","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:28.274Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- POST /api/admin/policies/e1f2a3b4-c5d6-7890-1234-567890abcdef/rollback/1 500 18.672ms","metadata":{"error":{"contentLength":"3951","correlationId":"b647e56e-75ef-4804-b5a3-c0ca07ddb249","durationMs":18.672,"eventType":"finish","requestId":"b647e56e-75ef-4804-b5a3-c0ca07ddb249","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:28.279Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> POST /api/admin/policies/e1f2a3b4-c5d6-7890-1234-567890abcdef/rollback/1","metadata":{"correlationId":"6f402192-ecc2-4e75-92c1-60c752da69fb","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"POST","requestId":"6f402192-ecc2-4e75-92c1-60c752da69fb","url":"/api/admin/policies/e1f2a3b4-c5d6-7890-1234-567890abcdef/rollback/1","userId":"anonymous"},"timestamp":"2026-02-23T10:54:28.299Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 6f402192-ecc2-4e75-92c1-60c752da69fb] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:54:28.301Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [6f402192-ecc2-4e75-92c1-60c752da69fb]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:54:28.304Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"6f402192-ecc2-4e75-92c1-60c752da69fb","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"POST","path":"/api/admin/policies/e1f2a3b4-c5d6-7890-1234-567890abcdef/rollback/1","requestId":"6f402192-ecc2-4e75-92c1-60c752da69fb","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:28.307Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- POST /api/admin/policies/e1f2a3b4-c5d6-7890-1234-567890abcdef/rollback/1 500 11.392ms","metadata":{"error":{"contentLength":"3951","correlationId":"6f402192-ecc2-4e75-92c1-60c752da69fb","durationMs":11.392,"eventType":"finish","requestId":"6f402192-ecc2-4e75-92c1-60c752da69fb","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:28.310Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> POST /api/admin/policies/invalid-uuid/rollback/1","metadata":{"correlationId":"5d86b35f-c375-4258-b1b5-46e47fe6836f","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"POST","requestId":"5d86b35f-c375-4258-b1b5-46e47fe6836f","url":"/api/admin/policies/invalid-uuid/rollback/1","userId":"anonymous"},"timestamp":"2026-02-23T10:54:28.334Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 5d86b35f-c375-4258-b1b5-46e47fe6836f] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:54:28.338Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [5d86b35f-c375-4258-b1b5-46e47fe6836f]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:54:28.342Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"5d86b35f-c375-4258-b1b5-46e47fe6836f","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"POST","path":"/api/admin/policies/invalid-uuid/rollback/1","requestId":"5d86b35f-c375-4258-b1b5-46e47fe6836f","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:28.345Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- POST /api/admin/policies/invalid-uuid/rollback/1 500 15.289ms","metadata":{"error":{"contentLength":"3951","correlationId":"5d86b35f-c375-4258-b1b5-46e47fe6836f","durationMs":15.289,"eventType":"finish","requestId":"5d86b35f-c375-4258-b1b5-46e47fe6836f","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:28.349Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> POST /api/admin/policies/e1f2a3b4-c5d6-7890-1234-567890abcdef/rollback/invalid-version","metadata":{"correlationId":"7d3a2f3e-2596-42ee-9c55-6d5ed1d2ce92","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"POST","requestId":"7d3a2f3e-2596-42ee-9c55-6d5ed1d2ce92","url":"/api/admin/policies/e1f2a3b4-c5d6-7890-1234-567890abcdef/rollback/invalid-version","userId":"anonymous"},"timestamp":"2026-02-23T10:54:28.369Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 7d3a2f3e-2596-42ee-9c55-6d5ed1d2ce92] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:54:28.373Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [7d3a2f3e-2596-42ee-9c55-6d5ed1d2ce92]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:54:28.378Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"7d3a2f3e-2596-42ee-9c55-6d5ed1d2ce92","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"POST","path":"/api/admin/policies/e1f2a3b4-c5d6-7890-1234-567890abcdef/rollback/invalid-version","requestId":"7d3a2f3e-2596-42ee-9c55-6d5ed1d2ce92","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:28.381Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- POST /api/admin/policies/e1f2a3b4-c5d6-7890-1234-567890abcdef/rollback/invalid-version 500 14.744ms","metadata":{"error":{"contentLength":"3951","correlationId":"7d3a2f3e-2596-42ee-9c55-6d5ed1d2ce92","durationMs":14.744,"eventType":"finish","requestId":"7d3a2f3e-2596-42ee-9c55-6d5ed1d2ce92","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:28.384Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> POST /api/admin/policies/e1f2a3b4-c5d6-7890-1234-567890abcdef/rollback/1","metadata":{"correlationId":"7598e695-5eae-436f-8895-f89ef0f3f9bb","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"POST","requestId":"7598e695-5eae-436f-8895-f89ef0f3f9bb","url":"/api/admin/policies/e1f2a3b4-c5d6-7890-1234-567890abcdef/rollback/1","userId":"anonymous"},"timestamp":"2026-02-23T10:54:28.488Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 7598e695-5eae-436f-8895-f89ef0f3f9bb] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:54:28.491Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [7598e695-5eae-436f-8895-f89ef0f3f9bb]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:54:28.497Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"7598e695-5eae-436f-8895-f89ef0f3f9bb","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"POST","path":"/api/admin/policies/e1f2a3b4-c5d6-7890-1234-567890abcdef/rollback/1","requestId":"7598e695-5eae-436f-8895-f89ef0f3f9bb","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:28.499Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- POST /api/admin/policies/e1f2a3b4-c5d6-7890-1234-567890abcdef/rollback/1 500 14.447ms","metadata":{"error":{"contentLength":"3951","correlationId":"7598e695-5eae-436f-8895-f89ef0f3f9bb","durationMs":14.447,"eventType":"finish","requestId":"7598e695-5eae-436f-8895-f89ef0f3f9bb","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:54:28.502Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> POST /api/admin/policies/e1f2a3b4-c5d6-7890-1234-567890abcdef/rollback","metadata":{"correlationId":"080c6daf-c604-4aa2-9819-1e1dcb9837b2","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"POST","requestId":"080c6daf-c604-4aa2-9819-1e1dcb9837b2","url":"/api/admin/policies/e1f2a3b4-c5d6-7890-1234-567890abcdef/rollback","userId":"anonymous"},"timestamp":"2026-02-23T10:54:28.525Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Authentication: Missing or invalid Authorization header.","metadata":{},"timestamp":"2026-02-23T10:54:28.528Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Client error processing request: Authorization header missing or invalid.","metadata":{"correlationId":"080c6daf-c604-4aa2-9819-1e1dcb9837b2","errorMessage":"Authorization header missing or invalid.","errorName":"AuthenticationError","isOperational":true,"method":"POST","path":"/api/admin/policies/e1f2a3b4-c5d6-7890-1234-567890abcdef/rollback","requestId":"080c6daf-c604-4aa2-9819-1e1dcb9837b2","stack":"AuthenticationError: Authorization header missing or invalid.\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:32:25\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:27:70\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestLogger.middleware.ts:84:9\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:32\n    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)\n    at middleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:13)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at addRequestId (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestId.middleware.ts:33:5)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at urlencodedParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\urlencoded.js:57:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\read.js:132:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:214:14)\n    at invokeCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\raw-body@3.0.0\\node_modules\\raw-body\\index.js:238:16)\n    at done (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\raw-body@3.0.0\\node_modules\\raw-body\\index.js:227:7)\n    at IncomingMessage.onEnd (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\raw-body@3.0.0\\node_modules\\raw-body\\index.js:287:7)\n    at IncomingMessage.emit (node:events:519:28)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at processTicksAndRejections (node:internal/process/task_queues:90:21)","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T10:54:28.534Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"<-- POST /api/admin/policies/e1f2a3b4-c5d6-7890-1234-567890abcdef/rollback 401 12.177ms","metadata":{"contentLength":"151","correlationId":"080c6daf-c604-4aa2-9819-1e1dcb9837b2","durationMs":12.177,"eventType":"finish","requestId":"080c6daf-c604-4aa2-9819-1e1dcb9837b2","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T10:54:28.537Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId ΓÇ║ should return 200 OK with policy data if policy exists

    expected 200 "OK", got 500 "Internal Server Error"

      134 |                 .get(`${BASE_API_PATH}/${targetPolicyId}`)
      135 |                 .set(MOCK_AUTH_HEADER)
    > 136 |                 .expect(HttpStatusCode.OK) // 200
          |                  ^
      137 |                 .expect(res => {
      138 |                     expect(res.body.id).toBe(targetPolicyId);
      139 |                     expect(res.body.policyName).toBe('get.policy');

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:136:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:131:81)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId ΓÇ║ should return 404 Not Found if service returns null

    expected 404 "Not Found", got 500 "Internal Server Error"

      147 |                 .get(`${BASE_API_PATH}/${targetPolicyId}`)
      148 |                 .set(MOCK_AUTH_HEADER)
    > 149 |                 .expect(HttpStatusCode.NOT_FOUND); // 404
          |                  ^
      150 |             expect(mockPolicyAdminService.getPolicy).toHaveBeenCalledWith(expect.anything(), targetPolicyId);
      151 |         });
      152 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:149:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:144:78)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId ΓÇ║ should return 404 Not Found if service throws PolicyNotFoundError

    expected 404 "Not Found", got 500 "Internal Server Error"

      158 |                 .get(`${BASE_API_PATH}/${targetPolicyId}`)
      159 |                 .set(MOCK_AUTH_HEADER)
    > 160 |                 .expect(HttpStatusCode.NOT_FOUND); // 404
          |                  ^
      161 |             expect(mockPolicyAdminService.getPolicy).toHaveBeenCalledWith(expect.anything(), targetPolicyId);
      162 |         });
      163 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:160:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:153:92)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId ΓÇ║ should return 400 Bad Request if policyId param is not a valid UUID

    expected 400 "Bad Request", got 500 "Internal Server Error"

      167 |                 .get(`${BASE_API_PATH}/${invalidId}`)
      168 |                 .set(MOCK_AUTH_HEADER)
    > 169 |                 .expect(HttpStatusCode.BAD_REQUEST); // 400 (Handled by validation middleware)
          |                  ^
      170 |             expect(mockPolicyAdminService.getPolicy).not.toHaveBeenCalled();
      171 |         });
      172 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:169:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:164:94)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId ΓÇ║ should return 500 if the service fails unexpectedly

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: Anything, "a1b2c3d4-e5f6-7890-1234-567890abcdef"

    Number of calls: 0

      178 |                 .set(MOCK_AUTH_HEADER)
      179 |                 .expect(HttpStatusCode.INTERNAL_SERVER_ERROR); // 500
    > 180 |             expect(mockPolicyAdminService.getPolicy).toHaveBeenCalledWith(expect.anything(), targetPolicyId);
          |                                                      ^
      181 |         });
      182 |
      183 |         it('should return 401 Unauthorized if token is missing', async () => {

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:180:54
      at fulfilled (tests/integration/routes/policy.admin.routes.integration.spec.ts:5:58)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies ΓÇ║ should return 200 OK with a list of policies

    expected 200 "OK", got 500 "Internal Server Error"

      196 |                  .get(BASE_API_PATH)
      197 |                  .set(MOCK_AUTH_HEADER)
    > 198 |                  .expect(HttpStatusCode.OK); // 200
          |                   ^
      199 |              expect(mockPolicyAdminService.listPolicies).toHaveBeenCalledTimes(1);
      200 |              expect(mockPolicyAdminService.listPolicies).toHaveBeenCalledWith(expect.anything(), { limit: undefined, language: undefined, startKey: undefined });
      201 |          });

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:198:19
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:192:72)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies ΓÇ║ should pass pagination and filter parameters to the service

    expected 200 "OK", got 500 "Internal Server Error"

      207 |                  .query({ limit: 15, language: 'rego', startKey: 'opaqueStartKey' })
      208 |                  .set(MOCK_AUTH_HEADER)
    > 209 |                  .expect(HttpStatusCode.OK); // 200
          |                   ^
      210 |              expect(mockPolicyAdminService.listPolicies).toHaveBeenCalledTimes(1);
      211 |              expect(mockPolicyAdminService.listPolicies).toHaveBeenCalledWith(expect.anything(), { limit: '15', language: 'rego', startKey: 'opaqueStartKey' });
      212 |          });

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:209:19
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:203:88)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies ΓÇ║ should return 500 if the service fails unexpectedly

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 1
    Received number of calls: 0

      219 |                  .set(MOCK_AUTH_HEADER)
      220 |                  .expect(HttpStatusCode.INTERNAL_SERVER_ERROR); // 500
    > 221 |              expect(mockPolicyAdminService.listPolicies).toHaveBeenCalledTimes(1);
          |                                                          ^
      222 |          });
      223 |
      224 |          it('should return 401 Unauthorized if token is missing', async () => {

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:221:58
      at fulfilled (tests/integration/routes/policy.admin.routes.integration.spec.ts:5:58)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ PUT /api/admin/policies/:policyId ΓÇ║ should return 200 OK with updated policy data if service succeeds

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    - Expected
    + Received

      {"attributes": {"cognito:groups": ["policy-admin", "user"], "cognito:username": "test-admin", "sub": "test-admin-id-123"}, "id": "test-admin-id-123", "roles": ["policy-admin", "user"], "tenantId": "unknown-tenant", "username": "test-admin"},
      "a1b2c3d4-e5f6-7890-1234-567890abcdef",
      Object {
        "description": "Updated Integration Description",
    -   "version": 2,
      },

    Number of calls: 1

      250 |                     expect(res.body.version).toBe(MOCK_VALID_UPDATE_POLICY_PAYLOAD.version);
      251 |                 });
    > 252 |             expect(mockPolicyAdminService.updatePolicy).toHaveBeenCalledWith(expect.anything(), targetPolicyId, MOCK_VALID_UPDATE_POLICY_PAYLOAD);
          |                                                         ^
      253 |         });
      254 |
      255 |          it('should return 404 Not Found if service throws PolicyNotFoundError', async () => {

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:252:57
      at fulfilled (tests/integration/routes/policy.admin.routes.integration.spec.ts:5:58)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ DELETE /api/admin/policies/:policyId ΓÇ║ should return 204 No Content if service succeeds

    expected 204 "No Content", got 500 "Internal Server Error"

      311 |                 .delete(`${BASE_API_PATH}/${targetPolicyId}`)
      312 |                 .set(MOCK_AUTH_HEADER)
    > 313 |                 .expect(HttpStatusCode.NO_CONTENT); // 204
          |                  ^
      314 |             expect(mockPolicyAdminService.deletePolicy).toHaveBeenCalledWith(expect.anything(), targetPolicyId);
      315 |         });
      316 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:313:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:308:75)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ DELETE /api/admin/policies/:policyId ΓÇ║ should return 404 Not Found if service throws PolicyNotFoundError

    expected 404 "Not Found", got 500 "Internal Server Error"

      322 |                 .delete(`${BASE_API_PATH}/${targetPolicyId}`)
      323 |                 .set(MOCK_AUTH_HEADER)
    > 324 |                 .expect(HttpStatusCode.NOT_FOUND); // 404
          |                  ^
      325 |             expect(mockPolicyAdminService.deletePolicy).toHaveBeenCalledWith(expect.anything(), targetPolicyId);
      326 |         });
      327 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:324:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:317:92)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ DELETE /api/admin/policies/:policyId ΓÇ║ should return 400 Bad Request if policyId param is invalid

    expected 400 "Bad Request", got 500 "Internal Server Error"

      330 |                 .delete(`${BASE_API_PATH}/invalid-uuid`)
      331 |                 .set(MOCK_AUTH_HEADER)
    > 332 |                 .expect(HttpStatusCode.BAD_REQUEST); // 400
          |                  ^
      333 |             expect(mockPolicyAdminService.deletePolicy).not.toHaveBeenCalled();
      334 |         });
      335 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:332:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:328:86)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ DELETE /api/admin/policies/:policyId ΓÇ║ should return 500 if service fails unexpectedly

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: Anything, "b1c2d3e4-f5a6-7890-1234-567890abcdef"

    Number of calls: 0

      341 |                 .set(MOCK_AUTH_HEADER)
      342 |                 .expect(HttpStatusCode.INTERNAL_SERVER_ERROR); // 500
    > 343 |             expect(mockPolicyAdminService.deletePolicy).toHaveBeenCalledWith(expect.anything(), targetPolicyId);
          |                                                         ^
      344 |         });
      345 |
      346 |         it('should return 401 Unauthorized if token is missing', async () => {

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:343:57
      at fulfilled (tests/integration/routes/policy.admin.routes.integration.spec.ts:5:58)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId/versions/:version ΓÇ║ should return 200 OK with policy version data if found

    expected 200 "OK", got 500 "Internal Server Error"

      362 |                 .get(`${BASE_API_PATH}/${policyId}/versions/${version}`)
      363 |                 .set(MOCK_AUTH_HEADER)
    > 364 |                 .expect(HttpStatusCode.OK)
          |                  ^
      365 |                 .expect(res => {
      366 |                     expect(res.body.id).toBe(policyId);
      367 |                     expect(res.body.version).toBe(version);

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:364:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:359:81)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId/versions/:version ΓÇ║ should return 404 Not Found if policy version not found

    expected 404 "Not Found", got 500 "Internal Server Error"

      375 |                 .get(`${BASE_API_PATH}/${policyId}/versions/${version}`)
      376 |                 .set(MOCK_AUTH_HEADER)
    > 377 |                 .expect(HttpStatusCode.NOT_FOUND);
          |                  ^
      378 |             expect(mockPolicyAdminService.getPolicyVersion).toHaveBeenCalledWith(expect.anything(), policyId, version);
      379 |         });
      380 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:377:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:372:82)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId/versions/:version ΓÇ║ should return 400 Bad Request if policyId is invalid

    expected 400 "Bad Request", got 500 "Internal Server Error"

      383 |                 .get(`${BASE_API_PATH}/invalid-uuid/versions/${version}`)
      384 |                 .set(MOCK_AUTH_HEADER)
    > 385 |                 .expect(HttpStatusCode.BAD_REQUEST);
          |                  ^
      386 |             expect(mockPolicyAdminService.getPolicyVersion).not.toHaveBeenCalled();
      387 |         });
      388 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:385:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:381:79)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId/versions/:version ΓÇ║ should return 400 Bad Request if version is invalid

    expected 400 "Bad Request", got 500 "Internal Server Error"

      391 |                 .get(`${BASE_API_PATH}/${policyId}/versions/invalid-version`)
      392 |                 .set(MOCK_AUTH_HEADER)
    > 393 |                 .expect(HttpStatusCode.BAD_REQUEST);
          |                  ^
      394 |             expect(mockPolicyAdminService.getPolicyVersion).not.toHaveBeenCalled();
      395 |         });
      396 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:393:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:389:78)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId/versions/:version ΓÇ║ should return 500 Internal Server Error if service fails unexpectedly

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: Anything, "c1d2e3f4-a5b6-7890-1234-567890abcdef", 1

    Number of calls: 0

      402 |                 .set(MOCK_AUTH_HEADER)
      403 |                 .expect(HttpStatusCode.INTERNAL_SERVER_ERROR);
    > 404 |             expect(mockPolicyAdminService.getPolicyVersion).toHaveBeenCalledWith(expect.anything(), policyId, version);
          |                                                             ^
      405 |         });
      406 |
      407 |         it('should return 401 Unauthorized if token is missing', async () => {

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:404:61
      at fulfilled (tests/integration/routes/policy.admin.routes.integration.spec.ts:5:58)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId/versions ΓÇ║ should return 200 OK with a list of policy versions

    expected 200 "OK", got 500 "Internal Server Error"

      425 |                 .get(`${BASE_API_PATH}/${policyId}/versions`)
      426 |                 .set(MOCK_AUTH_HEADER)
    > 427 |                 .expect(HttpStatusCode.OK)
          |                  ^
      428 |                 .expect(res => {
      429 |                     expect(res.body).toHaveLength(2);
      430 |                     expect(res.body[0].version).toBe(1);

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:427:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:422:78)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId/versions ΓÇ║ should return 404 Not Found if policy does not exist

    expected 404 "Not Found", got 500 "Internal Server Error"

      441 |                 .get(`${BASE_API_PATH}/${policyId}/versions`)
      442 |                 .set(MOCK_AUTH_HEADER)
    > 443 |                 .expect(HttpStatusCode.NOT_FOUND);
          |                  ^
      444 |             expect(mockPolicyAdminService.listPolicyVersions).toHaveBeenCalledWith(expect.anything(), policyId);
      445 |         });
      446 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:443:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:436:79)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId/versions ΓÇ║ should return 400 Bad Request if policyId is invalid

    expected 400 "Bad Request", got 500 "Internal Server Error"

      449 |                 .get(`${BASE_API_PATH}/invalid-uuid/versions`)
      450 |                 .set(MOCK_AUTH_HEADER)
    > 451 |                 .expect(HttpStatusCode.BAD_REQUEST);
          |                  ^
      452 |             expect(mockPolicyAdminService.listPolicyVersions).not.toHaveBeenCalled();
      453 |         });
      454 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:451:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:447:79)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId/versions ΓÇ║ should return 500 Internal Server Error if service fails unexpectedly

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: Anything, "d1e2f3a4-b5c6-7890-1234-567890abcdef"

    Number of calls: 0

      460 |                 .set(MOCK_AUTH_HEADER)
      461 |                 .expect(HttpStatusCode.INTERNAL_SERVER_ERROR);
    > 462 |             expect(mockPolicyAdminService.listPolicyVersions).toHaveBeenCalledWith(expect.anything(), policyId);
          |                                                               ^
      463 |         });
      464 |
      465 |         it('should return 401 Unauthorized if token is missing', async () => {

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:462:63
      at fulfilled (tests/integration/routes/policy.admin.routes.integration.spec.ts:5:58)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ POST /api/admin/policies/:policyId/rollback ΓÇ║ should return 200 OK with rolled back policy data on success

    expected 200 "OK", got 500 "Internal Server Error"

      481 |                 .post(`${BASE_API_PATH}/${policyId}/rollback/${version}`)
      482 |                 .set(MOCK_AUTH_HEADER)
    > 483 |                 .expect(HttpStatusCode.OK)
          |                  ^
      484 |                 .expect(res => {
      485 |                     expect(res.body.id).toBe(policyId);
      486 |                     expect(res.body.version).toBe(version);

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:483:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:478:87)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ POST /api/admin/policies/:policyId/rollback ΓÇ║ should return 404 Not Found if policy or version not found

    expected 404 "Not Found", got 500 "Internal Server Error"

      496 |                 .post(`${BASE_API_PATH}/${policyId}/rollback/${version}`)
      497 |                 .set(MOCK_AUTH_HEADER)
    > 498 |                 .expect(HttpStatusCode.NOT_FOUND);
          |                  ^
      499 |             expect(mockPolicyAdminService.rollbackPolicy).toHaveBeenCalledWith(expect.anything(), policyId, version);
      500 |         });
      501 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:498:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:491:85)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ POST /api/admin/policies/:policyId/rollback ΓÇ║ should return 400 Bad Request if policyId is invalid

    expected 400 "Bad Request", got 500 "Internal Server Error"

      504 |                 .post(`${BASE_API_PATH}/invalid-uuid/rollback/${version}`)
      505 |                 .set(MOCK_AUTH_HEADER)
    > 506 |                 .expect(HttpStatusCode.BAD_REQUEST);
          |                  ^
      507 |             expect(mockPolicyAdminService.rollbackPolicy).not.toHaveBeenCalled();
      508 |         });
      509 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:506:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:502:79)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ POST /api/admin/policies/:policyId/rollback ΓÇ║ should return 400 Bad Request if version is invalid or missing

    expected 400 "Bad Request", got 500 "Internal Server Error"

      512 |                 .post(`${BASE_API_PATH}/${policyId}/rollback/invalid-version`)
      513 |                 .set(MOCK_AUTH_HEADER)
    > 514 |                 .expect(HttpStatusCode.BAD_REQUEST);
          |                  ^
      515 |             expect(mockPolicyAdminService.rollbackPolicy).not.toHaveBeenCalled();
      516 |         });
      517 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:514:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:510:89)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ POST /api/admin/policies/:policyId/rollback ΓÇ║ should return 500 Internal Server Error if service fails unexpectedly

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: Anything, "e1f2a3b4-c5d6-7890-1234-567890abcdef", 1

    Number of calls: 0

      523 |                 .set(MOCK_AUTH_HEADER)
      524 |                 .expect(HttpStatusCode.INTERNAL_SERVER_ERROR);
    > 525 |             expect(mockPolicyAdminService.rollbackPolicy).toHaveBeenCalledWith(expect.anything(), policyId, version);
          |                                                           ^
      526 |         });
      527 |
      528 |         it('should return 401 Unauthorized if token is missing', async () => {

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:525:59
      at fulfilled (tests/integration/routes/policy.admin.routes.integration.spec.ts:5:58)

PASS tests/integration/Persistence/DynamoPermissionRepository.integration.spec.ts
  ΓùÅ Console

    console.log
      Table TestPermissions cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestPermissions cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestPermissions cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestPermissions cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestPermissions cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestPermissions cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestPermissions cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestPermissions cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestPermissions cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

PASS tests/integration/Persistence/DynamoRoleRepository.integration.spec.ts
  ΓùÅ Console

    console.log
      Table TestRoles cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestRoles cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestRoles cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestRoles cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestRoles cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestRoles cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestRoles cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestRoles cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestRoles cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

PASS tests/integration/Persistence/DynamoPolicyRepository.integration.spec.ts
  ΓùÅ Console

    console.log
      Table TestPolicies cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestPolicies cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestPolicies cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestPolicies cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestPolicies cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestPolicies cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestPolicies cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestPolicies cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestPolicies cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestPolicies cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestPolicies cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestPolicies cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

PASS tests/unit/api/middlewares/admin.auth.guard.middleware.spec.ts
PASS tests/unit/application/services/user.admin.service.spec.ts
  ΓùÅ Console

    console.warn
      Cognito user missing 'sub' attribute, using username as ID: test-user

      70 |         const finalUserId = userId ?? cognitoUser.Username ?? 'unknown-id';
      71 |         if (!userId && cognitoUser.Username) {
    > 72 |             console.warn(`Cognito user missing 'sub' attribute, using username as ID: ${cognitoUser.Username}`);
         |                     ^
      73 |         }
      74 |
      75 |         return new AdminUserView(

      at Function.fromCognitoUser (src/domain/entities/AdminUserView.ts:72:21)
      at UserAdminService.<anonymous> (src/application/services/user.admin.service.ts:68:34)
      at fulfilled (src/application/services/user.admin.service.ts:17:58)

    console.warn
      Cognito user missing 'sub' attribute, using username as ID: test-user

      70 |         const finalUserId = userId ?? cognitoUser.Username ?? 'unknown-id';
      71 |         if (!userId && cognitoUser.Username) {
    > 72 |             console.warn(`Cognito user missing 'sub' attribute, using username as ID: ${cognitoUser.Username}`);
         |                     ^
      73 |         }
      74 |
      75 |         return new AdminUserView(

      at Function.fromCognitoUser (src/domain/entities/AdminUserView.ts:72:21)
      at UserAdminService.<anonymous> (src/application/services/user.admin.service.ts:96:34)
      at fulfilled (src/application/services/user.admin.service.ts:17:58)

    console.warn
      Cognito user missing 'sub' attribute, using username as ID: user1

      70 |         const finalUserId = userId ?? cognitoUser.Username ?? 'unknown-id';
      71 |         if (!userId && cognitoUser.Username) {
    > 72 |             console.warn(`Cognito user missing 'sub' attribute, using username as ID: ${cognitoUser.Username}`);
         |                     ^
      73 |         }
      74 |
      75 |         return new AdminUserView(

      at Function.fromCognitoUser (src/domain/entities/AdminUserView.ts:72:21)
      at UserAdminService.<anonymous> (src/application/services/user.admin.service.ts:131:38)
      at fulfilled (src/application/services/user.admin.service.ts:17:58)

    console.warn
      Cognito user missing 'sub' attribute, using username as ID: user1

      70 |         const finalUserId = userId ?? cognitoUser.Username ?? 'unknown-id';
      71 |         if (!userId && cognitoUser.Username) {
    > 72 |             console.warn(`Cognito user missing 'sub' attribute, using username as ID: ${cognitoUser.Username}`);
         |                     ^
      73 |         }
      74 |
      75 |         return new AdminUserView(

      at Function.fromCognitoUser (src/domain/entities/AdminUserView.ts:72:21)
      at UserAdminService.<anonymous> (src/application/services/user.admin.service.ts:131:38)
      at fulfilled (src/application/services/user.admin.service.ts:17:58)

    console.warn
      Cognito user missing 'sub' attribute, using username as ID: user1

      70 |         const finalUserId = userId ?? cognitoUser.Username ?? 'unknown-id';
      71 |         if (!userId && cognitoUser.Username) {
    > 72 |             console.warn(`Cognito user missing 'sub' attribute, using username as ID: ${cognitoUser.Username}`);
         |                     ^
      73 |         }
      74 |
      75 |         return new AdminUserView(

      at Function.fromCognitoUser (src/domain/entities/AdminUserView.ts:72:21)
      at src/application/services/user.admin.service.ts:328:67
          at Array.map (<anonymous>)
      at UserAdminService.<anonymous> (src/application/services/user.admin.service.ts:328:44)
      at fulfilled (src/application/services/user.admin.service.ts:17:58)

PASS tests/unit/infrastructure/config/EnvironmentConfigService.spec.ts
PASS tests/unit/infrastructure/adapters/cognito/CognitoUserMgmtAdapter.spec.ts
PASS tests/integration/routes/system.routes.integration.spec.ts
  ΓùÅ Console

    console.info
      [WinstonLogger] Logger initialized with level "info" in "test" environment.

      at WinstonLogger.initializeLogger (src/infrastructure/logging/WinstonLogger.ts:68:17)
          at Array.map (<anonymous>)

    console.log
      {"level":"warn","message":"CORS_ORIGIN is set to \"*\" in a non-development environment. This is insecure!","metadata":{},"timestamp":"2026-02-23T10:54:32.405Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"CORS configured for origin: *","metadata":{},"timestamp":"2026-02-23T10:54:32.431Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"Application setup complete for environment: test","metadata":{},"timestamp":"2026-02-23T10:54:32.434Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/system/health","metadata":{"correlationId":"1a723595-9865-4dee-a514-7ee6e5d3a7c1","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"1a723595-9865-4dee-a514-7ee6e5d3a7c1","url":"/api/system/health","userId":"anonymous"},"timestamp":"2026-02-23T10:54:32.552Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"<-- GET /api/system/health 200 20.384ms","metadata":{"contentLength":"54","correlationId":"1a723595-9865-4dee-a514-7ee6e5d3a7c1","durationMs":20.384,"eventType":"finish","requestId":"1a723595-9865-4dee-a514-7ee6e5d3a7c1","statusCode":200,"userId":"anonymous"},"timestamp":"2026-02-23T10:54:32.573Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/system/server-info","metadata":{"correlationId":"f89e4c95-6661-4c79-a4f9-ae3e84ede1ec","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"f89e4c95-6661-4c79-a4f9-ae3e84ede1ec","url":"/api/system/server-info","userId":"anonymous"},"timestamp":"2026-02-23T10:54:32.605Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"<-- GET /api/system/server-info 200 9.004ms","metadata":{"contentLength":"148","correlationId":"f89e4c95-6661-4c79-a4f9-ae3e84ede1ec","durationMs":9.004,"eventType":"finish","requestId":"f89e4c95-6661-4c79-a4f9-ae3e84ede1ec","statusCode":200,"userId":"anonymous"},"timestamp":"2026-02-23T10:54:32.614Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/system/metrics","metadata":{"correlationId":"0c9240b5-8675-49cb-9a1e-2d39ce84feb1","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"0c9240b5-8675-49cb-9a1e-2d39ce84feb1","url":"/api/system/metrics","userId":"anonymous"},"timestamp":"2026-02-23T10:54:32.641Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"<-- GET /api/system/metrics 200 21.828ms","metadata":{"correlationId":"0c9240b5-8675-49cb-9a1e-2d39ce84feb1","durationMs":21.828,"eventType":"finish","requestId":"0c9240b5-8675-49cb-9a1e-2d39ce84feb1","statusCode":200,"userId":"anonymous"},"timestamp":"2026-02-23T10:54:32.662Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/non-existent-route","metadata":{"correlationId":"2bfdf1b3-c1e2-41c6-8f4c-e58bd6f7edf8","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"2bfdf1b3-c1e2-41c6-8f4c-e58bd6f7edf8","url":"/api/non-existent-route","userId":"anonymous"},"timestamp":"2026-02-23T10:54:32.707Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Route not found: GET /api/non-existent-route","metadata":{"requestId":"2bfdf1b3-c1e2-41c6-8f4c-e58bd6f7edf8"},"timestamp":"2026-02-23T10:54:32.713Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"<-- GET /api/non-existent-route 404 13.014ms","metadata":{"contentLength":"170","correlationId":"2bfdf1b3-c1e2-41c6-8f4c-e58bd6f7edf8","durationMs":13.014,"eventType":"finish","requestId":"2bfdf1b3-c1e2-41c6-8f4c-e58bd6f7edf8","statusCode":404,"userId":"anonymous"},"timestamp":"2026-02-23T10:54:32.720Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/unit/infrastructure/logging/WinstonLogger.spec.ts
  ΓùÅ Console

    console.info
      [WinstonLogger] Logger initialized with level "info" in "development" environment.

      at WinstonLogger.initializeLogger (src/infrastructure/logging/WinstonLogger.ts:68:17)

    console.info
      [WinstonLogger] Logger initialized with level "debug" in "development" environment.

      at WinstonLogger.initializeLogger (src/infrastructure/logging/WinstonLogger.ts:68:17)

    console.info
      [WinstonLogger] CloudWatch transport configured for group "test-log-group" and stream "test-log-stream"

      at WinstonLogger.initializeLogger (src/infrastructure/logging/WinstonLogger.ts:51:25)

    console.info
      [WinstonLogger] Logger initialized with level "info" in "production" environment.

      at WinstonLogger.initializeLogger (src/infrastructure/logging/WinstonLogger.ts:68:17)

    console.info
      [WinstonLogger] CloudWatch transport configured for group "test-log-group" and stream "test-log-stream"

      at WinstonLogger.initializeLogger (src/infrastructure/logging/WinstonLogger.ts:51:25)

    console.info
      [WinstonLogger] Elasticsearch transport configured for host "http://localhost:9200"

      at WinstonLogger.initializeLogger (src/infrastructure/logging/WinstonLogger.ts:64:25)

    console.info
      [WinstonLogger] Logger initialized with level "info" in "production" environment.

      at WinstonLogger.initializeLogger (src/infrastructure/logging/WinstonLogger.ts:68:17)

    console.info
      [WinstonLogger] Logger initialized with level "info" in "development" environment.

      at WinstonLogger.initializeLogger (src/infrastructure/logging/WinstonLogger.ts:68:17)

    console.info
      [WinstonLogger] Logger initialized with level "debug" in "development" environment.

      at WinstonLogger.initializeLogger (src/infrastructure/logging/WinstonLogger.ts:68:17)

    console.info
      [WinstonLogger] Logger initialized with level "debug" in "development" environment.

      at WinstonLogger.initializeLogger (src/infrastructure/logging/WinstonLogger.ts:68:17)

    console.info
      [WinstonLogger] Logger initialized with level "debug" in "development" environment.

      at WinstonLogger.initializeLogger (src/infrastructure/logging/WinstonLogger.ts:68:17)

    console.info
      [WinstonLogger] Logger initialized with level "debug" in "development" environment.

      at WinstonLogger.initializeLogger (src/infrastructure/logging/WinstonLogger.ts:68:17)

    console.info
      [WinstonLogger] Logger initialized with level "debug" in "development" environment.

      at WinstonLogger.initializeLogger (src/infrastructure/logging/WinstonLogger.ts:68:17)

    console.info
      [WinstonLogger] Logger initialized with level "debug" in "development" environment.

      at WinstonLogger.initializeLogger (src/infrastructure/logging/WinstonLogger.ts:68:17)

    console.info
      [WinstonLogger] Logger initialized with level "debug" in "development" environment.

      at WinstonLogger.initializeLogger (src/infrastructure/logging/WinstonLogger.ts:68:17)

    console.info
      [WinstonLogger] Logger initialized with level "debug" in "development" environment.

      at WinstonLogger.initializeLogger (src/infrastructure/logging/WinstonLogger.ts:68:17)

    console.info
      [WinstonLogger] Logger initialized with level "debug" in "development" environment.

      at WinstonLogger.initializeLogger (src/infrastructure/logging/WinstonLogger.ts:68:17)

PASS tests/unit/api/controllers/group.admin.controller.spec.ts
PASS tests/unit/infrastructure/persistence/dynamodb/dynamodb.client.spec.ts
PASS tests/unit/infrastructure/resilience/applyResilience.spec.ts
PASS tests/unit/api/middlewares/error.middleware.spec.ts
PASS tests/unit/api/middlewares/validation.middleware.spec.ts
  ΓùÅ Console

    console.log
      Validation Middleware - req.body: { name: 'John Doe', age: 30 }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'name', 'age' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"name":"John Doe","age":30}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      Validation Middleware - req.body: { name: '', age: 17 }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'name', 'age' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"name":"","age":17}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      Validation Middleware - req.body: { name: 'Jane Doe', age: 25 }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'name', 'age' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"name":"Jane Doe","age":25}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      Validation Middleware - req.body: { name: 'test' }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'name' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"name":"test"}

      at src/api/middlewares/validation.middleware.ts:23:21

PASS tests/unit/api/middlewares/requestMetrics.middleware.spec.ts
PASS tests/unit/api/middlewares/requestId.middleware.spec.ts
PASS tests/unit/api/controllers/policy.admin.controller.spec.ts
PASS tests/unit/api/middlewares/requestLogger.middleware.spec.ts
PASS tests/unit/api/controllers/user.admin.controller.spec.ts
PASS tests/unit/infrastructure/resilience/circuit-breaker.config.spec.ts
PASS tests/unit/infrastructure/monitoring/metrics.spec.ts
PASS tests/integration/Adapter/CognitoUserMgmtAdapter.integration.spec.ts (8.802 s)
  ΓùÅ Console

    console.info
      [ConfigService] Reading configuration from process.env (expected to be populated by --env-file)

      at new EnvironmentConfigService (src/infrastructure/config/EnvironmentConfigService.ts:36:17)
          at Array.map (<anonymous>)

    console.debug
      [ConfigService] Configuration loaded (keys only): [
        'ALLUSERSPROFILE',
        'ANDROID_HOME',
        'ANTIGRAVITY_AGENT',
        'ANTIGRAVITY_CLI_ALIAS',
        'APPDATA',
        'AWS_ACCESS_KEY_ID',
        'AWS_REGION',
        'AWS_SECRET_ACCESS_KEY',
        'ChocolateyInstall',
        'ChocolateyLastPathUpdate',
        'CHROME_CRASHPAD_PIPE_NAME',
        'CLASSPATH',
        'COGNITO_CLIENT_ID',
        'COGNITO_ISSUER',
        'COGNITO_JWKS_URI',
        'COGNITO_USER_POOL_ID',
        'COLOR',
        'COLORTERM',
        'CommonProgramFiles',
        'CommonProgramFiles(x86)',
        'CommonProgramW6432',
        'COMPUTERNAME',
        'ComSpec',
        'DriverData',
        'EDITOR',
        'GIT_ASKPASS',
        'GRADLE_HOME',
        'HOME',
        'HOMEDRIVE',
        'HOMEPATH',
        'INIT_CWD',
        'INTEL_DEV_REDIST',
        'JAVA_HOME',
        'JEST_WORKER_ID',
        'LANG',
        'LOCALAPPDATA',
        'LOGONSERVER',
        'LOG_LEVEL',
        'MICROSOFT_WINDOWSAPPRUNTIME_BASE_DIRECTORY',
        'MIC_LD_LIBRARY_PATH',
        'NODE',
        'NODE_ENV',
        'NODE_PATH',
        'npm_command',
        'npm_config_cache',
        'npm_config_globalconfig',
        'npm_config_global_prefix',
        'npm_config_init_module',
        'npm_config_local_prefix',
        'npm_config_node_gyp',
        'npm_config_noproxy',
        'npm_config_npm_version',
        'npm_config_prefix',
        'npm_config_userconfig',
        'npm_config_user_agent',
        'npm_execpath',
        'npm_lifecycle_event',
        'npm_lifecycle_script',
        'npm_node_execpath',
        'npm_package_json',
        'npm_package_name',
        'npm_package_version',
        'NUMBER_OF_PROCESSORS',
        'NVM_HOME',
        'NVM_SYMLINK',
        'OneDrive',
        'OneDriveConsumer',
        'OS',
        'PAGER',
        'Path',
        'PATHEXT',
        'PNPM_HOME',
        'PORT',
        'POSH_INSTALLER',
        'POSH_THEMES_PATH',
        'POWERSHELL_DISTRIBUTION_CHANNEL',
        'PROCESSOR_ARCHITECTURE',
        'PROCESSOR_IDENTIFIER',
        'PROCESSOR_LEVEL',
        'PROCESSOR_REVISION',
        'ProgramData',
        'ProgramFiles',
        'ProgramFiles(x86)',
        'ProgramW6432',
        'PROMPT',
        'PSModulePath',
        'PUBLIC',
        'RUN_COGNITO_INTEGRATION_TESTS',
        'SystemDrive',
        'SystemRoot',
        'TEMP',
        'TERM_PROGRAM',
        'TERM_PROGRAM_VERSION',
        'TMP',
        'TS_JEST',
        'USERDOMAIN',
        'USERDOMAIN_ROAMINGPROFILE',
        'USERNAME',
        'USERPROFILE',
        'VSCODE_GIT_ASKPASS_EXTRA_ARGS',
        ... 8 more items
      ]

      at new EnvironmentConfigService (src/infrastructure/config/EnvironmentConfigService.ts:41:21)
          at Array.map (<anonymous>)

    console.info
      [ConfigService] Required configuration keys verified.

      at new EnvironmentConfigService (src/infrastructure/config/EnvironmentConfigService.ts:49:17)
          at Array.map (<anonymous>)

    console.info
      [WinstonLogger] Logger initialized with level "info" in "test" environment.

      at WinstonLogger.initializeLogger (src/infrastructure/logging/WinstonLogger.ts:68:17)
          at Array.map (<anonymous>)

    console.log
      {"level":"info","message":"CognitoUserMgmtAdapter initialized","metadata":{"region":"ap-south-1","userPoolId":"ap-south-1_7mqSevmEI"},"timestamp":"2026-02-23T10:54:33.174Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.warn
      Running Cognito integration tests against User Pool ID: ap-south-1_7mqSevmEI

      35 |                 throw new Error("Cognito adapter test running without TEST user pool ID configured. ABORTING.");
      36 |             }
    > 37 |             console.warn(`Running Cognito integration tests against User Pool ID: ${testPoolId}`);
         |                     ^
      38 |
      39 |             // Create shared resources
      40 |             const userDetails: AdminCreateUserDetails = {

      at tests/integration/Adapter/CognitoUserMgmtAdapter.integration.spec.ts:37:21
      at tests/integration/Adapter/CognitoUserMgmtAdapter.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/Adapter/CognitoUserMgmtAdapter.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/Adapter/CognitoUserMgmtAdapter.integration.spec.ts:28:26)

    console.log
      {"level":"info","message":"Admin successfully created user: primary-user-1771844073066","metadata":{},"timestamp":"2026-02-23T10:54:33.910Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"Admin successfully updated attributes for user: primary-user-1771844073066","metadata":{},"timestamp":"2026-02-23T10:54:34.067Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"Admin successfully created group: primary-group-1771844073066","metadata":{},"timestamp":"2026-02-23T10:54:34.334Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"CircuitBreaker (UnnamedService) failure detected.","metadata":{"error":{"message":"User account already exists","name":"UsernameExistsException","stack":"UsernameExistsException: User account already exists\n    at de_UsernameExistsExceptionRes (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@aws-sdk+client-cognito-identity-provider@3.879.0\\node_modules\\@aws-sdk\\client-cognito-identity-provider\\dist-cjs\\index.js:5124:21)\n    at de_CommandError (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@aws-sdk+client-cognito-identity-provider@3.879.0\\node_modules\\@aws-sdk\\client-cognito-identity-provider\\dist-cjs\\index.js:4616:19)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+middleware-serde@4.0.9\\node_modules\\@smithy\\middleware-serde\\dist-cjs\\index.js:36:20\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+core@3.9.0\\node_modules\\@smithy\\core\\dist-cjs\\index.js:193:18\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+middleware-retry@4.1.20\\node_modules\\@smithy\\middleware-retry\\dist-cjs\\index.js:320:38\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@aws-sdk+middleware-logger@3.876.0\\node_modules\\@aws-sdk\\middleware-logger\\dist-cjs\\index.js:33:22"}},"timestamp":"2026-02-23T10:54:34.835Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"CircuitBreaker (UnnamedService) opened. Service failing.","metadata":{},"timestamp":"2026-02-23T10:54:34.837Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Cognito Admin error during adminCreateUser","metadata":{"error":{"errorMessage":"User account already exists","errorName":"UsernameExistsException","stack":"UsernameExistsException: User account already exists\n    at de_UsernameExistsExceptionRes (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@aws-sdk+client-cognito-identity-provider@3.879.0\\node_modules\\@aws-sdk\\client-cognito-identity-provider\\dist-cjs\\index.js:5124:21)\n    at de_CommandError (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@aws-sdk+client-cognito-identity-provider@3.879.0\\node_modules\\@aws-sdk\\client-cognito-identity-provider\\dist-cjs\\index.js:4616:19)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+middleware-serde@4.0.9\\node_modules\\@smithy\\middleware-serde\\dist-cjs\\index.js:36:20\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+core@3.9.0\\node_modules\\@smithy\\core\\dist-cjs\\index.js:193:18\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+middleware-retry@4.1.20\\node_modules\\@smithy\\middleware-retry\\dist-cjs\\index.js:320:38\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@aws-sdk+middleware-logger@3.876.0\\node_modules\\@aws-sdk\\middleware-logger\\dist-cjs\\index.js:33:22"}},"timestamp":"2026-02-23T10:54:34.838Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)
          at Generator.throw (<anonymous>)

    console.log
      {"level":"error","message":"CircuitBreaker (UnnamedService) failure detected.","metadata":{"error":{"message":"User does not exist.","name":"UserNotFoundException","stack":"UserNotFoundException: User does not exist.\n    at de_UserNotFoundExceptionRes (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@aws-sdk+client-cognito-identity-provider@3.879.0\\node_modules\\@aws-sdk\\client-cognito-identity-provider\\dist-cjs\\index.js:5142:21)\n    at de_CommandError (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@aws-sdk+client-cognito-identity-provider@3.879.0\\node_modules\\@aws-sdk\\client-cognito-identity-provider\\dist-cjs\\index.js:4580:19)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+middleware-serde@4.0.9\\node_modules\\@smithy\\middleware-serde\\dist-cjs\\index.js:36:20\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+core@3.9.0\\node_modules\\@smithy\\core\\dist-cjs\\index.js:193:18\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+middleware-retry@4.1.20\\node_modules\\@smithy\\middleware-retry\\dist-cjs\\index.js:320:38\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@aws-sdk+middleware-logger@3.876.0\\node_modules\\@aws-sdk\\middleware-logger\\dist-cjs\\index.js:33:22"}},"timestamp":"2026-02-23T10:54:34.954Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"CircuitBreaker (UnnamedService) opened. Service failing.","metadata":{},"timestamp":"2026-02-23T10:54:34.955Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"CircuitBreaker (UnnamedService) failure detected.","metadata":{"error":{"message":"A group with the name already exists.","name":"GroupExistsException","stack":"GroupExistsException: A group with the name already exists.\n    at de_GroupExistsExceptionRes (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@aws-sdk+client-cognito-identity-provider@3.879.0\\node_modules\\@aws-sdk\\client-cognito-identity-provider\\dist-cjs\\index.js:4827:21)\n    at de_CommandError (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@aws-sdk+client-cognito-identity-provider@3.879.0\\node_modules\\@aws-sdk\\client-cognito-identity-provider\\dist-cjs\\index.js:4682:19)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+middleware-serde@4.0.9\\node_modules\\@smithy\\middleware-serde\\dist-cjs\\index.js:36:20\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+core@3.9.0\\node_modules\\@smithy\\core\\dist-cjs\\index.js:193:18\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+middleware-retry@4.1.20\\node_modules\\@smithy\\middleware-retry\\dist-cjs\\index.js:320:38\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@aws-sdk+middleware-logger@3.876.0\\node_modules\\@aws-sdk\\middleware-logger\\dist-cjs\\index.js:33:22"}},"timestamp":"2026-02-23T10:54:35.246Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"CircuitBreaker (UnnamedService) opened. Service failing.","metadata":{},"timestamp":"2026-02-23T10:54:35.246Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Cognito Admin error during adminCreateGroup","metadata":{"error":{"errorMessage":"A group with the name already exists.","errorName":"GroupExistsException","stack":"GroupExistsException: A group with the name already exists.\n    at de_GroupExistsExceptionRes (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@aws-sdk+client-cognito-identity-provider@3.879.0\\node_modules\\@aws-sdk\\client-cognito-identity-provider\\dist-cjs\\index.js:4827:21)\n    at de_CommandError (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@aws-sdk+client-cognito-identity-provider@3.879.0\\node_modules\\@aws-sdk\\client-cognito-identity-provider\\dist-cjs\\index.js:4682:19)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+middleware-serde@4.0.9\\node_modules\\@smithy\\middleware-serde\\dist-cjs\\index.js:36:20\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+core@3.9.0\\node_modules\\@smithy\\core\\dist-cjs\\index.js:193:18\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+middleware-retry@4.1.20\\node_modules\\@smithy\\middleware-retry\\dist-cjs\\index.js:320:38\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@aws-sdk+middleware-logger@3.876.0\\node_modules\\@aws-sdk\\middleware-logger\\dist-cjs\\index.js:33:22"}},"timestamp":"2026-02-23T10:54:35.247Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)
          at Generator.throw (<anonymous>)

    console.log
      {"level":"info","message":"Admin successfully added user primary-user-1771844073066 to group primary-group-1771844073066","metadata":{},"timestamp":"2026-02-23T10:54:35.400Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"Admin successfully removed user primary-user-1771844073066 from group primary-group-1771844073066","metadata":{},"timestamp":"2026-02-23T10:54:35.649Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"Admin successfully updated attributes for user: primary-user-1771844073066","metadata":{},"timestamp":"2026-02-23T10:54:35.881Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"Admin successfully disabled user: primary-user-1771844073066","metadata":{},"timestamp":"2026-02-23T10:54:36.152Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"Admin successfully enabled user: primary-user-1771844073066","metadata":{},"timestamp":"2026-02-23T10:54:36.344Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"Admin successfully set password for user: primary-user-1771844073066","metadata":{},"timestamp":"2026-02-23T10:54:36.753Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"Admin successfully added user primary-user-1771844073066 to group primary-group-1771844073066","metadata":{},"timestamp":"2026-02-23T10:54:37.151Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"Admin successfully removed user primary-user-1771844073066 from group primary-group-1771844073066","metadata":{},"timestamp":"2026-02-23T10:54:37.383Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Cleaning up all Cognito resources...

      at tests/integration/Adapter/CognitoUserMgmtAdapter.integration.spec.ts:61:17

    console.log
      {"level":"info","message":"Admin successfully removed user primary-user-1771844073066 from group primary-group-1771844073066","metadata":{},"timestamp":"2026-02-23T10:54:37.496Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"Admin successfully deleted user: primary-user-1771844073066","metadata":{},"timestamp":"2026-02-23T10:54:37.663Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Cleaned up user: primary-user-1771844073066

      at tests/integration/Adapter/CognitoUserMgmtAdapter.integration.spec.ts:78:25

    console.log
      {"level":"info","message":"Request to deactivate group: primary-group-1771844073066.","metadata":{},"timestamp":"2026-02-23T10:54:37.663Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"Admin successfully deactivated group: primary-group-1771844073066","metadata":{},"timestamp":"2026-02-23T10:54:37.797Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Cleaned up group: primary-group-1771844073066

      at tests/integration/Adapter/CognitoUserMgmtAdapter.integration.spec.ts:90:25

PASS tests/integration/Persistence/DynamoAssignmentRepository.integration.spec.ts (8.985 s)
  ΓùÅ Console

    console.log
      Table TestAssignments cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestAssignments cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestAssignments cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestAssignments cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestAssignments cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestAssignments cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestAssignments cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestAssignments cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestAssignments cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestAssignments cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestAssignments cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestAssignments cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestAssignments cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestAssignments cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestAssignments cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestAssignments cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestAssignments cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestAssignments cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestAssignments cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13


Summary of all failing tests
FAIL tests/integration/routes/user.admin.routes.integration.spec.ts (43.693 s)
  ΓùÅ Integration Tests: User Admin Routes (/api/admin/users) ΓÇ║ Authentication Guard ΓÇ║ should allow access with the correct test bypass token

    expected 200 "OK", got 500 "Internal Server Error"

      234 |                 .get('/api/admin/users')
      235 |                 .set('Authorization', TEST_ADMIN_TOKEN)
    > 236 |                 .expect(HttpStatusCode.OK); // 200
          |                  ^
      237 |         });
      238 |     });
      239 |     // --- POST Create User ---

      at tests/integration/routes/user.admin.routes.integration.spec.ts:236:18
      at tests/integration/routes/user.admin.routes.integration.spec.ts:9:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/user.admin.routes.integration.spec.ts:5:12)
      at Object.<anonymous> (tests/integration/routes/user.admin.routes.integration.spec.ts:231:81)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: User Admin Routes (/api/admin/users) ΓÇ║ POST /api/admin/users ΓÇ║ should return 400 Bad Request if validation fails

    expected 400 "Bad Request", got 201 "Created"

      275 |                 .set(MOCK_AUTH_HEADER)
      276 |                 .send(invalidPayload)
    > 277 |                 .expect(HttpStatusCode.BAD_REQUEST); // 400
          |                  ^
      278 |             expect(mockUserAdminService.createUser).not.toHaveBeenCalled();
      279 |         });
      280 |

      at tests/integration/routes/user.admin.routes.integration.spec.ts:277:18
      at tests/integration/routes/user.admin.routes.integration.spec.ts:9:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/user.admin.routes.integration.spec.ts:5:12)
      at Object.<anonymous> (tests/integration/routes/user.admin.routes.integration.spec.ts:271:76)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: User Admin Routes (/api/admin/users) ΓÇ║ GET /api/admin/users ΓÇ║ should return 200 OK with a list of users

    expected 200 "OK", got 500 "Internal Server Error"

      313 |                 .get('/api/admin/users')
      314 |                 .set(MOCK_AUTH_HEADER)
    > 315 |                 .expect(HttpStatusCode.OK); // 200
          |                  ^
      316 |             expect(mockUserAdminService.listUsers).toHaveBeenCalledTimes(1);
      317 |         });
      318 |

      at tests/integration/routes/user.admin.routes.integration.spec.ts:315:18
      at tests/integration/routes/user.admin.routes.integration.spec.ts:9:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/user.admin.routes.integration.spec.ts:5:12)
      at Object.<anonymous> (tests/integration/routes/user.admin.routes.integration.spec.ts:306:68)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: User Admin Routes (/api/admin/users) ΓÇ║ GET /api/admin/users ΓÇ║ should pass query parameters to the service

    expected 200 "OK", got 500 "Internal Server Error"

      323 |                 .query({ limit: 5, filter: 'status="Enabled"', paginationToken: 'prev' })
      324 |                 .set(MOCK_AUTH_HEADER)
    > 325 |                 .expect(HttpStatusCode.OK);
          |                  ^
      326 |             expect(mockUserAdminService.listUsers).toHaveBeenCalledWith(expect.anything(), { limit: 5, filter: 'status="Enabled"', paginationToken: 'prev' });
      327 |         });
      328 |

      at tests/integration/routes/user.admin.routes.integration.spec.ts:325:18
      at tests/integration/routes/user.admin.routes.integration.spec.ts:9:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/user.admin.routes.integration.spec.ts:5:12)
      at Object.<anonymous> (tests/integration/routes/user.admin.routes.integration.spec.ts:319:70)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: User Admin Routes (/api/admin/users) ΓÇ║ GET /api/admin/users ΓÇ║ should return 500 if the service fails unexpectedly

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 1
    Received number of calls: 0

      334 |                 .set(MOCK_AUTH_HEADER)
      335 |                 .expect(HttpStatusCode.INTERNAL_SERVER_ERROR); // 500
    > 336 |             expect(mockUserAdminService.listUsers).toHaveBeenCalledTimes(1);
          |                                                    ^
      337 |         });
      338 |     });
      339 |

      at tests/integration/routes/user.admin.routes.integration.spec.ts:336:52
      at fulfilled (tests/integration/routes/user.admin.routes.integration.spec.ts:6:58)

  ΓùÅ Integration Tests: User Admin Routes (/api/admin/users) ΓÇ║ User Group Management ΓÇ║ DELETE /api/admin/users/:username/groups/:groupName ΓÇ║ should return 204 No Content when removing user from group

    expected 204 "No Content", got 500 "Internal Server Error"

      658 |                     .delete(`/api/admin/users/${targetUsername}/groups/${testGroupName}`)
      659 |                     .set(MOCK_AUTH_HEADER)
    > 660 |                     .expect(HttpStatusCode.NO_CONTENT); // 204
          |                      ^
      661 |                 expect(mockUserAdminService.removeUserFromGroup).toHaveBeenCalledWith(expect.anything(), targetUsername, testGroupName);
      662 |             });
      663 |

      at tests/integration/routes/user.admin.routes.integration.spec.ts:660:22
      at tests/integration/routes/user.admin.routes.integration.spec.ts:9:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/user.admin.routes.integration.spec.ts:5:12)
      at Object.<anonymous> (tests/integration/routes/user.admin.routes.integration.spec.ts:655:89)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: User Admin Routes (/api/admin/users) ΓÇ║ User Group Management ΓÇ║ DELETE /api/admin/users/:username/groups/:groupName ΓÇ║ should return 404 if user/group not found (via service error)

    expected 404 "Not Found", got 500 "Internal Server Error"

      668 |                     .delete(`/api/admin/users/${targetUsername}/groups/${testGroupName}`)
      669 |                     .set(MOCK_AUTH_HEADER)
    > 670 |                     .expect(HttpStatusCode.NOT_FOUND); // 404
          |                      ^
      671 |                 expect(mockUserAdminService.removeUserFromGroup).toHaveBeenCalledTimes(1);
      672 |
      673 |

      at tests/integration/routes/user.admin.routes.integration.spec.ts:670:22
      at tests/integration/routes/user.admin.routes.integration.spec.ts:9:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/user.admin.routes.integration.spec.ts:5:12)
      at Object.<anonymous> (tests/integration/routes/user.admin.routes.integration.spec.ts:664:92)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

FAIL tests/unit/infrastructure/adapters/policy-engine/DynamoDbPolicyEngineAdapter.spec.ts
  ΓùÅ DynamoDbPolicyEngineAdapter ΓÇ║ publishPolicy ΓÇ║ should validate syntax, save policy, and log success

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: Any<String>, {"createdAt": 2026-02-23T10:54:26.696Z, "description": "", "id": "policy-id", "isActive": true, "metadata": {}, "policyDefinition": "rule { true }", "policyLanguage": "rego", "policyName": "test-policy", "tenantId": "test-tenant", "updatedAt": 2026-02-23T10:54:26.696Z, "version": 1}
    Received: {"createdAt": 2026-02-23T10:54:26.696Z, "description": "", "id": "policy-id", "isActive": true, "metadata": {}, "policyDefinition": "rule { true }", "policyLanguage": "rego", "policyName": "test-policy", "tenantId": "test-tenant", "updatedAt": 2026-02-23T10:54:26.696Z, "version": 1}

    Number of calls: 1

      41 |
      42 |             expect(validatePolicySyntaxSpy).toHaveBeenCalledWith(mockPolicy.policyDefinition, mockPolicy.policyLanguage);
    > 43 |             expect(policyRepositoryMock.save).toHaveBeenCalledWith(expect.any(String), mockPolicy);
         |                                               ^
      44 |             expect(loggerMock.info).toHaveBeenCalledWith(expect.stringContaining('Successfully published policy'));
      45 |         });
      46 |

      at tests/unit/infrastructure/adapters/policy-engine/DynamoDbPolicyEngineAdapter.spec.ts:43:47
      at fulfilled (tests/unit/infrastructure/adapters/policy-engine/DynamoDbPolicyEngineAdapter.spec.ts:5:58)

FAIL tests/e2e/user.admin.e2e.spec.ts (44.708 s)
  ΓùÅ User Admin E2E ΓÇ║ should create a new user

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: Any<String>, {"temporaryPassword": "Password123!", "userAttributes": {"email": "test-user-1771844065149@example.com", "name": "Test User"}, "username": "test-user-1771844065149"}
    Received: {"body": {"temporaryPassword": "Password123!", "userAttributes": {"email": "test-user-1771844065149@example.com", "name": "Test User"}, "username": "test-user-1771844065149"}}

    Number of calls: 1

      53 |         expect(response.status).toBe(201); // Added explicit status check
      54 |         expect(response.body.username).toBe(username);
    > 55 |         expect(userMgmtAdapterMock.adminCreateUser).toHaveBeenCalledWith(expect.any(String), userDetails);
         |                                                     ^
      56 |     });
      57 |
      58 |     it('should get the created user', async () => {

      at tests/e2e/user.admin.e2e.spec.ts:55:53
      at fulfilled (tests/e2e/user.admin.e2e.spec.ts:5:58)

  ΓùÅ User Admin E2E ΓÇ║ should get the created user

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: Any<String>, "test-user-1771844065149"
    Received: "test-user-1771844065149"

    Number of calls: 1

      66 |
      67 |         expect(response.body.username).toBe(username);
    > 68 |         expect(userMgmtAdapterMock.adminGetUser).toHaveBeenCalledWith(expect.any(String), username);
         |                                                  ^
      69 |     });
      70 |
      71 |     it('should update the user attributes', async () => {

      at tests/e2e/user.admin.e2e.spec.ts:68:50
      at fulfilled (tests/e2e/user.admin.e2e.spec.ts:5:58)

  ΓùÅ User Admin E2E ΓÇ║ should update the user attributes

    expected 204 "No Content", got 404 "Not Found"

      81 |             .set('Authorization', `Bearer ${adminToken}`)
      82 |             .send(attributesToUpdate)
    > 83 |             .expect(204);
         |              ^
      84 |         
      85 |         expect(userMgmtAdapterMock.adminUpdateUserAttributes).toHaveBeenCalledWith(expect.any(String), { username, ...attributesToUpdate });
      86 |     });

      at tests/e2e/user.admin.e2e.spec.ts:83:14
      at tests/e2e/user.admin.e2e.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/e2e/user.admin.e2e.spec.ts:4:12)
      at Object.<anonymous> (tests/e2e/user.admin.e2e.spec.ts:71:56)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ User Admin E2E ΓÇ║ should add a user to a group

    expected 204 "No Content", got 200 "OK"

       96 |             .set('Authorization', `Bearer ${adminToken}`)
       97 |             .send({ groupName })
    >  98 |             .expect(204);
          |              ^
       99 |         
      100 |         expect(userMgmtAdapterMock.adminAddUserToGroup).toHaveBeenCalledWith(expect.any(String), username, groupName);
      101 |     });

      at tests/e2e/user.admin.e2e.spec.ts:98:14
      at tests/e2e/user.admin.e2e.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/e2e/user.admin.e2e.spec.ts:4:12)
      at Object.<anonymous> (tests/e2e/user.admin.e2e.spec.ts:91:51)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ User Admin E2E ΓÇ║ should list the user's groups

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: Any<String>, "test-user-1771844065149", undefined, undefined
    Received: "test-user-1771844065149", undefined, undefined

    Number of calls: 1

      111 |
      112 |         expect(response.body.groups[0].groupName).toBe(groupName);
    > 113 |         expect(userMgmtAdapterMock.adminListGroupsForUser).toHaveBeenCalledWith(expect.any(String), username, undefined, undefined);
          |                                                            ^
      114 |     });
      115 |
      116 |     it('should remove the user from the group', async () => {

      at tests/e2e/user.admin.e2e.spec.ts:113:60
      at fulfilled (tests/e2e/user.admin.e2e.spec.ts:5:58)

  ΓùÅ User Admin E2E ΓÇ║ should remove the user from the group

    expected 204 "No Content", got 500 "Internal Server Error"

      120 |             .delete(`${BASE_API_PATH}/${username}/groups/${groupName}`)
      121 |             .set('Authorization', `Bearer ${adminToken}`)
    > 122 |             .expect(204);
          |              ^
      123 |         
      124 |         expect(userMgmtAdapterMock.adminRemoveUserFromGroup).toHaveBeenCalledWith(expect.any(String), username, groupName);
      125 |     });

      at tests/e2e/user.admin.e2e.spec.ts:122:14
      at tests/e2e/user.admin.e2e.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/e2e/user.admin.e2e.spec.ts:4:12)
      at Object.<anonymous> (tests/e2e/user.admin.e2e.spec.ts:116:60)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ User Admin E2E ΓÇ║ should disable the user

    expected 204 "No Content", got 404 "Not Found"

      131 |             .post(`${BASE_API_PATH}/${username}/disable`)
      132 |             .set('Authorization', `Bearer ${adminToken}`)
    > 133 |             .expect(204);
          |              ^
      134 |         
      135 |         expect(userMgmtAdapterMock.adminDisableUser).toHaveBeenCalledWith(expect.any(String), username);
      136 |     });

      at tests/e2e/user.admin.e2e.spec.ts:133:14
      at tests/e2e/user.admin.e2e.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/e2e/user.admin.e2e.spec.ts:4:12)
      at Object.<anonymous> (tests/e2e/user.admin.e2e.spec.ts:127:46)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ User Admin E2E ΓÇ║ should enable the user

    expected 204 "No Content", got 404 "Not Found"

      142 |             .post(`${BASE_API_PATH}/${username}/enable`)
      143 |             .set('Authorization', `Bearer ${adminToken}`)
    > 144 |             .expect(204);
          |              ^
      145 |         
      146 |         expect(userMgmtAdapterMock.adminEnableUser).toHaveBeenCalledWith(expect.any(String), username);
      147 |     });

      at tests/e2e/user.admin.e2e.spec.ts:144:14
      at tests/e2e/user.admin.e2e.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/e2e/user.admin.e2e.spec.ts:4:12)
      at Object.<anonymous> (tests/e2e/user.admin.e2e.spec.ts:138:45)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ User Admin E2E ΓÇ║ should delete the user

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: Any<String>, "test-user-1771844065149"
    Received: "test-user-1771844065149"

    Number of calls: 1

      155 |             .expect(204);
      156 |         
    > 157 |         expect(userMgmtAdapterMock.adminDeleteUser).toHaveBeenCalledWith(expect.any(String), username);
          |                                                     ^
      158 |     });
      159 | });

      at tests/e2e/user.admin.e2e.spec.ts:157:53
      at fulfilled (tests/e2e/user.admin.e2e.spec.ts:5:58)

FAIL tests/e2e/group.admin.e2e.spec.ts (44.825 s)
  ΓùÅ Group Admin E2E ΓÇ║ should create a new group

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: Any<String>, {"description": "A test group for e2e tests", "groupName": "test-group-1771844065224"}
    Received: {"description": "A test group for e2e tests", "groupName": "test-group-1771844065224"}

    Number of calls: 1

      45 |
      46 |         expect(response.body.groupName).toBe(groupName);
    > 47 |         expect(userMgmtAdapterMock.adminCreateGroup).toHaveBeenCalledWith(expect.any(String), groupDetails);
         |                                                      ^
      48 |     });
      49 |
      50 |     it('should get the created group', async () => {

      at tests/e2e/group.admin.e2e.spec.ts:47:54
      at fulfilled (tests/e2e/group.admin.e2e.spec.ts:5:58)

  ΓùÅ Group Admin E2E ΓÇ║ should get the created group

    expected 200 "OK", got 500 "Internal Server Error"

      54 |             .get(`${BASE_API_PATH}/${groupName}`)
      55 |             .set('Authorization', `Bearer ${adminToken}`)
    > 56 |             .expect(200);
         |              ^
      57 |
      58 |         expect(response.body.groupName).toBe(groupName);
      59 |         expect(userMgmtAdapterMock.adminGetGroup).toHaveBeenCalledWith(expect.any(String), groupName);

      at tests/e2e/group.admin.e2e.spec.ts:56:14
      at tests/e2e/group.admin.e2e.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/e2e/group.admin.e2e.spec.ts:4:12)
      at Object.<anonymous> (tests/e2e/group.admin.e2e.spec.ts:50:51)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Group Admin E2E ΓÇ║ should list the roles for the group

    expected 200 "OK", got 500 "Internal Server Error"

      81 |             .get(`${BASE_API_PATH}/${groupName}/roles`)
      82 |             .set('Authorization', `Bearer ${adminToken}`)
    > 83 |             .expect(200);
         |              ^
      84 |
      85 |         expect(response.body.roles).toContain(roleName); // Changed to response.body.roles
      86 |         expect(assignmentRepositoryMock.findRolesByGroupName).toHaveBeenCalledWith(expect.any(String), groupName);

      at tests/e2e/group.admin.e2e.spec.ts:83:14
      at tests/e2e/group.admin.e2e.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/e2e/group.admin.e2e.spec.ts:4:12)
      at Object.<anonymous> (tests/e2e/group.admin.e2e.spec.ts:76:58)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Group Admin E2E ΓÇ║ should remove the role from the group

    expected 204 "No Content", got 500 "Internal Server Error"

      93 |             .delete(`${BASE_API_PATH}/${groupName}/roles/${roleName}`)
      94 |             .set('Authorization', `Bearer ${adminToken}`)
    > 95 |             .expect(204);
         |              ^
      96 |         
      97 |         expect(assignmentRepositoryMock.removeRoleFromGroup).toHaveBeenCalledWith(expect.any(String), groupName, roleName);
      98 |     });

      at tests/e2e/group.admin.e2e.spec.ts:95:14
      at tests/e2e/group.admin.e2e.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/e2e/group.admin.e2e.spec.ts:4:12)
      at Object.<anonymous> (tests/e2e/group.admin.e2e.spec.ts:89:60)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Group Admin E2E ΓÇ║ should delete the group

    expected 204 "No Content", got 500 "Internal Server Error"

      104 |             .delete(`${BASE_API_PATH}/${groupName}`)
      105 |             .set('Authorization', `Bearer ${adminToken}`)
    > 106 |             .expect(204);
          |              ^
      107 |         
      108 |         expect(userMgmtAdapterMock.adminDeleteGroup).toHaveBeenCalledWith(expect.any(String), groupName);
      109 |     });

      at tests/e2e/group.admin.e2e.spec.ts:106:14
      at tests/e2e/group.admin.e2e.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/e2e/group.admin.e2e.spec.ts:4:12)
      at Object.<anonymous> (tests/e2e/group.admin.e2e.spec.ts:100:46)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

FAIL tests/integration/routes/role.admin.routes.integration.spec.ts (45.134 s)
  ΓùÅ Integration Tests: Role Admin Routes (/api/admin/roles) ΓÇ║ GET /api/admin/roles/:roleName ΓÇ║ should return 200 OK with role data if role exists

    expected 200 "OK", got 500 "Internal Server Error"

      142 |                 .get(`${BASE_API_PATH}/${targetRoleName}`)
      143 |                 .set(MOCK_AUTH_HEADER)
    > 144 |                 .expect(HttpStatusCode.OK) // 200
          |                  ^
      145 |                 .expect(res => {
      146 |                     expect(res.body.roleName).toBe(targetRoleName);
      147 |                     expect(res.body.description).toBe('get role');

      at tests/integration/routes/role.admin.routes.integration.spec.ts:144:18
      at tests/integration/routes/role.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/role.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/role.admin.routes.integration.spec.ts:139:77)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Role Admin Routes (/api/admin/roles) ΓÇ║ GET /api/admin/roles/:roleName ΓÇ║ should return 404 Not Found if service returns null

    expected 404 "Not Found", got 500 "Internal Server Error"

      155 |                 .get(`${BASE_API_PATH}/${targetRoleName}`)
      156 |                 .set(MOCK_AUTH_HEADER)
    > 157 |                 .expect(HttpStatusCode.NOT_FOUND); // 404
          |                  ^
      158 |             expect(mockRoleAdminService.getRole).toHaveBeenCalledWith(expect.anything(), targetRoleName);
      159 |         });
      160 |

      at tests/integration/routes/role.admin.routes.integration.spec.ts:157:18
      at tests/integration/routes/role.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/role.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/role.admin.routes.integration.spec.ts:152:78)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Role Admin Routes (/api/admin/roles) ΓÇ║ DELETE /api/admin/roles/:roleName ΓÇ║ should return 204 No Content if service succeeds

    expected 204 "No Content", got 500 "Internal Server Error"

      215 |                 .delete(`${BASE_API_PATH}/${targetRoleName}`)
      216 |                 .set(MOCK_AUTH_HEADER)
    > 217 |                 .expect(HttpStatusCode.NO_CONTENT); // 204
          |                  ^
      218 |             expect(mockRoleAdminService.deleteRole).toHaveBeenCalledWith(expect.anything(), targetRoleName);
      219 |         });
      220 |

      at tests/integration/routes/role.admin.routes.integration.spec.ts:217:18
      at tests/integration/routes/role.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/role.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/role.admin.routes.integration.spec.ts:212:75)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Role Admin Routes (/api/admin/roles) ΓÇ║ DELETE /api/admin/roles/:roleName ΓÇ║ should return 404 Not Found if service throws RoleNotFoundError

    expected 404 "Not Found", got 500 "Internal Server Error"

      226 |                 .delete(`${BASE_API_PATH}/${targetRoleName}`)
      227 |                 .set(MOCK_AUTH_HEADER)
    > 228 |                 .expect(HttpStatusCode.NOT_FOUND); // 404
          |                  ^
      229 |             expect(mockRoleAdminService.deleteRole).toHaveBeenCalledWith(expect.anything(), targetRoleName);
      230 |         });
      231 |

      at tests/integration/routes/role.admin.routes.integration.spec.ts:228:18
      at tests/integration/routes/role.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/role.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/role.admin.routes.integration.spec.ts:221:90)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Role Admin Routes (/api/admin/roles) ΓÇ║ Permissions Management (/api/admin/roles/:roleName/permissions) ΓÇ║ DELETE /:roleName/permissions/:permissionName ΓÇ║ should return 204 No Content on successful removal

    expected 204 "No Content", got 500 "Internal Server Error"

      260 |                     .delete(`${BASE_API_PATH}/${targetRoleName}/permissions/${targetPermissionName}`)
      261 |                     .set(MOCK_AUTH_HEADER)
    > 262 |                     .expect(HttpStatusCode.NO_CONTENT); // 204
          |                      ^
      263 |                 expect(mockRoleAdminService.removePermissionFromRole).toHaveBeenCalledWith(expect.anything(), targetRoleName, targetPermissionName);
      264 |             });
      265 |         });

      at tests/integration/routes/role.admin.routes.integration.spec.ts:262:22
      at tests/integration/routes/role.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/role.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/role.admin.routes.integration.spec.ts:257:81)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Role Admin Routes (/api/admin/roles) ΓÇ║ Permissions Management (/api/admin/roles/:roleName/permissions) ΓÇ║ GET /:roleName/permissions ΓÇ║ should return 200 OK with a list of permission names

    expected 200 "OK", got 500 "Internal Server Error"

      272 |                     .get(`${BASE_API_PATH}/${targetRoleName}/permissions`)
      273 |                     .set(MOCK_AUTH_HEADER)
    > 274 |                     .expect(HttpStatusCode.OK) // 200
          |                      ^
      275 |                     .expect(res => {
      276 |                         expect(res.body.permissions).toEqual(mockPermissions);
      277 |                     });

      at tests/integration/routes/role.admin.routes.integration.spec.ts:274:22
      at tests/integration/routes/role.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/role.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/role.admin.routes.integration.spec.ts:268:83)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

FAIL tests/integration/routes/permission.admin.routes.integration.spec.ts (45.735 s)
  ΓùÅ Integration Tests: Permission Admin Routes (/api/admin/permissions) ΓÇ║ POST /api/admin/permissions ΓÇ║ should return 400 on validation error (e.g., missing permissionName)

    expect(received).toEqual(expected) // deep equality

    - Expected  - 1
    + Received  + 1

      Object {
    -   "body.permissionName": "Permission name is required",
    +   "permissionName": "Permission name is required",
      }

      128 |              expect(response.status).toBe(400);
      129 |              expect(response.body.name).toBe('ValidationError');
    > 130 |              expect(response.body.details).toEqual({'body.permissionName': 'Permission name is required'});
          |                                            ^
      131 |              expect(mockPermissionAdminService.createPermission).not.toHaveBeenCalled();
      132 |         });
      133 |

      at tests/integration/routes/permission.admin.routes.integration.spec.ts:130:44
      at fulfilled (tests/integration/routes/permission.admin.routes.integration.spec.ts:6:58)

  ΓùÅ Integration Tests: Permission Admin Routes (/api/admin/permissions) ΓÇ║ GET /api/admin/permissions/:permissionName ΓÇ║ should return 200 and the permission if found

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

      166 |                  .set('Authorization', TEST_ADMIN_TOKEN);
      167 |
    > 168 |              expect(response.status).toBe(200);
          |                                      ^
      169 |              expect(response.body.permissionName).toBe(permName);
      170 |              expect(mockPermissionAdminService.getPermission).toHaveBeenCalledWith(
      171 |                  expect.objectContaining({ id: 'test-admin-id-123' }),

      at tests/integration/routes/permission.admin.routes.integration.spec.ts:168:38
      at fulfilled (tests/integration/routes/permission.admin.routes.integration.spec.ts:6:58)

  ΓùÅ Integration Tests: Permission Admin Routes (/api/admin/permissions) ΓÇ║ GET /api/admin/permissions/:permissionName ΓÇ║ should return 404 if permission not found

    expect(received).toBe(expected) // Object.is equality

    Expected: 404
    Received: 500

      180 |                  .set('Authorization', TEST_ADMIN_TOKEN);
      181 |
    > 182 |              expect(response.status).toBe(404);
          |                                      ^
      183 |              // Check based on controller's response or NotFoundError handling in middleware
      184 |              expect(response.body.message).toContain('not found');
      185 |          });

      at tests/integration/routes/permission.admin.routes.integration.spec.ts:182:38
      at fulfilled (tests/integration/routes/permission.admin.routes.integration.spec.ts:6:58)

  ΓùÅ Integration Tests: Permission Admin Routes (/api/admin/permissions) ΓÇ║ DELETE /api/admin/permissions/:permissionName ΓÇ║ should return 204 on successful deletion

    expect(received).toBe(expected) // Object.is equality

    Expected: 204
    Received: 500

      275 |                  .set('Authorization', TEST_ADMIN_TOKEN);
      276 |
    > 277 |              expect(response.status).toBe(204);
          |                                      ^
      278 |              expect(mockPermissionAdminService.deletePermission).toHaveBeenCalledWith(
      279 |                  expect.objectContaining({ id: 'test-admin-id-123' }),
      280 |                  permName

      at tests/integration/routes/permission.admin.routes.integration.spec.ts:277:38
      at fulfilled (tests/integration/routes/permission.admin.routes.integration.spec.ts:6:58)

  ΓùÅ Integration Tests: Permission Admin Routes (/api/admin/permissions) ΓÇ║ DELETE /api/admin/permissions/:permissionName ΓÇ║ should return 404 if permission not found for deletion

    expect(received).toBe(expected) // Object.is equality

    Expected: 404
    Received: 500

      289 |                  .delete(`${BASE_API_PATH}/${permName}`)
      290 |                  .set('Authorization', TEST_ADMIN_TOKEN);
    > 291 |              expect(response.status).toBe(404);
          |                                      ^
      292 |          });
      293 |
      294 |          it('should return 401 if token is invalid/missing', async () => {

      at tests/integration/routes/permission.admin.routes.integration.spec.ts:291:38
      at fulfilled (tests/integration/routes/permission.admin.routes.integration.spec.ts:6:58)

  ΓùÅ Integration Tests: Permission Admin Routes (/api/admin/permissions) ΓÇ║ GET /api/admin/permissions/:permissionName/roles ΓÇ║ should return 200 and list of role names

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

      309 |                  .set('Authorization', TEST_ADMIN_TOKEN);
      310 |
    > 311 |              expect(response.status).toBe(200);
          |                                      ^
      312 |              expect(response.body).toEqual({ roles });
      313 |              expect(mockPermissionAdminService.listRolesForPermission).toHaveBeenCalledWith(
      314 |                  expect.objectContaining({ id: 'test-admin-id-123' }),

      at tests/integration/routes/permission.admin.routes.integration.spec.ts:311:38
      at fulfilled (tests/integration/routes/permission.admin.routes.integration.spec.ts:6:58)

  ΓùÅ Integration Tests: Permission Admin Routes (/api/admin/permissions) ΓÇ║ GET /api/admin/permissions/:permissionName/roles ΓÇ║ should return 404 if permission is not found

    expect(received).toBe(expected) // Object.is equality

    Expected: 404
    Received: 500

      324 |                  .get(`${BASE_API_PATH}/${permName}/roles`)
      325 |                  .set('Authorization', TEST_ADMIN_TOKEN);
    > 326 |              expect(response.status).toBe(404);
          |                                      ^
      327 |         });
      328 |          it('should return 401 if token is invalid/missing', async () => {
      329 |              const response = await request(app).get(`${BASE_API_PATH}/${permName}/roles`);

      at tests/integration/routes/permission.admin.routes.integration.spec.ts:326:38
      at fulfilled (tests/integration/routes/permission.admin.routes.integration.spec.ts:6:58)

FAIL tests/unit/application/services/group.admin.service.spec.ts
  ΓùÅ GroupAdminService ΓÇ║ createGroup ΓÇ║ should create a group successfully

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: Any<String>, {"description": "A new group", "groupName": "new-group"}
    Received: {"description": "A new group", "groupName": "new-group"}

    Number of calls: 1

      34 |             const result = await service.createGroup(adminUser, groupDetails);
      35 |
    > 36 |             expect(userMgmtAdapterMock.adminCreateGroup).toHaveBeenCalledWith(expect.any(String), groupDetails);
         |                                                          ^
      37 |             expect(result).toBeInstanceOf(Group);
      38 |             expect(result.groupName).toBe('new-group');
      39 |             expect(loggerMock.info).toHaveBeenCalledWith(expect.stringContaining('CREATE_GROUP'), expect.any(Object));

      at tests/unit/application/services/group.admin.service.spec.ts:36:58
      at fulfilled (tests/unit/application/services/group.admin.service.spec.ts:5:58)

  ΓùÅ GroupAdminService ΓÇ║ getGroup ΓÇ║ should return a group if found

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: Any<String>, "test-group"
    Received: "test-group"

    Number of calls: 1

      49 |             const result = await service.getGroup(adminUser, groupName);
      50 |
    > 51 |             expect(userMgmtAdapterMock.adminGetGroup).toHaveBeenCalledWith(expect.any(String), groupName);
         |                                                       ^
      52 |             expect(result).toBeInstanceOf(Group);
      53 |             expect(result?.groupName).toBe(groupName);
      54 |         });

      at tests/unit/application/services/group.admin.service.spec.ts:51:55
      at fulfilled (tests/unit/application/services/group.admin.service.spec.ts:5:58)

  ΓùÅ GroupAdminService ΓÇ║ listGroups ΓÇ║ should list active groups by default

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: Any<String>, undefined, undefined, undefined
    Received: undefined, undefined, undefined

    Number of calls: 1

      77 |             const result = await service.listGroups(adminUser);
      78 |
    > 79 |             expect(userMgmtAdapterMock.adminListGroups).toHaveBeenCalledWith(expect.any(String), undefined, undefined, undefined);
         |                                                         ^
      80 |             expect(result.groups.length).toBe(1);
      81 |             expect(result.groups[0].groupName).toBe('active-group');
      82 |             expect(result.nextToken).toBe('token');

      at tests/unit/application/services/group.admin.service.spec.ts:79:57
      at fulfilled (tests/unit/application/services/group.admin.service.spec.ts:5:58)

  ΓùÅ GroupAdminService ΓÇ║ deleteGroup ΓÇ║ should delete a group successfully

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: Any<String>, "test-group"
    Received: "test-group"

    Number of calls: 1

      105 |             await service.deleteGroup(adminUser, groupName);
      106 |
    > 107 |             expect(userMgmtAdapterMock.adminDeleteGroup).toHaveBeenCalledWith(expect.any(String), groupName);
          |                                                          ^
      108 |             expect(loggerMock.info).toHaveBeenCalledWith(expect.stringContaining('DEACTIVATE_GROUP'), expect.any(Object));
      109 |         });
      110 |     });

      at tests/unit/application/services/group.admin.service.spec.ts:107:58
      at fulfilled (tests/unit/application/services/group.admin.service.spec.ts:5:58)

  ΓùÅ GroupAdminService ΓÇ║ reactivateGroup ΓÇ║ should reactivate a group successfully

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: Any<String>, "test-group"
    Received: "test-group"

    Number of calls: 1

      117 |             await service.reactivateGroup(adminUser, groupName);
      118 |
    > 119 |             expect(userMgmtAdapterMock.adminReactivateGroup).toHaveBeenCalledWith(expect.any(String), groupName);
          |                                                              ^
      120 |             expect(loggerMock.info).toHaveBeenCalledWith(expect.stringContaining('REACTIVATE_GROUP'), expect.any(Object));
      121 |         });
      122 |     });

      at tests/unit/application/services/group.admin.service.spec.ts:119:62
      at fulfilled (tests/unit/application/services/group.admin.service.spec.ts:5:58)

FAIL tests/unit/application/services/policy.admin.service.spec.ts
  ΓùÅ PolicyAdminService ΓÇ║ createPolicy ΓÇ║ should create a policy successfully

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: Any<String>, Any<Policy>
    Received: {"createdAt": 2026-02-23T10:54:27.512Z, "description": undefined, "id": "policy-id-123", "isActive": true, "metadata": undefined, "policyDefinition": "def", "policyLanguage": "rego", "policyName": "New Policy", "tenantId": "test-tenant", "updatedAt": 2026-02-23T10:54:27.512Z, "version": 1}

    Number of calls: 1

      38 |             const result = await service.createPolicy(adminUser, details);
      39 |
    > 40 |             expect(policyRepositoryMock.save).toHaveBeenCalledWith(expect.any(String), expect.any(Policy));
         |                                               ^
      41 |             expect(result).toBeInstanceOf(Policy);
      42 |             expect(result.policyName).toBe('New Policy');
      43 |             expect(result.version).toBe(1);

      at tests/unit/application/services/policy.admin.service.spec.ts:40:47
      at fulfilled (tests/unit/application/services/policy.admin.service.spec.ts:5:58)

  ΓùÅ PolicyAdminService ΓÇ║ updatePolicy ΓÇ║ should update a policy successfully, incrementing the version

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: Any<String>, ObjectContaining {"policyName": "Updated Policy", "version": 2}
    Received: {"createdAt": 2026-02-23T10:54:27.503Z, "description": "A test policy", "id": "policy-id-123", "isActive": true, "metadata": {}, "policyDefinition": "def", "policyLanguage": "rego", "policyName": "Updated Policy", "tenantId": "test-tenant", "updatedAt": 2026-02-23T10:54:27.633Z, "version": 2}

    Number of calls: 1

      74 |
      75 |             expect(policyRepositoryMock.findById).toHaveBeenCalledWith(expect.any(String), policyId);
    > 76 |             expect(policyRepositoryMock.save).toHaveBeenCalledWith(expect.any(String), expect.objectContaining({
         |                                               ^
      77 |                 version: policyEntity.version + 1,
      78 |                 policyName: 'Updated Policy'
      79 |             }));

      at tests/unit/application/services/policy.admin.service.spec.ts:76:47
      at fulfilled (tests/unit/application/services/policy.admin.service.spec.ts:5:58)

  ΓùÅ PolicyAdminService ΓÇ║ rollbackPolicy ΓÇ║ should rollback a policy to a specific version

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: Any<String>, ObjectContaining {"id": "new-policy-id", "version": 1}
    Received: {"createdAt": 2026-02-23T10:54:27.815Z, "description": "A test policy", "id": "new-policy-id", "isActive": true, "metadata": {}, "policyDefinition": "old def", "policyLanguage": "rego", "policyName": "Test Policy", "tenantId": "test-tenant", "updatedAt": 2026-02-23T10:54:27.815Z, "version": 1}

    Number of calls: 1

      153 |
      154 |             expect(policyRepositoryMock.getPolicyVersion).toHaveBeenCalledWith(expect.any(String), policyId, 1);
    > 155 |             expect(policyRepositoryMock.save).toHaveBeenCalledWith(expect.any(String), expect.objectContaining({
          |                                               ^
      156 |                 id: 'new-policy-id',
      157 |                 version: 1
      158 |             }));

      at tests/unit/application/services/policy.admin.service.spec.ts:155:47
      at fulfilled (tests/unit/application/services/policy.admin.service.spec.ts:5:58)

FAIL tests/integration/routes/group.admin.routes.integration.spec.ts (46.263 s)
  ΓùÅ Integration Tests: Group Admin Routes (/api/admin/groups) ΓÇ║ GET /api/admin/groups/:groupName ΓÇ║ should return 200 OK with group data if group exists

    expected 200 "OK", got 500 "Internal Server Error"

      210 |                 .get(`${BASE_API_PATH}/${targetgroupName}`)
      211 |                 .set(MOCK_AUTH_HEADER)
    > 212 |                 .expect(HttpStatusCode.OK); // 200
          |                  ^
      213 |             expect(mockGroupAdminService.getGroup).toHaveBeenCalledWith(expect.anything(), targetgroupName);
      214 |         });
      215 |

      at tests/integration/routes/group.admin.routes.integration.spec.ts:212:18
      at tests/integration/routes/group.admin.routes.integration.spec.ts:9:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/group.admin.routes.integration.spec.ts:5:12)
      at Object.<anonymous> (tests/integration/routes/group.admin.routes.integration.spec.ts:207:79)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Group Admin Routes (/api/admin/groups) ΓÇ║ GET /api/admin/groups/:groupName ΓÇ║ should return 404 Not Found if service returns null

    expected 404 "Not Found", got 500 "Internal Server Error"

      219 |                 .get(`${BASE_API_PATH}/${targetgroupName}`)
      220 |                 .set(MOCK_AUTH_HEADER)
    > 221 |                 .expect(HttpStatusCode.NOT_FOUND); // 404 (Handled by controller)
          |                  ^
      222 |             expect(mockGroupAdminService.getGroup).toHaveBeenCalledWith(expect.anything(), targetgroupName);
      223 |         });
      224 |

      at tests/integration/routes/group.admin.routes.integration.spec.ts:221:18
      at tests/integration/routes/group.admin.routes.integration.spec.ts:9:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/group.admin.routes.integration.spec.ts:5:12)
      at Object.<anonymous> (tests/integration/routes/group.admin.routes.integration.spec.ts:216:78)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Group Admin Routes (/api/admin/groups) ΓÇ║ GET /api/admin/groups/:groupName ΓÇ║ should return 404 Not Found if service throws NotFoundError

    expected 404 "Not Found", got 500 "Internal Server Error"

      230 |                 .get(`${BASE_API_PATH}/${targetgroupName}`)
      231 |                 .set(MOCK_AUTH_HEADER)
    > 232 |                 .expect(HttpStatusCode.NOT_FOUND); // 404 (Handled by error middleware)
          |                  ^
      233 |             expect(mockGroupAdminService.getGroup).toHaveBeenCalledWith(expect.anything(), targetgroupName);
      234 |         });
      235 |

      at tests/integration/routes/group.admin.routes.integration.spec.ts:232:18
      at tests/integration/routes/group.admin.routes.integration.spec.ts:9:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/group.admin.routes.integration.spec.ts:5:12)
      at Object.<anonymous> (tests/integration/routes/group.admin.routes.integration.spec.ts:225:86)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Group Admin Routes (/api/admin/groups) ΓÇ║ GET /api/admin/groups/:groupName ΓÇ║ should return 400 Bad Request if groupName param is invalid

    expected 400 "Bad Request", got 500 "Internal Server Error"

      239 |                 .get(`${BASE_API_PATH}/${encodeURIComponent(invalidgroupName)}`) // URL encode it
      240 |                 .set(MOCK_AUTH_HEADER)
    > 241 |                 .expect(HttpStatusCode.BAD_REQUEST); // 400 (Handled by validation middleware)
          |                  ^
      242 |             expect(mockGroupAdminService.getGroup).not.toHaveBeenCalled();
      243 |         });
      244 |

      at tests/integration/routes/group.admin.routes.integration.spec.ts:241:18
      at tests/integration/routes/group.admin.routes.integration.spec.ts:9:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/group.admin.routes.integration.spec.ts:5:12)
      at Object.<anonymous> (tests/integration/routes/group.admin.routes.integration.spec.ts:236:86)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Group Admin Routes (/api/admin/groups) ΓÇ║ GET /api/admin/groups/:groupName ΓÇ║ should return 500 if the service fails unexpectedly

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: Anything, "Get-Group-Test"

    Number of calls: 0

      250 |                 .set(MOCK_AUTH_HEADER)
      251 |                 .expect(HttpStatusCode.INTERNAL_SERVER_ERROR); // 500
    > 252 |             expect(mockGroupAdminService.getGroup).toHaveBeenCalledWith(expect.anything(), targetgroupName);
          |                                                    ^
      253 |         });
      254 |
      255 |         it('should return 401 Unauthorized if token is missing', async () => {

      at tests/integration/routes/group.admin.routes.integration.spec.ts:252:52
      at fulfilled (tests/integration/routes/group.admin.routes.integration.spec.ts:6:58)

  ΓùÅ Integration Tests: Group Admin Routes (/api/admin/groups) ΓÇ║ DELETE /api/admin/groups/:groupName ΓÇ║ should return 204 No Content if service succeeds

    expected 204 "No Content", got 500 "Internal Server Error"

      269 |                 .delete(`${BASE_API_PATH}/${targetgroupName}`)
      270 |                 .set(MOCK_AUTH_HEADER)
    > 271 |                 .expect(HttpStatusCode.NO_CONTENT); // 204
          |                  ^
      272 |             expect(mockGroupAdminService.deleteGroup).toHaveBeenCalledWith(expect.anything(), targetgroupName);
      273 |         });
      274 |

      at tests/integration/routes/group.admin.routes.integration.spec.ts:271:18
      at tests/integration/routes/group.admin.routes.integration.spec.ts:9:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/group.admin.routes.integration.spec.ts:5:12)
      at Object.<anonymous> (tests/integration/routes/group.admin.routes.integration.spec.ts:266:75)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Group Admin Routes (/api/admin/groups) ΓÇ║ DELETE /api/admin/groups/:groupName ΓÇ║ should return 404 Not Found if service throws NotFoundError

    expected 404 "Not Found", got 500 "Internal Server Error"

      280 |                 .delete(`${BASE_API_PATH}/${targetgroupName}`)
      281 |                 .set(MOCK_AUTH_HEADER)
    > 282 |                 .expect(HttpStatusCode.NOT_FOUND); // 404
          |                  ^
      283 |             expect(mockGroupAdminService.deleteGroup).toHaveBeenCalledWith(expect.anything(), targetgroupName);
      284 |         });
      285 |

      at tests/integration/routes/group.admin.routes.integration.spec.ts:282:18
      at tests/integration/routes/group.admin.routes.integration.spec.ts:9:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/group.admin.routes.integration.spec.ts:5:12)
      at Object.<anonymous> (tests/integration/routes/group.admin.routes.integration.spec.ts:275:86)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Group Admin Routes (/api/admin/groups) ΓÇ║ DELETE /api/admin/groups/:groupName ΓÇ║ should return 400 Bad Request if groupName param is invalid

    expected 400 "Bad Request", got 500 "Internal Server Error"

      289 |                 .delete(`${BASE_API_PATH}/${encodeURIComponent(invalidgroupName)}`)
      290 |                 .set(MOCK_AUTH_HEADER)
    > 291 |                 .expect(HttpStatusCode.BAD_REQUEST); // 400
          |                  ^
      292 |             expect(mockGroupAdminService.deleteGroup).not.toHaveBeenCalled();
      293 |         });
      294 |

      at tests/integration/routes/group.admin.routes.integration.spec.ts:291:18
      at tests/integration/routes/group.admin.routes.integration.spec.ts:9:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/group.admin.routes.integration.spec.ts:5:12)
      at Object.<anonymous> (tests/integration/routes/group.admin.routes.integration.spec.ts:286:86)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Group Admin Routes (/api/admin/groups) ΓÇ║ DELETE /api/admin/groups/:groupName ΓÇ║ should return 500 if service fails unexpectedly

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: Anything, "Delete-Group-Test"

    Number of calls: 0

      300 |                 .set(MOCK_AUTH_HEADER)
      301 |                 .expect(HttpStatusCode.INTERNAL_SERVER_ERROR); // 500
    > 302 |             expect(mockGroupAdminService.deleteGroup).toHaveBeenCalledWith(expect.anything(), targetgroupName);
          |                                                       ^
      303 |         });
      304 |
      305 |         it('should return 401 Unauthorized if token is missing', async () => {

      at tests/integration/routes/group.admin.routes.integration.spec.ts:302:55
      at fulfilled (tests/integration/routes/group.admin.routes.integration.spec.ts:6:58)

FAIL tests/unit/api/middlewares/jwtAuth.middleware.spec.ts
  ΓùÅ jwtAuthMiddleware ΓÇ║ should populate req.user and req.accessToken and call next() on successful validation

    expect(received).toEqual(expected) // deep equality

    - Expected  - 1
    + Received  + 0

    @@ -9,8 +9,7 @@
        },
        "id": "user123",
        "roles": Array [
          "users",
        ],
    -   "tenantId": "test-tenant",
        "username": "testuser",
      }

      89 |
      90 |         expect(jwtValidatorMock.validate).toHaveBeenCalledWith(validToken.split(' ')[1]);
    > 91 |         expect(req.user).toEqual({
         |                          ^
      92 |             id: 'user123', tenantId: 'test-tenant',
      93 |             username: 'testuser',
      94 |             roles: ['users'],

      at tests/unit/api/middlewares/jwtAuth.middleware.spec.ts:91:26
      at fulfilled (tests/unit/api/middlewares/jwtAuth.middleware.spec.ts:5:58)

FAIL tests/integration/Persistence/DynamoUserProfileRepository.integration.spec.ts
  ΓùÅ DynamoUserProfileRepository Integration Tests ΓÇ║ should throw error when saving duplicate user profile (implement check in repo)

    ValidationException: The provided key element does not match the schema

      at throwDefaultError (node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:425:20)
      at node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:434:5
      at de_CommandError (node_modules/.pnpm/@aws-sdk+client-dynamodb@3.879.0/node_modules/@aws-sdk/client-dynamodb/dist-cjs/index.js:2359:14)
      at node_modules/.pnpm/@smithy+middleware-serde@4.0.9/node_modules/@smithy/middleware-serde/dist-cjs/index.js:36:20
      at node_modules/.pnpm/@aws-sdk+lib-dynamodb@3.879_ee4568148364d683af0669b014af13ba/node_modules/@aws-sdk/lib-dynamodb/dist-cjs/index.js:173:30
      at node_modules/.pnpm/@smithy+core@3.9.0/node_modules/@smithy/core/dist-cjs/index.js:193:18
      at node_modules/.pnpm/@smithy+middleware-retry@4.1.20/node_modules/@smithy/middleware-retry/dist-cjs/index.js:320:38
      at node_modules/.pnpm/@aws-sdk+middleware-logger@3.876.0/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js:33:22

  ΓùÅ DynamoUserProfileRepository Integration Tests ΓÇ║ should find an existing profile by ID

    ValidationException: The provided key element does not match the schema

      at throwDefaultError (node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:425:20)
      at node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:434:5
      at de_CommandError (node_modules/.pnpm/@aws-sdk+client-dynamodb@3.879.0/node_modules/@aws-sdk/client-dynamodb/dist-cjs/index.js:2359:14)
      at node_modules/.pnpm/@smithy+middleware-serde@4.0.9/node_modules/@smithy/middleware-serde/dist-cjs/index.js:36:20
      at node_modules/.pnpm/@aws-sdk+lib-dynamodb@3.879_ee4568148364d683af0669b014af13ba/node_modules/@aws-sdk/lib-dynamodb/dist-cjs/index.js:173:30
      at node_modules/.pnpm/@smithy+core@3.9.0/node_modules/@smithy/core/dist-cjs/index.js:193:18
      at node_modules/.pnpm/@smithy+middleware-retry@4.1.20/node_modules/@smithy/middleware-retry/dist-cjs/index.js:320:38
      at node_modules/.pnpm/@aws-sdk+middleware-logger@3.876.0/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js:33:22

  ΓùÅ DynamoUserProfileRepository Integration Tests ΓÇ║ should return null when finding non-existent profile by ID

    ValidationException: The provided key element does not match the schema

      at throwDefaultError (node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:425:20)
      at node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:434:5
      at de_CommandError (node_modules/.pnpm/@aws-sdk+client-dynamodb@3.879.0/node_modules/@aws-sdk/client-dynamodb/dist-cjs/index.js:2359:14)
      at node_modules/.pnpm/@smithy+middleware-serde@4.0.9/node_modules/@smithy/middleware-serde/dist-cjs/index.js:36:20
      at node_modules/.pnpm/@aws-sdk+lib-dynamodb@3.879_ee4568148364d683af0669b014af13ba/node_modules/@aws-sdk/lib-dynamodb/dist-cjs/index.js:173:30
      at node_modules/.pnpm/@smithy+core@3.9.0/node_modules/@smithy/core/dist-cjs/index.js:193:18
      at node_modules/.pnpm/@smithy+middleware-retry@4.1.20/node_modules/@smithy/middleware-retry/dist-cjs/index.js:320:38
      at node_modules/.pnpm/@aws-sdk+middleware-logger@3.876.0/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js:33:22

  ΓùÅ DynamoUserProfileRepository Integration Tests ΓÇ║ should find an existing profile by Email (assuming index exists)

    ValidationException: The provided key element does not match the schema

      at throwDefaultError (node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:425:20)
      at node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:434:5
      at de_CommandError (node_modules/.pnpm/@aws-sdk+client-dynamodb@3.879.0/node_modules/@aws-sdk/client-dynamodb/dist-cjs/index.js:2359:14)
      at node_modules/.pnpm/@smithy+middleware-serde@4.0.9/node_modules/@smithy/middleware-serde/dist-cjs/index.js:36:20
      at node_modules/.pnpm/@aws-sdk+lib-dynamodb@3.879_ee4568148364d683af0669b014af13ba/node_modules/@aws-sdk/lib-dynamodb/dist-cjs/index.js:173:30
      at node_modules/.pnpm/@smithy+core@3.9.0/node_modules/@smithy/core/dist-cjs/index.js:193:18
      at node_modules/.pnpm/@smithy+middleware-retry@4.1.20/node_modules/@smithy/middleware-retry/dist-cjs/index.js:320:38
      at node_modules/.pnpm/@aws-sdk+middleware-logger@3.876.0/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js:33:22

  ΓùÅ DynamoUserProfileRepository Integration Tests ΓÇ║ should return null when finding non-existent profile by Email

    ValidationException: The provided key element does not match the schema

      at throwDefaultError (node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:425:20)
      at node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:434:5
      at de_CommandError (node_modules/.pnpm/@aws-sdk+client-dynamodb@3.879.0/node_modules/@aws-sdk/client-dynamodb/dist-cjs/index.js:2359:14)
      at node_modules/.pnpm/@smithy+middleware-serde@4.0.9/node_modules/@smithy/middleware-serde/dist-cjs/index.js:36:20
      at node_modules/.pnpm/@aws-sdk+lib-dynamodb@3.879_ee4568148364d683af0669b014af13ba/node_modules/@aws-sdk/lib-dynamodb/dist-cjs/index.js:173:30
      at node_modules/.pnpm/@smithy+core@3.9.0/node_modules/@smithy/core/dist-cjs/index.js:193:18
      at node_modules/.pnpm/@smithy+middleware-retry@4.1.20/node_modules/@smithy/middleware-retry/dist-cjs/index.js:320:38
      at node_modules/.pnpm/@aws-sdk+middleware-logger@3.876.0/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js:33:22

  ΓùÅ DynamoUserProfileRepository Integration Tests ΓÇ║ should update an existing profile

    ValidationException: The provided key element does not match the schema

      at throwDefaultError (node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:425:20)
      at node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:434:5
      at de_CommandError (node_modules/.pnpm/@aws-sdk+client-dynamodb@3.879.0/node_modules/@aws-sdk/client-dynamodb/dist-cjs/index.js:2359:14)
      at node_modules/.pnpm/@smithy+middleware-serde@4.0.9/node_modules/@smithy/middleware-serde/dist-cjs/index.js:36:20
      at node_modules/.pnpm/@aws-sdk+lib-dynamodb@3.879_ee4568148364d683af0669b014af13ba/node_modules/@aws-sdk/lib-dynamodb/dist-cjs/index.js:173:30
      at node_modules/.pnpm/@smithy+core@3.9.0/node_modules/@smithy/core/dist-cjs/index.js:193:18
      at node_modules/.pnpm/@smithy+middleware-retry@4.1.20/node_modules/@smithy/middleware-retry/dist-cjs/index.js:320:38
      at node_modules/.pnpm/@aws-sdk+middleware-logger@3.876.0/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js:33:22

  ΓùÅ DynamoUserProfileRepository Integration Tests ΓÇ║ should throw error when updating non-existent profile (implement check)

    ValidationException: The provided key element does not match the schema

      at throwDefaultError (node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:425:20)
      at node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:434:5
      at de_CommandError (node_modules/.pnpm/@aws-sdk+client-dynamodb@3.879.0/node_modules/@aws-sdk/client-dynamodb/dist-cjs/index.js:2359:14)
      at node_modules/.pnpm/@smithy+middleware-serde@4.0.9/node_modules/@smithy/middleware-serde/dist-cjs/index.js:36:20
      at node_modules/.pnpm/@aws-sdk+lib-dynamodb@3.879_ee4568148364d683af0669b014af13ba/node_modules/@aws-sdk/lib-dynamodb/dist-cjs/index.js:173:30
      at node_modules/.pnpm/@smithy+core@3.9.0/node_modules/@smithy/core/dist-cjs/index.js:193:18
      at node_modules/.pnpm/@smithy+middleware-retry@4.1.20/node_modules/@smithy/middleware-retry/dist-cjs/index.js:320:38
      at node_modules/.pnpm/@aws-sdk+middleware-logger@3.876.0/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js:33:22

  ΓùÅ DynamoUserProfileRepository Integration Tests ΓÇ║ should delete an existing profile

    ValidationException: The provided key element does not match the schema

      at throwDefaultError (node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:425:20)
      at node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:434:5
      at de_CommandError (node_modules/.pnpm/@aws-sdk+client-dynamodb@3.879.0/node_modules/@aws-sdk/client-dynamodb/dist-cjs/index.js:2359:14)
      at node_modules/.pnpm/@smithy+middleware-serde@4.0.9/node_modules/@smithy/middleware-serde/dist-cjs/index.js:36:20
      at node_modules/.pnpm/@aws-sdk+lib-dynamodb@3.879_ee4568148364d683af0669b014af13ba/node_modules/@aws-sdk/lib-dynamodb/dist-cjs/index.js:173:30
      at node_modules/.pnpm/@smithy+core@3.9.0/node_modules/@smithy/core/dist-cjs/index.js:193:18
      at node_modules/.pnpm/@smithy+middleware-retry@4.1.20/node_modules/@smithy/middleware-retry/dist-cjs/index.js:320:38
      at node_modules/.pnpm/@aws-sdk+middleware-logger@3.876.0/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js:33:22

  ΓùÅ DynamoUserProfileRepository Integration Tests ΓÇ║ should not throw when deleting non-existent profile (idempotent)

    ValidationException: The provided key element does not match the schema

      at throwDefaultError (node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:425:20)
      at node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:434:5
      at de_CommandError (node_modules/.pnpm/@aws-sdk+client-dynamodb@3.879.0/node_modules/@aws-sdk/client-dynamodb/dist-cjs/index.js:2359:14)
      at node_modules/.pnpm/@smithy+middleware-serde@4.0.9/node_modules/@smithy/middleware-serde/dist-cjs/index.js:36:20
      at node_modules/.pnpm/@aws-sdk+lib-dynamodb@3.879_ee4568148364d683af0669b014af13ba/node_modules/@aws-sdk/lib-dynamodb/dist-cjs/index.js:173:30
      at node_modules/.pnpm/@smithy+core@3.9.0/node_modules/@smithy/core/dist-cjs/index.js:193:18
      at node_modules/.pnpm/@smithy+middleware-retry@4.1.20/node_modules/@smithy/middleware-retry/dist-cjs/index.js:320:38
      at node_modules/.pnpm/@aws-sdk+middleware-logger@3.876.0/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js:33:22

FAIL tests/unit/application/services/permission.admin.service.spec.ts
  ΓùÅ PermissionAdminService ΓÇ║ getPermission ΓÇ║ should return a permission if found

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "test-permission"
    Received: "test-tenant", "test-permission"

    Number of calls: 1

      86 |             const result = await service.getPermission(adminUser, permissionName);
      87 |
    > 88 |             expect(permissionRepoMock.findByName).toHaveBeenCalledWith(permissionName);
         |                                                   ^
      89 |             expect(result).toEqual(permissionEntity);
      90 |         });
      91 |

      at tests/unit/application/services/permission.admin.service.spec.ts:88:51
      at fulfilled (tests/unit/application/services/permission.admin.service.spec.ts:5:58)

  ΓùÅ PermissionAdminService ΓÇ║ listPermissions ΓÇ║ should list permissions

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {}
    Received: "test-tenant", {}

    Number of calls: 1

      106 |             const result = await service.listPermissions(adminUser, {});
      107 |
    > 108 |             expect(permissionRepoMock.list).toHaveBeenCalledWith({});
          |                                             ^
      109 |             expect(result).toEqual(permissions);
      110 |         });
      111 |     });

      at tests/unit/application/services/permission.admin.service.spec.ts:108:45
      at fulfilled (tests/unit/application/services/permission.admin.service.spec.ts:5:58)

  ΓùÅ PermissionAdminService ΓÇ║ updatePermission ΓÇ║ should update a permission successfully

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "test-permission", {"description": "Updated description"}
    Received: "test-tenant", "test-permission", {"description": "Updated description"}

    Number of calls: 1

      119 |             const result = await service.updatePermission(adminUser, permissionName, updates);
      120 |
    > 121 |             expect(permissionRepoMock.update).toHaveBeenCalledWith(permissionName, updates);
          |                                               ^
      122 |             expect(result).toEqual(updatedPermission);
      123 |         });
      124 |     });

      at tests/unit/application/services/permission.admin.service.spec.ts:121:47
      at fulfilled (tests/unit/application/services/permission.admin.service.spec.ts:5:58)

  ΓùÅ PermissionAdminService ΓÇ║ deletePermission ΓÇ║ should delete a permission and its assignments successfully

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "test-permission"
    Received: "test-tenant", "test-permission"

    Number of calls: 1

      131 |             await service.deletePermission(adminUser, permissionName);
      132 |
    > 133 |             expect(permissionRepoMock.delete).toHaveBeenCalledWith(permissionName);
          |                                               ^
      134 |             expect(assignmentRepoMock.removeAllAssignmentsForPermission).toHaveBeenCalledWith(permissionName);
      135 |         });
      136 |

      at tests/unit/application/services/permission.admin.service.spec.ts:133:47
      at fulfilled (tests/unit/application/services/permission.admin.service.spec.ts:5:58)

FAIL tests/unit/application/services/role.admin.service.spec.ts
  ΓùÅ RoleAdminService ΓÇ║ getRole ΓÇ║ should return a role if found

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "test-role"
    Received: "test-tenant", "test-role"

    Number of calls: 1

       96 |             const result = await service.getRole(adminUser, roleName);
       97 |
    >  98 |             expect(roleRepoMock.findByName).toHaveBeenCalledWith(roleName);
          |                                             ^
       99 |             expect(result).toEqual(roleEntity);
      100 |         });
      101 |

      at tests/unit/application/services/role.admin.service.spec.ts:98:45
      at fulfilled (tests/unit/application/services/role.admin.service.spec.ts:5:58)

  ΓùÅ RoleAdminService ΓÇ║ listRoles ΓÇ║ should list roles

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {}
    Received: "test-tenant", {}

    Number of calls: 1

      116 |             const result = await service.listRoles(adminUser, {});
      117 |
    > 118 |             expect(roleRepoMock.list).toHaveBeenCalledWith({});
          |                                       ^
      119 |             expect(result).toEqual(roles);
      120 |         });
      121 |     });

      at tests/unit/application/services/role.admin.service.spec.ts:118:39
      at fulfilled (tests/unit/application/services/role.admin.service.spec.ts:5:58)

  ΓùÅ RoleAdminService ΓÇ║ updateRole ΓÇ║ should update a role successfully

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "test-role", {"description": "Updated description"}
    Received: "test-tenant", "test-role", {"description": "Updated description"}

    Number of calls: 1

      129 |             const result = await service.updateRole(adminUser, roleName, updates);
      130 |
    > 131 |             expect(roleRepoMock.update).toHaveBeenCalledWith(roleName, updates);
          |                                         ^
      132 |             expect(result).toEqual(updatedRole);
      133 |         });
      134 |     });

      at tests/unit/application/services/role.admin.service.spec.ts:131:41
      at fulfilled (tests/unit/application/services/role.admin.service.spec.ts:5:58)

  ΓùÅ RoleAdminService ΓÇ║ deleteRole ΓÇ║ should delete a role and its assignments successfully

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "test-role"
    Received: "test-tenant", "test-role"

    Number of calls: 1

      141 |             await service.deleteRole(adminUser, roleName);
      142 |
    > 143 |             expect(roleRepoMock.delete).toHaveBeenCalledWith(roleName);
          |                                         ^
      144 |             expect(assignmentRepoMock.removeAllAssignmentsForRole).toHaveBeenCalledWith(roleName);
      145 |         });
      146 |

      at tests/unit/application/services/role.admin.service.spec.ts:143:41
      at fulfilled (tests/unit/application/services/role.admin.service.spec.ts:5:58)

  ΓùÅ RoleAdminService ΓÇ║ assignPermissionToRole ΓÇ║ should assign a permission to a role successfully

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "test-role", "test-permission"
    Received: "test-tenant", "test-role", "test-permission"

    Number of calls: 1

      172 |             await service.assignPermissionToRole(adminUser, roleName, permissionName);
      173 |
    > 174 |             expect(assignmentRepoMock.assignPermissionToRole).toHaveBeenCalledWith(roleName, permissionName);
          |                                                               ^
      175 |         });
      176 |
      177 |         it('should throw RoleNotFoundError if role does not exist', async () => {

      at tests/unit/application/services/role.admin.service.spec.ts:174:63
      at fulfilled (tests/unit/application/services/role.admin.service.spec.ts:5:58)

  ΓùÅ RoleAdminService ΓÇ║ removePermissionFromRole ΓÇ║ should remove a permission from a role successfully

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "test-role", "test-permission"
    Received: "test-tenant", "test-role", "test-permission"

    Number of calls: 1

      197 |             await service.removePermissionFromRole(adminUser, roleName, permissionName);
      198 |
    > 199 |             expect(assignmentRepoMock.removePermissionFromRole).toHaveBeenCalledWith(roleName, permissionName);
          |                                                                 ^
      200 |         });
      201 |
      202 |         it('should throw AssignmentError on failure', async () => {

      at tests/unit/application/services/role.admin.service.spec.ts:199:65
      at fulfilled (tests/unit/application/services/role.admin.service.spec.ts:5:58)

FAIL tests/debug/dynamodb.debug.spec.ts
  ΓùÅ DynamoDB Table Creation Debug Test ΓÇ║ should resolve DynamoDBProvider and list tables

    Attempted to resolve unregistered dependency token: "Symbol(DynamoDBProvider)"

      43 |
      44 |     it('should resolve DynamoDBProvider and list tables', async () => {
    > 45 |         const dbProvider = persistenceContainer.resolve<DynamoDBProvider>(TYPES.DynamoDBProvider);
         |                                                 ^
      46 |         const client = dbProvider.client;
      47 |         const command = new ListTablesCommand({});
      48 |         const result = await client.send(command);

      at InternalDependencyContainer.resolve (node_modules/.pnpm/tsyringe@4.10.0/node_modules/tsyringe/dist/cjs/dependency-container.js:108:19)
      at tests/debug/dynamodb.debug.spec.ts:45:49
      at tests/debug/dynamodb.debug.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/debug/dynamodb.debug.spec.ts:4:12)
      at Object.<anonymous> (tests/debug/dynamodb.debug.spec.ts:44:70)

  ΓùÅ DynamoDB Table Creation Debug Test ΓÇ║ should create a role using DynamoRoleRepository

    expect(received).resolves.not.toThrow()

    Received promise rejected instead of resolved
    Rejected to value: [DatabaseError: Failed to create role: User: arn:aws:iam::410844822442:user/PBAC-Admin is not authorized to perform: dynamodb:PutItem on resource: arn:aws:dynamodb:ap-south-1:410844822442:table/TestAuthzTable because no identity-based policy allows the dynamodb:PutItem action]

      53 |         const roleRepository = persistenceContainer.resolve<IRoleRepository>(TYPES.RoleRepository);
      54 |         const testRole = new Role('test-tenant', 'debug-role', 'Debug Role Description');
    > 55 |         await expect(roleRepository.create(testRole)).resolves.not.toThrow();
         |               ^
      56 |
      57 |         // Verify by fetching
      58 |         const found = await roleRepository.findByName('test-tenant', testRole.roleName);

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at tests/debug/dynamodb.debug.spec.ts:55:15
      at tests/debug/dynamodb.debug.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/debug/dynamodb.debug.spec.ts:4:12)
      at Object.<anonymous> (tests/debug/dynamodb.debug.spec.ts:52:70)


  ΓùÅ Test suite failed to run

    ResourceInUseException: Attempt to change a resource which is still in use: Table is being created: TestAuthzTable

      at de_ResourceInUseExceptionRes (node_modules/.pnpm/@aws-sdk+client-dynamodb@3.879.0/node_modules/@aws-sdk/client-dynamodb/dist-cjs/index.js:2603:21)
      at de_CommandError (node_modules/.pnpm/@aws-sdk+client-dynamodb@3.879.0/node_modules/@aws-sdk/client-dynamodb/dist-cjs/index.js:2296:19)
      at node_modules/.pnpm/@smithy+middleware-serde@4.0.9/node_modules/@smithy/middleware-serde/dist-cjs/index.js:36:20
      at node_modules/.pnpm/@smithy+core@3.9.0/node_modules/@smithy/core/dist-cjs/index.js:193:18
      at node_modules/.pnpm/@smithy+middleware-retry@4.1.20/node_modules/@smithy/middleware-retry/dist-cjs/index.js:320:38
      at node_modules/.pnpm/@aws-sdk+middleware-logger@3.876.0/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js:33:22

FAIL tests/integration/routes/policy.admin.routes.integration.spec.ts (47.516 s)
  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId ΓÇ║ should return 200 OK with policy data if policy exists

    expected 200 "OK", got 500 "Internal Server Error"

      134 |                 .get(`${BASE_API_PATH}/${targetPolicyId}`)
      135 |                 .set(MOCK_AUTH_HEADER)
    > 136 |                 .expect(HttpStatusCode.OK) // 200
          |                  ^
      137 |                 .expect(res => {
      138 |                     expect(res.body.id).toBe(targetPolicyId);
      139 |                     expect(res.body.policyName).toBe('get.policy');

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:136:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:131:81)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId ΓÇ║ should return 404 Not Found if service returns null

    expected 404 "Not Found", got 500 "Internal Server Error"

      147 |                 .get(`${BASE_API_PATH}/${targetPolicyId}`)
      148 |                 .set(MOCK_AUTH_HEADER)
    > 149 |                 .expect(HttpStatusCode.NOT_FOUND); // 404
          |                  ^
      150 |             expect(mockPolicyAdminService.getPolicy).toHaveBeenCalledWith(expect.anything(), targetPolicyId);
      151 |         });
      152 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:149:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:144:78)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId ΓÇ║ should return 404 Not Found if service throws PolicyNotFoundError

    expected 404 "Not Found", got 500 "Internal Server Error"

      158 |                 .get(`${BASE_API_PATH}/${targetPolicyId}`)
      159 |                 .set(MOCK_AUTH_HEADER)
    > 160 |                 .expect(HttpStatusCode.NOT_FOUND); // 404
          |                  ^
      161 |             expect(mockPolicyAdminService.getPolicy).toHaveBeenCalledWith(expect.anything(), targetPolicyId);
      162 |         });
      163 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:160:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:153:92)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId ΓÇ║ should return 400 Bad Request if policyId param is not a valid UUID

    expected 400 "Bad Request", got 500 "Internal Server Error"

      167 |                 .get(`${BASE_API_PATH}/${invalidId}`)
      168 |                 .set(MOCK_AUTH_HEADER)
    > 169 |                 .expect(HttpStatusCode.BAD_REQUEST); // 400 (Handled by validation middleware)
          |                  ^
      170 |             expect(mockPolicyAdminService.getPolicy).not.toHaveBeenCalled();
      171 |         });
      172 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:169:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:164:94)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId ΓÇ║ should return 500 if the service fails unexpectedly

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: Anything, "a1b2c3d4-e5f6-7890-1234-567890abcdef"

    Number of calls: 0

      178 |                 .set(MOCK_AUTH_HEADER)
      179 |                 .expect(HttpStatusCode.INTERNAL_SERVER_ERROR); // 500
    > 180 |             expect(mockPolicyAdminService.getPolicy).toHaveBeenCalledWith(expect.anything(), targetPolicyId);
          |                                                      ^
      181 |         });
      182 |
      183 |         it('should return 401 Unauthorized if token is missing', async () => {

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:180:54
      at fulfilled (tests/integration/routes/policy.admin.routes.integration.spec.ts:5:58)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies ΓÇ║ should return 200 OK with a list of policies

    expected 200 "OK", got 500 "Internal Server Error"

      196 |                  .get(BASE_API_PATH)
      197 |                  .set(MOCK_AUTH_HEADER)
    > 198 |                  .expect(HttpStatusCode.OK); // 200
          |                   ^
      199 |              expect(mockPolicyAdminService.listPolicies).toHaveBeenCalledTimes(1);
      200 |              expect(mockPolicyAdminService.listPolicies).toHaveBeenCalledWith(expect.anything(), { limit: undefined, language: undefined, startKey: undefined });
      201 |          });

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:198:19
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:192:72)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies ΓÇ║ should pass pagination and filter parameters to the service

    expected 200 "OK", got 500 "Internal Server Error"

      207 |                  .query({ limit: 15, language: 'rego', startKey: 'opaqueStartKey' })
      208 |                  .set(MOCK_AUTH_HEADER)
    > 209 |                  .expect(HttpStatusCode.OK); // 200
          |                   ^
      210 |              expect(mockPolicyAdminService.listPolicies).toHaveBeenCalledTimes(1);
      211 |              expect(mockPolicyAdminService.listPolicies).toHaveBeenCalledWith(expect.anything(), { limit: '15', language: 'rego', startKey: 'opaqueStartKey' });
      212 |          });

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:209:19
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:203:88)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies ΓÇ║ should return 500 if the service fails unexpectedly

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 1
    Received number of calls: 0

      219 |                  .set(MOCK_AUTH_HEADER)
      220 |                  .expect(HttpStatusCode.INTERNAL_SERVER_ERROR); // 500
    > 221 |              expect(mockPolicyAdminService.listPolicies).toHaveBeenCalledTimes(1);
          |                                                          ^
      222 |          });
      223 |
      224 |          it('should return 401 Unauthorized if token is missing', async () => {

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:221:58
      at fulfilled (tests/integration/routes/policy.admin.routes.integration.spec.ts:5:58)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ PUT /api/admin/policies/:policyId ΓÇ║ should return 200 OK with updated policy data if service succeeds

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    - Expected
    + Received

      {"attributes": {"cognito:groups": ["policy-admin", "user"], "cognito:username": "test-admin", "sub": "test-admin-id-123"}, "id": "test-admin-id-123", "roles": ["policy-admin", "user"], "tenantId": "unknown-tenant", "username": "test-admin"},
      "a1b2c3d4-e5f6-7890-1234-567890abcdef",
      Object {
        "description": "Updated Integration Description",
    -   "version": 2,
      },

    Number of calls: 1

      250 |                     expect(res.body.version).toBe(MOCK_VALID_UPDATE_POLICY_PAYLOAD.version);
      251 |                 });
    > 252 |             expect(mockPolicyAdminService.updatePolicy).toHaveBeenCalledWith(expect.anything(), targetPolicyId, MOCK_VALID_UPDATE_POLICY_PAYLOAD);
          |                                                         ^
      253 |         });
      254 |
      255 |          it('should return 404 Not Found if service throws PolicyNotFoundError', async () => {

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:252:57
      at fulfilled (tests/integration/routes/policy.admin.routes.integration.spec.ts:5:58)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ DELETE /api/admin/policies/:policyId ΓÇ║ should return 204 No Content if service succeeds

    expected 204 "No Content", got 500 "Internal Server Error"

      311 |                 .delete(`${BASE_API_PATH}/${targetPolicyId}`)
      312 |                 .set(MOCK_AUTH_HEADER)
    > 313 |                 .expect(HttpStatusCode.NO_CONTENT); // 204
          |                  ^
      314 |             expect(mockPolicyAdminService.deletePolicy).toHaveBeenCalledWith(expect.anything(), targetPolicyId);
      315 |         });
      316 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:313:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:308:75)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ DELETE /api/admin/policies/:policyId ΓÇ║ should return 404 Not Found if service throws PolicyNotFoundError

    expected 404 "Not Found", got 500 "Internal Server Error"

      322 |                 .delete(`${BASE_API_PATH}/${targetPolicyId}`)
      323 |                 .set(MOCK_AUTH_HEADER)
    > 324 |                 .expect(HttpStatusCode.NOT_FOUND); // 404
          |                  ^
      325 |             expect(mockPolicyAdminService.deletePolicy).toHaveBeenCalledWith(expect.anything(), targetPolicyId);
      326 |         });
      327 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:324:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:317:92)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ DELETE /api/admin/policies/:policyId ΓÇ║ should return 400 Bad Request if policyId param is invalid

    expected 400 "Bad Request", got 500 "Internal Server Error"

      330 |                 .delete(`${BASE_API_PATH}/invalid-uuid`)
      331 |                 .set(MOCK_AUTH_HEADER)
    > 332 |                 .expect(HttpStatusCode.BAD_REQUEST); // 400
          |                  ^
      333 |             expect(mockPolicyAdminService.deletePolicy).not.toHaveBeenCalled();
      334 |         });
      335 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:332:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:328:86)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ DELETE /api/admin/policies/:policyId ΓÇ║ should return 500 if service fails unexpectedly

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: Anything, "b1c2d3e4-f5a6-7890-1234-567890abcdef"

    Number of calls: 0

      341 |                 .set(MOCK_AUTH_HEADER)
      342 |                 .expect(HttpStatusCode.INTERNAL_SERVER_ERROR); // 500
    > 343 |             expect(mockPolicyAdminService.deletePolicy).toHaveBeenCalledWith(expect.anything(), targetPolicyId);
          |                                                         ^
      344 |         });
      345 |
      346 |         it('should return 401 Unauthorized if token is missing', async () => {

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:343:57
      at fulfilled (tests/integration/routes/policy.admin.routes.integration.spec.ts:5:58)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId/versions/:version ΓÇ║ should return 200 OK with policy version data if found

    expected 200 "OK", got 500 "Internal Server Error"

      362 |                 .get(`${BASE_API_PATH}/${policyId}/versions/${version}`)
      363 |                 .set(MOCK_AUTH_HEADER)
    > 364 |                 .expect(HttpStatusCode.OK)
          |                  ^
      365 |                 .expect(res => {
      366 |                     expect(res.body.id).toBe(policyId);
      367 |                     expect(res.body.version).toBe(version);

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:364:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:359:81)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId/versions/:version ΓÇ║ should return 404 Not Found if policy version not found

    expected 404 "Not Found", got 500 "Internal Server Error"

      375 |                 .get(`${BASE_API_PATH}/${policyId}/versions/${version}`)
      376 |                 .set(MOCK_AUTH_HEADER)
    > 377 |                 .expect(HttpStatusCode.NOT_FOUND);
          |                  ^
      378 |             expect(mockPolicyAdminService.getPolicyVersion).toHaveBeenCalledWith(expect.anything(), policyId, version);
      379 |         });
      380 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:377:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:372:82)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId/versions/:version ΓÇ║ should return 400 Bad Request if policyId is invalid

    expected 400 "Bad Request", got 500 "Internal Server Error"

      383 |                 .get(`${BASE_API_PATH}/invalid-uuid/versions/${version}`)
      384 |                 .set(MOCK_AUTH_HEADER)
    > 385 |                 .expect(HttpStatusCode.BAD_REQUEST);
          |                  ^
      386 |             expect(mockPolicyAdminService.getPolicyVersion).not.toHaveBeenCalled();
      387 |         });
      388 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:385:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:381:79)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId/versions/:version ΓÇ║ should return 400 Bad Request if version is invalid

    expected 400 "Bad Request", got 500 "Internal Server Error"

      391 |                 .get(`${BASE_API_PATH}/${policyId}/versions/invalid-version`)
      392 |                 .set(MOCK_AUTH_HEADER)
    > 393 |                 .expect(HttpStatusCode.BAD_REQUEST);
          |                  ^
      394 |             expect(mockPolicyAdminService.getPolicyVersion).not.toHaveBeenCalled();
      395 |         });
      396 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:393:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:389:78)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId/versions/:version ΓÇ║ should return 500 Internal Server Error if service fails unexpectedly

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: Anything, "c1d2e3f4-a5b6-7890-1234-567890abcdef", 1

    Number of calls: 0

      402 |                 .set(MOCK_AUTH_HEADER)
      403 |                 .expect(HttpStatusCode.INTERNAL_SERVER_ERROR);
    > 404 |             expect(mockPolicyAdminService.getPolicyVersion).toHaveBeenCalledWith(expect.anything(), policyId, version);
          |                                                             ^
      405 |         });
      406 |
      407 |         it('should return 401 Unauthorized if token is missing', async () => {

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:404:61
      at fulfilled (tests/integration/routes/policy.admin.routes.integration.spec.ts:5:58)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId/versions ΓÇ║ should return 200 OK with a list of policy versions

    expected 200 "OK", got 500 "Internal Server Error"

      425 |                 .get(`${BASE_API_PATH}/${policyId}/versions`)
      426 |                 .set(MOCK_AUTH_HEADER)
    > 427 |                 .expect(HttpStatusCode.OK)
          |                  ^
      428 |                 .expect(res => {
      429 |                     expect(res.body).toHaveLength(2);
      430 |                     expect(res.body[0].version).toBe(1);

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:427:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:422:78)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId/versions ΓÇ║ should return 404 Not Found if policy does not exist

    expected 404 "Not Found", got 500 "Internal Server Error"

      441 |                 .get(`${BASE_API_PATH}/${policyId}/versions`)
      442 |                 .set(MOCK_AUTH_HEADER)
    > 443 |                 .expect(HttpStatusCode.NOT_FOUND);
          |                  ^
      444 |             expect(mockPolicyAdminService.listPolicyVersions).toHaveBeenCalledWith(expect.anything(), policyId);
      445 |         });
      446 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:443:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:436:79)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId/versions ΓÇ║ should return 400 Bad Request if policyId is invalid

    expected 400 "Bad Request", got 500 "Internal Server Error"

      449 |                 .get(`${BASE_API_PATH}/invalid-uuid/versions`)
      450 |                 .set(MOCK_AUTH_HEADER)
    > 451 |                 .expect(HttpStatusCode.BAD_REQUEST);
          |                  ^
      452 |             expect(mockPolicyAdminService.listPolicyVersions).not.toHaveBeenCalled();
      453 |         });
      454 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:451:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:447:79)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId/versions ΓÇ║ should return 500 Internal Server Error if service fails unexpectedly

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: Anything, "d1e2f3a4-b5c6-7890-1234-567890abcdef"

    Number of calls: 0

      460 |                 .set(MOCK_AUTH_HEADER)
      461 |                 .expect(HttpStatusCode.INTERNAL_SERVER_ERROR);
    > 462 |             expect(mockPolicyAdminService.listPolicyVersions).toHaveBeenCalledWith(expect.anything(), policyId);
          |                                                               ^
      463 |         });
      464 |
      465 |         it('should return 401 Unauthorized if token is missing', async () => {

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:462:63
      at fulfilled (tests/integration/routes/policy.admin.routes.integration.spec.ts:5:58)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ POST /api/admin/policies/:policyId/rollback ΓÇ║ should return 200 OK with rolled back policy data on success

    expected 200 "OK", got 500 "Internal Server Error"

      481 |                 .post(`${BASE_API_PATH}/${policyId}/rollback/${version}`)
      482 |                 .set(MOCK_AUTH_HEADER)
    > 483 |                 .expect(HttpStatusCode.OK)
          |                  ^
      484 |                 .expect(res => {
      485 |                     expect(res.body.id).toBe(policyId);
      486 |                     expect(res.body.version).toBe(version);

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:483:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:478:87)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ POST /api/admin/policies/:policyId/rollback ΓÇ║ should return 404 Not Found if policy or version not found

    expected 404 "Not Found", got 500 "Internal Server Error"

      496 |                 .post(`${BASE_API_PATH}/${policyId}/rollback/${version}`)
      497 |                 .set(MOCK_AUTH_HEADER)
    > 498 |                 .expect(HttpStatusCode.NOT_FOUND);
          |                  ^
      499 |             expect(mockPolicyAdminService.rollbackPolicy).toHaveBeenCalledWith(expect.anything(), policyId, version);
      500 |         });
      501 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:498:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:491:85)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ POST /api/admin/policies/:policyId/rollback ΓÇ║ should return 400 Bad Request if policyId is invalid

    expected 400 "Bad Request", got 500 "Internal Server Error"

      504 |                 .post(`${BASE_API_PATH}/invalid-uuid/rollback/${version}`)
      505 |                 .set(MOCK_AUTH_HEADER)
    > 506 |                 .expect(HttpStatusCode.BAD_REQUEST);
          |                  ^
      507 |             expect(mockPolicyAdminService.rollbackPolicy).not.toHaveBeenCalled();
      508 |         });
      509 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:506:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:502:79)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ POST /api/admin/policies/:policyId/rollback ΓÇ║ should return 400 Bad Request if version is invalid or missing

    expected 400 "Bad Request", got 500 "Internal Server Error"

      512 |                 .post(`${BASE_API_PATH}/${policyId}/rollback/invalid-version`)
      513 |                 .set(MOCK_AUTH_HEADER)
    > 514 |                 .expect(HttpStatusCode.BAD_REQUEST);
          |                  ^
      515 |             expect(mockPolicyAdminService.rollbackPolicy).not.toHaveBeenCalled();
      516 |         });
      517 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:514:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:510:89)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ POST /api/admin/policies/:policyId/rollback ΓÇ║ should return 500 Internal Server Error if service fails unexpectedly

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: Anything, "e1f2a3b4-c5d6-7890-1234-567890abcdef", 1

    Number of calls: 0

      523 |                 .set(MOCK_AUTH_HEADER)
      524 |                 .expect(HttpStatusCode.INTERNAL_SERVER_ERROR);
    > 525 |             expect(mockPolicyAdminService.rollbackPolicy).toHaveBeenCalledWith(expect.anything(), policyId, version);
          |                                                           ^
      526 |         });
      527 |
      528 |         it('should return 401 Unauthorized if token is missing', async () => {

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:525:59
      at fulfilled (tests/integration/routes/policy.admin.routes.integration.spec.ts:5:58)


Test Suites: 15 failed, 23 passed, 38 total
Tests:       101 failed, 416 passed, 517 total
Snapshots:   0 total
Time:        60.901 s, estimated 61 s
Ran all test suites.
Table TestAssignments deleted successfully. Waiting for it to be deleted...
Table TestPolicies deleted successfully. Waiting for it to be deleted...
Table TestUsers deleted successfully. Waiting for it to be deleted...
Table TestRoles deleted successfully. Waiting for it to be deleted...
Table TestPermissions deleted successfully. Waiting for it to be deleted...
