[dotenv@17.2.1] injecting env (11) from .env.test -- tip: ΓÜÖ∩╕Å  write to custom object with { processEnv: myObject }
Table TestPermissions created successfully. Waiting for it to become active...
Table TestAssignments created successfully. Waiting for it to become active...
Table TestPolicies created successfully. Waiting for it to become active...
Table TestUsers created successfully. Waiting for it to become active...
Table TestRoles created successfully. Waiting for it to become active...
FAIL tests/e2e/group.admin.e2e.spec.ts (31.857 s)
  ΓùÅ Console

    console.log
      Validation Middleware - req.body: {
        groupName: 'test-group-1771850853700',
        description: 'A test group for e2e tests'
      }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'groupName', 'description' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"groupName":"test-group-1771850853700","description":"A test group for e2e tests"}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - req.body: { roleName: 'test-role-for-group-1771850853700' }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'roleName' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"roleName":"test-role-for-group-1771850853700"}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

  ΓùÅ Group Admin E2E ΓÇ║ should get the created group

    expected 200 "OK", got 500 "Internal Server Error"

      54 |             .get(`${BASE_API_PATH}/${groupName}`)
      55 |             .set('Authorization', `Bearer ${adminToken}`)
    > 56 |             .expect(200);
         |              ^
      57 |
      58 |         expect(response.body.groupName).toBe(groupName);
      59 |         expect(userMgmtAdapterMock.adminGetGroup).toHaveBeenCalledWith(groupName);

      at tests/e2e/group.admin.e2e.spec.ts:56:14
      at tests/e2e/group.admin.e2e.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/e2e/group.admin.e2e.spec.ts:4:12)
      at Object.<anonymous> (tests/e2e/group.admin.e2e.spec.ts:50:51)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Group Admin E2E ΓÇ║ should list the roles for the group

    expected 200 "OK", got 500 "Internal Server Error"

      81 |             .get(`${BASE_API_PATH}/${groupName}/roles`)
      82 |             .set('Authorization', `Bearer ${adminToken}`)
    > 83 |             .expect(200);
         |              ^
      84 |
      85 |         expect(response.body.roles).toContain(roleName); // Changed to response.body.roles
      86 |         expect(assignmentRepositoryMock.findRolesByGroupName).toHaveBeenCalledWith(expect.any(String), groupName);

      at tests/e2e/group.admin.e2e.spec.ts:83:14
      at tests/e2e/group.admin.e2e.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/e2e/group.admin.e2e.spec.ts:4:12)
      at Object.<anonymous> (tests/e2e/group.admin.e2e.spec.ts:76:58)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Group Admin E2E ΓÇ║ should remove the role from the group

    expected 204 "No Content", got 500 "Internal Server Error"

      93 |             .delete(`${BASE_API_PATH}/${groupName}/roles/${roleName}`)
      94 |             .set('Authorization', `Bearer ${adminToken}`)
    > 95 |             .expect(204);
         |              ^
      96 |         
      97 |         expect(assignmentRepositoryMock.removeRoleFromGroup).toHaveBeenCalledWith(expect.any(String), groupName, roleName);
      98 |     });

      at tests/e2e/group.admin.e2e.spec.ts:95:14
      at tests/e2e/group.admin.e2e.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/e2e/group.admin.e2e.spec.ts:4:12)
      at Object.<anonymous> (tests/e2e/group.admin.e2e.spec.ts:89:60)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Group Admin E2E ΓÇ║ should delete the group

    expected 204 "No Content", got 500 "Internal Server Error"

      104 |             .delete(`${BASE_API_PATH}/${groupName}`)
      105 |             .set('Authorization', `Bearer ${adminToken}`)
    > 106 |             .expect(204);
          |              ^
      107 |         
      108 |         expect(userMgmtAdapterMock.adminDeleteGroup).toHaveBeenCalledWith(groupName);
      109 |     });

      at tests/e2e/group.admin.e2e.spec.ts:106:14
      at tests/e2e/group.admin.e2e.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/e2e/group.admin.e2e.spec.ts:4:12)
      at Object.<anonymous> (tests/e2e/group.admin.e2e.spec.ts:100:46)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

FAIL tests/e2e/user.admin.e2e.spec.ts (32.165 s)
  ΓùÅ Console

    console.log
      Validation Middleware - req.body: {
        body: {
          username: 'test-user-1771850853699',
          temporaryPassword: 'Password123!',
          userAttributes: { email: 'test-user-1771850853699@example.com', name: 'Test User' }
        }
      }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'body' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"body":{"username":"test-user-1771850853699","temporaryPassword":"Password123!","userAttributes":{"email":"test-user-1771850853699@example.com","name":"Test User"}}}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      Bypassing validation for CreateUserAdminSchema for debugging. Schema matched!

      at src/api/middlewares/validation.middleware.ts:27:25

    console.log
      Validation Middleware - req.body: { groupName: 'test-group-1771850853704' }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'groupName' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"groupName":"test-group-1771850853704"}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

  ΓùÅ User Admin E2E ΓÇ║ should create a new user

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    - Expected
    + Received

      Object {
    +   "body": Object {
          "temporaryPassword": "Password123!",
          "userAttributes": Object {
            "email": "test-user-1771850853699@example.com",
            "name": "Test User",
          },
          "username": "test-user-1771850853699",
    +   },
      },

    Number of calls: 1

      53 |         expect(response.status).toBe(201); // Added explicit status check
      54 |         expect(response.body.username).toBe(username);
    > 55 |         expect(userMgmtAdapterMock.adminCreateUser).toHaveBeenCalledWith(userDetails);
         |                                                     ^
      56 |     });
      57 |
      58 |     it('should get the created user', async () => {

      at tests/e2e/user.admin.e2e.spec.ts:55:53
      at fulfilled (tests/e2e/user.admin.e2e.spec.ts:5:58)

  ΓùÅ User Admin E2E ΓÇ║ should update the user attributes

    expected 204 "No Content", got 404 "Not Found"

      81 |             .set('Authorization', `Bearer ${adminToken}`)
      82 |             .send(attributesToUpdate)
    > 83 |             .expect(204);
         |              ^
      84 |         
      85 |         expect(userMgmtAdapterMock.adminUpdateUserAttributes).toHaveBeenCalledWith({ username, ...attributesToUpdate });
      86 |     });

      at tests/e2e/user.admin.e2e.spec.ts:83:14
      at tests/e2e/user.admin.e2e.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/e2e/user.admin.e2e.spec.ts:4:12)
      at Object.<anonymous> (tests/e2e/user.admin.e2e.spec.ts:71:56)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ User Admin E2E ΓÇ║ should add a user to a group

    expected 204 "No Content", got 200 "OK"

       96 |             .set('Authorization', `Bearer ${adminToken}`)
       97 |             .send({ groupName })
    >  98 |             .expect(204);
          |              ^
       99 |         
      100 |         expect(userMgmtAdapterMock.adminAddUserToGroup).toHaveBeenCalledWith(username, groupName);
      101 |     });

      at tests/e2e/user.admin.e2e.spec.ts:98:14
      at tests/e2e/user.admin.e2e.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/e2e/user.admin.e2e.spec.ts:4:12)
      at Object.<anonymous> (tests/e2e/user.admin.e2e.spec.ts:91:51)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ User Admin E2E ΓÇ║ should remove the user from the group

    expected 204 "No Content", got 500 "Internal Server Error"

      120 |             .delete(`${BASE_API_PATH}/${username}/groups/${groupName}`)
      121 |             .set('Authorization', `Bearer ${adminToken}`)
    > 122 |             .expect(204);
          |              ^
      123 |         
      124 |         expect(userMgmtAdapterMock.adminRemoveUserFromGroup).toHaveBeenCalledWith(username, groupName);
      125 |     });

      at tests/e2e/user.admin.e2e.spec.ts:122:14
      at tests/e2e/user.admin.e2e.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/e2e/user.admin.e2e.spec.ts:4:12)
      at Object.<anonymous> (tests/e2e/user.admin.e2e.spec.ts:116:60)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ User Admin E2E ΓÇ║ should disable the user

    expected 204 "No Content", got 404 "Not Found"

      131 |             .post(`${BASE_API_PATH}/${username}/disable`)
      132 |             .set('Authorization', `Bearer ${adminToken}`)
    > 133 |             .expect(204);
          |              ^
      134 |         
      135 |         expect(userMgmtAdapterMock.adminDisableUser).toHaveBeenCalledWith(username);
      136 |     });

      at tests/e2e/user.admin.e2e.spec.ts:133:14
      at tests/e2e/user.admin.e2e.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/e2e/user.admin.e2e.spec.ts:4:12)
      at Object.<anonymous> (tests/e2e/user.admin.e2e.spec.ts:127:46)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ User Admin E2E ΓÇ║ should enable the user

    expected 204 "No Content", got 404 "Not Found"

      142 |             .post(`${BASE_API_PATH}/${username}/enable`)
      143 |             .set('Authorization', `Bearer ${adminToken}`)
    > 144 |             .expect(204);
          |              ^
      145 |         
      146 |         expect(userMgmtAdapterMock.adminEnableUser).toHaveBeenCalledWith(username);
      147 |     });

      at tests/e2e/user.admin.e2e.spec.ts:144:14
      at tests/e2e/user.admin.e2e.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/e2e/user.admin.e2e.spec.ts:4:12)
      at Object.<anonymous> (tests/e2e/user.admin.e2e.spec.ts:138:45)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

FAIL tests/integration/routes/role.admin.routes.integration.spec.ts (32.65 s)
  ΓùÅ Console

    console.info
      [WinstonLogger] Logger initialized with level "info" in "test" environment.

      at WinstonLogger.initializeLogger (src/infrastructure/logging/WinstonLogger.ts:68:17)
          at Array.map (<anonymous>)

    console.log
      {"level":"warn","message":"CORS_ORIGIN is set to \"*\" in a non-development environment. This is insecure!","metadata":{},"timestamp":"2026-02-23T12:47:34.287Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"CORS configured for origin: *","metadata":{},"timestamp":"2026-02-23T12:47:34.304Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"Application setup complete for environment: test","metadata":{},"timestamp":"2026-02-23T12:47:34.310Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> POST /api/admin/roles","metadata":{"correlationId":"144c3d21-2080-46c5-8b95-bc229ab2997e","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"POST","requestId":"144c3d21-2080-46c5-8b95-bc229ab2997e","url":"/api/admin/roles","userId":"anonymous"},"timestamp":"2026-02-23T12:47:34.561Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 144c3d21-2080-46c5-8b95-bc229ab2997e] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["role-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T12:47:34.586Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: {
        roleName: 'role-test-1771850847042',
        description: 'Test Role Description'
      }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'roleName', 'description' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"roleName":"role-test-1771850847042","description":"Test Role Description"}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      {"level":"info","message":"<-- POST /api/admin/roles 201 66.440ms","metadata":{"contentLength":"76","correlationId":"144c3d21-2080-46c5-8b95-bc229ab2997e","durationMs":66.44,"eventType":"finish","requestId":"144c3d21-2080-46c5-8b95-bc229ab2997e","statusCode":201,"userId":"anonymous"},"timestamp":"2026-02-23T12:47:34.628Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/roles","metadata":{"correlationId":"239e8af9-4f77-42e1-89a8-3f9775b85854","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"239e8af9-4f77-42e1-89a8-3f9775b85854","url":"/api/admin/roles","userId":"anonymous"},"timestamp":"2026-02-23T12:47:34.700Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 239e8af9-4f77-42e1-89a8-3f9775b85854] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["role-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T12:47:34.711Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"<-- GET /api/admin/roles 200 18.781ms","metadata":{"contentLength":"156","correlationId":"239e8af9-4f77-42e1-89a8-3f9775b85854","durationMs":18.781,"eventType":"finish","requestId":"239e8af9-4f77-42e1-89a8-3f9775b85854","statusCode":200,"userId":"anonymous"},"timestamp":"2026-02-23T12:47:34.719Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/roles/test-role","metadata":{"correlationId":"f45d9121-3a11-4851-925a-4b60d54ba44a","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"f45d9121-3a11-4851-925a-4b60d54ba44a","url":"/api/admin/roles/test-role","userId":"anonymous"},"timestamp":"2026-02-23T12:47:34.770Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - f45d9121-3a11-4851-925a-4b60d54ba44a] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["role-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T12:47:34.775Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [f45d9121-3a11-4851-925a-4b60d54ba44a]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T12:47:34.799Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"f45d9121-3a11-4851-925a-4b60d54ba44a","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/roles/test-role","requestId":"f45d9121-3a11-4851-925a-4b60d54ba44a","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:34.809Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/roles/test-role 500 49.460ms","metadata":{"error":{"contentLength":"3814","correlationId":"f45d9121-3a11-4851-925a-4b60d54ba44a","durationMs":49.46,"eventType":"finish","requestId":"f45d9121-3a11-4851-925a-4b60d54ba44a","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:34.819Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/roles/test-role","metadata":{"correlationId":"6fa18aa4-01b5-4d5c-bcf3-ffd4e41406e5","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"6fa18aa4-01b5-4d5c-bcf3-ffd4e41406e5","url":"/api/admin/roles/test-role","userId":"anonymous"},"timestamp":"2026-02-23T12:47:34.866Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 6fa18aa4-01b5-4d5c-bcf3-ffd4e41406e5] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["role-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T12:47:34.871Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [6fa18aa4-01b5-4d5c-bcf3-ffd4e41406e5]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T12:47:34.878Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"6fa18aa4-01b5-4d5c-bcf3-ffd4e41406e5","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/roles/test-role","requestId":"6fa18aa4-01b5-4d5c-bcf3-ffd4e41406e5","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:34.882Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/roles/test-role 500 22.917ms","metadata":{"error":{"contentLength":"3814","correlationId":"6fa18aa4-01b5-4d5c-bcf3-ffd4e41406e5","durationMs":22.917,"eventType":"finish","requestId":"6fa18aa4-01b5-4d5c-bcf3-ffd4e41406e5","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:34.890Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/roles/test-role","metadata":{"correlationId":"adfdf9a2-4202-4f32-ad18-b33a68e06c39","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"adfdf9a2-4202-4f32-ad18-b33a68e06c39","url":"/api/admin/roles/test-role","userId":"anonymous"},"timestamp":"2026-02-23T12:47:34.925Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Authentication: Missing or invalid Authorization header.","metadata":{},"timestamp":"2026-02-23T12:47:34.931Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Client error processing request: Authorization header missing or invalid.","metadata":{"correlationId":"adfdf9a2-4202-4f32-ad18-b33a68e06c39","errorMessage":"Authorization header missing or invalid.","errorName":"AuthenticationError","isOperational":true,"method":"GET","path":"/api/admin/roles/test-role","requestId":"adfdf9a2-4202-4f32-ad18-b33a68e06c39","stack":"AuthenticationError: Authorization header missing or invalid.\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:32:25\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:27:70\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestLogger.middleware.ts:84:9\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:32\n    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)\n    at middleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:13)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at addRequestId (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestId.middleware.ts:33:5)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at urlencodedParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\urlencoded.js:68:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at jsonParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\json.js:100:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at requestMetricsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestMetrics.middleware.ts:26:3)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at cors (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:188:7)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:224:17\n    at originCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:214:15)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:531:6)\n    at xXssProtectionMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:311:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPoweredByMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:304:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPermittedCrossDomainPoliciesMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:297:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xFrameOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:281:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDownloadOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:261:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDnsPrefetchControlMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:254:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xContentTypeOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:246:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at strictTransportSecurityMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:239:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at referrerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:207:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at originAgentClusterMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:182:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginResourcePolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:175:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginOpenerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:159:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at contentSecurityPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:124:4)","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T12:47:34.960Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"<-- GET /api/admin/roles/test-role 401 46.347ms","metadata":{"contentLength":"151","correlationId":"adfdf9a2-4202-4f32-ad18-b33a68e06c39","durationMs":46.347,"eventType":"finish","requestId":"adfdf9a2-4202-4f32-ad18-b33a68e06c39","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T12:47:34.972Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> PUT /api/admin/roles/test-role-to-update","metadata":{"correlationId":"d9099ba7-1fc3-4a0e-9a59-a16ab80ee663","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"PUT","requestId":"d9099ba7-1fc3-4a0e-9a59-a16ab80ee663","url":"/api/admin/roles/test-role-to-update","userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.031Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - d9099ba7-1fc3-4a0e-9a59-a16ab80ee663] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["role-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T12:47:35.036Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: { description: 'Updated Integration Description' }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'description' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"description":"Updated Integration Description"}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      {"level":"info","message":"<-- PUT /api/admin/roles/test-role-to-update 200 19.330ms","metadata":{"contentLength":"185","correlationId":"d9099ba7-1fc3-4a0e-9a59-a16ab80ee663","durationMs":19.33,"eventType":"finish","requestId":"d9099ba7-1fc3-4a0e-9a59-a16ab80ee663","statusCode":200,"userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.050Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> PUT /api/admin/roles/test-role-to-update","metadata":{"correlationId":"30d47597-fdba-4b82-a121-18547a71f579","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"PUT","requestId":"30d47597-fdba-4b82-a121-18547a71f579","url":"/api/admin/roles/test-role-to-update","userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.093Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 30d47597-fdba-4b82-a121-18547a71f579] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["role-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T12:47:35.098Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: { description: 'Updated Integration Description' }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'description' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"description":"Updated Integration Description"}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      {"level":"warn","message":"<-- PUT /api/admin/roles/test-role-to-update 404 19.903ms","metadata":{"contentLength":"62","correlationId":"30d47597-fdba-4b82-a121-18547a71f579","durationMs":19.903,"eventType":"finish","requestId":"30d47597-fdba-4b82-a121-18547a71f579","statusCode":404,"userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.112Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> PUT /api/admin/roles/test-role-to-update","metadata":{"correlationId":"aebef9f4-85ea-4339-b1ad-491d7471703d","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"PUT","requestId":"aebef9f4-85ea-4339-b1ad-491d7471703d","url":"/api/admin/roles/test-role-to-update","userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.144Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Authentication: Missing or invalid Authorization header.","metadata":{},"timestamp":"2026-02-23T12:47:35.149Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Client error processing request: Authorization header missing or invalid.","metadata":{"correlationId":"aebef9f4-85ea-4339-b1ad-491d7471703d","errorMessage":"Authorization header missing or invalid.","errorName":"AuthenticationError","isOperational":true,"method":"PUT","path":"/api/admin/roles/test-role-to-update","requestId":"aebef9f4-85ea-4339-b1ad-491d7471703d","stack":"AuthenticationError: Authorization header missing or invalid.\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:32:25\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:27:70\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestLogger.middleware.ts:84:9\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:32\n    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)\n    at middleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:13)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at addRequestId (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestId.middleware.ts:33:5)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at urlencodedParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\urlencoded.js:57:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\read.js:132:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:214:14)\n    at invokeCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\raw-body@3.0.0\\node_modules\\raw-body\\index.js:238:16)\n    at done (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\raw-body@3.0.0\\node_modules\\raw-body\\index.js:227:7)\n    at IncomingMessage.onEnd (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\raw-body@3.0.0\\node_modules\\raw-body\\index.js:287:7)\n    at IncomingMessage.emit (node:events:519:28)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at processTicksAndRejections (node:internal/process/task_queues:90:21)","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.164Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"<-- PUT /api/admin/roles/test-role-to-update 401 30.581ms","metadata":{"contentLength":"151","correlationId":"aebef9f4-85ea-4339-b1ad-491d7471703d","durationMs":30.581,"eventType":"finish","requestId":"aebef9f4-85ea-4339-b1ad-491d7471703d","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.174Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> DELETE /api/admin/roles/test-role-to-delete","metadata":{"correlationId":"696a1b61-790c-4fff-8131-8674731e797e","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"DELETE","requestId":"696a1b61-790c-4fff-8131-8674731e797e","url":"/api/admin/roles/test-role-to-delete","userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.215Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 696a1b61-790c-4fff-8131-8674731e797e] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["role-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T12:47:35.223Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [696a1b61-790c-4fff-8131-8674731e797e]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T12:47:35.229Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"696a1b61-790c-4fff-8131-8674731e797e","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"DELETE","path":"/api/admin/roles/test-role-to-delete","requestId":"696a1b61-790c-4fff-8131-8674731e797e","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:35.233Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- DELETE /api/admin/roles/test-role-to-delete 500 29.582ms","metadata":{"error":{"contentLength":"3814","correlationId":"696a1b61-790c-4fff-8131-8674731e797e","durationMs":29.582,"eventType":"finish","requestId":"696a1b61-790c-4fff-8131-8674731e797e","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:35.244Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> DELETE /api/admin/roles/test-role-to-delete","metadata":{"correlationId":"10fea831-f921-4aa1-b6fc-c12ce4b1f299","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"DELETE","requestId":"10fea831-f921-4aa1-b6fc-c12ce4b1f299","url":"/api/admin/roles/test-role-to-delete","userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.310Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 10fea831-f921-4aa1-b6fc-c12ce4b1f299] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["role-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T12:47:35.323Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [10fea831-f921-4aa1-b6fc-c12ce4b1f299]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T12:47:35.333Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"10fea831-f921-4aa1-b6fc-c12ce4b1f299","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"DELETE","path":"/api/admin/roles/test-role-to-delete","requestId":"10fea831-f921-4aa1-b6fc-c12ce4b1f299","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:35.338Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- DELETE /api/admin/roles/test-role-to-delete 500 40.856ms","metadata":{"error":{"contentLength":"3814","correlationId":"10fea831-f921-4aa1-b6fc-c12ce4b1f299","durationMs":40.856,"eventType":"finish","requestId":"10fea831-f921-4aa1-b6fc-c12ce4b1f299","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:35.351Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> DELETE /api/admin/roles/test-role-to-delete","metadata":{"correlationId":"5ad4d7e6-8ca2-4056-8a01-3abe3c4e54c5","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"DELETE","requestId":"5ad4d7e6-8ca2-4056-8a01-3abe3c4e54c5","url":"/api/admin/roles/test-role-to-delete","userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.378Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Authentication: Missing or invalid Authorization header.","metadata":{},"timestamp":"2026-02-23T12:47:35.382Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Client error processing request: Authorization header missing or invalid.","metadata":{"correlationId":"5ad4d7e6-8ca2-4056-8a01-3abe3c4e54c5","errorMessage":"Authorization header missing or invalid.","errorName":"AuthenticationError","isOperational":true,"method":"DELETE","path":"/api/admin/roles/test-role-to-delete","requestId":"5ad4d7e6-8ca2-4056-8a01-3abe3c4e54c5","stack":"AuthenticationError: Authorization header missing or invalid.\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:32:25\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:27:70\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestLogger.middleware.ts:84:9\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:32\n    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)\n    at middleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:13)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at addRequestId (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestId.middleware.ts:33:5)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at urlencodedParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\urlencoded.js:68:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at jsonParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\json.js:100:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at requestMetricsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestMetrics.middleware.ts:26:3)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at cors (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:188:7)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:224:17\n    at originCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:214:15)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:531:6)\n    at xXssProtectionMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:311:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPoweredByMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:304:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPermittedCrossDomainPoliciesMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:297:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xFrameOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:281:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDownloadOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:261:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDnsPrefetchControlMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:254:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xContentTypeOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:246:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at strictTransportSecurityMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:239:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at referrerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:207:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at originAgentClusterMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:182:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginResourcePolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:175:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginOpenerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:159:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at contentSecurityPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:124:4)","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.399Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"<-- DELETE /api/admin/roles/test-role-to-delete 401 31.920ms","metadata":{"contentLength":"151","correlationId":"5ad4d7e6-8ca2-4056-8a01-3abe3c4e54c5","durationMs":31.92,"eventType":"finish","requestId":"5ad4d7e6-8ca2-4056-8a01-3abe3c4e54c5","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.410Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> POST /api/admin/roles/role-for-permissions/permissions","metadata":{"correlationId":"efbb8af5-5efb-434d-ac23-7e9a1c5714e3","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"POST","requestId":"efbb8af5-5efb-434d-ac23-7e9a1c5714e3","url":"/api/admin/roles/role-for-permissions/permissions","userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.480Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - efbb8af5-5efb-434d-ac23-7e9a1c5714e3] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["role-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T12:47:35.486Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: { permissionName: 'permission-for-role' }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'permissionName' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"permissionName":"permission-for-role"}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      {"level":"info","message":"<-- POST /api/admin/roles/role-for-permissions/permissions 204 25.313ms","metadata":{"correlationId":"efbb8af5-5efb-434d-ac23-7e9a1c5714e3","durationMs":25.313,"eventType":"finish","requestId":"efbb8af5-5efb-434d-ac23-7e9a1c5714e3","statusCode":204,"userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.505Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> DELETE /api/admin/roles/role-for-permissions/permissions/permission-for-role","metadata":{"correlationId":"b41c8468-3d3c-4f56-971d-458998f80fa9","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"DELETE","requestId":"b41c8468-3d3c-4f56-971d-458998f80fa9","url":"/api/admin/roles/role-for-permissions/permissions/permission-for-role","userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.547Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - b41c8468-3d3c-4f56-971d-458998f80fa9] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["role-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T12:47:35.554Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [b41c8468-3d3c-4f56-971d-458998f80fa9]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T12:47:35.560Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"b41c8468-3d3c-4f56-971d-458998f80fa9","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"DELETE","path":"/api/admin/roles/role-for-permissions/permissions/permission-for-role","requestId":"b41c8468-3d3c-4f56-971d-458998f80fa9","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:35.564Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- DELETE /api/admin/roles/role-for-permissions/permissions/permission-for-role 500 23.114ms","metadata":{"error":{"contentLength":"3951","correlationId":"b41c8468-3d3c-4f56-971d-458998f80fa9","durationMs":23.114,"eventType":"finish","requestId":"b41c8468-3d3c-4f56-971d-458998f80fa9","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:35.571Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/roles/role-for-permissions/permissions","metadata":{"correlationId":"e1a9d0f1-73c7-4331-9629-254658ea8990","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"e1a9d0f1-73c7-4331-9629-254658ea8990","url":"/api/admin/roles/role-for-permissions/permissions","userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.603Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - e1a9d0f1-73c7-4331-9629-254658ea8990] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["role-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T12:47:35.609Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [e1a9d0f1-73c7-4331-9629-254658ea8990]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T12:47:35.617Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"e1a9d0f1-73c7-4331-9629-254658ea8990","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/roles/role-for-permissions/permissions","requestId":"e1a9d0f1-73c7-4331-9629-254658ea8990","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:35.622Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/roles/role-for-permissions/permissions 500 33.199ms","metadata":{"error":{"contentLength":"3814","correlationId":"e1a9d0f1-73c7-4331-9629-254658ea8990","durationMs":33.199,"eventType":"finish","requestId":"e1a9d0f1-73c7-4331-9629-254658ea8990","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:35.638Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

  ΓùÅ Integration Tests: Role Admin Routes (/api/admin/roles) ΓÇ║ GET /api/admin/roles/:roleName ΓÇ║ should return 200 OK with role data if role exists

    expected 200 "OK", got 500 "Internal Server Error"

      142 |                 .get(`${BASE_API_PATH}/${targetRoleName}`)
      143 |                 .set(MOCK_AUTH_HEADER)
    > 144 |                 .expect(HttpStatusCode.OK) // 200
          |                  ^
      145 |                 .expect(res => {
      146 |                     expect(res.body.roleName).toBe(targetRoleName);
      147 |                     expect(res.body.description).toBe('get role');

      at tests/integration/routes/role.admin.routes.integration.spec.ts:144:18
      at tests/integration/routes/role.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/role.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/role.admin.routes.integration.spec.ts:139:77)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Role Admin Routes (/api/admin/roles) ΓÇ║ GET /api/admin/roles/:roleName ΓÇ║ should return 404 Not Found if service returns null

    expected 404 "Not Found", got 500 "Internal Server Error"

      155 |                 .get(`${BASE_API_PATH}/${targetRoleName}`)
      156 |                 .set(MOCK_AUTH_HEADER)
    > 157 |                 .expect(HttpStatusCode.NOT_FOUND); // 404
          |                  ^
      158 |             expect(mockRoleAdminService.getRole).toHaveBeenCalledWith(expect.anything(), targetRoleName);
      159 |         });
      160 |

      at tests/integration/routes/role.admin.routes.integration.spec.ts:157:18
      at tests/integration/routes/role.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/role.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/role.admin.routes.integration.spec.ts:152:78)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Role Admin Routes (/api/admin/roles) ΓÇ║ DELETE /api/admin/roles/:roleName ΓÇ║ should return 204 No Content if service succeeds

    expected 204 "No Content", got 500 "Internal Server Error"

      215 |                 .delete(`${BASE_API_PATH}/${targetRoleName}`)
      216 |                 .set(MOCK_AUTH_HEADER)
    > 217 |                 .expect(HttpStatusCode.NO_CONTENT); // 204
          |                  ^
      218 |             expect(mockRoleAdminService.deleteRole).toHaveBeenCalledWith(expect.anything(), targetRoleName);
      219 |         });
      220 |

      at tests/integration/routes/role.admin.routes.integration.spec.ts:217:18
      at tests/integration/routes/role.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/role.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/role.admin.routes.integration.spec.ts:212:75)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Role Admin Routes (/api/admin/roles) ΓÇ║ DELETE /api/admin/roles/:roleName ΓÇ║ should return 404 Not Found if service throws RoleNotFoundError

    expected 404 "Not Found", got 500 "Internal Server Error"

      226 |                 .delete(`${BASE_API_PATH}/${targetRoleName}`)
      227 |                 .set(MOCK_AUTH_HEADER)
    > 228 |                 .expect(HttpStatusCode.NOT_FOUND); // 404
          |                  ^
      229 |             expect(mockRoleAdminService.deleteRole).toHaveBeenCalledWith(expect.anything(), targetRoleName);
      230 |         });
      231 |

      at tests/integration/routes/role.admin.routes.integration.spec.ts:228:18
      at tests/integration/routes/role.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/role.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/role.admin.routes.integration.spec.ts:221:90)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Role Admin Routes (/api/admin/roles) ΓÇ║ Permissions Management (/api/admin/roles/:roleName/permissions) ΓÇ║ DELETE /:roleName/permissions/:permissionName ΓÇ║ should return 204 No Content on successful removal

    expected 204 "No Content", got 500 "Internal Server Error"

      260 |                     .delete(`${BASE_API_PATH}/${targetRoleName}/permissions/${targetPermissionName}`)
      261 |                     .set(MOCK_AUTH_HEADER)
    > 262 |                     .expect(HttpStatusCode.NO_CONTENT); // 204
          |                      ^
      263 |                 expect(mockRoleAdminService.removePermissionFromRole).toHaveBeenCalledWith(expect.anything(), targetRoleName, targetPermissionName);
      264 |             });
      265 |         });

      at tests/integration/routes/role.admin.routes.integration.spec.ts:262:22
      at tests/integration/routes/role.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/role.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/role.admin.routes.integration.spec.ts:257:81)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Role Admin Routes (/api/admin/roles) ΓÇ║ Permissions Management (/api/admin/roles/:roleName/permissions) ΓÇ║ GET /:roleName/permissions ΓÇ║ should return 200 OK with a list of permission names

    expected 200 "OK", got 500 "Internal Server Error"

      272 |                     .get(`${BASE_API_PATH}/${targetRoleName}/permissions`)
      273 |                     .set(MOCK_AUTH_HEADER)
    > 274 |                     .expect(HttpStatusCode.OK) // 200
          |                      ^
      275 |                     .expect(res => {
      276 |                         expect(res.body.permissions).toEqual(mockPermissions);
      277 |                     });

      at tests/integration/routes/role.admin.routes.integration.spec.ts:274:22
      at tests/integration/routes/role.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/role.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/role.admin.routes.integration.spec.ts:268:83)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

FAIL tests/integration/routes/group.admin.routes.integration.spec.ts (32.889 s)
  ΓùÅ Console

    console.info
      [WinstonLogger] Logger initialized with level "info" in "test" environment.

      at WinstonLogger.initializeLogger (src/infrastructure/logging/WinstonLogger.ts:68:17)
          at Array.map (<anonymous>)

    console.log
      {"level":"warn","message":"CORS_ORIGIN is set to \"*\" in a non-development environment. This is insecure!","metadata":{},"timestamp":"2026-02-23T12:47:34.279Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"CORS configured for origin: *","metadata":{},"timestamp":"2026-02-23T12:47:34.293Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"Application setup complete for environment: test","metadata":{},"timestamp":"2026-02-23T12:47:34.297Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> POST /api/admin/groups","metadata":{"correlationId":"b519d7d5-055b-4e69-b76e-4cf965406e7d","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"POST","requestId":"b519d7d5-055b-4e69-b76e-4cf965406e7d","url":"/api/admin/groups","userId":"anonymous"},"timestamp":"2026-02-23T12:47:34.531Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - b519d7d5-055b-4e69-b76e-4cf965406e7d] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["group-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T12:47:34.561Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: {
        groupName: 'Test-Group-1771850847012',
        description: 'Integration Test Group Description',
        precedence: 10
      }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'groupName', 'description', 'precedence' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"groupName":"Test-Group-1771850847012","description":"Integration Test Group Description","precedence":10}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      {"level":"info","message":"<-- POST /api/admin/groups 201 77.774ms","metadata":{"contentLength":"179","correlationId":"b519d7d5-055b-4e69-b76e-4cf965406e7d","durationMs":77.774,"eventType":"finish","requestId":"b519d7d5-055b-4e69-b76e-4cf965406e7d","statusCode":201,"userId":"anonymous"},"timestamp":"2026-02-23T12:47:34.608Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> POST /api/admin/groups","metadata":{"correlationId":"c67295c7-3353-4973-b8c4-3c1e83267a57","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"POST","requestId":"c67295c7-3353-4973-b8c4-3c1e83267a57","url":"/api/admin/groups","userId":"anonymous"},"timestamp":"2026-02-23T12:47:34.682Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - c67295c7-3353-4973-b8c4-3c1e83267a57] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["group-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T12:47:34.686Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: { description: 'Only desc' }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'description' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"description":"Only desc"}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      {"level":"warn","message":"Request validation failed [c67295c7-3353-4973-b8c4-3c1e83267a57]:","metadata":{"errors":{"groupName":"Group name is required"}},"timestamp":"2026-02-23T12:47:34.700Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)
          at Generator.throw (<anonymous>)

    console.log
      {"level":"warn","message":"Client error processing request: Input validation failed","metadata":{"correlationId":"c67295c7-3353-4973-b8c4-3c1e83267a57","details":{"groupName":"Group name is required"},"errorMessage":"Input validation failed","errorName":"ValidationError","isOperational":true,"method":"POST","path":"/api/admin/groups","requestId":"c67295c7-3353-4973-b8c4-3c1e83267a57","stack":"ValidationError: Input validation failed\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:57:41\n    at Generator.throw (<anonymous>)\n    at rejected (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:6:65)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":400,"userId":"anonymous"},"timestamp":"2026-02-23T12:47:34.709Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)
          at Generator.throw (<anonymous>)

    console.log
      {"level":"warn","message":"<-- POST /api/admin/groups 400 37.930ms","metadata":{"contentLength":"179","correlationId":"c67295c7-3353-4973-b8c4-3c1e83267a57","durationMs":37.93,"eventType":"finish","requestId":"c67295c7-3353-4973-b8c4-3c1e83267a57","statusCode":400,"userId":"anonymous"},"timestamp":"2026-02-23T12:47:34.720Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> POST /api/admin/groups","metadata":{"correlationId":"2884ccdf-bb97-4744-9cd6-df216d650fc1","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"POST","requestId":"2884ccdf-bb97-4744-9cd6-df216d650fc1","url":"/api/admin/groups","userId":"anonymous"},"timestamp":"2026-02-23T12:47:34.765Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 2884ccdf-bb97-4744-9cd6-df216d650fc1] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["group-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T12:47:34.773Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: {
        groupName: 'Test-Group-1771850847012',
        description: 'Integration Test Group Description',
        precedence: 10
      }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'groupName', 'description', 'precedence' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"groupName":"Test-Group-1771850847012","description":"Integration Test Group Description","precedence":10}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      {"level":"error","message":"[GroupAdminCtrl] Failed to create group Test-Group-1771850847012","metadata":{"error":{"adminUserId":"test-admin-id-123","error":{"isOperational":true,"name":"GroupExistsError","statusCode":409}}},"timestamp":"2026-02-23T12:47:34.781Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)
          at Generator.throw (<anonymous>)

    console.log
      {"level":"warn","message":"Client error processing request: Group 'Group exists' already exists.","metadata":{"correlationId":"2884ccdf-bb97-4744-9cd6-df216d650fc1","errorMessage":"Group 'Group exists' already exists.","errorName":"GroupExistsError","isOperational":true,"method":"POST","path":"/api/admin/groups","requestId":"2884ccdf-bb97-4744-9cd6-df216d650fc1","stack":"GroupExistsError: Group 'Group exists' already exists.\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\group.admin.routes.integration.spec.ts:174:35\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\group.admin.routes.integration.spec.ts:9:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\group.admin.routes.integration.spec.ts:5:12)\n    at Object.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\group.admin.routes.integration.spec.ts:172:88)\n    at Promise.then.completed (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\testWorker.js:108:12)","statusCode":409,"userId":"anonymous"},"timestamp":"2026-02-23T12:47:34.792Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)
          at Generator.throw (<anonymous>)

    console.log
      {"level":"warn","message":"<-- POST /api/admin/groups 409 31.747ms","metadata":{"contentLength":"144","correlationId":"2884ccdf-bb97-4744-9cd6-df216d650fc1","durationMs":31.747,"eventType":"finish","requestId":"2884ccdf-bb97-4744-9cd6-df216d650fc1","statusCode":409,"userId":"anonymous"},"timestamp":"2026-02-23T12:47:34.796Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> POST /api/admin/groups","metadata":{"correlationId":"ed2ce96f-0303-4028-aa27-f361ea023ecc","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"POST","requestId":"ed2ce96f-0303-4028-aa27-f361ea023ecc","url":"/api/admin/groups","userId":"anonymous"},"timestamp":"2026-02-23T12:47:34.839Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - ed2ce96f-0303-4028-aa27-f361ea023ecc] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["group-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T12:47:34.842Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: {
        groupName: 'Test-Group-1771850847012',
        description: 'Integration Test Group Description',
        precedence: 10
      }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'groupName', 'description', 'precedence' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"groupName":"Test-Group-1771850847012","description":"Integration Test Group Description","precedence":10}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      {"level":"error","message":"[GroupAdminCtrl] Failed to create group Test-Group-1771850847012","metadata":{"error":{"adminUserId":"test-admin-id-123","error":{}}},"timestamp":"2026-02-23T12:47:34.855Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)
          at Generator.throw (<anonymous>)

    console.log
      {"level":"error","message":"Server error processing request: DB connection failed","metadata":{"error":{"correlationId":"ed2ce96f-0303-4028-aa27-f361ea023ecc","errorMessage":"DB connection failed","errorName":"Error","isOperational":false,"method":"POST","path":"/api/admin/groups","requestId":"ed2ce96f-0303-4028-aa27-f361ea023ecc","stack":"Error: DB connection failed\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\group.admin.routes.integration.spec.ts:185:34\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\group.admin.routes.integration.spec.ts:9:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\group.admin.routes.integration.spec.ts:5:12)\n    at Object.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\group.admin.routes.integration.spec.ts:184:104)\n    at Promise.then.completed (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\testWorker.js:108:12)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:34.858Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)
          at Generator.throw (<anonymous>)

    console.log
      {"level":"error","message":"<-- POST /api/admin/groups 500 22.336ms","metadata":{"error":{"contentLength":"3133","correlationId":"ed2ce96f-0303-4028-aa27-f361ea023ecc","durationMs":22.336,"eventType":"finish","requestId":"ed2ce96f-0303-4028-aa27-f361ea023ecc","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:34.861Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/groups","metadata":{"correlationId":"dbf041e7-2618-452d-9464-7b799ef903bf","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"dbf041e7-2618-452d-9464-7b799ef903bf","url":"/api/admin/groups","userId":"anonymous"},"timestamp":"2026-02-23T12:47:34.899Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Authentication: Missing or invalid Authorization header.","metadata":{},"timestamp":"2026-02-23T12:47:34.913Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Client error processing request: Authorization header missing or invalid.","metadata":{"correlationId":"dbf041e7-2618-452d-9464-7b799ef903bf","errorMessage":"Authorization header missing or invalid.","errorName":"AuthenticationError","isOperational":true,"method":"GET","path":"/api/admin/groups","requestId":"dbf041e7-2618-452d-9464-7b799ef903bf","stack":"AuthenticationError: Authorization header missing or invalid.\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:32:25\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:27:70\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestLogger.middleware.ts:84:9\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:32\n    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)\n    at middleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:13)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at addRequestId (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestId.middleware.ts:33:5)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at urlencodedParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\urlencoded.js:68:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at jsonParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\json.js:100:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at requestMetricsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestMetrics.middleware.ts:26:3)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at cors (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:188:7)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:224:17\n    at originCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:214:15)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:531:6)\n    at xXssProtectionMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:311:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPoweredByMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:304:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPermittedCrossDomainPoliciesMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:297:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xFrameOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:281:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDownloadOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:261:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDnsPrefetchControlMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:254:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xContentTypeOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:246:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at strictTransportSecurityMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:239:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at referrerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:207:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at originAgentClusterMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:182:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginResourcePolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:175:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginOpenerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:159:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at contentSecurityPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:124:4)","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T12:47:34.956Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"<-- GET /api/admin/groups 401 74.423ms","metadata":{"contentLength":"151","correlationId":"dbf041e7-2618-452d-9464-7b799ef903bf","durationMs":74.423,"eventType":"finish","requestId":"dbf041e7-2618-452d-9464-7b799ef903bf","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T12:47:34.974Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/groups/Get-Group-Test","metadata":{"correlationId":"3858b71d-b9ef-4a52-8bae-3d49b747b6bc","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"3858b71d-b9ef-4a52-8bae-3d49b747b6bc","url":"/api/admin/groups/Get-Group-Test","userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.036Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 3858b71d-b9ef-4a52-8bae-3d49b747b6bc] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["group-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T12:47:35.046Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [3858b71d-b9ef-4a52-8bae-3d49b747b6bc]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T12:47:35.059Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"3858b71d-b9ef-4a52-8bae-3d49b747b6bc","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/groups/Get-Group-Test","requestId":"3858b71d-b9ef-4a52-8bae-3d49b747b6bc","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:35.063Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/groups/Get-Group-Test 500 39.315ms","metadata":{"error":{"contentLength":"3814","correlationId":"3858b71d-b9ef-4a52-8bae-3d49b747b6bc","durationMs":39.315,"eventType":"finish","requestId":"3858b71d-b9ef-4a52-8bae-3d49b747b6bc","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:35.075Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/groups/Get-Group-Test","metadata":{"correlationId":"776c37b8-681d-472b-a697-39d17dadf4a5","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"776c37b8-681d-472b-a697-39d17dadf4a5","url":"/api/admin/groups/Get-Group-Test","userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.121Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 776c37b8-681d-472b-a697-39d17dadf4a5] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["group-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T12:47:35.129Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [776c37b8-681d-472b-a697-39d17dadf4a5]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T12:47:35.142Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"776c37b8-681d-472b-a697-39d17dadf4a5","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/groups/Get-Group-Test","requestId":"776c37b8-681d-472b-a697-39d17dadf4a5","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:35.148Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/groups/Get-Group-Test 500 38.284ms","metadata":{"error":{"contentLength":"3814","correlationId":"776c37b8-681d-472b-a697-39d17dadf4a5","durationMs":38.284,"eventType":"finish","requestId":"776c37b8-681d-472b-a697-39d17dadf4a5","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:35.159Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/groups/Get-Group-Test","metadata":{"correlationId":"dcf317b4-e114-4835-a385-07ef6d8298bf","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"dcf317b4-e114-4835-a385-07ef6d8298bf","url":"/api/admin/groups/Get-Group-Test","userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.211Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - dcf317b4-e114-4835-a385-07ef6d8298bf] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["group-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T12:47:35.216Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [dcf317b4-e114-4835-a385-07ef6d8298bf]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T12:47:35.223Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"dcf317b4-e114-4835-a385-07ef6d8298bf","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/groups/Get-Group-Test","requestId":"dcf317b4-e114-4835-a385-07ef6d8298bf","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:35.230Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/groups/Get-Group-Test 500 28.373ms","metadata":{"error":{"contentLength":"3814","correlationId":"dcf317b4-e114-4835-a385-07ef6d8298bf","durationMs":28.373,"eventType":"finish","requestId":"dcf317b4-e114-4835-a385-07ef6d8298bf","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:35.240Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/groups/Invalid%20Group%20Name%20With%20Spaces","metadata":{"correlationId":"24e33aff-8f76-416e-85f8-9363ceabbfb9","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"24e33aff-8f76-416e-85f8-9363ceabbfb9","url":"/api/admin/groups/Invalid%20Group%20Name%20With%20Spaces","userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.302Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 24e33aff-8f76-416e-85f8-9363ceabbfb9] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["group-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T12:47:35.307Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [24e33aff-8f76-416e-85f8-9363ceabbfb9]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T12:47:35.321Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"24e33aff-8f76-416e-85f8-9363ceabbfb9","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/groups/Invalid%20Group%20Name%20With%20Spaces","requestId":"24e33aff-8f76-416e-85f8-9363ceabbfb9","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:35.324Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/groups/Invalid%20Group%20Name%20With%20Spaces 500 34.947ms","metadata":{"error":{"contentLength":"3814","correlationId":"24e33aff-8f76-416e-85f8-9363ceabbfb9","durationMs":34.947,"eventType":"finish","requestId":"24e33aff-8f76-416e-85f8-9363ceabbfb9","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:35.336Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/groups/Get-Group-Test","metadata":{"correlationId":"426b8805-4bb9-4f88-960f-da9f2e8af785","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"426b8805-4bb9-4f88-960f-da9f2e8af785","url":"/api/admin/groups/Get-Group-Test","userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.378Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 426b8805-4bb9-4f88-960f-da9f2e8af785] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["group-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T12:47:35.391Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [426b8805-4bb9-4f88-960f-da9f2e8af785]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T12:47:35.396Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"426b8805-4bb9-4f88-960f-da9f2e8af785","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/groups/Get-Group-Test","requestId":"426b8805-4bb9-4f88-960f-da9f2e8af785","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:35.400Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/groups/Get-Group-Test 500 35.290ms","metadata":{"error":{"contentLength":"3814","correlationId":"426b8805-4bb9-4f88-960f-da9f2e8af785","durationMs":35.29,"eventType":"finish","requestId":"426b8805-4bb9-4f88-960f-da9f2e8af785","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:35.414Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/groups/Get-Group-Test","metadata":{"correlationId":"aba01ece-5c57-4de3-81ef-50a503088667","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"aba01ece-5c57-4de3-81ef-50a503088667","url":"/api/admin/groups/Get-Group-Test","userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.467Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Authentication: Missing or invalid Authorization header.","metadata":{},"timestamp":"2026-02-23T12:47:35.475Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Client error processing request: Authorization header missing or invalid.","metadata":{"correlationId":"aba01ece-5c57-4de3-81ef-50a503088667","errorMessage":"Authorization header missing or invalid.","errorName":"AuthenticationError","isOperational":true,"method":"GET","path":"/api/admin/groups/Get-Group-Test","requestId":"aba01ece-5c57-4de3-81ef-50a503088667","stack":"AuthenticationError: Authorization header missing or invalid.\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:32:25\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:27:70\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestLogger.middleware.ts:84:9\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:32\n    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)\n    at middleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:13)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at addRequestId (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestId.middleware.ts:33:5)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at urlencodedParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\urlencoded.js:68:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at jsonParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\json.js:100:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at requestMetricsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestMetrics.middleware.ts:26:3)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at cors (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:188:7)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:224:17\n    at originCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:214:15)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:531:6)\n    at xXssProtectionMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:311:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPoweredByMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:304:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPermittedCrossDomainPoliciesMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:297:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xFrameOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:281:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDownloadOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:261:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDnsPrefetchControlMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:254:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xContentTypeOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:246:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at strictTransportSecurityMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:239:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at referrerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:207:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at originAgentClusterMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:182:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginResourcePolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:175:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginOpenerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:159:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at contentSecurityPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:124:4)","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.497Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"<-- GET /api/admin/groups/Get-Group-Test 401 61.642ms","metadata":{"contentLength":"151","correlationId":"aba01ece-5c57-4de3-81ef-50a503088667","durationMs":61.642,"eventType":"finish","requestId":"aba01ece-5c57-4de3-81ef-50a503088667","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.529Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> DELETE /api/admin/groups/Delete-Group-Test","metadata":{"correlationId":"d6a946d9-db5f-4712-b31a-88fb9c24d70d","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"DELETE","requestId":"d6a946d9-db5f-4712-b31a-88fb9c24d70d","url":"/api/admin/groups/Delete-Group-Test","userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.558Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - d6a946d9-db5f-4712-b31a-88fb9c24d70d] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["group-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T12:47:35.563Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [d6a946d9-db5f-4712-b31a-88fb9c24d70d]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T12:47:35.574Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"d6a946d9-db5f-4712-b31a-88fb9c24d70d","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"DELETE","path":"/api/admin/groups/Delete-Group-Test","requestId":"d6a946d9-db5f-4712-b31a-88fb9c24d70d","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:35.576Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- DELETE /api/admin/groups/Delete-Group-Test 500 28.631ms","metadata":{"error":{"contentLength":"3814","correlationId":"d6a946d9-db5f-4712-b31a-88fb9c24d70d","durationMs":28.631,"eventType":"finish","requestId":"d6a946d9-db5f-4712-b31a-88fb9c24d70d","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:35.587Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> DELETE /api/admin/groups/Delete-Group-Test","metadata":{"correlationId":"3b9ab7d7-500e-4122-bbb9-71904b3a0968","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"DELETE","requestId":"3b9ab7d7-500e-4122-bbb9-71904b3a0968","url":"/api/admin/groups/Delete-Group-Test","userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.623Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 3b9ab7d7-500e-4122-bbb9-71904b3a0968] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["group-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T12:47:35.631Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [3b9ab7d7-500e-4122-bbb9-71904b3a0968]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T12:47:35.639Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"3b9ab7d7-500e-4122-bbb9-71904b3a0968","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"DELETE","path":"/api/admin/groups/Delete-Group-Test","requestId":"3b9ab7d7-500e-4122-bbb9-71904b3a0968","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:35.644Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- DELETE /api/admin/groups/Delete-Group-Test 500 35.753ms","metadata":{"error":{"contentLength":"3814","correlationId":"3b9ab7d7-500e-4122-bbb9-71904b3a0968","durationMs":35.753,"eventType":"finish","requestId":"3b9ab7d7-500e-4122-bbb9-71904b3a0968","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:35.658Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> DELETE /api/admin/groups/Invalid%20Chars%20%24","metadata":{"correlationId":"5b80f70a-730a-4c9a-8b22-128ba2cec132","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"DELETE","requestId":"5b80f70a-730a-4c9a-8b22-128ba2cec132","url":"/api/admin/groups/Invalid%20Chars%20%24","userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.705Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 5b80f70a-730a-4c9a-8b22-128ba2cec132] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["group-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T12:47:35.709Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [5b80f70a-730a-4c9a-8b22-128ba2cec132]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T12:47:35.719Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"5b80f70a-730a-4c9a-8b22-128ba2cec132","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"DELETE","path":"/api/admin/groups/Invalid%20Chars%20%24","requestId":"5b80f70a-730a-4c9a-8b22-128ba2cec132","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:35.722Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- DELETE /api/admin/groups/Invalid%20Chars%20%24 500 25.767ms","metadata":{"error":{"contentLength":"3814","correlationId":"5b80f70a-730a-4c9a-8b22-128ba2cec132","durationMs":25.767,"eventType":"finish","requestId":"5b80f70a-730a-4c9a-8b22-128ba2cec132","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:35.730Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> DELETE /api/admin/groups/Delete-Group-Test","metadata":{"correlationId":"3174d5c0-38aa-4ea4-8840-52b03a956071","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"DELETE","requestId":"3174d5c0-38aa-4ea4-8840-52b03a956071","url":"/api/admin/groups/Delete-Group-Test","userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.756Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 3174d5c0-38aa-4ea4-8840-52b03a956071] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["group-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T12:47:35.760Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [3174d5c0-38aa-4ea4-8840-52b03a956071]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T12:47:35.765Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"3174d5c0-38aa-4ea4-8840-52b03a956071","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"DELETE","path":"/api/admin/groups/Delete-Group-Test","requestId":"3174d5c0-38aa-4ea4-8840-52b03a956071","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:35.775Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- DELETE /api/admin/groups/Delete-Group-Test 500 23.765ms","metadata":{"error":{"contentLength":"3814","correlationId":"3174d5c0-38aa-4ea4-8840-52b03a956071","durationMs":23.765,"eventType":"finish","requestId":"3174d5c0-38aa-4ea4-8840-52b03a956071","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:35.779Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> DELETE /api/admin/groups/Delete-Group-Test","metadata":{"correlationId":"b1c6a5a8-266c-4b84-a9f6-095c5c3e8415","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"DELETE","requestId":"b1c6a5a8-266c-4b84-a9f6-095c5c3e8415","url":"/api/admin/groups/Delete-Group-Test","userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.811Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Authentication: Missing or invalid Authorization header.","metadata":{},"timestamp":"2026-02-23T12:47:35.815Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Client error processing request: Authorization header missing or invalid.","metadata":{"correlationId":"b1c6a5a8-266c-4b84-a9f6-095c5c3e8415","errorMessage":"Authorization header missing or invalid.","errorName":"AuthenticationError","isOperational":true,"method":"DELETE","path":"/api/admin/groups/Delete-Group-Test","requestId":"b1c6a5a8-266c-4b84-a9f6-095c5c3e8415","stack":"AuthenticationError: Authorization header missing or invalid.\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:32:25\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:27:70\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestLogger.middleware.ts:84:9\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:32\n    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)\n    at middleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:13)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at addRequestId (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestId.middleware.ts:33:5)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at urlencodedParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\urlencoded.js:68:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at jsonParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\json.js:100:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at requestMetricsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestMetrics.middleware.ts:26:3)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at cors (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:188:7)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:224:17\n    at originCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:214:15)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:531:6)\n    at xXssProtectionMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:311:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPoweredByMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:304:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPermittedCrossDomainPoliciesMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:297:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xFrameOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:281:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDownloadOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:261:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDnsPrefetchControlMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:254:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xContentTypeOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:246:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at strictTransportSecurityMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:239:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at referrerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:207:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at originAgentClusterMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:182:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginResourcePolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:175:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginOpenerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:159:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at contentSecurityPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:124:4)","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.824Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"<-- DELETE /api/admin/groups/Delete-Group-Test 401 20.340ms","metadata":{"contentLength":"151","correlationId":"b1c6a5a8-266c-4b84-a9f6-095c5c3e8415","durationMs":20.34,"eventType":"finish","requestId":"b1c6a5a8-266c-4b84-a9f6-095c5c3e8415","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.832Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

  ΓùÅ Integration Tests: Group Admin Routes (/api/admin/groups) ΓÇ║ GET /api/admin/groups/:groupName ΓÇ║ should return 200 OK with group data if group exists

    expected 200 "OK", got 500 "Internal Server Error"

      210 |                 .get(`${BASE_API_PATH}/${targetgroupName}`)
      211 |                 .set(MOCK_AUTH_HEADER)
    > 212 |                 .expect(HttpStatusCode.OK); // 200
          |                  ^
      213 |             expect(mockGroupAdminService.getGroup).toHaveBeenCalledWith(expect.anything(), targetgroupName);
      214 |         });
      215 |

      at tests/integration/routes/group.admin.routes.integration.spec.ts:212:18
      at tests/integration/routes/group.admin.routes.integration.spec.ts:9:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/group.admin.routes.integration.spec.ts:5:12)
      at Object.<anonymous> (tests/integration/routes/group.admin.routes.integration.spec.ts:207:79)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Group Admin Routes (/api/admin/groups) ΓÇ║ GET /api/admin/groups/:groupName ΓÇ║ should return 404 Not Found if service returns null

    expected 404 "Not Found", got 500 "Internal Server Error"

      219 |                 .get(`${BASE_API_PATH}/${targetgroupName}`)
      220 |                 .set(MOCK_AUTH_HEADER)
    > 221 |                 .expect(HttpStatusCode.NOT_FOUND); // 404 (Handled by controller)
          |                  ^
      222 |             expect(mockGroupAdminService.getGroup).toHaveBeenCalledWith(expect.anything(), targetgroupName);
      223 |         });
      224 |

      at tests/integration/routes/group.admin.routes.integration.spec.ts:221:18
      at tests/integration/routes/group.admin.routes.integration.spec.ts:9:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/group.admin.routes.integration.spec.ts:5:12)
      at Object.<anonymous> (tests/integration/routes/group.admin.routes.integration.spec.ts:216:78)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Group Admin Routes (/api/admin/groups) ΓÇ║ GET /api/admin/groups/:groupName ΓÇ║ should return 404 Not Found if service throws NotFoundError

    expected 404 "Not Found", got 500 "Internal Server Error"

      230 |                 .get(`${BASE_API_PATH}/${targetgroupName}`)
      231 |                 .set(MOCK_AUTH_HEADER)
    > 232 |                 .expect(HttpStatusCode.NOT_FOUND); // 404 (Handled by error middleware)
          |                  ^
      233 |             expect(mockGroupAdminService.getGroup).toHaveBeenCalledWith(expect.anything(), targetgroupName);
      234 |         });
      235 |

      at tests/integration/routes/group.admin.routes.integration.spec.ts:232:18
      at tests/integration/routes/group.admin.routes.integration.spec.ts:9:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/group.admin.routes.integration.spec.ts:5:12)
      at Object.<anonymous> (tests/integration/routes/group.admin.routes.integration.spec.ts:225:86)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Group Admin Routes (/api/admin/groups) ΓÇ║ GET /api/admin/groups/:groupName ΓÇ║ should return 400 Bad Request if groupName param is invalid

    expected 400 "Bad Request", got 500 "Internal Server Error"

      239 |                 .get(`${BASE_API_PATH}/${encodeURIComponent(invalidgroupName)}`) // URL encode it
      240 |                 .set(MOCK_AUTH_HEADER)
    > 241 |                 .expect(HttpStatusCode.BAD_REQUEST); // 400 (Handled by validation middleware)
          |                  ^
      242 |             expect(mockGroupAdminService.getGroup).not.toHaveBeenCalled();
      243 |         });
      244 |

      at tests/integration/routes/group.admin.routes.integration.spec.ts:241:18
      at tests/integration/routes/group.admin.routes.integration.spec.ts:9:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/group.admin.routes.integration.spec.ts:5:12)
      at Object.<anonymous> (tests/integration/routes/group.admin.routes.integration.spec.ts:236:86)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Group Admin Routes (/api/admin/groups) ΓÇ║ GET /api/admin/groups/:groupName ΓÇ║ should return 500 if the service fails unexpectedly

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: Anything, "Get-Group-Test"

    Number of calls: 0

      250 |                 .set(MOCK_AUTH_HEADER)
      251 |                 .expect(HttpStatusCode.INTERNAL_SERVER_ERROR); // 500
    > 252 |             expect(mockGroupAdminService.getGroup).toHaveBeenCalledWith(expect.anything(), targetgroupName);
          |                                                    ^
      253 |         });
      254 |
      255 |         it('should return 401 Unauthorized if token is missing', async () => {

      at tests/integration/routes/group.admin.routes.integration.spec.ts:252:52
      at fulfilled (tests/integration/routes/group.admin.routes.integration.spec.ts:6:58)

  ΓùÅ Integration Tests: Group Admin Routes (/api/admin/groups) ΓÇ║ DELETE /api/admin/groups/:groupName ΓÇ║ should return 204 No Content if service succeeds

    expected 204 "No Content", got 500 "Internal Server Error"

      269 |                 .delete(`${BASE_API_PATH}/${targetgroupName}`)
      270 |                 .set(MOCK_AUTH_HEADER)
    > 271 |                 .expect(HttpStatusCode.NO_CONTENT); // 204
          |                  ^
      272 |             expect(mockGroupAdminService.deleteGroup).toHaveBeenCalledWith(expect.anything(), targetgroupName);
      273 |         });
      274 |

      at tests/integration/routes/group.admin.routes.integration.spec.ts:271:18
      at tests/integration/routes/group.admin.routes.integration.spec.ts:9:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/group.admin.routes.integration.spec.ts:5:12)
      at Object.<anonymous> (tests/integration/routes/group.admin.routes.integration.spec.ts:266:75)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Group Admin Routes (/api/admin/groups) ΓÇ║ DELETE /api/admin/groups/:groupName ΓÇ║ should return 404 Not Found if service throws NotFoundError

    expected 404 "Not Found", got 500 "Internal Server Error"

      280 |                 .delete(`${BASE_API_PATH}/${targetgroupName}`)
      281 |                 .set(MOCK_AUTH_HEADER)
    > 282 |                 .expect(HttpStatusCode.NOT_FOUND); // 404
          |                  ^
      283 |             expect(mockGroupAdminService.deleteGroup).toHaveBeenCalledWith(expect.anything(), targetgroupName);
      284 |         });
      285 |

      at tests/integration/routes/group.admin.routes.integration.spec.ts:282:18
      at tests/integration/routes/group.admin.routes.integration.spec.ts:9:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/group.admin.routes.integration.spec.ts:5:12)
      at Object.<anonymous> (tests/integration/routes/group.admin.routes.integration.spec.ts:275:86)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Group Admin Routes (/api/admin/groups) ΓÇ║ DELETE /api/admin/groups/:groupName ΓÇ║ should return 400 Bad Request if groupName param is invalid

    expected 400 "Bad Request", got 500 "Internal Server Error"

      289 |                 .delete(`${BASE_API_PATH}/${encodeURIComponent(invalidgroupName)}`)
      290 |                 .set(MOCK_AUTH_HEADER)
    > 291 |                 .expect(HttpStatusCode.BAD_REQUEST); // 400
          |                  ^
      292 |             expect(mockGroupAdminService.deleteGroup).not.toHaveBeenCalled();
      293 |         });
      294 |

      at tests/integration/routes/group.admin.routes.integration.spec.ts:291:18
      at tests/integration/routes/group.admin.routes.integration.spec.ts:9:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/group.admin.routes.integration.spec.ts:5:12)
      at Object.<anonymous> (tests/integration/routes/group.admin.routes.integration.spec.ts:286:86)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Group Admin Routes (/api/admin/groups) ΓÇ║ DELETE /api/admin/groups/:groupName ΓÇ║ should return 500 if service fails unexpectedly

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: Anything, "Delete-Group-Test"

    Number of calls: 0

      300 |                 .set(MOCK_AUTH_HEADER)
      301 |                 .expect(HttpStatusCode.INTERNAL_SERVER_ERROR); // 500
    > 302 |             expect(mockGroupAdminService.deleteGroup).toHaveBeenCalledWith(expect.anything(), targetgroupName);
          |                                                       ^
      303 |         });
      304 |
      305 |         it('should return 401 Unauthorized if token is missing', async () => {

      at tests/integration/routes/group.admin.routes.integration.spec.ts:302:55
      at fulfilled (tests/integration/routes/group.admin.routes.integration.spec.ts:6:58)

FAIL tests/integration/routes/permission.admin.routes.integration.spec.ts (32.94 s)
  ΓùÅ Console

    console.info
      [WinstonLogger] Logger initialized with level "info" in "test" environment.

      at WinstonLogger.initializeLogger (src/infrastructure/logging/WinstonLogger.ts:68:17)
          at Array.map (<anonymous>)

    console.log
      {"level":"warn","message":"CORS_ORIGIN is set to \"*\" in a non-development environment. This is insecure!","metadata":{},"timestamp":"2026-02-23T12:47:34.272Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"CORS configured for origin: *","metadata":{},"timestamp":"2026-02-23T12:47:34.287Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"Application setup complete for environment: test","metadata":{},"timestamp":"2026-02-23T12:47:34.291Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> POST /api/admin/permissions","metadata":{"correlationId":"473ea08f-ae75-4bd3-a165-a2356e151897","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"POST","requestId":"473ea08f-ae75-4bd3-a165-a2356e151897","url":"/api/admin/permissions","userId":"anonymous"},"timestamp":"2026-02-23T12:47:34.533Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 473ea08f-ae75-4bd3-a165-a2356e151897] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["permission-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T12:47:34.564Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: {
        permissionName: 'perm:test-1771850847038',
        description: 'Test Permission Description'
      }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'permissionName', 'description' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"permissionName":"perm:test-1771850847038","description":"Test Permission Description"}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      {"level":"info","message":"<-- POST /api/admin/permissions 201 87.647ms","metadata":{"contentLength":"88","correlationId":"473ea08f-ae75-4bd3-a165-a2356e151897","durationMs":87.647,"eventType":"finish","requestId":"473ea08f-ae75-4bd3-a165-a2356e151897","statusCode":201,"userId":"anonymous"},"timestamp":"2026-02-23T12:47:34.621Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> POST /api/admin/permissions","metadata":{"correlationId":"0b95dd65-ba88-4654-938b-f6ffd80e4d55","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"POST","requestId":"0b95dd65-ba88-4654-938b-f6ffd80e4d55","url":"/api/admin/permissions","userId":"anonymous"},"timestamp":"2026-02-23T12:47:34.703Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 0b95dd65-ba88-4654-938b-f6ffd80e4d55] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["permission-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T12:47:34.706Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: { description: 'Only description' }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'description' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"description":"Only description"}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      {"level":"warn","message":"Request validation failed [0b95dd65-ba88-4654-938b-f6ffd80e4d55]:","metadata":{"errors":{"permissionName":"Permission name is required"}},"timestamp":"2026-02-23T12:47:34.719Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)
          at Generator.throw (<anonymous>)

    console.log
      {"level":"warn","message":"Client error processing request: Input validation failed","metadata":{"correlationId":"0b95dd65-ba88-4654-938b-f6ffd80e4d55","details":{"permissionName":"Permission name is required"},"errorMessage":"Input validation failed","errorName":"ValidationError","isOperational":true,"method":"POST","path":"/api/admin/permissions","requestId":"0b95dd65-ba88-4654-938b-f6ffd80e4d55","stack":"ValidationError: Input validation failed\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:57:41\n    at Generator.throw (<anonymous>)\n    at rejected (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:6:65)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":400,"userId":"anonymous"},"timestamp":"2026-02-23T12:47:34.730Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)
          at Generator.throw (<anonymous>)

    console.log
      {"level":"warn","message":"<-- POST /api/admin/permissions 400 37.451ms","metadata":{"contentLength":"189","correlationId":"0b95dd65-ba88-4654-938b-f6ffd80e4d55","durationMs":37.451,"eventType":"finish","requestId":"0b95dd65-ba88-4654-938b-f6ffd80e4d55","statusCode":400,"userId":"anonymous"},"timestamp":"2026-02-23T12:47:34.740Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> POST /api/admin/permissions","metadata":{"correlationId":"568a9d11-ed15-4301-a4fd-68a6959122b1","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"POST","requestId":"568a9d11-ed15-4301-a4fd-68a6959122b1","url":"/api/admin/permissions","userId":"anonymous"},"timestamp":"2026-02-23T12:47:34.796Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 568a9d11-ed15-4301-a4fd-68a6959122b1] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["permission-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T12:47:34.799Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: {
        permissionName: 'perm:test-1771850847038',
        description: 'Test Permission Description'
      }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'permissionName', 'description' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"permissionName":"perm:test-1771850847038","description":"Test Permission Description"}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      {"level":"error","message":"[PermAdminCtrl] Failed to create permission perm:test-1771850847038","metadata":{"error":{"adminUserId":"test-admin-id-123","error":{"isOperational":true,"name":"PermissionExistsError","statusCode":409}}},"timestamp":"2026-02-23T12:47:34.813Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)
          at Generator.throw (<anonymous>)

    console.log
      {"level":"warn","message":"Client error processing request: Permission 'perm:test-1771850847038' already exists.","metadata":{"correlationId":"568a9d11-ed15-4301-a4fd-68a6959122b1","errorMessage":"Permission 'perm:test-1771850847038' already exists.","errorName":"PermissionExistsError","isOperational":true,"method":"POST","path":"/api/admin/permissions","requestId":"568a9d11-ed15-4301-a4fd-68a6959122b1","stack":"PermissionExistsError: Permission 'perm:test-1771850847038' already exists.\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\permission.admin.routes.integration.spec.ts:136:28\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\permission.admin.routes.integration.spec.ts:9:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\permission.admin.routes.integration.spec.ts:5:12)\n    at Object.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\permission.admin.routes.integration.spec.ts:134:74)\n    at Promise.then.completed (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\testWorker.js:108:12)","statusCode":409,"userId":"anonymous"},"timestamp":"2026-02-23T12:47:34.822Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)
          at Generator.throw (<anonymous>)

    console.log
      {"level":"warn","message":"<-- POST /api/admin/permissions 409 33.752ms","metadata":{"contentLength":"165","correlationId":"568a9d11-ed15-4301-a4fd-68a6959122b1","durationMs":33.752,"eventType":"finish","requestId":"568a9d11-ed15-4301-a4fd-68a6959122b1","statusCode":409,"userId":"anonymous"},"timestamp":"2026-02-23T12:47:34.829Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> POST /api/admin/permissions","metadata":{"correlationId":"d957db34-0c13-4dfa-bec5-d078cf4562ec","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"POST","requestId":"d957db34-0c13-4dfa-bec5-d078cf4562ec","url":"/api/admin/permissions","userId":"anonymous"},"timestamp":"2026-02-23T12:47:34.875Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Authentication: Missing or invalid Authorization header.","metadata":{},"timestamp":"2026-02-23T12:47:34.880Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Client error processing request: Authorization header missing or invalid.","metadata":{"correlationId":"d957db34-0c13-4dfa-bec5-d078cf4562ec","errorMessage":"Authorization header missing or invalid.","errorName":"AuthenticationError","isOperational":true,"method":"POST","path":"/api/admin/permissions","requestId":"d957db34-0c13-4dfa-bec5-d078cf4562ec","stack":"AuthenticationError: Authorization header missing or invalid.\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:32:25\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:27:70\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestLogger.middleware.ts:84:9\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:32\n    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)\n    at middleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:13)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at addRequestId (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestId.middleware.ts:33:5)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at urlencodedParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\urlencoded.js:57:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\read.js:132:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:214:14)\n    at invokeCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\raw-body@3.0.0\\node_modules\\raw-body\\index.js:238:16)\n    at done (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\raw-body@3.0.0\\node_modules\\raw-body\\index.js:227:7)\n    at IncomingMessage.onEnd (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\raw-body@3.0.0\\node_modules\\raw-body\\index.js:287:7)\n    at IncomingMessage.emit (node:events:519:28)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at processTicksAndRejections (node:internal/process/task_queues:90:21)","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T12:47:34.908Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"<-- POST /api/admin/permissions 401 44.169ms","metadata":{"contentLength":"151","correlationId":"d957db34-0c13-4dfa-bec5-d078cf4562ec","durationMs":44.169,"eventType":"finish","requestId":"d957db34-0c13-4dfa-bec5-d078cf4562ec","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T12:47:34.919Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/permissions/perm:read","metadata":{"correlationId":"fab04196-7092-42f5-bd90-e6fc7f197d96","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"fab04196-7092-42f5-bd90-e6fc7f197d96","url":"/api/admin/permissions/perm:read","userId":"anonymous"},"timestamp":"2026-02-23T12:47:34.974Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - fab04196-7092-42f5-bd90-e6fc7f197d96] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["permission-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T12:47:34.987Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [fab04196-7092-42f5-bd90-e6fc7f197d96]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T12:47:35.006Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"fab04196-7092-42f5-bd90-e6fc7f197d96","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/permissions/perm:read","requestId":"fab04196-7092-42f5-bd90-e6fc7f197d96","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:35.011Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/permissions/perm:read 500 45.099ms","metadata":{"error":{"contentLength":"3814","correlationId":"fab04196-7092-42f5-bd90-e6fc7f197d96","durationMs":45.099,"eventType":"finish","requestId":"fab04196-7092-42f5-bd90-e6fc7f197d96","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:35.019Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/permissions/not-found-perm","metadata":{"correlationId":"b4f525c7-b016-4b54-8bbc-82782ea1ac09","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"b4f525c7-b016-4b54-8bbc-82782ea1ac09","url":"/api/admin/permissions/not-found-perm","userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.054Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - b4f525c7-b016-4b54-8bbc-82782ea1ac09] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["permission-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T12:47:35.062Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [b4f525c7-b016-4b54-8bbc-82782ea1ac09]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T12:47:35.069Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"b4f525c7-b016-4b54-8bbc-82782ea1ac09","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/permissions/not-found-perm","requestId":"b4f525c7-b016-4b54-8bbc-82782ea1ac09","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:35.072Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/permissions/not-found-perm 500 23.510ms","metadata":{"error":{"contentLength":"3814","correlationId":"b4f525c7-b016-4b54-8bbc-82782ea1ac09","durationMs":23.51,"eventType":"finish","requestId":"b4f525c7-b016-4b54-8bbc-82782ea1ac09","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:35.078Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/permissions/perm:read","metadata":{"correlationId":"9a4f2aa6-cdb1-4b64-9d92-7de98b9d28ea","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"9a4f2aa6-cdb1-4b64-9d92-7de98b9d28ea","url":"/api/admin/permissions/perm:read","userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.116Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Authentication: Missing or invalid Authorization header.","metadata":{},"timestamp":"2026-02-23T12:47:35.122Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Client error processing request: Authorization header missing or invalid.","metadata":{"correlationId":"9a4f2aa6-cdb1-4b64-9d92-7de98b9d28ea","errorMessage":"Authorization header missing or invalid.","errorName":"AuthenticationError","isOperational":true,"method":"GET","path":"/api/admin/permissions/perm:read","requestId":"9a4f2aa6-cdb1-4b64-9d92-7de98b9d28ea","stack":"AuthenticationError: Authorization header missing or invalid.\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:32:25\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:27:70\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestLogger.middleware.ts:84:9\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:32\n    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)\n    at middleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:13)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at addRequestId (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestId.middleware.ts:33:5)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at urlencodedParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\urlencoded.js:68:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at jsonParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\json.js:100:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at requestMetricsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestMetrics.middleware.ts:26:3)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at cors (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:188:7)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:224:17\n    at originCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:214:15)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:531:6)\n    at xXssProtectionMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:311:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPoweredByMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:304:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPermittedCrossDomainPoliciesMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:297:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xFrameOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:281:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDownloadOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:261:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDnsPrefetchControlMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:254:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xContentTypeOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:246:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at strictTransportSecurityMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:239:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at referrerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:207:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at originAgentClusterMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:182:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginResourcePolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:175:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginOpenerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:159:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at contentSecurityPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:124:4)","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.137Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"<-- GET /api/admin/permissions/perm:read 401 30.594ms","metadata":{"contentLength":"151","correlationId":"9a4f2aa6-cdb1-4b64-9d92-7de98b9d28ea","durationMs":30.594,"eventType":"finish","requestId":"9a4f2aa6-cdb1-4b64-9d92-7de98b9d28ea","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.146Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/permissions?limit=10","metadata":{"correlationId":"291f6f4e-283a-4056-b14e-2fda2540e80e","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"291f6f4e-283a-4056-b14e-2fda2540e80e","url":"/api/admin/permissions?limit=10","userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.214Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 291f6f4e-283a-4056-b14e-2fda2540e80e] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["permission-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T12:47:35.221Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"<-- GET /api/admin/permissions?limit=10 200 13.135ms","metadata":{"contentLength":"265","correlationId":"291f6f4e-283a-4056-b14e-2fda2540e80e","durationMs":13.135,"eventType":"finish","requestId":"291f6f4e-283a-4056-b14e-2fda2540e80e","statusCode":200,"userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.227Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/permissions","metadata":{"correlationId":"1a810b73-73c4-4d2d-8803-fff2c856411a","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"1a810b73-73c4-4d2d-8803-fff2c856411a","url":"/api/admin/permissions","userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.280Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Authentication: Missing or invalid Authorization header.","metadata":{},"timestamp":"2026-02-23T12:47:35.289Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Client error processing request: Authorization header missing or invalid.","metadata":{"correlationId":"1a810b73-73c4-4d2d-8803-fff2c856411a","errorMessage":"Authorization header missing or invalid.","errorName":"AuthenticationError","isOperational":true,"method":"GET","path":"/api/admin/permissions","requestId":"1a810b73-73c4-4d2d-8803-fff2c856411a","stack":"AuthenticationError: Authorization header missing or invalid.\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:32:25\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:27:70\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestLogger.middleware.ts:84:9\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:32\n    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)\n    at middleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:13)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at addRequestId (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestId.middleware.ts:33:5)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at urlencodedParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\urlencoded.js:68:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at jsonParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\json.js:100:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at requestMetricsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestMetrics.middleware.ts:26:3)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at cors (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:188:7)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:224:17\n    at originCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:214:15)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:531:6)\n    at xXssProtectionMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:311:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPoweredByMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:304:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPermittedCrossDomainPoliciesMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:297:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xFrameOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:281:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDownloadOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:261:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDnsPrefetchControlMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:254:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xContentTypeOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:246:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at strictTransportSecurityMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:239:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at referrerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:207:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at originAgentClusterMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:182:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginResourcePolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:175:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginOpenerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:159:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at contentSecurityPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:124:4)","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.305Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"<-- GET /api/admin/permissions 401 42.051ms","metadata":{"contentLength":"151","correlationId":"1a810b73-73c4-4d2d-8803-fff2c856411a","durationMs":42.051,"eventType":"finish","requestId":"1a810b73-73c4-4d2d-8803-fff2c856411a","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.322Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> PUT /api/admin/permissions/perm:update","metadata":{"correlationId":"edad4403-c8f4-4fc8-a5ab-024ccf8bdfd3","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"PUT","requestId":"edad4403-c8f4-4fc8-a5ab-024ccf8bdfd3","url":"/api/admin/permissions/perm:update","userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.358Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - edad4403-c8f4-4fc8-a5ab-024ccf8bdfd3] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["permission-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T12:47:35.363Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: { description: 'Updated description' }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'description' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"description":"Updated description"}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      {"level":"info","message":"<-- PUT /api/admin/permissions/perm:update 200 21.487ms","metadata":{"contentLength":"171","correlationId":"edad4403-c8f4-4fc8-a5ab-024ccf8bdfd3","durationMs":21.487,"eventType":"finish","requestId":"edad4403-c8f4-4fc8-a5ab-024ccf8bdfd3","statusCode":200,"userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.379Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> PUT /api/admin/permissions/not-found-perm","metadata":{"correlationId":"31e277f6-e2fd-4c5e-8805-0e92044e6bfe","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"PUT","requestId":"31e277f6-e2fd-4c5e-8805-0e92044e6bfe","url":"/api/admin/permissions/not-found-perm","userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.440Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 31e277f6-e2fd-4c5e-8805-0e92044e6bfe] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["permission-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T12:47:35.444Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: { description: 'Updated description' }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'description' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"description":"Updated description"}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      {"level":"warn","message":"<-- PUT /api/admin/permissions/not-found-perm 404 24.471ms","metadata":{"contentLength":"63","correlationId":"31e277f6-e2fd-4c5e-8805-0e92044e6bfe","durationMs":24.471,"eventType":"finish","requestId":"31e277f6-e2fd-4c5e-8805-0e92044e6bfe","statusCode":404,"userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.464Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> PUT /api/admin/permissions/perm:update","metadata":{"correlationId":"7b5f2426-5342-4a44-8410-a245170f0fb4","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"PUT","requestId":"7b5f2426-5342-4a44-8410-a245170f0fb4","url":"/api/admin/permissions/perm:update","userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.502Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 7b5f2426-5342-4a44-8410-a245170f0fb4] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["permission-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T12:47:35.508Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: {}

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): []

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      {"level":"warn","message":"Request validation failed [7b5f2426-5342-4a44-8410-a245170f0fb4]:","metadata":{"errors":{"":"No update data provided"}},"timestamp":"2026-02-23T12:47:35.535Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)
          at Generator.throw (<anonymous>)

    console.log
      {"level":"warn","message":"Client error processing request: Input validation failed","metadata":{"correlationId":"7b5f2426-5342-4a44-8410-a245170f0fb4","details":{"":"No update data provided"},"errorMessage":"Input validation failed","errorName":"ValidationError","isOperational":true,"method":"PUT","path":"/api/admin/permissions/perm:update","requestId":"7b5f2426-5342-4a44-8410-a245170f0fb4","stack":"ValidationError: Input validation failed\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:57:41\n    at Generator.throw (<anonymous>)\n    at rejected (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:6:65)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":400,"userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.538Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)
          at Generator.throw (<anonymous>)

    console.log
      {"level":"warn","message":"<-- PUT /api/admin/permissions/perm:update 400 41.447ms","metadata":{"contentLength":"171","correlationId":"7b5f2426-5342-4a44-8410-a245170f0fb4","durationMs":41.447,"eventType":"finish","requestId":"7b5f2426-5342-4a44-8410-a245170f0fb4","statusCode":400,"userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.543Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> PUT /api/admin/permissions/perm:update","metadata":{"correlationId":"864d94db-5fed-41e4-935e-3de01b9db5f3","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"PUT","requestId":"864d94db-5fed-41e4-935e-3de01b9db5f3","url":"/api/admin/permissions/perm:update","userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.570Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Authentication: Missing or invalid Authorization header.","metadata":{},"timestamp":"2026-02-23T12:47:35.576Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Client error processing request: Authorization header missing or invalid.","metadata":{"correlationId":"864d94db-5fed-41e4-935e-3de01b9db5f3","errorMessage":"Authorization header missing or invalid.","errorName":"AuthenticationError","isOperational":true,"method":"PUT","path":"/api/admin/permissions/perm:update","requestId":"864d94db-5fed-41e4-935e-3de01b9db5f3","stack":"AuthenticationError: Authorization header missing or invalid.\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:32:25\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:27:70\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestLogger.middleware.ts:84:9\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:32\n    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)\n    at middleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:13)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at addRequestId (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestId.middleware.ts:33:5)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at urlencodedParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\urlencoded.js:57:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\read.js:132:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:214:14)\n    at invokeCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\raw-body@3.0.0\\node_modules\\raw-body\\index.js:238:16)\n    at done (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\raw-body@3.0.0\\node_modules\\raw-body\\index.js:227:7)\n    at IncomingMessage.onEnd (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\raw-body@3.0.0\\node_modules\\raw-body\\index.js:287:7)\n    at IncomingMessage.emit (node:events:519:28)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at processTicksAndRejections (node:internal/process/task_queues:90:21)","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.587Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"<-- PUT /api/admin/permissions/perm:update 401 25.287ms","metadata":{"contentLength":"151","correlationId":"864d94db-5fed-41e4-935e-3de01b9db5f3","durationMs":25.287,"eventType":"finish","requestId":"864d94db-5fed-41e4-935e-3de01b9db5f3","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.595Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> DELETE /api/admin/permissions/perm:delete","metadata":{"correlationId":"61a28550-9e57-441b-8934-221b4210d98e","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"DELETE","requestId":"61a28550-9e57-441b-8934-221b4210d98e","url":"/api/admin/permissions/perm:delete","userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.639Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 61a28550-9e57-441b-8934-221b4210d98e] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["permission-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T12:47:35.642Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [61a28550-9e57-441b-8934-221b4210d98e]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T12:47:35.656Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"61a28550-9e57-441b-8934-221b4210d98e","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"DELETE","path":"/api/admin/permissions/perm:delete","requestId":"61a28550-9e57-441b-8934-221b4210d98e","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:35.662Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- DELETE /api/admin/permissions/perm:delete 500 30.960ms","metadata":{"error":{"contentLength":"3814","correlationId":"61a28550-9e57-441b-8934-221b4210d98e","durationMs":30.96,"eventType":"finish","requestId":"61a28550-9e57-441b-8934-221b4210d98e","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:35.669Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> DELETE /api/admin/permissions/perm:delete","metadata":{"correlationId":"a10eca8a-4bb2-486d-aed4-db34c5132dfc","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"DELETE","requestId":"a10eca8a-4bb2-486d-aed4-db34c5132dfc","url":"/api/admin/permissions/perm:delete","userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.695Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - a10eca8a-4bb2-486d-aed4-db34c5132dfc] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["permission-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T12:47:35.699Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [a10eca8a-4bb2-486d-aed4-db34c5132dfc]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T12:47:35.705Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"a10eca8a-4bb2-486d-aed4-db34c5132dfc","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"DELETE","path":"/api/admin/permissions/perm:delete","requestId":"a10eca8a-4bb2-486d-aed4-db34c5132dfc","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:35.708Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- DELETE /api/admin/permissions/perm:delete 500 19.285ms","metadata":{"error":{"contentLength":"3814","correlationId":"a10eca8a-4bb2-486d-aed4-db34c5132dfc","durationMs":19.285,"eventType":"finish","requestId":"a10eca8a-4bb2-486d-aed4-db34c5132dfc","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:35.714Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> DELETE /api/admin/permissions/perm:delete","metadata":{"correlationId":"653dbcad-8807-4259-894a-4e53e1b1f9d0","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"DELETE","requestId":"653dbcad-8807-4259-894a-4e53e1b1f9d0","url":"/api/admin/permissions/perm:delete","userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.746Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Authentication: Missing or invalid Authorization header.","metadata":{},"timestamp":"2026-02-23T12:47:35.750Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Client error processing request: Authorization header missing or invalid.","metadata":{"correlationId":"653dbcad-8807-4259-894a-4e53e1b1f9d0","errorMessage":"Authorization header missing or invalid.","errorName":"AuthenticationError","isOperational":true,"method":"DELETE","path":"/api/admin/permissions/perm:delete","requestId":"653dbcad-8807-4259-894a-4e53e1b1f9d0","stack":"AuthenticationError: Authorization header missing or invalid.\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:32:25\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:27:70\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestLogger.middleware.ts:84:9\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:32\n    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)\n    at middleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:13)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at addRequestId (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestId.middleware.ts:33:5)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at urlencodedParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\urlencoded.js:68:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at jsonParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\json.js:100:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at requestMetricsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestMetrics.middleware.ts:26:3)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at cors (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:188:7)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:224:17\n    at originCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:214:15)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:531:6)\n    at xXssProtectionMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:311:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPoweredByMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:304:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPermittedCrossDomainPoliciesMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:297:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xFrameOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:281:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDownloadOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:261:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDnsPrefetchControlMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:254:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xContentTypeOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:246:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at strictTransportSecurityMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:239:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at referrerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:207:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at originAgentClusterMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:182:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginResourcePolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:175:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginOpenerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:159:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at contentSecurityPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:124:4)","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.761Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"<-- DELETE /api/admin/permissions/perm:delete 401 22.659ms","metadata":{"contentLength":"151","correlationId":"653dbcad-8807-4259-894a-4e53e1b1f9d0","durationMs":22.659,"eventType":"finish","requestId":"653dbcad-8807-4259-894a-4e53e1b1f9d0","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.768Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/permissions/perm:with:roles/roles","metadata":{"correlationId":"fd9438fd-d3cf-42ae-bf75-22192b8f9335","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"fd9438fd-d3cf-42ae-bf75-22192b8f9335","url":"/api/admin/permissions/perm:with:roles/roles","userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.815Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - fd9438fd-d3cf-42ae-bf75-22192b8f9335] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["permission-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T12:47:35.819Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [fd9438fd-d3cf-42ae-bf75-22192b8f9335]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T12:47:35.823Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"fd9438fd-d3cf-42ae-bf75-22192b8f9335","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/permissions/perm:with:roles/roles","requestId":"fd9438fd-d3cf-42ae-bf75-22192b8f9335","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:35.826Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/permissions/perm:with:roles/roles 500 17.310ms","metadata":{"error":{"contentLength":"3814","correlationId":"fd9438fd-d3cf-42ae-bf75-22192b8f9335","durationMs":17.31,"eventType":"finish","requestId":"fd9438fd-d3cf-42ae-bf75-22192b8f9335","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:35.832Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/permissions/perm:with:roles/roles","metadata":{"correlationId":"20997094-dedc-4832-bd59-ce30d2881b8e","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"20997094-dedc-4832-bd59-ce30d2881b8e","url":"/api/admin/permissions/perm:with:roles/roles","userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.873Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 20997094-dedc-4832-bd59-ce30d2881b8e] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["permission-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T12:47:35.883Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [20997094-dedc-4832-bd59-ce30d2881b8e]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T12:47:35.893Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"20997094-dedc-4832-bd59-ce30d2881b8e","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/permissions/perm:with:roles/roles","requestId":"20997094-dedc-4832-bd59-ce30d2881b8e","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:35.896Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/permissions/perm:with:roles/roles 500 31.608ms","metadata":{"error":{"contentLength":"3814","correlationId":"20997094-dedc-4832-bd59-ce30d2881b8e","durationMs":31.608,"eventType":"finish","requestId":"20997094-dedc-4832-bd59-ce30d2881b8e","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:35.904Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/permissions/perm:with:roles/roles","metadata":{"correlationId":"f90bd3b3-ca87-405a-af8b-56b374e6736c","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"f90bd3b3-ca87-405a-af8b-56b374e6736c","url":"/api/admin/permissions/perm:with:roles/roles","userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.933Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Authentication: Missing or invalid Authorization header.","metadata":{},"timestamp":"2026-02-23T12:47:35.938Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Client error processing request: Authorization header missing or invalid.","metadata":{"correlationId":"f90bd3b3-ca87-405a-af8b-56b374e6736c","errorMessage":"Authorization header missing or invalid.","errorName":"AuthenticationError","isOperational":true,"method":"GET","path":"/api/admin/permissions/perm:with:roles/roles","requestId":"f90bd3b3-ca87-405a-af8b-56b374e6736c","stack":"AuthenticationError: Authorization header missing or invalid.\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:32:25\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:27:70\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestLogger.middleware.ts:84:9\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:32\n    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)\n    at middleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:13)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at addRequestId (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestId.middleware.ts:33:5)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at urlencodedParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\urlencoded.js:68:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at jsonParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\json.js:100:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at requestMetricsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestMetrics.middleware.ts:26:3)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at cors (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:188:7)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:224:17\n    at originCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:214:15)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:531:6)\n    at xXssProtectionMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:311:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPoweredByMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:304:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPermittedCrossDomainPoliciesMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:297:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xFrameOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:281:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDownloadOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:261:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDnsPrefetchControlMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:254:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xContentTypeOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:246:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at strictTransportSecurityMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:239:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at referrerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:207:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at originAgentClusterMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:182:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginResourcePolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:175:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginOpenerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:159:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at contentSecurityPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:124:4)","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.947Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"<-- GET /api/admin/permissions/perm:with:roles/roles 401 20.659ms","metadata":{"contentLength":"151","correlationId":"f90bd3b3-ca87-405a-af8b-56b374e6736c","durationMs":20.659,"eventType":"finish","requestId":"f90bd3b3-ca87-405a-af8b-56b374e6736c","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.953Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

  ΓùÅ Integration Tests: Permission Admin Routes (/api/admin/permissions) ΓÇ║ POST /api/admin/permissions ΓÇ║ should return 400 on validation error (e.g., missing permissionName)

    expect(received).toEqual(expected) // deep equality

    - Expected  - 1
    + Received  + 1

      Object {
    -   "body.permissionName": "Permission name is required",
    +   "permissionName": "Permission name is required",
      }

      128 |              expect(response.status).toBe(400);
      129 |              expect(response.body.name).toBe('ValidationError');
    > 130 |              expect(response.body.details).toEqual({'body.permissionName': 'Permission name is required'});
          |                                            ^
      131 |              expect(mockPermissionAdminService.createPermission).not.toHaveBeenCalled();
      132 |         });
      133 |

      at tests/integration/routes/permission.admin.routes.integration.spec.ts:130:44
      at fulfilled (tests/integration/routes/permission.admin.routes.integration.spec.ts:6:58)

  ΓùÅ Integration Tests: Permission Admin Routes (/api/admin/permissions) ΓÇ║ GET /api/admin/permissions/:permissionName ΓÇ║ should return 200 and the permission if found

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

      166 |                  .set('Authorization', TEST_ADMIN_TOKEN);
      167 |
    > 168 |              expect(response.status).toBe(200);
          |                                      ^
      169 |              expect(response.body.permissionName).toBe(permName);
      170 |              expect(mockPermissionAdminService.getPermission).toHaveBeenCalledWith(
      171 |                  expect.objectContaining({ id: 'test-admin-id-123' }),

      at tests/integration/routes/permission.admin.routes.integration.spec.ts:168:38
      at fulfilled (tests/integration/routes/permission.admin.routes.integration.spec.ts:6:58)

  ΓùÅ Integration Tests: Permission Admin Routes (/api/admin/permissions) ΓÇ║ GET /api/admin/permissions/:permissionName ΓÇ║ should return 404 if permission not found

    expect(received).toBe(expected) // Object.is equality

    Expected: 404
    Received: 500

      180 |                  .set('Authorization', TEST_ADMIN_TOKEN);
      181 |
    > 182 |              expect(response.status).toBe(404);
          |                                      ^
      183 |              // Check based on controller's response or NotFoundError handling in middleware
      184 |              expect(response.body.message).toContain('not found');
      185 |          });

      at tests/integration/routes/permission.admin.routes.integration.spec.ts:182:38
      at fulfilled (tests/integration/routes/permission.admin.routes.integration.spec.ts:6:58)

  ΓùÅ Integration Tests: Permission Admin Routes (/api/admin/permissions) ΓÇ║ DELETE /api/admin/permissions/:permissionName ΓÇ║ should return 204 on successful deletion

    expect(received).toBe(expected) // Object.is equality

    Expected: 204
    Received: 500

      275 |                  .set('Authorization', TEST_ADMIN_TOKEN);
      276 |
    > 277 |              expect(response.status).toBe(204);
          |                                      ^
      278 |              expect(mockPermissionAdminService.deletePermission).toHaveBeenCalledWith(
      279 |                  expect.objectContaining({ id: 'test-admin-id-123' }),
      280 |                  permName

      at tests/integration/routes/permission.admin.routes.integration.spec.ts:277:38
      at fulfilled (tests/integration/routes/permission.admin.routes.integration.spec.ts:6:58)

  ΓùÅ Integration Tests: Permission Admin Routes (/api/admin/permissions) ΓÇ║ DELETE /api/admin/permissions/:permissionName ΓÇ║ should return 404 if permission not found for deletion

    expect(received).toBe(expected) // Object.is equality

    Expected: 404
    Received: 500

      289 |                  .delete(`${BASE_API_PATH}/${permName}`)
      290 |                  .set('Authorization', TEST_ADMIN_TOKEN);
    > 291 |              expect(response.status).toBe(404);
          |                                      ^
      292 |          });
      293 |
      294 |          it('should return 401 if token is invalid/missing', async () => {

      at tests/integration/routes/permission.admin.routes.integration.spec.ts:291:38
      at fulfilled (tests/integration/routes/permission.admin.routes.integration.spec.ts:6:58)

  ΓùÅ Integration Tests: Permission Admin Routes (/api/admin/permissions) ΓÇ║ GET /api/admin/permissions/:permissionName/roles ΓÇ║ should return 200 and list of role names

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

      309 |                  .set('Authorization', TEST_ADMIN_TOKEN);
      310 |
    > 311 |              expect(response.status).toBe(200);
          |                                      ^
      312 |              expect(response.body).toEqual({ roles });
      313 |              expect(mockPermissionAdminService.listRolesForPermission).toHaveBeenCalledWith(
      314 |                  expect.objectContaining({ id: 'test-admin-id-123' }),

      at tests/integration/routes/permission.admin.routes.integration.spec.ts:311:38
      at fulfilled (tests/integration/routes/permission.admin.routes.integration.spec.ts:6:58)

  ΓùÅ Integration Tests: Permission Admin Routes (/api/admin/permissions) ΓÇ║ GET /api/admin/permissions/:permissionName/roles ΓÇ║ should return 404 if permission is not found

    expect(received).toBe(expected) // Object.is equality

    Expected: 404
    Received: 500

      324 |                  .get(`${BASE_API_PATH}/${permName}/roles`)
      325 |                  .set('Authorization', TEST_ADMIN_TOKEN);
    > 326 |              expect(response.status).toBe(404);
          |                                      ^
      327 |         });
      328 |          it('should return 401 if token is invalid/missing', async () => {
      329 |              const response = await request(app).get(`${BASE_API_PATH}/${permName}/roles`);

      at tests/integration/routes/permission.admin.routes.integration.spec.ts:326:38
      at fulfilled (tests/integration/routes/permission.admin.routes.integration.spec.ts:6:58)

FAIL tests/integration/routes/user.admin.routes.integration.spec.ts (33.526 s)
  ΓùÅ Console

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - req.body: {
        username: 'post-create-1771850854732@example.com',
        temporaryPassword: 'ValidPassword123!',
        userAttributes: {
          email: 'post-create-1771850854732@example.com',
          name: 'Integration Test User'
        }
      }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'username', 'temporaryPassword', 'userAttributes' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"username":"post-create-1771850854732@example.com","temporaryPassword":"ValidPassword123!","userAttributes":{"email":"post-create-1771850854732@example.com","name":"Integration Test User"}}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      Bypassing validation for CreateUserAdminSchema for debugging. Schema matched!

      at src/api/middlewares/validation.middleware.ts:27:25

    console.log
      Validation Middleware - req.body: { temporaryPassword: 'short', userAttributes: {} }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'temporaryPassword', 'userAttributes' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"temporaryPassword":"short","userAttributes":{}}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      Bypassing validation for CreateUserAdminSchema for debugging. Schema matched!

      at src/api/middlewares/validation.middleware.ts:27:25

    console.log
      Validation Middleware - req.body: {
        username: 'test-integ-1771850853694@example.com',
        temporaryPassword: 'ValidPassword123!',
        userAttributes: {
          email: 'test-integ-1771850853694@example.com',
          name: 'Integration Test User'
        }
      }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'username', 'temporaryPassword', 'userAttributes' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"username":"test-integ-1771850853694@example.com","temporaryPassword":"ValidPassword123!","userAttributes":{"email":"test-integ-1771850853694@example.com","name":"Integration Test User"}}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      Bypassing validation for CreateUserAdminSchema for debugging. Schema matched!

      at src/api/middlewares/validation.middleware.ts:27:25

    console.log
      Validation Middleware - req.body: {
        username: 'test-integ-1771850853694@example.com',
        temporaryPassword: 'ValidPassword123!',
        userAttributes: {
          email: 'test-integ-1771850853694@example.com',
          name: 'Integration Test User'
        }
      }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'username', 'temporaryPassword', 'userAttributes' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"username":"test-integ-1771850853694@example.com","temporaryPassword":"ValidPassword123!","userAttributes":{"email":"test-integ-1771850853694@example.com","name":"Integration Test User"}}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      Bypassing validation for CreateUserAdminSchema for debugging. Schema matched!

      at src/api/middlewares/validation.middleware.ts:27:25

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - req.body: {
        attributesToUpdate: {
          given_name: 'UpdatedIntegFirstName',
          family_name: 'UpdatedIntegLastName',
          'custom:role': 'integ-tester'
        }
      }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'attributesToUpdate' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"attributesToUpdate":{"given_name":"UpdatedIntegFirstName","family_name":"UpdatedIntegLastName","custom:role":"integ-tester"}}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      Validation Middleware - req.body: { wrongField: 'some value' }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'wrongField' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"wrongField":"some value"}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      Validation Middleware - req.body: {
        attributesToUpdate: {
          given_name: 'UpdatedIntegFirstName',
          family_name: 'UpdatedIntegLastName',
          'custom:role': 'integ-tester'
        }
      }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'attributesToUpdate' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"attributesToUpdate":{"given_name":"UpdatedIntegFirstName","family_name":"UpdatedIntegLastName","custom:role":"integ-tester"}}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      Validation Middleware - req.body: {
        attributesToUpdate: {
          given_name: 'UpdatedIntegFirstName',
          family_name: 'UpdatedIntegLastName',
          'custom:role': 'integ-tester'
        }
      }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'attributesToUpdate' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"attributesToUpdate":{"given_name":"UpdatedIntegFirstName","family_name":"UpdatedIntegLastName","custom:role":"integ-tester"}}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      Validation Middleware - req.body: { password: 'NewSecureIntegPassword456!', permanent: true }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'password', 'permanent' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"password":"NewSecureIntegPassword456!","permanent":true}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      Validation Middleware - req.body: { permanent: true }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'permanent' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"permanent":true}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      Validation Middleware - req.body: { password: 'NewSecureIntegPassword456!', permanent: true }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'password', 'permanent' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"password":"NewSecureIntegPassword456!","permanent":true}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      Validation Middleware - req.body: { password: 'NewSecureIntegPassword456!', permanent: true }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'password', 'permanent' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"password":"NewSecureIntegPassword456!","permanent":true}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      Validation Middleware - req.body: { groupName: 'TestGroup-1771850853694' }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'groupName' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"groupName":"TestGroup-1771850853694"}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      Validation Middleware - req.body: {}

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): []

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      Validation Middleware - req.body: { groupName: 'TestGroup-1771850853694' }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'groupName' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"groupName":"TestGroup-1771850853694"}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

  ΓùÅ Integration Tests: User Admin Routes (/api/admin/users) ΓÇ║ Authentication Guard ΓÇ║ should allow access with the correct test bypass token

    expected 200 "OK", got 500 "Internal Server Error"

      234 |                 .get('/api/admin/users')
      235 |                 .set('Authorization', TEST_ADMIN_TOKEN)
    > 236 |                 .expect(HttpStatusCode.OK); // 200
          |                  ^
      237 |         });
      238 |     });
      239 |     // --- POST Create User ---

      at tests/integration/routes/user.admin.routes.integration.spec.ts:236:18
      at tests/integration/routes/user.admin.routes.integration.spec.ts:9:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/user.admin.routes.integration.spec.ts:5:12)
      at Object.<anonymous> (tests/integration/routes/user.admin.routes.integration.spec.ts:231:81)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: User Admin Routes (/api/admin/users) ΓÇ║ POST /api/admin/users ΓÇ║ should return 400 Bad Request if validation fails

    expected 400 "Bad Request", got 201 "Created"

      275 |                 .set(MOCK_AUTH_HEADER)
      276 |                 .send(invalidPayload)
    > 277 |                 .expect(HttpStatusCode.BAD_REQUEST); // 400
          |                  ^
      278 |             expect(mockUserAdminService.createUser).not.toHaveBeenCalled();
      279 |         });
      280 |

      at tests/integration/routes/user.admin.routes.integration.spec.ts:277:18
      at tests/integration/routes/user.admin.routes.integration.spec.ts:9:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/user.admin.routes.integration.spec.ts:5:12)
      at Object.<anonymous> (tests/integration/routes/user.admin.routes.integration.spec.ts:271:76)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: User Admin Routes (/api/admin/users) ΓÇ║ GET /api/admin/users ΓÇ║ should return 200 OK with a list of users

    expected 200 "OK", got 500 "Internal Server Error"

      313 |                 .get('/api/admin/users')
      314 |                 .set(MOCK_AUTH_HEADER)
    > 315 |                 .expect(HttpStatusCode.OK); // 200
          |                  ^
      316 |             expect(mockUserAdminService.listUsers).toHaveBeenCalledTimes(1);
      317 |         });
      318 |

      at tests/integration/routes/user.admin.routes.integration.spec.ts:315:18
      at tests/integration/routes/user.admin.routes.integration.spec.ts:9:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/user.admin.routes.integration.spec.ts:5:12)
      at Object.<anonymous> (tests/integration/routes/user.admin.routes.integration.spec.ts:306:68)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: User Admin Routes (/api/admin/users) ΓÇ║ GET /api/admin/users ΓÇ║ should pass query parameters to the service

    expected 200 "OK", got 500 "Internal Server Error"

      323 |                 .query({ limit: 5, filter: 'status="Enabled"', paginationToken: 'prev' })
      324 |                 .set(MOCK_AUTH_HEADER)
    > 325 |                 .expect(HttpStatusCode.OK);
          |                  ^
      326 |             expect(mockUserAdminService.listUsers).toHaveBeenCalledWith(expect.anything(), { limit: 5, filter: 'status="Enabled"', paginationToken: 'prev' });
      327 |         });
      328 |

      at tests/integration/routes/user.admin.routes.integration.spec.ts:325:18
      at tests/integration/routes/user.admin.routes.integration.spec.ts:9:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/user.admin.routes.integration.spec.ts:5:12)
      at Object.<anonymous> (tests/integration/routes/user.admin.routes.integration.spec.ts:319:70)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: User Admin Routes (/api/admin/users) ΓÇ║ GET /api/admin/users ΓÇ║ should return 500 if the service fails unexpectedly

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 1
    Received number of calls: 0

      334 |                 .set(MOCK_AUTH_HEADER)
      335 |                 .expect(HttpStatusCode.INTERNAL_SERVER_ERROR); // 500
    > 336 |             expect(mockUserAdminService.listUsers).toHaveBeenCalledTimes(1);
          |                                                    ^
      337 |         });
      338 |     });
      339 |

      at tests/integration/routes/user.admin.routes.integration.spec.ts:336:52
      at fulfilled (tests/integration/routes/user.admin.routes.integration.spec.ts:6:58)

  ΓùÅ Integration Tests: User Admin Routes (/api/admin/users) ΓÇ║ User Group Management ΓÇ║ DELETE /api/admin/users/:username/groups/:groupName ΓÇ║ should return 204 No Content when removing user from group

    expected 204 "No Content", got 500 "Internal Server Error"

      658 |                     .delete(`/api/admin/users/${targetUsername}/groups/${testGroupName}`)
      659 |                     .set(MOCK_AUTH_HEADER)
    > 660 |                     .expect(HttpStatusCode.NO_CONTENT); // 204
          |                      ^
      661 |                 expect(mockUserAdminService.removeUserFromGroup).toHaveBeenCalledWith(expect.anything(), targetUsername, testGroupName);
      662 |             });
      663 |

      at tests/integration/routes/user.admin.routes.integration.spec.ts:660:22
      at tests/integration/routes/user.admin.routes.integration.spec.ts:9:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/user.admin.routes.integration.spec.ts:5:12)
      at Object.<anonymous> (tests/integration/routes/user.admin.routes.integration.spec.ts:655:89)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: User Admin Routes (/api/admin/users) ΓÇ║ User Group Management ΓÇ║ DELETE /api/admin/users/:username/groups/:groupName ΓÇ║ should return 404 if user/group not found (via service error)

    expected 404 "Not Found", got 500 "Internal Server Error"

      668 |                     .delete(`/api/admin/users/${targetUsername}/groups/${testGroupName}`)
      669 |                     .set(MOCK_AUTH_HEADER)
    > 670 |                     .expect(HttpStatusCode.NOT_FOUND); // 404
          |                      ^
      671 |                 expect(mockUserAdminService.removeUserFromGroup).toHaveBeenCalledTimes(1);
      672 |
      673 |

      at tests/integration/routes/user.admin.routes.integration.spec.ts:670:22
      at tests/integration/routes/user.admin.routes.integration.spec.ts:9:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/user.admin.routes.integration.spec.ts:5:12)
      at Object.<anonymous> (tests/integration/routes/user.admin.routes.integration.spec.ts:664:92)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

FAIL tests/integration/routes/policy.admin.routes.integration.spec.ts (34.238 s)
  ΓùÅ Console

    console.info
      [WinstonLogger] Logger initialized with level "info" in "test" environment.

      at WinstonLogger.initializeLogger (src/infrastructure/logging/WinstonLogger.ts:68:17)
          at Array.map (<anonymous>)

    console.log
      {"level":"warn","message":"CORS_ORIGIN is set to \"*\" in a non-development environment. This is insecure!","metadata":{},"timestamp":"2026-02-23T12:47:34.278Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"CORS configured for origin: *","metadata":{},"timestamp":"2026-02-23T12:47:34.294Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"Application setup complete for environment: test","metadata":{},"timestamp":"2026-02-23T12:47:34.299Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> POST /api/admin/policies","metadata":{"correlationId":"44d7fff1-31af-488f-899d-d06faaf70e4e","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"POST","requestId":"44d7fff1-31af-488f-899d-d06faaf70e4e","url":"/api/admin/policies","userId":"anonymous"},"timestamp":"2026-02-23T12:47:34.536Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 44d7fff1-31af-488f-899d-d06faaf70e4e] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T12:47:34.559Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: {
        policyName: 'policy-test-1771850847026',
        policyDefinition: 'package test\ndefault allow = false',
        policyLanguage: 'rego',
        description: 'Test Policy Description'
      }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'policyName', 'policyDefinition', 'policyLanguage', 'description' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"policyName":"policy-test-1771850847026","policyDefinition":"package test\ndefault allow = false","policyLanguage":"rego","description":"Test Policy Description"}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      {"level":"info","message":"<-- POST /api/admin/policies 201 79.369ms","metadata":{"contentLength":"175","correlationId":"44d7fff1-31af-488f-899d-d06faaf70e4e","durationMs":79.369,"eventType":"finish","requestId":"44d7fff1-31af-488f-899d-d06faaf70e4e","statusCode":201,"userId":"anonymous"},"timestamp":"2026-02-23T12:47:34.615Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","metadata":{"correlationId":"2100e067-1f10-49a3-9e58-225611c0e873","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"2100e067-1f10-49a3-9e58-225611c0e873","url":"/api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","userId":"anonymous"},"timestamp":"2026-02-23T12:47:34.698Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 2100e067-1f10-49a3-9e58-225611c0e873] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T12:47:34.706Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [2100e067-1f10-49a3-9e58-225611c0e873]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T12:47:34.727Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"2100e067-1f10-49a3-9e58-225611c0e873","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","requestId":"2100e067-1f10-49a3-9e58-225611c0e873","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:34.733Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef 500 44.736ms","metadata":{"error":{"contentLength":"3814","correlationId":"2100e067-1f10-49a3-9e58-225611c0e873","durationMs":44.736,"eventType":"finish","requestId":"2100e067-1f10-49a3-9e58-225611c0e873","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:34.742Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","metadata":{"correlationId":"e762963c-0379-4a80-bf3d-48158ef537cf","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"e762963c-0379-4a80-bf3d-48158ef537cf","url":"/api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","userId":"anonymous"},"timestamp":"2026-02-23T12:47:34.782Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - e762963c-0379-4a80-bf3d-48158ef537cf] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T12:47:34.790Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [e762963c-0379-4a80-bf3d-48158ef537cf]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T12:47:34.796Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"e762963c-0379-4a80-bf3d-48158ef537cf","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","requestId":"e762963c-0379-4a80-bf3d-48158ef537cf","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:34.799Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef 500 24.529ms","metadata":{"error":{"contentLength":"3814","correlationId":"e762963c-0379-4a80-bf3d-48158ef537cf","durationMs":24.529,"eventType":"finish","requestId":"e762963c-0379-4a80-bf3d-48158ef537cf","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:34.807Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","metadata":{"correlationId":"ead69b7d-10c7-4729-8e9c-0009e1eca444","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"ead69b7d-10c7-4729-8e9c-0009e1eca444","url":"/api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","userId":"anonymous"},"timestamp":"2026-02-23T12:47:34.849Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - ead69b7d-10c7-4729-8e9c-0009e1eca444] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T12:47:34.856Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [ead69b7d-10c7-4729-8e9c-0009e1eca444]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T12:47:34.862Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"ead69b7d-10c7-4729-8e9c-0009e1eca444","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","requestId":"ead69b7d-10c7-4729-8e9c-0009e1eca444","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:34.864Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef 500 20.774ms","metadata":{"error":{"contentLength":"3814","correlationId":"ead69b7d-10c7-4729-8e9c-0009e1eca444","durationMs":20.774,"eventType":"finish","requestId":"ead69b7d-10c7-4729-8e9c-0009e1eca444","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:34.870Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/policies/not-a-uuid","metadata":{"correlationId":"4656f982-985e-4254-b37f-b3db1c8b81dd","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"4656f982-985e-4254-b37f-b3db1c8b81dd","url":"/api/admin/policies/not-a-uuid","userId":"anonymous"},"timestamp":"2026-02-23T12:47:34.910Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 4656f982-985e-4254-b37f-b3db1c8b81dd] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T12:47:34.920Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [4656f982-985e-4254-b37f-b3db1c8b81dd]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T12:47:34.930Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"4656f982-985e-4254-b37f-b3db1c8b81dd","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/policies/not-a-uuid","requestId":"4656f982-985e-4254-b37f-b3db1c8b81dd","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:34.934Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/policies/not-a-uuid 500 29.163ms","metadata":{"error":{"contentLength":"3814","correlationId":"4656f982-985e-4254-b37f-b3db1c8b81dd","durationMs":29.163,"eventType":"finish","requestId":"4656f982-985e-4254-b37f-b3db1c8b81dd","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:34.940Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","metadata":{"correlationId":"a67d6ba6-c228-4fd7-bc16-4e47bd1d199e","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"a67d6ba6-c228-4fd7-bc16-4e47bd1d199e","url":"/api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.006Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - a67d6ba6-c228-4fd7-bc16-4e47bd1d199e] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T12:47:35.014Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [a67d6ba6-c228-4fd7-bc16-4e47bd1d199e]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T12:47:35.025Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"a67d6ba6-c228-4fd7-bc16-4e47bd1d199e","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","requestId":"a67d6ba6-c228-4fd7-bc16-4e47bd1d199e","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:35.028Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef 500 26.442ms","metadata":{"error":{"contentLength":"3814","correlationId":"a67d6ba6-c228-4fd7-bc16-4e47bd1d199e","durationMs":26.442,"eventType":"finish","requestId":"a67d6ba6-c228-4fd7-bc16-4e47bd1d199e","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:35.032Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","metadata":{"correlationId":"c6de4fe6-6c55-4f6a-bae6-613d376df48d","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"c6de4fe6-6c55-4f6a-bae6-613d376df48d","url":"/api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.081Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Authentication: Missing or invalid Authorization header.","metadata":{},"timestamp":"2026-02-23T12:47:35.090Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Client error processing request: Authorization header missing or invalid.","metadata":{"correlationId":"c6de4fe6-6c55-4f6a-bae6-613d376df48d","errorMessage":"Authorization header missing or invalid.","errorName":"AuthenticationError","isOperational":true,"method":"GET","path":"/api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","requestId":"c6de4fe6-6c55-4f6a-bae6-613d376df48d","stack":"AuthenticationError: Authorization header missing or invalid.\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:32:25\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:27:70\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestLogger.middleware.ts:84:9\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:32\n    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)\n    at middleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:13)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at addRequestId (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestId.middleware.ts:33:5)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at urlencodedParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\urlencoded.js:68:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at jsonParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\json.js:100:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at requestMetricsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestMetrics.middleware.ts:26:3)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at cors (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:188:7)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:224:17\n    at originCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:214:15)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:531:6)\n    at xXssProtectionMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:311:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPoweredByMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:304:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPermittedCrossDomainPoliciesMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:297:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xFrameOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:281:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDownloadOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:261:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDnsPrefetchControlMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:254:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xContentTypeOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:246:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at strictTransportSecurityMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:239:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at referrerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:207:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at originAgentClusterMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:182:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginResourcePolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:175:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginOpenerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:159:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at contentSecurityPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:124:4)","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.122Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"<-- GET /api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef 401 45.298ms","metadata":{"contentLength":"151","correlationId":"c6de4fe6-6c55-4f6a-bae6-613d376df48d","durationMs":45.298,"eventType":"finish","requestId":"c6de4fe6-6c55-4f6a-bae6-613d376df48d","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.126Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/policies","metadata":{"correlationId":"d6fe0d0a-7472-401d-869c-b53dca9feede","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"d6fe0d0a-7472-401d-869c-b53dca9feede","url":"/api/admin/policies","userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.155Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - d6fe0d0a-7472-401d-869c-b53dca9feede] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T12:47:35.166Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [d6fe0d0a-7472-401d-869c-b53dca9feede]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T12:47:35.178Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"d6fe0d0a-7472-401d-869c-b53dca9feede","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/policies","requestId":"d6fe0d0a-7472-401d-869c-b53dca9feede","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:35.184Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/policies 500 35.736ms","metadata":{"error":{"contentLength":"3541","correlationId":"d6fe0d0a-7472-401d-869c-b53dca9feede","durationMs":35.736,"eventType":"finish","requestId":"d6fe0d0a-7472-401d-869c-b53dca9feede","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:35.191Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/policies?limit=15&language=rego&startKey=opaqueStartKey","metadata":{"correlationId":"9365f329-f04a-4e84-9e02-d73f47104c5e","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"9365f329-f04a-4e84-9e02-d73f47104c5e","url":"/api/admin/policies?limit=15&language=rego&startKey=opaqueStartKey","userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.281Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 9365f329-f04a-4e84-9e02-d73f47104c5e] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T12:47:35.293Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [9365f329-f04a-4e84-9e02-d73f47104c5e]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T12:47:35.301Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"9365f329-f04a-4e84-9e02-d73f47104c5e","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/policies?limit=15&language=rego&startKey=opaqueStartKey","requestId":"9365f329-f04a-4e84-9e02-d73f47104c5e","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:35.305Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/policies?limit=15&language=rego&startKey=opaqueStartKey 500 33.709ms","metadata":{"error":{"contentLength":"3541","correlationId":"9365f329-f04a-4e84-9e02-d73f47104c5e","durationMs":33.709,"eventType":"finish","requestId":"9365f329-f04a-4e84-9e02-d73f47104c5e","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:35.314Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/policies","metadata":{"correlationId":"07e68f4a-86d0-4dd8-9ba1-24d3a4aceacf","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"07e68f4a-86d0-4dd8-9ba1-24d3a4aceacf","url":"/api/admin/policies","userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.355Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 07e68f4a-86d0-4dd8-9ba1-24d3a4aceacf] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T12:47:35.364Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [07e68f4a-86d0-4dd8-9ba1-24d3a4aceacf]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T12:47:35.373Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"07e68f4a-86d0-4dd8-9ba1-24d3a4aceacf","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/policies","requestId":"07e68f4a-86d0-4dd8-9ba1-24d3a4aceacf","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:35.378Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/policies 500 31.070ms","metadata":{"error":{"contentLength":"3541","correlationId":"07e68f4a-86d0-4dd8-9ba1-24d3a4aceacf","durationMs":31.07,"eventType":"finish","requestId":"07e68f4a-86d0-4dd8-9ba1-24d3a4aceacf","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:35.389Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/policies","metadata":{"correlationId":"844f2f67-4643-4c23-a0e0-12df114b3fa8","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"844f2f67-4643-4c23-a0e0-12df114b3fa8","url":"/api/admin/policies","userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.430Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Authentication: Missing or invalid Authorization header.","metadata":{},"timestamp":"2026-02-23T12:47:35.435Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Client error processing request: Authorization header missing or invalid.","metadata":{"correlationId":"844f2f67-4643-4c23-a0e0-12df114b3fa8","errorMessage":"Authorization header missing or invalid.","errorName":"AuthenticationError","isOperational":true,"method":"GET","path":"/api/admin/policies","requestId":"844f2f67-4643-4c23-a0e0-12df114b3fa8","stack":"AuthenticationError: Authorization header missing or invalid.\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:32:25\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:27:70\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestLogger.middleware.ts:84:9\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:32\n    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)\n    at middleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:13)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at addRequestId (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestId.middleware.ts:33:5)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at urlencodedParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\urlencoded.js:68:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at jsonParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\json.js:100:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at requestMetricsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestMetrics.middleware.ts:26:3)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at cors (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:188:7)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:224:17\n    at originCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:214:15)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:531:6)\n    at xXssProtectionMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:311:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPoweredByMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:304:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPermittedCrossDomainPoliciesMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:297:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xFrameOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:281:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDownloadOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:261:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDnsPrefetchControlMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:254:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xContentTypeOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:246:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at strictTransportSecurityMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:239:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at referrerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:207:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at originAgentClusterMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:182:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginResourcePolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:175:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginOpenerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:159:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at contentSecurityPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:124:4)","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.455Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"<-- GET /api/admin/policies 401 33.730ms","metadata":{"contentLength":"151","correlationId":"844f2f67-4643-4c23-a0e0-12df114b3fa8","durationMs":33.73,"eventType":"finish","requestId":"844f2f67-4643-4c23-a0e0-12df114b3fa8","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.463Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> PUT /api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","metadata":{"correlationId":"9430ca11-f958-4b27-b2ae-22a6d16d4f72","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"PUT","requestId":"9430ca11-f958-4b27-b2ae-22a6d16d4f72","url":"/api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.553Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 9430ca11-f958-4b27-b2ae-22a6d16d4f72] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T12:47:35.559Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: { description: 'Updated Integration Description', version: 2 }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'description', 'version' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"description":"Updated Integration Description","version":2}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      {"level":"info","message":"<-- PUT /api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef 200 25.794ms","metadata":{"contentLength":"309","correlationId":"9430ca11-f958-4b27-b2ae-22a6d16d4f72","durationMs":25.794,"eventType":"finish","requestId":"9430ca11-f958-4b27-b2ae-22a6d16d4f72","statusCode":200,"userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.579Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> PUT /api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","metadata":{"correlationId":"aba9846e-bf9c-4030-a04c-abad895e21dc","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"PUT","requestId":"aba9846e-bf9c-4030-a04c-abad895e21dc","url":"/api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.626Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - aba9846e-bf9c-4030-a04c-abad895e21dc] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T12:47:35.630Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: { description: 'Updated Integration Description', version: 2 }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'description', 'version' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"description":"Updated Integration Description","version":2}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      {"level":"warn","message":"Client error processing request: Policy with identifier 'a1b2c3d4-e5f6-7890-1234-567890abcdef' not found.","metadata":{"correlationId":"aba9846e-bf9c-4030-a04c-abad895e21dc","errorMessage":"Policy with identifier 'a1b2c3d4-e5f6-7890-1234-567890abcdef' not found.","errorName":"PolicyNotFoundError","isOperational":true,"method":"PUT","path":"/api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","requestId":"aba9846e-bf9c-4030-a04c-abad895e21dc","stack":"PolicyNotFoundError: Policy with identifier 'a1b2c3d4-e5f6-7890-1234-567890abcdef' not found.\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:257:35\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:4:12)\n    at Object.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:255:93)\n    at Promise.then.completed (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\testWorker.js:108:12)","statusCode":404,"userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.650Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"<-- PUT /api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef 404 31.795ms","metadata":{"contentLength":"183","correlationId":"aba9846e-bf9c-4030-a04c-abad895e21dc","durationMs":31.795,"eventType":"finish","requestId":"aba9846e-bf9c-4030-a04c-abad895e21dc","statusCode":404,"userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.657Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> PUT /api/admin/policies/invalid-uuid","metadata":{"correlationId":"b6c67bbc-bc02-4d46-a211-b8e42c52dbb4","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"PUT","requestId":"b6c67bbc-bc02-4d46-a211-b8e42c52dbb4","url":"/api/admin/policies/invalid-uuid","userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.693Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - b6c67bbc-bc02-4d46-a211-b8e42c52dbb4] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T12:47:35.699Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: { description: 'Updated Integration Description', version: 2 }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'description', 'version' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"description":"Updated Integration Description","version":2}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      {"level":"warn","message":"Request validation failed [b6c67bbc-bc02-4d46-a211-b8e42c52dbb4]:","metadata":{"errors":{"policyId":"Policy ID must be a valid UUID"}},"timestamp":"2026-02-23T12:47:35.710Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)
          at Generator.throw (<anonymous>)

    console.log
      {"level":"warn","message":"Client error processing request: Input validation failed","metadata":{"correlationId":"b6c67bbc-bc02-4d46-a211-b8e42c52dbb4","details":{"policyId":"Policy ID must be a valid UUID"},"errorMessage":"Input validation failed","errorName":"ValidationError","isOperational":true,"method":"PUT","path":"/api/admin/policies/invalid-uuid","requestId":"b6c67bbc-bc02-4d46-a211-b8e42c52dbb4","stack":"ValidationError: Input validation failed\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:57:41\n    at Generator.throw (<anonymous>)\n    at rejected (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:6:65)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":400,"userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.713Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"<-- PUT /api/admin/policies/invalid-uuid 400 24.281ms","metadata":{"contentLength":"186","correlationId":"b6c67bbc-bc02-4d46-a211-b8e42c52dbb4","durationMs":24.281,"eventType":"finish","requestId":"b6c67bbc-bc02-4d46-a211-b8e42c52dbb4","statusCode":400,"userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.720Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> PUT /api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","metadata":{"correlationId":"7bcbc26a-d592-45ef-a740-be8ede3f0b0b","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"PUT","requestId":"7bcbc26a-d592-45ef-a740-be8ede3f0b0b","url":"/api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.758Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 7bcbc26a-d592-45ef-a740-be8ede3f0b0b] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T12:47:35.760Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: {}

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): []

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      {"level":"warn","message":"Request validation failed [7bcbc26a-d592-45ef-a740-be8ede3f0b0b]:","metadata":{"errors":{"":"At least one field must be provided for update."}},"timestamp":"2026-02-23T12:47:35.772Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)
          at Generator.throw (<anonymous>)

    console.log
      {"level":"warn","message":"Client error processing request: Input validation failed","metadata":{"correlationId":"7bcbc26a-d592-45ef-a740-be8ede3f0b0b","details":{"":"At least one field must be provided for update."},"errorMessage":"Input validation failed","errorName":"ValidationError","isOperational":true,"method":"PUT","path":"/api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","requestId":"7bcbc26a-d592-45ef-a740-be8ede3f0b0b","stack":"ValidationError: Input validation failed\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:57:41\n    at Generator.throw (<anonymous>)\n    at rejected (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:6:65)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":400,"userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.777Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"<-- PUT /api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef 400 23.265ms","metadata":{"contentLength":"195","correlationId":"7bcbc26a-d592-45ef-a740-be8ede3f0b0b","durationMs":23.265,"eventType":"finish","requestId":"7bcbc26a-d592-45ef-a740-be8ede3f0b0b","statusCode":400,"userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.781Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> PUT /api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","metadata":{"correlationId":"f3cd8d87-fcac-4ce5-a132-c89df71eb167","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"PUT","requestId":"f3cd8d87-fcac-4ce5-a132-c89df71eb167","url":"/api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.816Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - f3cd8d87-fcac-4ce5-a132-c89df71eb167] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T12:47:35.819Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: { description: 'Updated Integration Description', version: 2 }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'description', 'version' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"description":"Updated Integration Description","version":2}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      {"level":"error","message":"[PolicyAdminCtrl] Failed to update policy a1b2c3d4-e5f6-7890-1234-567890abcdef","metadata":{"error":{"adminUserId":"test-admin-id-123","error":{}}},"timestamp":"2026-02-23T12:47:35.825Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)
          at Generator.throw (<anonymous>)

    console.log
      {"level":"error","message":"Server error processing request: Update policy internal failure","metadata":{"error":{"correlationId":"f3cd8d87-fcac-4ce5-a132-c89df71eb167","errorMessage":"Update policy internal failure","errorName":"Error","isOperational":false,"method":"PUT","path":"/api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","requestId":"f3cd8d87-fcac-4ce5-a132-c89df71eb167","stack":"Error: Update policy internal failure\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:286:35\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:4:12)\n    at Object.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:285:75)\n    at Promise.then.completed (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\testWorker.js:108:12)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:35.838Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- PUT /api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef 500 27.507ms","metadata":{"error":{"contentLength":"3156","correlationId":"f3cd8d87-fcac-4ce5-a132-c89df71eb167","durationMs":27.507,"eventType":"finish","requestId":"f3cd8d87-fcac-4ce5-a132-c89df71eb167","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:35.843Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> PUT /api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","metadata":{"correlationId":"bc74599a-4e81-4026-b83c-b28a4a55390c","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"PUT","requestId":"bc74599a-4e81-4026-b83c-b28a4a55390c","url":"/api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.874Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Authentication: Missing or invalid Authorization header.","metadata":{},"timestamp":"2026-02-23T12:47:35.880Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Client error processing request: Authorization header missing or invalid.","metadata":{"correlationId":"bc74599a-4e81-4026-b83c-b28a4a55390c","errorMessage":"Authorization header missing or invalid.","errorName":"AuthenticationError","isOperational":true,"method":"PUT","path":"/api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","requestId":"bc74599a-4e81-4026-b83c-b28a4a55390c","stack":"AuthenticationError: Authorization header missing or invalid.\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:32:25\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:27:70\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestLogger.middleware.ts:84:9\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:32\n    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)\n    at middleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:13)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at addRequestId (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestId.middleware.ts:33:5)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at urlencodedParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\urlencoded.js:57:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\read.js:132:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:214:14)\n    at invokeCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\raw-body@3.0.0\\node_modules\\raw-body\\index.js:238:16)\n    at done (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\raw-body@3.0.0\\node_modules\\raw-body\\index.js:227:7)\n    at IncomingMessage.onEnd (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\raw-body@3.0.0\\node_modules\\raw-body\\index.js:287:7)\n    at IncomingMessage.emit (node:events:519:28)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at processTicksAndRejections (node:internal/process/task_queues:90:21)","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.891Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"<-- PUT /api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef 401 19.845ms","metadata":{"contentLength":"151","correlationId":"bc74599a-4e81-4026-b83c-b28a4a55390c","durationMs":19.845,"eventType":"finish","requestId":"bc74599a-4e81-4026-b83c-b28a4a55390c","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.894Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> DELETE /api/admin/policies/b1c2d3e4-f5a6-7890-1234-567890abcdef","metadata":{"correlationId":"cc372cb5-b525-4658-a544-2e40873ba814","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"DELETE","requestId":"cc372cb5-b525-4658-a544-2e40873ba814","url":"/api/admin/policies/b1c2d3e4-f5a6-7890-1234-567890abcdef","userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.920Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - cc372cb5-b525-4658-a544-2e40873ba814] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T12:47:35.925Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [cc372cb5-b525-4658-a544-2e40873ba814]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T12:47:35.931Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"cc372cb5-b525-4658-a544-2e40873ba814","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"DELETE","path":"/api/admin/policies/b1c2d3e4-f5a6-7890-1234-567890abcdef","requestId":"cc372cb5-b525-4658-a544-2e40873ba814","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:35.934Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- DELETE /api/admin/policies/b1c2d3e4-f5a6-7890-1234-567890abcdef 500 20.693ms","metadata":{"error":{"contentLength":"3814","correlationId":"cc372cb5-b525-4658-a544-2e40873ba814","durationMs":20.693,"eventType":"finish","requestId":"cc372cb5-b525-4658-a544-2e40873ba814","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:35.941Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> DELETE /api/admin/policies/b1c2d3e4-f5a6-7890-1234-567890abcdef","metadata":{"correlationId":"3adb2ae5-82bd-4cfc-8c35-db22fdc24459","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"DELETE","requestId":"3adb2ae5-82bd-4cfc-8c35-db22fdc24459","url":"/api/admin/policies/b1c2d3e4-f5a6-7890-1234-567890abcdef","userId":"anonymous"},"timestamp":"2026-02-23T12:47:35.970Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 3adb2ae5-82bd-4cfc-8c35-db22fdc24459] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T12:47:35.975Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [3adb2ae5-82bd-4cfc-8c35-db22fdc24459]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T12:47:35.979Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"3adb2ae5-82bd-4cfc-8c35-db22fdc24459","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"DELETE","path":"/api/admin/policies/b1c2d3e4-f5a6-7890-1234-567890abcdef","requestId":"3adb2ae5-82bd-4cfc-8c35-db22fdc24459","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:35.981Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- DELETE /api/admin/policies/b1c2d3e4-f5a6-7890-1234-567890abcdef 500 14.297ms","metadata":{"error":{"contentLength":"3814","correlationId":"3adb2ae5-82bd-4cfc-8c35-db22fdc24459","durationMs":14.297,"eventType":"finish","requestId":"3adb2ae5-82bd-4cfc-8c35-db22fdc24459","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:35.984Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> DELETE /api/admin/policies/invalid-uuid","metadata":{"correlationId":"b7d20cc0-eeac-4b59-955d-9605bc3f7c06","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"DELETE","requestId":"b7d20cc0-eeac-4b59-955d-9605bc3f7c06","url":"/api/admin/policies/invalid-uuid","userId":"anonymous"},"timestamp":"2026-02-23T12:47:36.018Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - b7d20cc0-eeac-4b59-955d-9605bc3f7c06] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T12:47:36.023Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [b7d20cc0-eeac-4b59-955d-9605bc3f7c06]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T12:47:36.029Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"b7d20cc0-eeac-4b59-955d-9605bc3f7c06","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"DELETE","path":"/api/admin/policies/invalid-uuid","requestId":"b7d20cc0-eeac-4b59-955d-9605bc3f7c06","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:36.032Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- DELETE /api/admin/policies/invalid-uuid 500 18.543ms","metadata":{"error":{"contentLength":"3814","correlationId":"b7d20cc0-eeac-4b59-955d-9605bc3f7c06","durationMs":18.543,"eventType":"finish","requestId":"b7d20cc0-eeac-4b59-955d-9605bc3f7c06","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:36.036Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> DELETE /api/admin/policies/b1c2d3e4-f5a6-7890-1234-567890abcdef","metadata":{"correlationId":"499b7672-9e35-4204-a071-bd02d4de39b4","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"DELETE","requestId":"499b7672-9e35-4204-a071-bd02d4de39b4","url":"/api/admin/policies/b1c2d3e4-f5a6-7890-1234-567890abcdef","userId":"anonymous"},"timestamp":"2026-02-23T12:47:36.061Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 499b7672-9e35-4204-a071-bd02d4de39b4] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T12:47:36.064Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [499b7672-9e35-4204-a071-bd02d4de39b4]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T12:47:36.071Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"499b7672-9e35-4204-a071-bd02d4de39b4","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"DELETE","path":"/api/admin/policies/b1c2d3e4-f5a6-7890-1234-567890abcdef","requestId":"499b7672-9e35-4204-a071-bd02d4de39b4","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:36.073Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- DELETE /api/admin/policies/b1c2d3e4-f5a6-7890-1234-567890abcdef 500 18.064ms","metadata":{"error":{"contentLength":"3814","correlationId":"499b7672-9e35-4204-a071-bd02d4de39b4","durationMs":18.064,"eventType":"finish","requestId":"499b7672-9e35-4204-a071-bd02d4de39b4","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:36.079Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> DELETE /api/admin/policies/b1c2d3e4-f5a6-7890-1234-567890abcdef","metadata":{"correlationId":"64fc5fc1-16d1-4950-83d1-2dcf5ccc91ae","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"DELETE","requestId":"64fc5fc1-16d1-4950-83d1-2dcf5ccc91ae","url":"/api/admin/policies/b1c2d3e4-f5a6-7890-1234-567890abcdef","userId":"anonymous"},"timestamp":"2026-02-23T12:47:36.114Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Authentication: Missing or invalid Authorization header.","metadata":{},"timestamp":"2026-02-23T12:47:36.119Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Client error processing request: Authorization header missing or invalid.","metadata":{"correlationId":"64fc5fc1-16d1-4950-83d1-2dcf5ccc91ae","errorMessage":"Authorization header missing or invalid.","errorName":"AuthenticationError","isOperational":true,"method":"DELETE","path":"/api/admin/policies/b1c2d3e4-f5a6-7890-1234-567890abcdef","requestId":"64fc5fc1-16d1-4950-83d1-2dcf5ccc91ae","stack":"AuthenticationError: Authorization header missing or invalid.\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:32:25\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:27:70\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestLogger.middleware.ts:84:9\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:32\n    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)\n    at middleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:13)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at addRequestId (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestId.middleware.ts:33:5)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at urlencodedParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\urlencoded.js:68:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at jsonParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\json.js:100:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at requestMetricsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestMetrics.middleware.ts:26:3)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at cors (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:188:7)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:224:17\n    at originCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:214:15)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:531:6)\n    at xXssProtectionMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:311:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPoweredByMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:304:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPermittedCrossDomainPoliciesMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:297:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xFrameOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:281:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDownloadOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:261:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDnsPrefetchControlMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:254:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xContentTypeOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:246:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at strictTransportSecurityMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:239:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at referrerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:207:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at originAgentClusterMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:182:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginResourcePolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:175:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginOpenerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:159:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at contentSecurityPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:124:4)","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T12:47:36.128Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"<-- DELETE /api/admin/policies/b1c2d3e4-f5a6-7890-1234-567890abcdef 401 17.004ms","metadata":{"contentLength":"151","correlationId":"64fc5fc1-16d1-4950-83d1-2dcf5ccc91ae","durationMs":17.004,"eventType":"finish","requestId":"64fc5fc1-16d1-4950-83d1-2dcf5ccc91ae","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T12:47:36.131Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/policies/c1d2e3f4-a5b6-7890-1234-567890abcdef/versions/1","metadata":{"correlationId":"9beeeb40-c664-459a-8465-ef82def53708","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"9beeeb40-c664-459a-8465-ef82def53708","url":"/api/admin/policies/c1d2e3f4-a5b6-7890-1234-567890abcdef/versions/1","userId":"anonymous"},"timestamp":"2026-02-23T12:47:36.163Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 9beeeb40-c664-459a-8465-ef82def53708] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T12:47:36.171Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [9beeeb40-c664-459a-8465-ef82def53708]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T12:47:36.178Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"9beeeb40-c664-459a-8465-ef82def53708","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/policies/c1d2e3f4-a5b6-7890-1234-567890abcdef/versions/1","requestId":"9beeeb40-c664-459a-8465-ef82def53708","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:36.181Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/policies/c1d2e3f4-a5b6-7890-1234-567890abcdef/versions/1 500 22.544ms","metadata":{"error":{"contentLength":"3951","correlationId":"9beeeb40-c664-459a-8465-ef82def53708","durationMs":22.544,"eventType":"finish","requestId":"9beeeb40-c664-459a-8465-ef82def53708","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:36.186Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/policies/c1d2e3f4-a5b6-7890-1234-567890abcdef/versions/1","metadata":{"correlationId":"b71b9daf-db62-48b5-9675-9d858f757102","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"b71b9daf-db62-48b5-9675-9d858f757102","url":"/api/admin/policies/c1d2e3f4-a5b6-7890-1234-567890abcdef/versions/1","userId":"anonymous"},"timestamp":"2026-02-23T12:47:36.214Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - b71b9daf-db62-48b5-9675-9d858f757102] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T12:47:36.218Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [b71b9daf-db62-48b5-9675-9d858f757102]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T12:47:36.226Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"b71b9daf-db62-48b5-9675-9d858f757102","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/policies/c1d2e3f4-a5b6-7890-1234-567890abcdef/versions/1","requestId":"b71b9daf-db62-48b5-9675-9d858f757102","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:36.228Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/policies/c1d2e3f4-a5b6-7890-1234-567890abcdef/versions/1 500 18.561ms","metadata":{"error":{"contentLength":"3951","correlationId":"b71b9daf-db62-48b5-9675-9d858f757102","durationMs":18.561,"eventType":"finish","requestId":"b71b9daf-db62-48b5-9675-9d858f757102","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:36.232Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/policies/invalid-uuid/versions/1","metadata":{"correlationId":"e00f3a66-af4c-4e9e-ab95-01efd226848a","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"e00f3a66-af4c-4e9e-ab95-01efd226848a","url":"/api/admin/policies/invalid-uuid/versions/1","userId":"anonymous"},"timestamp":"2026-02-23T12:47:36.264Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - e00f3a66-af4c-4e9e-ab95-01efd226848a] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T12:47:36.267Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [e00f3a66-af4c-4e9e-ab95-01efd226848a]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T12:47:36.273Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"e00f3a66-af4c-4e9e-ab95-01efd226848a","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/policies/invalid-uuid/versions/1","requestId":"e00f3a66-af4c-4e9e-ab95-01efd226848a","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:36.276Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/policies/invalid-uuid/versions/1 500 15.894ms","metadata":{"error":{"contentLength":"3951","correlationId":"e00f3a66-af4c-4e9e-ab95-01efd226848a","durationMs":15.894,"eventType":"finish","requestId":"e00f3a66-af4c-4e9e-ab95-01efd226848a","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:36.280Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/policies/c1d2e3f4-a5b6-7890-1234-567890abcdef/versions/invalid-version","metadata":{"correlationId":"a4632e6f-2c69-4fd2-b400-6d5af4325bd2","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"a4632e6f-2c69-4fd2-b400-6d5af4325bd2","url":"/api/admin/policies/c1d2e3f4-a5b6-7890-1234-567890abcdef/versions/invalid-version","userId":"anonymous"},"timestamp":"2026-02-23T12:47:36.315Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - a4632e6f-2c69-4fd2-b400-6d5af4325bd2] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T12:47:36.321Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [a4632e6f-2c69-4fd2-b400-6d5af4325bd2]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T12:47:36.325Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"a4632e6f-2c69-4fd2-b400-6d5af4325bd2","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/policies/c1d2e3f4-a5b6-7890-1234-567890abcdef/versions/invalid-version","requestId":"a4632e6f-2c69-4fd2-b400-6d5af4325bd2","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:36.327Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/policies/c1d2e3f4-a5b6-7890-1234-567890abcdef/versions/invalid-version 500 15.512ms","metadata":{"error":{"contentLength":"3951","correlationId":"a4632e6f-2c69-4fd2-b400-6d5af4325bd2","durationMs":15.512,"eventType":"finish","requestId":"a4632e6f-2c69-4fd2-b400-6d5af4325bd2","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:36.330Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/policies/c1d2e3f4-a5b6-7890-1234-567890abcdef/versions/1","metadata":{"correlationId":"b4233097-1a8f-4230-b73e-1f561709b214","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"b4233097-1a8f-4230-b73e-1f561709b214","url":"/api/admin/policies/c1d2e3f4-a5b6-7890-1234-567890abcdef/versions/1","userId":"anonymous"},"timestamp":"2026-02-23T12:47:36.362Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - b4233097-1a8f-4230-b73e-1f561709b214] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T12:47:36.368Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [b4233097-1a8f-4230-b73e-1f561709b214]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T12:47:36.373Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"b4233097-1a8f-4230-b73e-1f561709b214","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/policies/c1d2e3f4-a5b6-7890-1234-567890abcdef/versions/1","requestId":"b4233097-1a8f-4230-b73e-1f561709b214","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:36.379Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/policies/c1d2e3f4-a5b6-7890-1234-567890abcdef/versions/1 500 20.113ms","metadata":{"error":{"contentLength":"3951","correlationId":"b4233097-1a8f-4230-b73e-1f561709b214","durationMs":20.113,"eventType":"finish","requestId":"b4233097-1a8f-4230-b73e-1f561709b214","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:36.382Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/policies/c1d2e3f4-a5b6-7890-1234-567890abcdef/versions/1","metadata":{"correlationId":"71a62dec-2618-4a96-8cd0-29c5e8afb649","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"71a62dec-2618-4a96-8cd0-29c5e8afb649","url":"/api/admin/policies/c1d2e3f4-a5b6-7890-1234-567890abcdef/versions/1","userId":"anonymous"},"timestamp":"2026-02-23T12:47:36.411Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Authentication: Missing or invalid Authorization header.","metadata":{},"timestamp":"2026-02-23T12:47:36.415Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Client error processing request: Authorization header missing or invalid.","metadata":{"correlationId":"71a62dec-2618-4a96-8cd0-29c5e8afb649","errorMessage":"Authorization header missing or invalid.","errorName":"AuthenticationError","isOperational":true,"method":"GET","path":"/api/admin/policies/c1d2e3f4-a5b6-7890-1234-567890abcdef/versions/1","requestId":"71a62dec-2618-4a96-8cd0-29c5e8afb649","stack":"AuthenticationError: Authorization header missing or invalid.\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:32:25\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:27:70\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestLogger.middleware.ts:84:9\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:32\n    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)\n    at middleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:13)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at addRequestId (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestId.middleware.ts:33:5)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at urlencodedParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\urlencoded.js:68:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at jsonParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\json.js:100:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at requestMetricsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestMetrics.middleware.ts:26:3)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at cors (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:188:7)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:224:17\n    at originCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:214:15)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:531:6)\n    at xXssProtectionMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:311:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPoweredByMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:304:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPermittedCrossDomainPoliciesMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:297:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xFrameOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:281:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDownloadOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:261:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDnsPrefetchControlMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:254:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xContentTypeOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:246:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at strictTransportSecurityMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:239:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at referrerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:207:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at originAgentClusterMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:182:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginResourcePolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:175:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginOpenerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:159:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at contentSecurityPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:124:4)","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T12:47:36.426Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"<-- GET /api/admin/policies/c1d2e3f4-a5b6-7890-1234-567890abcdef/versions/1 401 18.711ms","metadata":{"contentLength":"151","correlationId":"71a62dec-2618-4a96-8cd0-29c5e8afb649","durationMs":18.711,"eventType":"finish","requestId":"71a62dec-2618-4a96-8cd0-29c5e8afb649","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T12:47:36.430Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/policies/d1e2f3a4-b5c6-7890-1234-567890abcdef/versions","metadata":{"correlationId":"2df39c01-cfa6-4dab-8f75-b08925fff077","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"2df39c01-cfa6-4dab-8f75-b08925fff077","url":"/api/admin/policies/d1e2f3a4-b5c6-7890-1234-567890abcdef/versions","userId":"anonymous"},"timestamp":"2026-02-23T12:47:36.469Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 2df39c01-cfa6-4dab-8f75-b08925fff077] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T12:47:36.474Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [2df39c01-cfa6-4dab-8f75-b08925fff077]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T12:47:36.477Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"2df39c01-cfa6-4dab-8f75-b08925fff077","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/policies/d1e2f3a4-b5c6-7890-1234-567890abcdef/versions","requestId":"2df39c01-cfa6-4dab-8f75-b08925fff077","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:36.480Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/policies/d1e2f3a4-b5c6-7890-1234-567890abcdef/versions 500 14.049ms","metadata":{"error":{"contentLength":"3814","correlationId":"2df39c01-cfa6-4dab-8f75-b08925fff077","durationMs":14.049,"eventType":"finish","requestId":"2df39c01-cfa6-4dab-8f75-b08925fff077","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:36.483Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/policies/d1e2f3a4-b5c6-7890-1234-567890abcdef/versions","metadata":{"correlationId":"bc76e7b5-2c82-4ef8-9407-1fa58e4aa340","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"bc76e7b5-2c82-4ef8-9407-1fa58e4aa340","url":"/api/admin/policies/d1e2f3a4-b5c6-7890-1234-567890abcdef/versions","userId":"anonymous"},"timestamp":"2026-02-23T12:47:36.510Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - bc76e7b5-2c82-4ef8-9407-1fa58e4aa340] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T12:47:36.514Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [bc76e7b5-2c82-4ef8-9407-1fa58e4aa340]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T12:47:36.521Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"bc76e7b5-2c82-4ef8-9407-1fa58e4aa340","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/policies/d1e2f3a4-b5c6-7890-1234-567890abcdef/versions","requestId":"bc76e7b5-2c82-4ef8-9407-1fa58e4aa340","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:36.526Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/policies/d1e2f3a4-b5c6-7890-1234-567890abcdef/versions 500 20.873ms","metadata":{"error":{"contentLength":"3814","correlationId":"bc76e7b5-2c82-4ef8-9407-1fa58e4aa340","durationMs":20.873,"eventType":"finish","requestId":"bc76e7b5-2c82-4ef8-9407-1fa58e4aa340","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:36.532Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/policies/invalid-uuid/versions","metadata":{"correlationId":"c99ead0d-c735-4300-aa89-b0f01d3a7965","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"c99ead0d-c735-4300-aa89-b0f01d3a7965","url":"/api/admin/policies/invalid-uuid/versions","userId":"anonymous"},"timestamp":"2026-02-23T12:47:36.560Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - c99ead0d-c735-4300-aa89-b0f01d3a7965] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T12:47:36.563Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [c99ead0d-c735-4300-aa89-b0f01d3a7965]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T12:47:36.572Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"c99ead0d-c735-4300-aa89-b0f01d3a7965","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/policies/invalid-uuid/versions","requestId":"c99ead0d-c735-4300-aa89-b0f01d3a7965","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:36.575Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/policies/invalid-uuid/versions 500 18.248ms","metadata":{"error":{"contentLength":"3814","correlationId":"c99ead0d-c735-4300-aa89-b0f01d3a7965","durationMs":18.248,"eventType":"finish","requestId":"c99ead0d-c735-4300-aa89-b0f01d3a7965","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:36.578Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/policies/d1e2f3a4-b5c6-7890-1234-567890abcdef/versions","metadata":{"correlationId":"8d68325b-da58-4fbd-b9b0-cc1e1cbfbe57","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"8d68325b-da58-4fbd-b9b0-cc1e1cbfbe57","url":"/api/admin/policies/d1e2f3a4-b5c6-7890-1234-567890abcdef/versions","userId":"anonymous"},"timestamp":"2026-02-23T12:47:36.605Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 8d68325b-da58-4fbd-b9b0-cc1e1cbfbe57] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T12:47:36.609Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [8d68325b-da58-4fbd-b9b0-cc1e1cbfbe57]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T12:47:36.613Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"8d68325b-da58-4fbd-b9b0-cc1e1cbfbe57","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/policies/d1e2f3a4-b5c6-7890-1234-567890abcdef/versions","requestId":"8d68325b-da58-4fbd-b9b0-cc1e1cbfbe57","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:36.615Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/policies/d1e2f3a4-b5c6-7890-1234-567890abcdef/versions 500 13.768ms","metadata":{"error":{"contentLength":"3814","correlationId":"8d68325b-da58-4fbd-b9b0-cc1e1cbfbe57","durationMs":13.768,"eventType":"finish","requestId":"8d68325b-da58-4fbd-b9b0-cc1e1cbfbe57","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:36.619Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/policies/d1e2f3a4-b5c6-7890-1234-567890abcdef/versions","metadata":{"correlationId":"3e7b90dc-bec2-4d08-b9b0-77ec613bcd9c","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"3e7b90dc-bec2-4d08-b9b0-77ec613bcd9c","url":"/api/admin/policies/d1e2f3a4-b5c6-7890-1234-567890abcdef/versions","userId":"anonymous"},"timestamp":"2026-02-23T12:47:36.653Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Authentication: Missing or invalid Authorization header.","metadata":{},"timestamp":"2026-02-23T12:47:36.659Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Client error processing request: Authorization header missing or invalid.","metadata":{"correlationId":"3e7b90dc-bec2-4d08-b9b0-77ec613bcd9c","errorMessage":"Authorization header missing or invalid.","errorName":"AuthenticationError","isOperational":true,"method":"GET","path":"/api/admin/policies/d1e2f3a4-b5c6-7890-1234-567890abcdef/versions","requestId":"3e7b90dc-bec2-4d08-b9b0-77ec613bcd9c","stack":"AuthenticationError: Authorization header missing or invalid.\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:32:25\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:27:70\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestLogger.middleware.ts:84:9\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:32\n    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)\n    at middleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:13)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at addRequestId (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestId.middleware.ts:33:5)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at urlencodedParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\urlencoded.js:68:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at jsonParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\json.js:100:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at requestMetricsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestMetrics.middleware.ts:26:3)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at cors (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:188:7)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:224:17\n    at originCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:214:15)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:531:6)\n    at xXssProtectionMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:311:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPoweredByMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:304:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPermittedCrossDomainPoliciesMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:297:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xFrameOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:281:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDownloadOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:261:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDnsPrefetchControlMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:254:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xContentTypeOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:246:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at strictTransportSecurityMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:239:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at referrerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:207:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at originAgentClusterMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:182:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginResourcePolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:175:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginOpenerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:159:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at contentSecurityPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:124:4)","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T12:47:36.681Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"<-- GET /api/admin/policies/d1e2f3a4-b5c6-7890-1234-567890abcdef/versions 401 36.099ms","metadata":{"contentLength":"151","correlationId":"3e7b90dc-bec2-4d08-b9b0-77ec613bcd9c","durationMs":36.099,"eventType":"finish","requestId":"3e7b90dc-bec2-4d08-b9b0-77ec613bcd9c","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T12:47:36.689Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> POST /api/admin/policies/e1f2a3b4-c5d6-7890-1234-567890abcdef/rollback/1","metadata":{"correlationId":"190e868d-00f7-4c46-b0fc-42f91c248915","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"POST","requestId":"190e868d-00f7-4c46-b0fc-42f91c248915","url":"/api/admin/policies/e1f2a3b4-c5d6-7890-1234-567890abcdef/rollback/1","userId":"anonymous"},"timestamp":"2026-02-23T12:47:36.721Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 190e868d-00f7-4c46-b0fc-42f91c248915] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T12:47:36.725Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [190e868d-00f7-4c46-b0fc-42f91c248915]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T12:47:36.732Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"190e868d-00f7-4c46-b0fc-42f91c248915","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"POST","path":"/api/admin/policies/e1f2a3b4-c5d6-7890-1234-567890abcdef/rollback/1","requestId":"190e868d-00f7-4c46-b0fc-42f91c248915","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:36.736Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- POST /api/admin/policies/e1f2a3b4-c5d6-7890-1234-567890abcdef/rollback/1 500 21.050ms","metadata":{"error":{"contentLength":"3951","correlationId":"190e868d-00f7-4c46-b0fc-42f91c248915","durationMs":21.05,"eventType":"finish","requestId":"190e868d-00f7-4c46-b0fc-42f91c248915","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:36.742Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> POST /api/admin/policies/e1f2a3b4-c5d6-7890-1234-567890abcdef/rollback/1","metadata":{"correlationId":"14f55599-8cc8-4aee-bc4d-4b48116bbff7","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"POST","requestId":"14f55599-8cc8-4aee-bc4d-4b48116bbff7","url":"/api/admin/policies/e1f2a3b4-c5d6-7890-1234-567890abcdef/rollback/1","userId":"anonymous"},"timestamp":"2026-02-23T12:47:36.766Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 14f55599-8cc8-4aee-bc4d-4b48116bbff7] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T12:47:36.774Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [14f55599-8cc8-4aee-bc4d-4b48116bbff7]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T12:47:36.779Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"14f55599-8cc8-4aee-bc4d-4b48116bbff7","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"POST","path":"/api/admin/policies/e1f2a3b4-c5d6-7890-1234-567890abcdef/rollback/1","requestId":"14f55599-8cc8-4aee-bc4d-4b48116bbff7","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:36.781Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- POST /api/admin/policies/e1f2a3b4-c5d6-7890-1234-567890abcdef/rollback/1 500 19.238ms","metadata":{"error":{"contentLength":"3951","correlationId":"14f55599-8cc8-4aee-bc4d-4b48116bbff7","durationMs":19.238,"eventType":"finish","requestId":"14f55599-8cc8-4aee-bc4d-4b48116bbff7","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:36.785Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> POST /api/admin/policies/invalid-uuid/rollback/1","metadata":{"correlationId":"589ff37d-54af-4e41-86bc-1f9c14ba6746","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"POST","requestId":"589ff37d-54af-4e41-86bc-1f9c14ba6746","url":"/api/admin/policies/invalid-uuid/rollback/1","userId":"anonymous"},"timestamp":"2026-02-23T12:47:36.822Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 589ff37d-54af-4e41-86bc-1f9c14ba6746] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T12:47:36.825Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [589ff37d-54af-4e41-86bc-1f9c14ba6746]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T12:47:36.831Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"589ff37d-54af-4e41-86bc-1f9c14ba6746","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"POST","path":"/api/admin/policies/invalid-uuid/rollback/1","requestId":"589ff37d-54af-4e41-86bc-1f9c14ba6746","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:36.834Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- POST /api/admin/policies/invalid-uuid/rollback/1 500 15.820ms","metadata":{"error":{"contentLength":"3951","correlationId":"589ff37d-54af-4e41-86bc-1f9c14ba6746","durationMs":15.82,"eventType":"finish","requestId":"589ff37d-54af-4e41-86bc-1f9c14ba6746","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:36.838Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> POST /api/admin/policies/e1f2a3b4-c5d6-7890-1234-567890abcdef/rollback/invalid-version","metadata":{"correlationId":"1b282833-4015-4d76-be02-82264b895946","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"POST","requestId":"1b282833-4015-4d76-be02-82264b895946","url":"/api/admin/policies/e1f2a3b4-c5d6-7890-1234-567890abcdef/rollback/invalid-version","userId":"anonymous"},"timestamp":"2026-02-23T12:47:36.870Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 1b282833-4015-4d76-be02-82264b895946] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T12:47:36.874Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [1b282833-4015-4d76-be02-82264b895946]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T12:47:36.878Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"1b282833-4015-4d76-be02-82264b895946","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"POST","path":"/api/admin/policies/e1f2a3b4-c5d6-7890-1234-567890abcdef/rollback/invalid-version","requestId":"1b282833-4015-4d76-be02-82264b895946","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:36.880Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- POST /api/admin/policies/e1f2a3b4-c5d6-7890-1234-567890abcdef/rollback/invalid-version 500 13.894ms","metadata":{"error":{"contentLength":"3951","correlationId":"1b282833-4015-4d76-be02-82264b895946","durationMs":13.894,"eventType":"finish","requestId":"1b282833-4015-4d76-be02-82264b895946","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:36.883Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> POST /api/admin/policies/e1f2a3b4-c5d6-7890-1234-567890abcdef/rollback/1","metadata":{"correlationId":"d7b0c0fb-af63-4cb4-bd6d-14eddf0eb919","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"POST","requestId":"d7b0c0fb-af63-4cb4-bd6d-14eddf0eb919","url":"/api/admin/policies/e1f2a3b4-c5d6-7890-1234-567890abcdef/rollback/1","userId":"anonymous"},"timestamp":"2026-02-23T12:47:36.909Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - d7b0c0fb-af63-4cb4-bd6d-14eddf0eb919] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T12:47:36.913Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [d7b0c0fb-af63-4cb4-bd6d-14eddf0eb919]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T12:47:36.916Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"d7b0c0fb-af63-4cb4-bd6d-14eddf0eb919","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"POST","path":"/api/admin/policies/e1f2a3b4-c5d6-7890-1234-567890abcdef/rollback/1","requestId":"d7b0c0fb-af63-4cb4-bd6d-14eddf0eb919","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:36.919Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- POST /api/admin/policies/e1f2a3b4-c5d6-7890-1234-567890abcdef/rollback/1 500 14.392ms","metadata":{"error":{"contentLength":"3951","correlationId":"d7b0c0fb-af63-4cb4-bd6d-14eddf0eb919","durationMs":14.392,"eventType":"finish","requestId":"d7b0c0fb-af63-4cb4-bd6d-14eddf0eb919","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T12:47:36.923Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> POST /api/admin/policies/e1f2a3b4-c5d6-7890-1234-567890abcdef/rollback","metadata":{"correlationId":"236525ae-50a9-4154-b0b3-f5785bfd9091","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"POST","requestId":"236525ae-50a9-4154-b0b3-f5785bfd9091","url":"/api/admin/policies/e1f2a3b4-c5d6-7890-1234-567890abcdef/rollback","userId":"anonymous"},"timestamp":"2026-02-23T12:47:36.952Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Authentication: Missing or invalid Authorization header.","metadata":{},"timestamp":"2026-02-23T12:47:36.954Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Client error processing request: Authorization header missing or invalid.","metadata":{"correlationId":"236525ae-50a9-4154-b0b3-f5785bfd9091","errorMessage":"Authorization header missing or invalid.","errorName":"AuthenticationError","isOperational":true,"method":"POST","path":"/api/admin/policies/e1f2a3b4-c5d6-7890-1234-567890abcdef/rollback","requestId":"236525ae-50a9-4154-b0b3-f5785bfd9091","stack":"AuthenticationError: Authorization header missing or invalid.\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:32:25\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:27:70\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestLogger.middleware.ts:84:9\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:32\n    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)\n    at middleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:13)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at addRequestId (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestId.middleware.ts:33:5)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at urlencodedParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\urlencoded.js:57:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\read.js:132:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:214:14)\n    at invokeCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\raw-body@3.0.0\\node_modules\\raw-body\\index.js:238:16)\n    at done (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\raw-body@3.0.0\\node_modules\\raw-body\\index.js:227:7)\n    at IncomingMessage.onEnd (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\raw-body@3.0.0\\node_modules\\raw-body\\index.js:287:7)\n    at IncomingMessage.emit (node:events:519:28)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at processTicksAndRejections (node:internal/process/task_queues:90:21)","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T12:47:36.961Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"<-- POST /api/admin/policies/e1f2a3b4-c5d6-7890-1234-567890abcdef/rollback 401 16.517ms","metadata":{"contentLength":"151","correlationId":"236525ae-50a9-4154-b0b3-f5785bfd9091","durationMs":16.517,"eventType":"finish","requestId":"236525ae-50a9-4154-b0b3-f5785bfd9091","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T12:47:36.968Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId ΓÇ║ should return 200 OK with policy data if policy exists

    expected 200 "OK", got 500 "Internal Server Error"

      134 |                 .get(`${BASE_API_PATH}/${targetPolicyId}`)
      135 |                 .set(MOCK_AUTH_HEADER)
    > 136 |                 .expect(HttpStatusCode.OK) // 200
          |                  ^
      137 |                 .expect(res => {
      138 |                     expect(res.body.id).toBe(targetPolicyId);
      139 |                     expect(res.body.policyName).toBe('get.policy');

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:136:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:131:81)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId ΓÇ║ should return 404 Not Found if service returns null

    expected 404 "Not Found", got 500 "Internal Server Error"

      147 |                 .get(`${BASE_API_PATH}/${targetPolicyId}`)
      148 |                 .set(MOCK_AUTH_HEADER)
    > 149 |                 .expect(HttpStatusCode.NOT_FOUND); // 404
          |                  ^
      150 |             expect(mockPolicyAdminService.getPolicy).toHaveBeenCalledWith(expect.anything(), targetPolicyId);
      151 |         });
      152 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:149:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:144:78)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId ΓÇ║ should return 404 Not Found if service throws PolicyNotFoundError

    expected 404 "Not Found", got 500 "Internal Server Error"

      158 |                 .get(`${BASE_API_PATH}/${targetPolicyId}`)
      159 |                 .set(MOCK_AUTH_HEADER)
    > 160 |                 .expect(HttpStatusCode.NOT_FOUND); // 404
          |                  ^
      161 |             expect(mockPolicyAdminService.getPolicy).toHaveBeenCalledWith(expect.anything(), targetPolicyId);
      162 |         });
      163 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:160:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:153:92)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId ΓÇ║ should return 400 Bad Request if policyId param is not a valid UUID

    expected 400 "Bad Request", got 500 "Internal Server Error"

      167 |                 .get(`${BASE_API_PATH}/${invalidId}`)
      168 |                 .set(MOCK_AUTH_HEADER)
    > 169 |                 .expect(HttpStatusCode.BAD_REQUEST); // 400 (Handled by validation middleware)
          |                  ^
      170 |             expect(mockPolicyAdminService.getPolicy).not.toHaveBeenCalled();
      171 |         });
      172 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:169:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:164:94)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId ΓÇ║ should return 500 if the service fails unexpectedly

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: Anything, "a1b2c3d4-e5f6-7890-1234-567890abcdef"

    Number of calls: 0

      178 |                 .set(MOCK_AUTH_HEADER)
      179 |                 .expect(HttpStatusCode.INTERNAL_SERVER_ERROR); // 500
    > 180 |             expect(mockPolicyAdminService.getPolicy).toHaveBeenCalledWith(expect.anything(), targetPolicyId);
          |                                                      ^
      181 |         });
      182 |
      183 |         it('should return 401 Unauthorized if token is missing', async () => {

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:180:54
      at fulfilled (tests/integration/routes/policy.admin.routes.integration.spec.ts:5:58)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies ΓÇ║ should return 200 OK with a list of policies

    expected 200 "OK", got 500 "Internal Server Error"

      196 |                  .get(BASE_API_PATH)
      197 |                  .set(MOCK_AUTH_HEADER)
    > 198 |                  .expect(HttpStatusCode.OK); // 200
          |                   ^
      199 |              expect(mockPolicyAdminService.listPolicies).toHaveBeenCalledTimes(1);
      200 |              expect(mockPolicyAdminService.listPolicies).toHaveBeenCalledWith(expect.anything(), { limit: undefined, language: undefined, startKey: undefined });
      201 |          });

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:198:19
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:192:72)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies ΓÇ║ should pass pagination and filter parameters to the service

    expected 200 "OK", got 500 "Internal Server Error"

      207 |                  .query({ limit: 15, language: 'rego', startKey: 'opaqueStartKey' })
      208 |                  .set(MOCK_AUTH_HEADER)
    > 209 |                  .expect(HttpStatusCode.OK); // 200
          |                   ^
      210 |              expect(mockPolicyAdminService.listPolicies).toHaveBeenCalledTimes(1);
      211 |              expect(mockPolicyAdminService.listPolicies).toHaveBeenCalledWith(expect.anything(), { limit: '15', language: 'rego', startKey: 'opaqueStartKey' });
      212 |          });

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:209:19
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:203:88)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies ΓÇ║ should return 500 if the service fails unexpectedly

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 1
    Received number of calls: 0

      219 |                  .set(MOCK_AUTH_HEADER)
      220 |                  .expect(HttpStatusCode.INTERNAL_SERVER_ERROR); // 500
    > 221 |              expect(mockPolicyAdminService.listPolicies).toHaveBeenCalledTimes(1);
          |                                                          ^
      222 |          });
      223 |
      224 |          it('should return 401 Unauthorized if token is missing', async () => {

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:221:58
      at fulfilled (tests/integration/routes/policy.admin.routes.integration.spec.ts:5:58)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ PUT /api/admin/policies/:policyId ΓÇ║ should return 200 OK with updated policy data if service succeeds

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    - Expected
    + Received

      {"attributes": {"cognito:groups": ["policy-admin", "user"], "cognito:username": "test-admin", "sub": "test-admin-id-123"}, "id": "test-admin-id-123", "roles": ["policy-admin", "user"], "tenantId": "unknown-tenant", "username": "test-admin"},
      "a1b2c3d4-e5f6-7890-1234-567890abcdef",
      Object {
        "description": "Updated Integration Description",
    -   "version": 2,
      },

    Number of calls: 1

      250 |                     expect(res.body.version).toBe(MOCK_VALID_UPDATE_POLICY_PAYLOAD.version);
      251 |                 });
    > 252 |             expect(mockPolicyAdminService.updatePolicy).toHaveBeenCalledWith(expect.anything(), targetPolicyId, MOCK_VALID_UPDATE_POLICY_PAYLOAD);
          |                                                         ^
      253 |         });
      254 |
      255 |          it('should return 404 Not Found if service throws PolicyNotFoundError', async () => {

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:252:57
      at fulfilled (tests/integration/routes/policy.admin.routes.integration.spec.ts:5:58)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ DELETE /api/admin/policies/:policyId ΓÇ║ should return 204 No Content if service succeeds

    expected 204 "No Content", got 500 "Internal Server Error"

      311 |                 .delete(`${BASE_API_PATH}/${targetPolicyId}`)
      312 |                 .set(MOCK_AUTH_HEADER)
    > 313 |                 .expect(HttpStatusCode.NO_CONTENT); // 204
          |                  ^
      314 |             expect(mockPolicyAdminService.deletePolicy).toHaveBeenCalledWith(expect.anything(), targetPolicyId);
      315 |         });
      316 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:313:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:308:75)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ DELETE /api/admin/policies/:policyId ΓÇ║ should return 404 Not Found if service throws PolicyNotFoundError

    expected 404 "Not Found", got 500 "Internal Server Error"

      322 |                 .delete(`${BASE_API_PATH}/${targetPolicyId}`)
      323 |                 .set(MOCK_AUTH_HEADER)
    > 324 |                 .expect(HttpStatusCode.NOT_FOUND); // 404
          |                  ^
      325 |             expect(mockPolicyAdminService.deletePolicy).toHaveBeenCalledWith(expect.anything(), targetPolicyId);
      326 |         });
      327 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:324:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:317:92)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ DELETE /api/admin/policies/:policyId ΓÇ║ should return 400 Bad Request if policyId param is invalid

    expected 400 "Bad Request", got 500 "Internal Server Error"

      330 |                 .delete(`${BASE_API_PATH}/invalid-uuid`)
      331 |                 .set(MOCK_AUTH_HEADER)
    > 332 |                 .expect(HttpStatusCode.BAD_REQUEST); // 400
          |                  ^
      333 |             expect(mockPolicyAdminService.deletePolicy).not.toHaveBeenCalled();
      334 |         });
      335 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:332:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:328:86)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ DELETE /api/admin/policies/:policyId ΓÇ║ should return 500 if service fails unexpectedly

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: Anything, "b1c2d3e4-f5a6-7890-1234-567890abcdef"

    Number of calls: 0

      341 |                 .set(MOCK_AUTH_HEADER)
      342 |                 .expect(HttpStatusCode.INTERNAL_SERVER_ERROR); // 500
    > 343 |             expect(mockPolicyAdminService.deletePolicy).toHaveBeenCalledWith(expect.anything(), targetPolicyId);
          |                                                         ^
      344 |         });
      345 |
      346 |         it('should return 401 Unauthorized if token is missing', async () => {

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:343:57
      at fulfilled (tests/integration/routes/policy.admin.routes.integration.spec.ts:5:58)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId/versions/:version ΓÇ║ should return 200 OK with policy version data if found

    expected 200 "OK", got 500 "Internal Server Error"

      362 |                 .get(`${BASE_API_PATH}/${policyId}/versions/${version}`)
      363 |                 .set(MOCK_AUTH_HEADER)
    > 364 |                 .expect(HttpStatusCode.OK)
          |                  ^
      365 |                 .expect(res => {
      366 |                     expect(res.body.id).toBe(policyId);
      367 |                     expect(res.body.version).toBe(version);

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:364:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:359:81)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId/versions/:version ΓÇ║ should return 404 Not Found if policy version not found

    expected 404 "Not Found", got 500 "Internal Server Error"

      375 |                 .get(`${BASE_API_PATH}/${policyId}/versions/${version}`)
      376 |                 .set(MOCK_AUTH_HEADER)
    > 377 |                 .expect(HttpStatusCode.NOT_FOUND);
          |                  ^
      378 |             expect(mockPolicyAdminService.getPolicyVersion).toHaveBeenCalledWith(expect.anything(), policyId, version);
      379 |         });
      380 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:377:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:372:82)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId/versions/:version ΓÇ║ should return 400 Bad Request if policyId is invalid

    expected 400 "Bad Request", got 500 "Internal Server Error"

      383 |                 .get(`${BASE_API_PATH}/invalid-uuid/versions/${version}`)
      384 |                 .set(MOCK_AUTH_HEADER)
    > 385 |                 .expect(HttpStatusCode.BAD_REQUEST);
          |                  ^
      386 |             expect(mockPolicyAdminService.getPolicyVersion).not.toHaveBeenCalled();
      387 |         });
      388 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:385:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:381:79)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId/versions/:version ΓÇ║ should return 400 Bad Request if version is invalid

    expected 400 "Bad Request", got 500 "Internal Server Error"

      391 |                 .get(`${BASE_API_PATH}/${policyId}/versions/invalid-version`)
      392 |                 .set(MOCK_AUTH_HEADER)
    > 393 |                 .expect(HttpStatusCode.BAD_REQUEST);
          |                  ^
      394 |             expect(mockPolicyAdminService.getPolicyVersion).not.toHaveBeenCalled();
      395 |         });
      396 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:393:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:389:78)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId/versions/:version ΓÇ║ should return 500 Internal Server Error if service fails unexpectedly

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: Anything, "c1d2e3f4-a5b6-7890-1234-567890abcdef", 1

    Number of calls: 0

      402 |                 .set(MOCK_AUTH_HEADER)
      403 |                 .expect(HttpStatusCode.INTERNAL_SERVER_ERROR);
    > 404 |             expect(mockPolicyAdminService.getPolicyVersion).toHaveBeenCalledWith(expect.anything(), policyId, version);
          |                                                             ^
      405 |         });
      406 |
      407 |         it('should return 401 Unauthorized if token is missing', async () => {

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:404:61
      at fulfilled (tests/integration/routes/policy.admin.routes.integration.spec.ts:5:58)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId/versions ΓÇ║ should return 200 OK with a list of policy versions

    expected 200 "OK", got 500 "Internal Server Error"

      425 |                 .get(`${BASE_API_PATH}/${policyId}/versions`)
      426 |                 .set(MOCK_AUTH_HEADER)
    > 427 |                 .expect(HttpStatusCode.OK)
          |                  ^
      428 |                 .expect(res => {
      429 |                     expect(res.body).toHaveLength(2);
      430 |                     expect(res.body[0].version).toBe(1);

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:427:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:422:78)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId/versions ΓÇ║ should return 404 Not Found if policy does not exist

    expected 404 "Not Found", got 500 "Internal Server Error"

      441 |                 .get(`${BASE_API_PATH}/${policyId}/versions`)
      442 |                 .set(MOCK_AUTH_HEADER)
    > 443 |                 .expect(HttpStatusCode.NOT_FOUND);
          |                  ^
      444 |             expect(mockPolicyAdminService.listPolicyVersions).toHaveBeenCalledWith(expect.anything(), policyId);
      445 |         });
      446 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:443:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:436:79)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId/versions ΓÇ║ should return 400 Bad Request if policyId is invalid

    expected 400 "Bad Request", got 500 "Internal Server Error"

      449 |                 .get(`${BASE_API_PATH}/invalid-uuid/versions`)
      450 |                 .set(MOCK_AUTH_HEADER)
    > 451 |                 .expect(HttpStatusCode.BAD_REQUEST);
          |                  ^
      452 |             expect(mockPolicyAdminService.listPolicyVersions).not.toHaveBeenCalled();
      453 |         });
      454 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:451:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:447:79)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId/versions ΓÇ║ should return 500 Internal Server Error if service fails unexpectedly

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: Anything, "d1e2f3a4-b5c6-7890-1234-567890abcdef"

    Number of calls: 0

      460 |                 .set(MOCK_AUTH_HEADER)
      461 |                 .expect(HttpStatusCode.INTERNAL_SERVER_ERROR);
    > 462 |             expect(mockPolicyAdminService.listPolicyVersions).toHaveBeenCalledWith(expect.anything(), policyId);
          |                                                               ^
      463 |         });
      464 |
      465 |         it('should return 401 Unauthorized if token is missing', async () => {

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:462:63
      at fulfilled (tests/integration/routes/policy.admin.routes.integration.spec.ts:5:58)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ POST /api/admin/policies/:policyId/rollback ΓÇ║ should return 200 OK with rolled back policy data on success

    expected 200 "OK", got 500 "Internal Server Error"

      481 |                 .post(`${BASE_API_PATH}/${policyId}/rollback/${version}`)
      482 |                 .set(MOCK_AUTH_HEADER)
    > 483 |                 .expect(HttpStatusCode.OK)
          |                  ^
      484 |                 .expect(res => {
      485 |                     expect(res.body.id).toBe(policyId);
      486 |                     expect(res.body.version).toBe(version);

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:483:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:478:87)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ POST /api/admin/policies/:policyId/rollback ΓÇ║ should return 404 Not Found if policy or version not found

    expected 404 "Not Found", got 500 "Internal Server Error"

      496 |                 .post(`${BASE_API_PATH}/${policyId}/rollback/${version}`)
      497 |                 .set(MOCK_AUTH_HEADER)
    > 498 |                 .expect(HttpStatusCode.NOT_FOUND);
          |                  ^
      499 |             expect(mockPolicyAdminService.rollbackPolicy).toHaveBeenCalledWith(expect.anything(), policyId, version);
      500 |         });
      501 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:498:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:491:85)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ POST /api/admin/policies/:policyId/rollback ΓÇ║ should return 400 Bad Request if policyId is invalid

    expected 400 "Bad Request", got 500 "Internal Server Error"

      504 |                 .post(`${BASE_API_PATH}/invalid-uuid/rollback/${version}`)
      505 |                 .set(MOCK_AUTH_HEADER)
    > 506 |                 .expect(HttpStatusCode.BAD_REQUEST);
          |                  ^
      507 |             expect(mockPolicyAdminService.rollbackPolicy).not.toHaveBeenCalled();
      508 |         });
      509 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:506:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:502:79)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ POST /api/admin/policies/:policyId/rollback ΓÇ║ should return 400 Bad Request if version is invalid or missing

    expected 400 "Bad Request", got 500 "Internal Server Error"

      512 |                 .post(`${BASE_API_PATH}/${policyId}/rollback/invalid-version`)
      513 |                 .set(MOCK_AUTH_HEADER)
    > 514 |                 .expect(HttpStatusCode.BAD_REQUEST);
          |                  ^
      515 |             expect(mockPolicyAdminService.rollbackPolicy).not.toHaveBeenCalled();
      516 |         });
      517 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:514:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:510:89)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ POST /api/admin/policies/:policyId/rollback ΓÇ║ should return 500 Internal Server Error if service fails unexpectedly

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: Anything, "e1f2a3b4-c5d6-7890-1234-567890abcdef", 1

    Number of calls: 0

      523 |                 .set(MOCK_AUTH_HEADER)
      524 |                 .expect(HttpStatusCode.INTERNAL_SERVER_ERROR);
    > 525 |             expect(mockPolicyAdminService.rollbackPolicy).toHaveBeenCalledWith(expect.anything(), policyId, version);
          |                                                           ^
      526 |         });
      527 |
      528 |         it('should return 401 Unauthorized if token is missing', async () => {

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:525:59
      at fulfilled (tests/integration/routes/policy.admin.routes.integration.spec.ts:5:58)

FAIL tests/debug/dynamodb.debug.spec.ts
  ΓùÅ Console

    console.log
      Table TestAuthzTable created successfully.

      at tests/helpers/dynamodb.helper.ts:37:17

    console.error
      Error deleting table TestAuthzTable: ResourceInUseException: Attempt to change a resource which is still in use: Table is being created: TestAuthzTable
          at de_ResourceInUseExceptionRes (E:\NodeJS\PBAC_Auth\user-management-service\node_modules\.pnpm\@aws-sdk+client-dynamodb@3.879.0\node_modules\@aws-sdk\client-dynamodb\dist-cjs\index.js:2603:21)
          at de_CommandError (E:\NodeJS\PBAC_Auth\user-management-service\node_modules\.pnpm\@aws-sdk+client-dynamodb@3.879.0\node_modules\@aws-sdk\client-dynamodb\dist-cjs\index.js:2296:19)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at E:\NodeJS\PBAC_Auth\user-management-service\node_modules\.pnpm\@smithy+middleware-serde@4.0.9\node_modules\@smithy\middleware-serde\dist-cjs\index.js:36:20
          at E:\NodeJS\PBAC_Auth\user-management-service\node_modules\.pnpm\@smithy+core@3.9.0\node_modules\@smithy\core\dist-cjs\index.js:193:18
          at E:\NodeJS\PBAC_Auth\user-management-service\node_modules\.pnpm\@smithy+middleware-retry@4.1.20\node_modules\@smithy\middleware-retry\dist-cjs\index.js:320:38
          at E:\NodeJS\PBAC_Auth\user-management-service\node_modules\.pnpm\@aws-sdk+middleware-logger@3.876.0\node_modules\@aws-sdk\middleware-logger\dist-cjs\index.js:33:22 {
        '$fault': 'client',
        '$metadata': {
          httpStatusCode: 400,
          requestId: 'KM3V3GGBK8LB6OG6EIMP5FE1R7VV4KQNSO5AEMVJF66Q9ASUAAJG',
          extendedRequestId: undefined,
          cfId: undefined,
          attempts: 1,
          totalRetryDelay: 0
        },
        __type: 'com.amazonaws.dynamodb.v20120810#ResourceInUseException'
      }

      58 |             console.log(`Table ${tableName} not found.`);
      59 |         } else {
    > 60 |             console.error(`Error deleting table ${tableName}:`, error);
         |                     ^
      61 |             throw error;
      62 |         }
      63 |     }

      at tests/helpers/dynamodb.helper.ts:60:21
          at Generator.throw (<anonymous>)
      at rejected (tests/helpers/dynamodb.helper.ts:6:65)

  ΓùÅ DynamoDB Table Creation Debug Test ΓÇ║ should create a role using DynamoRoleRepository

    expect(received).resolves.not.toThrow()

    Received promise rejected instead of resolved
    Rejected to value: [DatabaseError: Failed to create role: User: arn:aws:iam::410844822442:user/PBAC-Admin is not authorized to perform: dynamodb:PutItem on resource: arn:aws:dynamodb:ap-south-1:410844822442:table/TestAuthzTable because no identity-based policy allows the dynamodb:PutItem action]

      53 |         const roleRepository = persistenceContainer.resolve<IRoleRepository>(TYPES.RoleRepository);
      54 |         const testRole = new Role('test-tenant', 'debug-role', 'Debug Role Description');
    > 55 |         await expect(roleRepository.create(testRole)).resolves.not.toThrow();
         |               ^
      56 |
      57 |         // Verify by fetching
      58 |         const found = await roleRepository.findByName('test-tenant', testRole.roleName);

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at tests/debug/dynamodb.debug.spec.ts:55:15
      at tests/debug/dynamodb.debug.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/debug/dynamodb.debug.spec.ts:4:12)
      at Object.<anonymous> (tests/debug/dynamodb.debug.spec.ts:52:70)


  ΓùÅ Test suite failed to run

    ResourceInUseException: Attempt to change a resource which is still in use: Table is being created: TestAuthzTable

      at de_ResourceInUseExceptionRes (node_modules/.pnpm/@aws-sdk+client-dynamodb@3.879.0/node_modules/@aws-sdk/client-dynamodb/dist-cjs/index.js:2603:21)
      at de_CommandError (node_modules/.pnpm/@aws-sdk+client-dynamodb@3.879.0/node_modules/@aws-sdk/client-dynamodb/dist-cjs/index.js:2296:19)
      at node_modules/.pnpm/@smithy+middleware-serde@4.0.9/node_modules/@smithy/middleware-serde/dist-cjs/index.js:36:20
      at node_modules/.pnpm/@smithy+core@3.9.0/node_modules/@smithy/core/dist-cjs/index.js:193:18
      at node_modules/.pnpm/@smithy+middleware-retry@4.1.20/node_modules/@smithy/middleware-retry/dist-cjs/index.js:320:38
      at node_modules/.pnpm/@aws-sdk+middleware-logger@3.876.0/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js:33:22

FAIL tests/integration/Persistence/DynamoUserProfileRepository.integration.spec.ts
  ΓùÅ Console

    console.log
      Table TestUsers cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

  ΓùÅ DynamoUserProfileRepository Integration Tests ΓÇ║ should throw error when saving duplicate user profile (implement check in repo)

    ValidationException: The provided key element does not match the schema

      at throwDefaultError (node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:425:20)
      at node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:434:5
      at de_CommandError (node_modules/.pnpm/@aws-sdk+client-dynamodb@3.879.0/node_modules/@aws-sdk/client-dynamodb/dist-cjs/index.js:2359:14)
      at node_modules/.pnpm/@smithy+middleware-serde@4.0.9/node_modules/@smithy/middleware-serde/dist-cjs/index.js:36:20
      at node_modules/.pnpm/@aws-sdk+lib-dynamodb@3.879_ee4568148364d683af0669b014af13ba/node_modules/@aws-sdk/lib-dynamodb/dist-cjs/index.js:173:30
      at node_modules/.pnpm/@smithy+core@3.9.0/node_modules/@smithy/core/dist-cjs/index.js:193:18
      at node_modules/.pnpm/@smithy+middleware-retry@4.1.20/node_modules/@smithy/middleware-retry/dist-cjs/index.js:320:38
      at node_modules/.pnpm/@aws-sdk+middleware-logger@3.876.0/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js:33:22

  ΓùÅ DynamoUserProfileRepository Integration Tests ΓÇ║ should find an existing profile by ID

    ValidationException: The provided key element does not match the schema

      at throwDefaultError (node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:425:20)
      at node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:434:5
      at de_CommandError (node_modules/.pnpm/@aws-sdk+client-dynamodb@3.879.0/node_modules/@aws-sdk/client-dynamodb/dist-cjs/index.js:2359:14)
      at node_modules/.pnpm/@smithy+middleware-serde@4.0.9/node_modules/@smithy/middleware-serde/dist-cjs/index.js:36:20
      at node_modules/.pnpm/@aws-sdk+lib-dynamodb@3.879_ee4568148364d683af0669b014af13ba/node_modules/@aws-sdk/lib-dynamodb/dist-cjs/index.js:173:30
      at node_modules/.pnpm/@smithy+core@3.9.0/node_modules/@smithy/core/dist-cjs/index.js:193:18
      at node_modules/.pnpm/@smithy+middleware-retry@4.1.20/node_modules/@smithy/middleware-retry/dist-cjs/index.js:320:38
      at node_modules/.pnpm/@aws-sdk+middleware-logger@3.876.0/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js:33:22

  ΓùÅ DynamoUserProfileRepository Integration Tests ΓÇ║ should return null when finding non-existent profile by ID

    ValidationException: The provided key element does not match the schema

      at throwDefaultError (node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:425:20)
      at node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:434:5
      at de_CommandError (node_modules/.pnpm/@aws-sdk+client-dynamodb@3.879.0/node_modules/@aws-sdk/client-dynamodb/dist-cjs/index.js:2359:14)
      at node_modules/.pnpm/@smithy+middleware-serde@4.0.9/node_modules/@smithy/middleware-serde/dist-cjs/index.js:36:20
      at node_modules/.pnpm/@aws-sdk+lib-dynamodb@3.879_ee4568148364d683af0669b014af13ba/node_modules/@aws-sdk/lib-dynamodb/dist-cjs/index.js:173:30
      at node_modules/.pnpm/@smithy+core@3.9.0/node_modules/@smithy/core/dist-cjs/index.js:193:18
      at node_modules/.pnpm/@smithy+middleware-retry@4.1.20/node_modules/@smithy/middleware-retry/dist-cjs/index.js:320:38
      at node_modules/.pnpm/@aws-sdk+middleware-logger@3.876.0/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js:33:22

  ΓùÅ DynamoUserProfileRepository Integration Tests ΓÇ║ should find an existing profile by Email (assuming index exists)

    ValidationException: The provided key element does not match the schema

      at throwDefaultError (node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:425:20)
      at node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:434:5
      at de_CommandError (node_modules/.pnpm/@aws-sdk+client-dynamodb@3.879.0/node_modules/@aws-sdk/client-dynamodb/dist-cjs/index.js:2359:14)
      at node_modules/.pnpm/@smithy+middleware-serde@4.0.9/node_modules/@smithy/middleware-serde/dist-cjs/index.js:36:20
      at node_modules/.pnpm/@aws-sdk+lib-dynamodb@3.879_ee4568148364d683af0669b014af13ba/node_modules/@aws-sdk/lib-dynamodb/dist-cjs/index.js:173:30
      at node_modules/.pnpm/@smithy+core@3.9.0/node_modules/@smithy/core/dist-cjs/index.js:193:18
      at node_modules/.pnpm/@smithy+middleware-retry@4.1.20/node_modules/@smithy/middleware-retry/dist-cjs/index.js:320:38
      at node_modules/.pnpm/@aws-sdk+middleware-logger@3.876.0/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js:33:22

  ΓùÅ DynamoUserProfileRepository Integration Tests ΓÇ║ should return null when finding non-existent profile by Email

    ValidationException: The provided key element does not match the schema

      at throwDefaultError (node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:425:20)
      at node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:434:5
      at de_CommandError (node_modules/.pnpm/@aws-sdk+client-dynamodb@3.879.0/node_modules/@aws-sdk/client-dynamodb/dist-cjs/index.js:2359:14)
      at node_modules/.pnpm/@smithy+middleware-serde@4.0.9/node_modules/@smithy/middleware-serde/dist-cjs/index.js:36:20
      at node_modules/.pnpm/@aws-sdk+lib-dynamodb@3.879_ee4568148364d683af0669b014af13ba/node_modules/@aws-sdk/lib-dynamodb/dist-cjs/index.js:173:30
      at node_modules/.pnpm/@smithy+core@3.9.0/node_modules/@smithy/core/dist-cjs/index.js:193:18
      at node_modules/.pnpm/@smithy+middleware-retry@4.1.20/node_modules/@smithy/middleware-retry/dist-cjs/index.js:320:38
      at node_modules/.pnpm/@aws-sdk+middleware-logger@3.876.0/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js:33:22

  ΓùÅ DynamoUserProfileRepository Integration Tests ΓÇ║ should update an existing profile

    ValidationException: The provided key element does not match the schema

      at throwDefaultError (node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:425:20)
      at node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:434:5
      at de_CommandError (node_modules/.pnpm/@aws-sdk+client-dynamodb@3.879.0/node_modules/@aws-sdk/client-dynamodb/dist-cjs/index.js:2359:14)
      at node_modules/.pnpm/@smithy+middleware-serde@4.0.9/node_modules/@smithy/middleware-serde/dist-cjs/index.js:36:20
      at node_modules/.pnpm/@aws-sdk+lib-dynamodb@3.879_ee4568148364d683af0669b014af13ba/node_modules/@aws-sdk/lib-dynamodb/dist-cjs/index.js:173:30
      at node_modules/.pnpm/@smithy+core@3.9.0/node_modules/@smithy/core/dist-cjs/index.js:193:18
      at node_modules/.pnpm/@smithy+middleware-retry@4.1.20/node_modules/@smithy/middleware-retry/dist-cjs/index.js:320:38
      at node_modules/.pnpm/@aws-sdk+middleware-logger@3.876.0/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js:33:22

  ΓùÅ DynamoUserProfileRepository Integration Tests ΓÇ║ should throw error when updating non-existent profile (implement check)

    ValidationException: The provided key element does not match the schema

      at throwDefaultError (node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:425:20)
      at node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:434:5
      at de_CommandError (node_modules/.pnpm/@aws-sdk+client-dynamodb@3.879.0/node_modules/@aws-sdk/client-dynamodb/dist-cjs/index.js:2359:14)
      at node_modules/.pnpm/@smithy+middleware-serde@4.0.9/node_modules/@smithy/middleware-serde/dist-cjs/index.js:36:20
      at node_modules/.pnpm/@aws-sdk+lib-dynamodb@3.879_ee4568148364d683af0669b014af13ba/node_modules/@aws-sdk/lib-dynamodb/dist-cjs/index.js:173:30
      at node_modules/.pnpm/@smithy+core@3.9.0/node_modules/@smithy/core/dist-cjs/index.js:193:18
      at node_modules/.pnpm/@smithy+middleware-retry@4.1.20/node_modules/@smithy/middleware-retry/dist-cjs/index.js:320:38
      at node_modules/.pnpm/@aws-sdk+middleware-logger@3.876.0/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js:33:22

  ΓùÅ DynamoUserProfileRepository Integration Tests ΓÇ║ should delete an existing profile

    ValidationException: The provided key element does not match the schema

      at throwDefaultError (node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:425:20)
      at node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:434:5
      at de_CommandError (node_modules/.pnpm/@aws-sdk+client-dynamodb@3.879.0/node_modules/@aws-sdk/client-dynamodb/dist-cjs/index.js:2359:14)
      at node_modules/.pnpm/@smithy+middleware-serde@4.0.9/node_modules/@smithy/middleware-serde/dist-cjs/index.js:36:20
      at node_modules/.pnpm/@aws-sdk+lib-dynamodb@3.879_ee4568148364d683af0669b014af13ba/node_modules/@aws-sdk/lib-dynamodb/dist-cjs/index.js:173:30
      at node_modules/.pnpm/@smithy+core@3.9.0/node_modules/@smithy/core/dist-cjs/index.js:193:18
      at node_modules/.pnpm/@smithy+middleware-retry@4.1.20/node_modules/@smithy/middleware-retry/dist-cjs/index.js:320:38
      at node_modules/.pnpm/@aws-sdk+middleware-logger@3.876.0/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js:33:22

  ΓùÅ DynamoUserProfileRepository Integration Tests ΓÇ║ should not throw when deleting non-existent profile (idempotent)

    ValidationException: The provided key element does not match the schema

      at throwDefaultError (node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:425:20)
      at node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:434:5
      at de_CommandError (node_modules/.pnpm/@aws-sdk+client-dynamodb@3.879.0/node_modules/@aws-sdk/client-dynamodb/dist-cjs/index.js:2359:14)
      at node_modules/.pnpm/@smithy+middleware-serde@4.0.9/node_modules/@smithy/middleware-serde/dist-cjs/index.js:36:20
      at node_modules/.pnpm/@aws-sdk+lib-dynamodb@3.879_ee4568148364d683af0669b014af13ba/node_modules/@aws-sdk/lib-dynamodb/dist-cjs/index.js:173:30
      at node_modules/.pnpm/@smithy+core@3.9.0/node_modules/@smithy/core/dist-cjs/index.js:193:18
      at node_modules/.pnpm/@smithy+middleware-retry@4.1.20/node_modules/@smithy/middleware-retry/dist-cjs/index.js:320:38
      at node_modules/.pnpm/@aws-sdk+middleware-logger@3.876.0/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js:33:22

PASS tests/unit/api/middlewares/admin.auth.guard.middleware.spec.ts
PASS tests/unit/infrastructure/adapters/policy-engine/DynamoDbPolicyEngineAdapter.spec.ts
PASS tests/unit/infrastructure/adapters/cognito/CognitoUserMgmtAdapter.spec.ts
PASS tests/integration/Persistence/DynamoPolicyRepository.integration.spec.ts
  ΓùÅ Console

    console.log
      Table TestPolicies cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestPolicies cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestPolicies cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestPolicies cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestPolicies cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestPolicies cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestPolicies cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestPolicies cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestPolicies cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestPolicies cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestPolicies cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestPolicies cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

PASS tests/unit/api/middlewares/jwtAuth.middleware.spec.ts
PASS tests/integration/Persistence/DynamoPermissionRepository.integration.spec.ts
  ΓùÅ Console

    console.log
      Table TestPermissions cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestPermissions cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestPermissions cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestPermissions cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestPermissions cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestPermissions cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestPermissions cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestPermissions cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestPermissions cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

PASS tests/unit/infrastructure/config/EnvironmentConfigService.spec.ts
PASS tests/integration/Persistence/DynamoRoleRepository.integration.spec.ts
  ΓùÅ Console

    console.log
      Table TestRoles cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestRoles cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestRoles cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestRoles cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestRoles cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestRoles cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestRoles cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestRoles cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestRoles cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

PASS tests/unit/application/services/role.admin.service.spec.ts
PASS tests/unit/application/services/permission.admin.service.spec.ts
PASS tests/unit/application/services/user.admin.service.spec.ts
  ΓùÅ Console

    console.warn
      Cognito user missing 'sub' attribute, using username as ID: test-user

      70 |         const finalUserId = userId ?? cognitoUser.Username ?? 'unknown-id';
      71 |         if (!userId && cognitoUser.Username) {
    > 72 |             console.warn(`Cognito user missing 'sub' attribute, using username as ID: ${cognitoUser.Username}`);
         |                     ^
      73 |         }
      74 |
      75 |         return new AdminUserView(

      at Function.fromCognitoUser (src/domain/entities/AdminUserView.ts:72:21)
      at UserAdminService.<anonymous> (src/application/services/user.admin.service.ts:68:34)
      at fulfilled (src/application/services/user.admin.service.ts:17:58)

    console.warn
      Cognito user missing 'sub' attribute, using username as ID: test-user

      70 |         const finalUserId = userId ?? cognitoUser.Username ?? 'unknown-id';
      71 |         if (!userId && cognitoUser.Username) {
    > 72 |             console.warn(`Cognito user missing 'sub' attribute, using username as ID: ${cognitoUser.Username}`);
         |                     ^
      73 |         }
      74 |
      75 |         return new AdminUserView(

      at Function.fromCognitoUser (src/domain/entities/AdminUserView.ts:72:21)
      at UserAdminService.<anonymous> (src/application/services/user.admin.service.ts:96:34)
      at fulfilled (src/application/services/user.admin.service.ts:17:58)

    console.warn
      Cognito user missing 'sub' attribute, using username as ID: user1

      70 |         const finalUserId = userId ?? cognitoUser.Username ?? 'unknown-id';
      71 |         if (!userId && cognitoUser.Username) {
    > 72 |             console.warn(`Cognito user missing 'sub' attribute, using username as ID: ${cognitoUser.Username}`);
         |                     ^
      73 |         }
      74 |
      75 |         return new AdminUserView(

      at Function.fromCognitoUser (src/domain/entities/AdminUserView.ts:72:21)
      at UserAdminService.<anonymous> (src/application/services/user.admin.service.ts:131:38)
      at fulfilled (src/application/services/user.admin.service.ts:17:58)

    console.warn
      Cognito user missing 'sub' attribute, using username as ID: user1

      70 |         const finalUserId = userId ?? cognitoUser.Username ?? 'unknown-id';
      71 |         if (!userId && cognitoUser.Username) {
    > 72 |             console.warn(`Cognito user missing 'sub' attribute, using username as ID: ${cognitoUser.Username}`);
         |                     ^
      73 |         }
      74 |
      75 |         return new AdminUserView(

      at Function.fromCognitoUser (src/domain/entities/AdminUserView.ts:72:21)
      at UserAdminService.<anonymous> (src/application/services/user.admin.service.ts:131:38)
      at fulfilled (src/application/services/user.admin.service.ts:17:58)

    console.warn
      Cognito user missing 'sub' attribute, using username as ID: user1

      70 |         const finalUserId = userId ?? cognitoUser.Username ?? 'unknown-id';
      71 |         if (!userId && cognitoUser.Username) {
    > 72 |             console.warn(`Cognito user missing 'sub' attribute, using username as ID: ${cognitoUser.Username}`);
         |                     ^
      73 |         }
      74 |
      75 |         return new AdminUserView(

      at Function.fromCognitoUser (src/domain/entities/AdminUserView.ts:72:21)
      at src/application/services/user.admin.service.ts:328:67
          at Array.map (<anonymous>)
      at UserAdminService.<anonymous> (src/application/services/user.admin.service.ts:328:44)
      at fulfilled (src/application/services/user.admin.service.ts:17:58)

PASS tests/unit/application/services/policy.admin.service.spec.ts
PASS tests/unit/infrastructure/persistence/dynamodb/dynamodb.client.spec.ts
PASS tests/integration/routes/system.routes.integration.spec.ts
  ΓùÅ Console

    console.info
      [WinstonLogger] Logger initialized with level "info" in "test" environment.

      at WinstonLogger.initializeLogger (src/infrastructure/logging/WinstonLogger.ts:68:17)
          at Array.map (<anonymous>)

    console.log
      {"level":"warn","message":"CORS_ORIGIN is set to \"*\" in a non-development environment. This is insecure!","metadata":{},"timestamp":"2026-02-23T12:47:40.479Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"CORS configured for origin: *","metadata":{},"timestamp":"2026-02-23T12:47:40.481Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"Application setup complete for environment: test","metadata":{},"timestamp":"2026-02-23T12:47:40.486Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/system/health","metadata":{"correlationId":"4820eebf-4143-405e-a8f8-ffbe05f51296","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"4820eebf-4143-405e-a8f8-ffbe05f51296","url":"/api/system/health","userId":"anonymous"},"timestamp":"2026-02-23T12:47:40.538Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"<-- GET /api/system/health 200 12.313ms","metadata":{"contentLength":"54","correlationId":"4820eebf-4143-405e-a8f8-ffbe05f51296","durationMs":12.313,"eventType":"finish","requestId":"4820eebf-4143-405e-a8f8-ffbe05f51296","statusCode":200,"userId":"anonymous"},"timestamp":"2026-02-23T12:47:40.551Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/system/server-info","metadata":{"correlationId":"717256ec-ceb4-40a4-8612-5bdab10acfb5","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"717256ec-ceb4-40a4-8612-5bdab10acfb5","url":"/api/system/server-info","userId":"anonymous"},"timestamp":"2026-02-23T12:47:40.578Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"<-- GET /api/system/server-info 200 8.158ms","metadata":{"contentLength":"148","correlationId":"717256ec-ceb4-40a4-8612-5bdab10acfb5","durationMs":8.158,"eventType":"finish","requestId":"717256ec-ceb4-40a4-8612-5bdab10acfb5","statusCode":200,"userId":"anonymous"},"timestamp":"2026-02-23T12:47:40.586Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/system/metrics","metadata":{"correlationId":"4b84b2af-0df2-4f5d-9d59-14a2a32853d7","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"4b84b2af-0df2-4f5d-9d59-14a2a32853d7","url":"/api/system/metrics","userId":"anonymous"},"timestamp":"2026-02-23T12:47:40.611Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"<-- GET /api/system/metrics 200 17.054ms","metadata":{"correlationId":"4b84b2af-0df2-4f5d-9d59-14a2a32853d7","durationMs":17.054,"eventType":"finish","requestId":"4b84b2af-0df2-4f5d-9d59-14a2a32853d7","statusCode":200,"userId":"anonymous"},"timestamp":"2026-02-23T12:47:40.628Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/non-existent-route","metadata":{"correlationId":"1937cdcb-b719-4684-95a4-94523c717656","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"1937cdcb-b719-4684-95a4-94523c717656","url":"/api/non-existent-route","userId":"anonymous"},"timestamp":"2026-02-23T12:47:40.651Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Route not found: GET /api/non-existent-route","metadata":{"requestId":"1937cdcb-b719-4684-95a4-94523c717656"},"timestamp":"2026-02-23T12:47:40.656Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"<-- GET /api/non-existent-route 404 10.650ms","metadata":{"contentLength":"170","correlationId":"1937cdcb-b719-4684-95a4-94523c717656","durationMs":10.65,"eventType":"finish","requestId":"1937cdcb-b719-4684-95a4-94523c717656","statusCode":404,"userId":"anonymous"},"timestamp":"2026-02-23T12:47:40.661Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/unit/application/services/group.admin.service.spec.ts
PASS tests/unit/api/middlewares/validation.middleware.spec.ts
  ΓùÅ Console

    console.log
      Validation Middleware - req.body: { name: 'John Doe', age: 30 }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'name', 'age' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"name":"John Doe","age":30}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      Validation Middleware - req.body: { name: '', age: 17 }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'name', 'age' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"name":"","age":17}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      Validation Middleware - req.body: { name: 'Jane Doe', age: 25 }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'name', 'age' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"name":"Jane Doe","age":25}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      Validation Middleware - req.body: { name: 'test' }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'name' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"name":"test"}

      at src/api/middlewares/validation.middleware.ts:23:21

PASS tests/unit/infrastructure/logging/WinstonLogger.spec.ts
  ΓùÅ Console

    console.info
      [WinstonLogger] Logger initialized with level "info" in "development" environment.

      at WinstonLogger.initializeLogger (src/infrastructure/logging/WinstonLogger.ts:68:17)

    console.info
      [WinstonLogger] Logger initialized with level "debug" in "development" environment.

      at WinstonLogger.initializeLogger (src/infrastructure/logging/WinstonLogger.ts:68:17)

    console.info
      [WinstonLogger] CloudWatch transport configured for group "test-log-group" and stream "test-log-stream"

      at WinstonLogger.initializeLogger (src/infrastructure/logging/WinstonLogger.ts:51:25)

    console.info
      [WinstonLogger] Logger initialized with level "info" in "production" environment.

      at WinstonLogger.initializeLogger (src/infrastructure/logging/WinstonLogger.ts:68:17)

    console.info
      [WinstonLogger] CloudWatch transport configured for group "test-log-group" and stream "test-log-stream"

      at WinstonLogger.initializeLogger (src/infrastructure/logging/WinstonLogger.ts:51:25)

    console.info
      [WinstonLogger] Elasticsearch transport configured for host "http://localhost:9200"

      at WinstonLogger.initializeLogger (src/infrastructure/logging/WinstonLogger.ts:64:25)

    console.info
      [WinstonLogger] Logger initialized with level "info" in "production" environment.

      at WinstonLogger.initializeLogger (src/infrastructure/logging/WinstonLogger.ts:68:17)

    console.info
      [WinstonLogger] Logger initialized with level "info" in "development" environment.

      at WinstonLogger.initializeLogger (src/infrastructure/logging/WinstonLogger.ts:68:17)

    console.info
      [WinstonLogger] Logger initialized with level "debug" in "development" environment.

      at WinstonLogger.initializeLogger (src/infrastructure/logging/WinstonLogger.ts:68:17)

    console.info
      [WinstonLogger] Logger initialized with level "debug" in "development" environment.

      at WinstonLogger.initializeLogger (src/infrastructure/logging/WinstonLogger.ts:68:17)

    console.info
      [WinstonLogger] Logger initialized with level "debug" in "development" environment.

      at WinstonLogger.initializeLogger (src/infrastructure/logging/WinstonLogger.ts:68:17)

    console.info
      [WinstonLogger] Logger initialized with level "debug" in "development" environment.

      at WinstonLogger.initializeLogger (src/infrastructure/logging/WinstonLogger.ts:68:17)

    console.info
      [WinstonLogger] Logger initialized with level "debug" in "development" environment.

      at WinstonLogger.initializeLogger (src/infrastructure/logging/WinstonLogger.ts:68:17)

    console.info
      [WinstonLogger] Logger initialized with level "debug" in "development" environment.

      at WinstonLogger.initializeLogger (src/infrastructure/logging/WinstonLogger.ts:68:17)

    console.info
      [WinstonLogger] Logger initialized with level "debug" in "development" environment.

      at WinstonLogger.initializeLogger (src/infrastructure/logging/WinstonLogger.ts:68:17)

    console.info
      [WinstonLogger] Logger initialized with level "debug" in "development" environment.

      at WinstonLogger.initializeLogger (src/infrastructure/logging/WinstonLogger.ts:68:17)

    console.info
      [WinstonLogger] Logger initialized with level "debug" in "development" environment.

      at WinstonLogger.initializeLogger (src/infrastructure/logging/WinstonLogger.ts:68:17)

PASS tests/unit/api/controllers/policy.admin.controller.spec.ts
PASS tests/unit/api/controllers/group.admin.controller.spec.ts
PASS tests/unit/api/middlewares/error.middleware.spec.ts
PASS tests/unit/infrastructure/resilience/circuit-breaker.config.spec.ts
PASS tests/unit/api/controllers/user.admin.controller.spec.ts
PASS tests/unit/infrastructure/resilience/applyResilience.spec.ts
PASS tests/unit/api/middlewares/requestMetrics.middleware.spec.ts
PASS tests/unit/api/middlewares/requestLogger.middleware.spec.ts
PASS tests/unit/api/middlewares/requestId.middleware.spec.ts
PASS tests/unit/infrastructure/monitoring/metrics.spec.ts
FAIL tests/integration/Adapter/CognitoUserMgmtAdapter.integration.spec.ts (7.011 s)
  ΓùÅ Console

    console.info
      [ConfigService] Reading configuration from process.env (expected to be populated by --env-file)

      at new EnvironmentConfigService (src/infrastructure/config/EnvironmentConfigService.ts:36:17)
          at Array.map (<anonymous>)

    console.debug
      [ConfigService] Configuration loaded (keys only): [
        'ALLUSERSPROFILE',
        'ANDROID_HOME',
        'ANTIGRAVITY_AGENT',
        'ANTIGRAVITY_CLI_ALIAS',
        'APPDATA',
        'AWS_ACCESS_KEY_ID',
        'AWS_REGION',
        'AWS_SECRET_ACCESS_KEY',
        'ChocolateyInstall',
        'ChocolateyLastPathUpdate',
        'CHROME_CRASHPAD_PIPE_NAME',
        'CLASSPATH',
        'COGNITO_CLIENT_ID',
        'COGNITO_ISSUER',
        'COGNITO_JWKS_URI',
        'COGNITO_USER_POOL_ID',
        'COLOR',
        'COLORTERM',
        'CommonProgramFiles',
        'CommonProgramFiles(x86)',
        'CommonProgramW6432',
        'COMPUTERNAME',
        'ComSpec',
        'DriverData',
        'EDITOR',
        'GIT_ASKPASS',
        'GRADLE_HOME',
        'HOME',
        'HOMEDRIVE',
        'HOMEPATH',
        'INIT_CWD',
        'INTEL_DEV_REDIST',
        'JAVA_HOME',
        'JEST_WORKER_ID',
        'LANG',
        'LOCALAPPDATA',
        'LOGONSERVER',
        'LOG_LEVEL',
        'MICROSOFT_WINDOWSAPPRUNTIME_BASE_DIRECTORY',
        'MIC_LD_LIBRARY_PATH',
        'NODE',
        'NODE_ENV',
        'NODE_PATH',
        'npm_command',
        'npm_config_cache',
        'npm_config_globalconfig',
        'npm_config_global_prefix',
        'npm_config_init_module',
        'npm_config_local_prefix',
        'npm_config_node_gyp',
        'npm_config_noproxy',
        'npm_config_npm_version',
        'npm_config_prefix',
        'npm_config_userconfig',
        'npm_config_user_agent',
        'npm_execpath',
        'npm_lifecycle_event',
        'npm_lifecycle_script',
        'npm_node_execpath',
        'npm_package_json',
        'npm_package_name',
        'npm_package_version',
        'NUMBER_OF_PROCESSORS',
        'NVM_HOME',
        'NVM_SYMLINK',
        'OneDrive',
        'OneDriveConsumer',
        'OS',
        'PAGER',
        'Path',
        'PATHEXT',
        'PNPM_HOME',
        'PORT',
        'POSH_INSTALLER',
        'POSH_THEMES_PATH',
        'POWERSHELL_DISTRIBUTION_CHANNEL',
        'PROCESSOR_ARCHITECTURE',
        'PROCESSOR_IDENTIFIER',
        'PROCESSOR_LEVEL',
        'PROCESSOR_REVISION',
        'ProgramData',
        'ProgramFiles',
        'ProgramFiles(x86)',
        'ProgramW6432',
        'PROMPT',
        'PSModulePath',
        'PUBLIC',
        'RUN_COGNITO_INTEGRATION_TESTS',
        'SystemDrive',
        'SystemRoot',
        'TEMP',
        'TERM_PROGRAM',
        'TERM_PROGRAM_VERSION',
        'TMP',
        'TS_JEST',
        'USERDOMAIN',
        'USERDOMAIN_ROAMINGPROFILE',
        'USERNAME',
        'USERPROFILE',
        'VSCODE_GIT_ASKPASS_EXTRA_ARGS',
        ... 8 more items
      ]

      at new EnvironmentConfigService (src/infrastructure/config/EnvironmentConfigService.ts:41:21)
          at Array.map (<anonymous>)

    console.info
      [ConfigService] Required configuration keys verified.

      at new EnvironmentConfigService (src/infrastructure/config/EnvironmentConfigService.ts:49:17)
          at Array.map (<anonymous>)

    console.info
      [WinstonLogger] Logger initialized with level "info" in "test" environment.

      at WinstonLogger.initializeLogger (src/infrastructure/logging/WinstonLogger.ts:68:17)
          at Array.map (<anonymous>)

    console.log
      {"level":"info","message":"CognitoUserMgmtAdapter initialized","metadata":{"region":"ap-south-1","userPoolId":"ap-south-1_7mqSevmEI"},"timestamp":"2026-02-23T12:47:37.229Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.warn
      Running Cognito integration tests against User Pool ID: ap-south-1_7mqSevmEI

      35 |                 throw new Error("Cognito adapter test running without TEST user pool ID configured. ABORTING.");
      36 |             }
    > 37 |             console.warn(`Running Cognito integration tests against User Pool ID: ${testPoolId}`);
         |                     ^
      38 |
      39 |             // Create shared resources
      40 |             const userDetails: AdminCreateUserDetails = {

      at tests/integration/Adapter/CognitoUserMgmtAdapter.integration.spec.ts:37:21
      at tests/integration/Adapter/CognitoUserMgmtAdapter.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/Adapter/CognitoUserMgmtAdapter.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/Adapter/CognitoUserMgmtAdapter.integration.spec.ts:28:26)

    console.log
      {"level":"info","message":"Admin successfully created user: primary-user-1771850857171","metadata":{},"timestamp":"2026-02-23T12:47:38.124Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"Admin successfully updated attributes for user: primary-user-1771850857171","metadata":{},"timestamp":"2026-02-23T12:47:38.305Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"Admin successfully created group: primary-group-1771850857171","metadata":{},"timestamp":"2026-02-23T12:47:38.531Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"CircuitBreaker (UnnamedService) failure detected.","metadata":{"error":{"message":"User account already exists","name":"UsernameExistsException","stack":"UsernameExistsException: User account already exists\n    at de_UsernameExistsExceptionRes (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@aws-sdk+client-cognito-identity-provider@3.879.0\\node_modules\\@aws-sdk\\client-cognito-identity-provider\\dist-cjs\\index.js:5124:21)\n    at de_CommandError (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@aws-sdk+client-cognito-identity-provider@3.879.0\\node_modules\\@aws-sdk\\client-cognito-identity-provider\\dist-cjs\\index.js:4616:19)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+middleware-serde@4.0.9\\node_modules\\@smithy\\middleware-serde\\dist-cjs\\index.js:36:20\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+core@3.9.0\\node_modules\\@smithy\\core\\dist-cjs\\index.js:193:18\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+middleware-retry@4.1.20\\node_modules\\@smithy\\middleware-retry\\dist-cjs\\index.js:320:38\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@aws-sdk+middleware-logger@3.876.0\\node_modules\\@aws-sdk\\middleware-logger\\dist-cjs\\index.js:33:22"}},"timestamp":"2026-02-23T12:47:39.111Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"CircuitBreaker (UnnamedService) opened. Service failing.","metadata":{},"timestamp":"2026-02-23T12:47:39.122Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Cognito Admin error during adminCreateUser","metadata":{"error":{"errorMessage":"User account already exists","errorName":"UsernameExistsException","stack":"UsernameExistsException: User account already exists\n    at de_UsernameExistsExceptionRes (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@aws-sdk+client-cognito-identity-provider@3.879.0\\node_modules\\@aws-sdk\\client-cognito-identity-provider\\dist-cjs\\index.js:5124:21)\n    at de_CommandError (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@aws-sdk+client-cognito-identity-provider@3.879.0\\node_modules\\@aws-sdk\\client-cognito-identity-provider\\dist-cjs\\index.js:4616:19)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+middleware-serde@4.0.9\\node_modules\\@smithy\\middleware-serde\\dist-cjs\\index.js:36:20\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+core@3.9.0\\node_modules\\@smithy\\core\\dist-cjs\\index.js:193:18\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+middleware-retry@4.1.20\\node_modules\\@smithy\\middleware-retry\\dist-cjs\\index.js:320:38\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@aws-sdk+middleware-logger@3.876.0\\node_modules\\@aws-sdk\\middleware-logger\\dist-cjs\\index.js:33:22"}},"timestamp":"2026-02-23T12:47:39.124Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)
          at Generator.throw (<anonymous>)

    console.log
      {"level":"error","message":"CircuitBreaker (UnnamedService) failure detected.","metadata":{"error":{"message":"User does not exist.","name":"UserNotFoundException","stack":"UserNotFoundException: User does not exist.\n    at de_UserNotFoundExceptionRes (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@aws-sdk+client-cognito-identity-provider@3.879.0\\node_modules\\@aws-sdk\\client-cognito-identity-provider\\dist-cjs\\index.js:5142:21)\n    at de_CommandError (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@aws-sdk+client-cognito-identity-provider@3.879.0\\node_modules\\@aws-sdk\\client-cognito-identity-provider\\dist-cjs\\index.js:4580:19)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+middleware-serde@4.0.9\\node_modules\\@smithy\\middleware-serde\\dist-cjs\\index.js:36:20\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+core@3.9.0\\node_modules\\@smithy\\core\\dist-cjs\\index.js:193:18\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+middleware-retry@4.1.20\\node_modules\\@smithy\\middleware-retry\\dist-cjs\\index.js:320:38\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@aws-sdk+middleware-logger@3.876.0\\node_modules\\@aws-sdk\\middleware-logger\\dist-cjs\\index.js:33:22"}},"timestamp":"2026-02-23T12:47:39.266Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"CircuitBreaker (UnnamedService) opened. Service failing.","metadata":{},"timestamp":"2026-02-23T12:47:39.268Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"CircuitBreaker (UnnamedService) failure detected.","metadata":{"error":{"message":"A group with the name already exists.","name":"GroupExistsException","stack":"GroupExistsException: A group with the name already exists.\n    at de_GroupExistsExceptionRes (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@aws-sdk+client-cognito-identity-provider@3.879.0\\node_modules\\@aws-sdk\\client-cognito-identity-provider\\dist-cjs\\index.js:4827:21)\n    at de_CommandError (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@aws-sdk+client-cognito-identity-provider@3.879.0\\node_modules\\@aws-sdk\\client-cognito-identity-provider\\dist-cjs\\index.js:4682:19)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+middleware-serde@4.0.9\\node_modules\\@smithy\\middleware-serde\\dist-cjs\\index.js:36:20\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+core@3.9.0\\node_modules\\@smithy\\core\\dist-cjs\\index.js:193:18\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+middleware-retry@4.1.20\\node_modules\\@smithy\\middleware-retry\\dist-cjs\\index.js:320:38\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@aws-sdk+middleware-logger@3.876.0\\node_modules\\@aws-sdk\\middleware-logger\\dist-cjs\\index.js:33:22"}},"timestamp":"2026-02-23T12:47:39.639Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"CircuitBreaker (UnnamedService) opened. Service failing.","metadata":{},"timestamp":"2026-02-23T12:47:39.642Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Cognito Admin error during adminCreateGroup","metadata":{"error":{"errorMessage":"A group with the name already exists.","errorName":"GroupExistsException","stack":"GroupExistsException: A group with the name already exists.\n    at de_GroupExistsExceptionRes (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@aws-sdk+client-cognito-identity-provider@3.879.0\\node_modules\\@aws-sdk\\client-cognito-identity-provider\\dist-cjs\\index.js:4827:21)\n    at de_CommandError (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@aws-sdk+client-cognito-identity-provider@3.879.0\\node_modules\\@aws-sdk\\client-cognito-identity-provider\\dist-cjs\\index.js:4682:19)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+middleware-serde@4.0.9\\node_modules\\@smithy\\middleware-serde\\dist-cjs\\index.js:36:20\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+core@3.9.0\\node_modules\\@smithy\\core\\dist-cjs\\index.js:193:18\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+middleware-retry@4.1.20\\node_modules\\@smithy\\middleware-retry\\dist-cjs\\index.js:320:38\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@aws-sdk+middleware-logger@3.876.0\\node_modules\\@aws-sdk\\middleware-logger\\dist-cjs\\index.js:33:22"}},"timestamp":"2026-02-23T12:47:39.643Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)
          at Generator.throw (<anonymous>)

    console.log
      {"level":"info","message":"Admin successfully added user primary-user-1771850857171 to group primary-group-1771850857171","metadata":{},"timestamp":"2026-02-23T12:47:39.882Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"Admin successfully removed user primary-user-1771850857171 from group primary-group-1771850857171","metadata":{},"timestamp":"2026-02-23T12:47:40.203Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"Admin successfully updated attributes for user: primary-user-1771850857171","metadata":{},"timestamp":"2026-02-23T12:47:40.520Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"Admin successfully disabled user: primary-user-1771850857171","metadata":{},"timestamp":"2026-02-23T12:47:40.824Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"Admin successfully enabled user: primary-user-1771850857171","metadata":{},"timestamp":"2026-02-23T12:47:41.081Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"Admin successfully set password for user: primary-user-1771850857171","metadata":{},"timestamp":"2026-02-23T12:47:41.449Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Cleaning up all Cognito resources...

      at tests/integration/Adapter/CognitoUserMgmtAdapter.integration.spec.ts:61:17

    console.log
      {"level":"info","message":"Admin successfully removed user primary-user-1771850857171 from group primary-group-1771850857171","metadata":{},"timestamp":"2026-02-23T12:47:41.902Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"Admin successfully deleted user: primary-user-1771850857171","metadata":{},"timestamp":"2026-02-23T12:47:42.136Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Cleaned up user: primary-user-1771850857171

      at tests/integration/Adapter/CognitoUserMgmtAdapter.integration.spec.ts:78:25

    console.log
      {"level":"info","message":"Request to deactivate group: primary-group-1771850857171.","metadata":{},"timestamp":"2026-02-23T12:47:42.137Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"Admin successfully deactivated group: primary-group-1771850857171","metadata":{},"timestamp":"2026-02-23T12:47:42.384Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Cleaned up group: primary-group-1771850857171

      at tests/integration/Adapter/CognitoUserMgmtAdapter.integration.spec.ts:90:25

  ΓùÅ CognitoUserMgmtAdapter Integration Tests ΓÇ║ should list users, groups, and users in a group

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      176 |         // List groups
      177 |         const groupsResult = await adapter.adminListGroups();
    > 178 |         expect(groupsResult.groups.some(g => g.GroupName === primaryGroupName)).toBe(true);
          |                                                                                 ^
      179 |
      180 |         // List users in group
      181 |         await adapter.adminAddUserToGroup(primaryUsername, primaryGroupName);

      at tests/integration/Adapter/CognitoUserMgmtAdapter.integration.spec.ts:178:81
      at fulfilled (tests/integration/Adapter/CognitoUserMgmtAdapter.integration.spec.ts:5:58)

PASS tests/integration/Persistence/DynamoAssignmentRepository.integration.spec.ts (9.307 s)
  ΓùÅ Console

    console.log
      Table TestAssignments cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestAssignments cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestAssignments cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestAssignments cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestAssignments cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestAssignments cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestAssignments cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestAssignments cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestAssignments cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestAssignments cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestAssignments cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestAssignments cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestAssignments cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestAssignments cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestAssignments cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestAssignments cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestAssignments cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestAssignments cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestAssignments cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13


Summary of all failing tests
FAIL tests/e2e/group.admin.e2e.spec.ts (31.857 s)
  ΓùÅ Group Admin E2E ΓÇ║ should get the created group

    expected 200 "OK", got 500 "Internal Server Error"

      54 |             .get(`${BASE_API_PATH}/${groupName}`)
      55 |             .set('Authorization', `Bearer ${adminToken}`)
    > 56 |             .expect(200);
         |              ^
      57 |
      58 |         expect(response.body.groupName).toBe(groupName);
      59 |         expect(userMgmtAdapterMock.adminGetGroup).toHaveBeenCalledWith(groupName);

      at tests/e2e/group.admin.e2e.spec.ts:56:14
      at tests/e2e/group.admin.e2e.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/e2e/group.admin.e2e.spec.ts:4:12)
      at Object.<anonymous> (tests/e2e/group.admin.e2e.spec.ts:50:51)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Group Admin E2E ΓÇ║ should list the roles for the group

    expected 200 "OK", got 500 "Internal Server Error"

      81 |             .get(`${BASE_API_PATH}/${groupName}/roles`)
      82 |             .set('Authorization', `Bearer ${adminToken}`)
    > 83 |             .expect(200);
         |              ^
      84 |
      85 |         expect(response.body.roles).toContain(roleName); // Changed to response.body.roles
      86 |         expect(assignmentRepositoryMock.findRolesByGroupName).toHaveBeenCalledWith(expect.any(String), groupName);

      at tests/e2e/group.admin.e2e.spec.ts:83:14
      at tests/e2e/group.admin.e2e.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/e2e/group.admin.e2e.spec.ts:4:12)
      at Object.<anonymous> (tests/e2e/group.admin.e2e.spec.ts:76:58)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Group Admin E2E ΓÇ║ should remove the role from the group

    expected 204 "No Content", got 500 "Internal Server Error"

      93 |             .delete(`${BASE_API_PATH}/${groupName}/roles/${roleName}`)
      94 |             .set('Authorization', `Bearer ${adminToken}`)
    > 95 |             .expect(204);
         |              ^
      96 |         
      97 |         expect(assignmentRepositoryMock.removeRoleFromGroup).toHaveBeenCalledWith(expect.any(String), groupName, roleName);
      98 |     });

      at tests/e2e/group.admin.e2e.spec.ts:95:14
      at tests/e2e/group.admin.e2e.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/e2e/group.admin.e2e.spec.ts:4:12)
      at Object.<anonymous> (tests/e2e/group.admin.e2e.spec.ts:89:60)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Group Admin E2E ΓÇ║ should delete the group

    expected 204 "No Content", got 500 "Internal Server Error"

      104 |             .delete(`${BASE_API_PATH}/${groupName}`)
      105 |             .set('Authorization', `Bearer ${adminToken}`)
    > 106 |             .expect(204);
          |              ^
      107 |         
      108 |         expect(userMgmtAdapterMock.adminDeleteGroup).toHaveBeenCalledWith(groupName);
      109 |     });

      at tests/e2e/group.admin.e2e.spec.ts:106:14
      at tests/e2e/group.admin.e2e.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/e2e/group.admin.e2e.spec.ts:4:12)
      at Object.<anonymous> (tests/e2e/group.admin.e2e.spec.ts:100:46)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

FAIL tests/e2e/user.admin.e2e.spec.ts (32.165 s)
  ΓùÅ User Admin E2E ΓÇ║ should create a new user

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    - Expected
    + Received

      Object {
    +   "body": Object {
          "temporaryPassword": "Password123!",
          "userAttributes": Object {
            "email": "test-user-1771850853699@example.com",
            "name": "Test User",
          },
          "username": "test-user-1771850853699",
    +   },
      },

    Number of calls: 1

      53 |         expect(response.status).toBe(201); // Added explicit status check
      54 |         expect(response.body.username).toBe(username);
    > 55 |         expect(userMgmtAdapterMock.adminCreateUser).toHaveBeenCalledWith(userDetails);
         |                                                     ^
      56 |     });
      57 |
      58 |     it('should get the created user', async () => {

      at tests/e2e/user.admin.e2e.spec.ts:55:53
      at fulfilled (tests/e2e/user.admin.e2e.spec.ts:5:58)

  ΓùÅ User Admin E2E ΓÇ║ should update the user attributes

    expected 204 "No Content", got 404 "Not Found"

      81 |             .set('Authorization', `Bearer ${adminToken}`)
      82 |             .send(attributesToUpdate)
    > 83 |             .expect(204);
         |              ^
      84 |         
      85 |         expect(userMgmtAdapterMock.adminUpdateUserAttributes).toHaveBeenCalledWith({ username, ...attributesToUpdate });
      86 |     });

      at tests/e2e/user.admin.e2e.spec.ts:83:14
      at tests/e2e/user.admin.e2e.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/e2e/user.admin.e2e.spec.ts:4:12)
      at Object.<anonymous> (tests/e2e/user.admin.e2e.spec.ts:71:56)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ User Admin E2E ΓÇ║ should add a user to a group

    expected 204 "No Content", got 200 "OK"

       96 |             .set('Authorization', `Bearer ${adminToken}`)
       97 |             .send({ groupName })
    >  98 |             .expect(204);
          |              ^
       99 |         
      100 |         expect(userMgmtAdapterMock.adminAddUserToGroup).toHaveBeenCalledWith(username, groupName);
      101 |     });

      at tests/e2e/user.admin.e2e.spec.ts:98:14
      at tests/e2e/user.admin.e2e.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/e2e/user.admin.e2e.spec.ts:4:12)
      at Object.<anonymous> (tests/e2e/user.admin.e2e.spec.ts:91:51)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ User Admin E2E ΓÇ║ should remove the user from the group

    expected 204 "No Content", got 500 "Internal Server Error"

      120 |             .delete(`${BASE_API_PATH}/${username}/groups/${groupName}`)
      121 |             .set('Authorization', `Bearer ${adminToken}`)
    > 122 |             .expect(204);
          |              ^
      123 |         
      124 |         expect(userMgmtAdapterMock.adminRemoveUserFromGroup).toHaveBeenCalledWith(username, groupName);
      125 |     });

      at tests/e2e/user.admin.e2e.spec.ts:122:14
      at tests/e2e/user.admin.e2e.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/e2e/user.admin.e2e.spec.ts:4:12)
      at Object.<anonymous> (tests/e2e/user.admin.e2e.spec.ts:116:60)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ User Admin E2E ΓÇ║ should disable the user

    expected 204 "No Content", got 404 "Not Found"

      131 |             .post(`${BASE_API_PATH}/${username}/disable`)
      132 |             .set('Authorization', `Bearer ${adminToken}`)
    > 133 |             .expect(204);
          |              ^
      134 |         
      135 |         expect(userMgmtAdapterMock.adminDisableUser).toHaveBeenCalledWith(username);
      136 |     });

      at tests/e2e/user.admin.e2e.spec.ts:133:14
      at tests/e2e/user.admin.e2e.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/e2e/user.admin.e2e.spec.ts:4:12)
      at Object.<anonymous> (tests/e2e/user.admin.e2e.spec.ts:127:46)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ User Admin E2E ΓÇ║ should enable the user

    expected 204 "No Content", got 404 "Not Found"

      142 |             .post(`${BASE_API_PATH}/${username}/enable`)
      143 |             .set('Authorization', `Bearer ${adminToken}`)
    > 144 |             .expect(204);
          |              ^
      145 |         
      146 |         expect(userMgmtAdapterMock.adminEnableUser).toHaveBeenCalledWith(username);
      147 |     });

      at tests/e2e/user.admin.e2e.spec.ts:144:14
      at tests/e2e/user.admin.e2e.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/e2e/user.admin.e2e.spec.ts:4:12)
      at Object.<anonymous> (tests/e2e/user.admin.e2e.spec.ts:138:45)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

FAIL tests/integration/routes/role.admin.routes.integration.spec.ts (32.65 s)
  ΓùÅ Integration Tests: Role Admin Routes (/api/admin/roles) ΓÇ║ GET /api/admin/roles/:roleName ΓÇ║ should return 200 OK with role data if role exists

    expected 200 "OK", got 500 "Internal Server Error"

      142 |                 .get(`${BASE_API_PATH}/${targetRoleName}`)
      143 |                 .set(MOCK_AUTH_HEADER)
    > 144 |                 .expect(HttpStatusCode.OK) // 200
          |                  ^
      145 |                 .expect(res => {
      146 |                     expect(res.body.roleName).toBe(targetRoleName);
      147 |                     expect(res.body.description).toBe('get role');

      at tests/integration/routes/role.admin.routes.integration.spec.ts:144:18
      at tests/integration/routes/role.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/role.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/role.admin.routes.integration.spec.ts:139:77)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Role Admin Routes (/api/admin/roles) ΓÇ║ GET /api/admin/roles/:roleName ΓÇ║ should return 404 Not Found if service returns null

    expected 404 "Not Found", got 500 "Internal Server Error"

      155 |                 .get(`${BASE_API_PATH}/${targetRoleName}`)
      156 |                 .set(MOCK_AUTH_HEADER)
    > 157 |                 .expect(HttpStatusCode.NOT_FOUND); // 404
          |                  ^
      158 |             expect(mockRoleAdminService.getRole).toHaveBeenCalledWith(expect.anything(), targetRoleName);
      159 |         });
      160 |

      at tests/integration/routes/role.admin.routes.integration.spec.ts:157:18
      at tests/integration/routes/role.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/role.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/role.admin.routes.integration.spec.ts:152:78)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Role Admin Routes (/api/admin/roles) ΓÇ║ DELETE /api/admin/roles/:roleName ΓÇ║ should return 204 No Content if service succeeds

    expected 204 "No Content", got 500 "Internal Server Error"

      215 |                 .delete(`${BASE_API_PATH}/${targetRoleName}`)
      216 |                 .set(MOCK_AUTH_HEADER)
    > 217 |                 .expect(HttpStatusCode.NO_CONTENT); // 204
          |                  ^
      218 |             expect(mockRoleAdminService.deleteRole).toHaveBeenCalledWith(expect.anything(), targetRoleName);
      219 |         });
      220 |

      at tests/integration/routes/role.admin.routes.integration.spec.ts:217:18
      at tests/integration/routes/role.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/role.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/role.admin.routes.integration.spec.ts:212:75)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Role Admin Routes (/api/admin/roles) ΓÇ║ DELETE /api/admin/roles/:roleName ΓÇ║ should return 404 Not Found if service throws RoleNotFoundError

    expected 404 "Not Found", got 500 "Internal Server Error"

      226 |                 .delete(`${BASE_API_PATH}/${targetRoleName}`)
      227 |                 .set(MOCK_AUTH_HEADER)
    > 228 |                 .expect(HttpStatusCode.NOT_FOUND); // 404
          |                  ^
      229 |             expect(mockRoleAdminService.deleteRole).toHaveBeenCalledWith(expect.anything(), targetRoleName);
      230 |         });
      231 |

      at tests/integration/routes/role.admin.routes.integration.spec.ts:228:18
      at tests/integration/routes/role.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/role.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/role.admin.routes.integration.spec.ts:221:90)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Role Admin Routes (/api/admin/roles) ΓÇ║ Permissions Management (/api/admin/roles/:roleName/permissions) ΓÇ║ DELETE /:roleName/permissions/:permissionName ΓÇ║ should return 204 No Content on successful removal

    expected 204 "No Content", got 500 "Internal Server Error"

      260 |                     .delete(`${BASE_API_PATH}/${targetRoleName}/permissions/${targetPermissionName}`)
      261 |                     .set(MOCK_AUTH_HEADER)
    > 262 |                     .expect(HttpStatusCode.NO_CONTENT); // 204
          |                      ^
      263 |                 expect(mockRoleAdminService.removePermissionFromRole).toHaveBeenCalledWith(expect.anything(), targetRoleName, targetPermissionName);
      264 |             });
      265 |         });

      at tests/integration/routes/role.admin.routes.integration.spec.ts:262:22
      at tests/integration/routes/role.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/role.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/role.admin.routes.integration.spec.ts:257:81)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Role Admin Routes (/api/admin/roles) ΓÇ║ Permissions Management (/api/admin/roles/:roleName/permissions) ΓÇ║ GET /:roleName/permissions ΓÇ║ should return 200 OK with a list of permission names

    expected 200 "OK", got 500 "Internal Server Error"

      272 |                     .get(`${BASE_API_PATH}/${targetRoleName}/permissions`)
      273 |                     .set(MOCK_AUTH_HEADER)
    > 274 |                     .expect(HttpStatusCode.OK) // 200
          |                      ^
      275 |                     .expect(res => {
      276 |                         expect(res.body.permissions).toEqual(mockPermissions);
      277 |                     });

      at tests/integration/routes/role.admin.routes.integration.spec.ts:274:22
      at tests/integration/routes/role.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/role.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/role.admin.routes.integration.spec.ts:268:83)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

FAIL tests/integration/routes/group.admin.routes.integration.spec.ts (32.889 s)
  ΓùÅ Integration Tests: Group Admin Routes (/api/admin/groups) ΓÇ║ GET /api/admin/groups/:groupName ΓÇ║ should return 200 OK with group data if group exists

    expected 200 "OK", got 500 "Internal Server Error"

      210 |                 .get(`${BASE_API_PATH}/${targetgroupName}`)
      211 |                 .set(MOCK_AUTH_HEADER)
    > 212 |                 .expect(HttpStatusCode.OK); // 200
          |                  ^
      213 |             expect(mockGroupAdminService.getGroup).toHaveBeenCalledWith(expect.anything(), targetgroupName);
      214 |         });
      215 |

      at tests/integration/routes/group.admin.routes.integration.spec.ts:212:18
      at tests/integration/routes/group.admin.routes.integration.spec.ts:9:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/group.admin.routes.integration.spec.ts:5:12)
      at Object.<anonymous> (tests/integration/routes/group.admin.routes.integration.spec.ts:207:79)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Group Admin Routes (/api/admin/groups) ΓÇ║ GET /api/admin/groups/:groupName ΓÇ║ should return 404 Not Found if service returns null

    expected 404 "Not Found", got 500 "Internal Server Error"

      219 |                 .get(`${BASE_API_PATH}/${targetgroupName}`)
      220 |                 .set(MOCK_AUTH_HEADER)
    > 221 |                 .expect(HttpStatusCode.NOT_FOUND); // 404 (Handled by controller)
          |                  ^
      222 |             expect(mockGroupAdminService.getGroup).toHaveBeenCalledWith(expect.anything(), targetgroupName);
      223 |         });
      224 |

      at tests/integration/routes/group.admin.routes.integration.spec.ts:221:18
      at tests/integration/routes/group.admin.routes.integration.spec.ts:9:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/group.admin.routes.integration.spec.ts:5:12)
      at Object.<anonymous> (tests/integration/routes/group.admin.routes.integration.spec.ts:216:78)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Group Admin Routes (/api/admin/groups) ΓÇ║ GET /api/admin/groups/:groupName ΓÇ║ should return 404 Not Found if service throws NotFoundError

    expected 404 "Not Found", got 500 "Internal Server Error"

      230 |                 .get(`${BASE_API_PATH}/${targetgroupName}`)
      231 |                 .set(MOCK_AUTH_HEADER)
    > 232 |                 .expect(HttpStatusCode.NOT_FOUND); // 404 (Handled by error middleware)
          |                  ^
      233 |             expect(mockGroupAdminService.getGroup).toHaveBeenCalledWith(expect.anything(), targetgroupName);
      234 |         });
      235 |

      at tests/integration/routes/group.admin.routes.integration.spec.ts:232:18
      at tests/integration/routes/group.admin.routes.integration.spec.ts:9:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/group.admin.routes.integration.spec.ts:5:12)
      at Object.<anonymous> (tests/integration/routes/group.admin.routes.integration.spec.ts:225:86)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Group Admin Routes (/api/admin/groups) ΓÇ║ GET /api/admin/groups/:groupName ΓÇ║ should return 400 Bad Request if groupName param is invalid

    expected 400 "Bad Request", got 500 "Internal Server Error"

      239 |                 .get(`${BASE_API_PATH}/${encodeURIComponent(invalidgroupName)}`) // URL encode it
      240 |                 .set(MOCK_AUTH_HEADER)
    > 241 |                 .expect(HttpStatusCode.BAD_REQUEST); // 400 (Handled by validation middleware)
          |                  ^
      242 |             expect(mockGroupAdminService.getGroup).not.toHaveBeenCalled();
      243 |         });
      244 |

      at tests/integration/routes/group.admin.routes.integration.spec.ts:241:18
      at tests/integration/routes/group.admin.routes.integration.spec.ts:9:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/group.admin.routes.integration.spec.ts:5:12)
      at Object.<anonymous> (tests/integration/routes/group.admin.routes.integration.spec.ts:236:86)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Group Admin Routes (/api/admin/groups) ΓÇ║ GET /api/admin/groups/:groupName ΓÇ║ should return 500 if the service fails unexpectedly

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: Anything, "Get-Group-Test"

    Number of calls: 0

      250 |                 .set(MOCK_AUTH_HEADER)
      251 |                 .expect(HttpStatusCode.INTERNAL_SERVER_ERROR); // 500
    > 252 |             expect(mockGroupAdminService.getGroup).toHaveBeenCalledWith(expect.anything(), targetgroupName);
          |                                                    ^
      253 |         });
      254 |
      255 |         it('should return 401 Unauthorized if token is missing', async () => {

      at tests/integration/routes/group.admin.routes.integration.spec.ts:252:52
      at fulfilled (tests/integration/routes/group.admin.routes.integration.spec.ts:6:58)

  ΓùÅ Integration Tests: Group Admin Routes (/api/admin/groups) ΓÇ║ DELETE /api/admin/groups/:groupName ΓÇ║ should return 204 No Content if service succeeds

    expected 204 "No Content", got 500 "Internal Server Error"

      269 |                 .delete(`${BASE_API_PATH}/${targetgroupName}`)
      270 |                 .set(MOCK_AUTH_HEADER)
    > 271 |                 .expect(HttpStatusCode.NO_CONTENT); // 204
          |                  ^
      272 |             expect(mockGroupAdminService.deleteGroup).toHaveBeenCalledWith(expect.anything(), targetgroupName);
      273 |         });
      274 |

      at tests/integration/routes/group.admin.routes.integration.spec.ts:271:18
      at tests/integration/routes/group.admin.routes.integration.spec.ts:9:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/group.admin.routes.integration.spec.ts:5:12)
      at Object.<anonymous> (tests/integration/routes/group.admin.routes.integration.spec.ts:266:75)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Group Admin Routes (/api/admin/groups) ΓÇ║ DELETE /api/admin/groups/:groupName ΓÇ║ should return 404 Not Found if service throws NotFoundError

    expected 404 "Not Found", got 500 "Internal Server Error"

      280 |                 .delete(`${BASE_API_PATH}/${targetgroupName}`)
      281 |                 .set(MOCK_AUTH_HEADER)
    > 282 |                 .expect(HttpStatusCode.NOT_FOUND); // 404
          |                  ^
      283 |             expect(mockGroupAdminService.deleteGroup).toHaveBeenCalledWith(expect.anything(), targetgroupName);
      284 |         });
      285 |

      at tests/integration/routes/group.admin.routes.integration.spec.ts:282:18
      at tests/integration/routes/group.admin.routes.integration.spec.ts:9:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/group.admin.routes.integration.spec.ts:5:12)
      at Object.<anonymous> (tests/integration/routes/group.admin.routes.integration.spec.ts:275:86)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Group Admin Routes (/api/admin/groups) ΓÇ║ DELETE /api/admin/groups/:groupName ΓÇ║ should return 400 Bad Request if groupName param is invalid

    expected 400 "Bad Request", got 500 "Internal Server Error"

      289 |                 .delete(`${BASE_API_PATH}/${encodeURIComponent(invalidgroupName)}`)
      290 |                 .set(MOCK_AUTH_HEADER)
    > 291 |                 .expect(HttpStatusCode.BAD_REQUEST); // 400
          |                  ^
      292 |             expect(mockGroupAdminService.deleteGroup).not.toHaveBeenCalled();
      293 |         });
      294 |

      at tests/integration/routes/group.admin.routes.integration.spec.ts:291:18
      at tests/integration/routes/group.admin.routes.integration.spec.ts:9:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/group.admin.routes.integration.spec.ts:5:12)
      at Object.<anonymous> (tests/integration/routes/group.admin.routes.integration.spec.ts:286:86)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Group Admin Routes (/api/admin/groups) ΓÇ║ DELETE /api/admin/groups/:groupName ΓÇ║ should return 500 if service fails unexpectedly

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: Anything, "Delete-Group-Test"

    Number of calls: 0

      300 |                 .set(MOCK_AUTH_HEADER)
      301 |                 .expect(HttpStatusCode.INTERNAL_SERVER_ERROR); // 500
    > 302 |             expect(mockGroupAdminService.deleteGroup).toHaveBeenCalledWith(expect.anything(), targetgroupName);
          |                                                       ^
      303 |         });
      304 |
      305 |         it('should return 401 Unauthorized if token is missing', async () => {

      at tests/integration/routes/group.admin.routes.integration.spec.ts:302:55
      at fulfilled (tests/integration/routes/group.admin.routes.integration.spec.ts:6:58)

FAIL tests/integration/routes/permission.admin.routes.integration.spec.ts (32.94 s)
  ΓùÅ Integration Tests: Permission Admin Routes (/api/admin/permissions) ΓÇ║ POST /api/admin/permissions ΓÇ║ should return 400 on validation error (e.g., missing permissionName)

    expect(received).toEqual(expected) // deep equality

    - Expected  - 1
    + Received  + 1

      Object {
    -   "body.permissionName": "Permission name is required",
    +   "permissionName": "Permission name is required",
      }

      128 |              expect(response.status).toBe(400);
      129 |              expect(response.body.name).toBe('ValidationError');
    > 130 |              expect(response.body.details).toEqual({'body.permissionName': 'Permission name is required'});
          |                                            ^
      131 |              expect(mockPermissionAdminService.createPermission).not.toHaveBeenCalled();
      132 |         });
      133 |

      at tests/integration/routes/permission.admin.routes.integration.spec.ts:130:44
      at fulfilled (tests/integration/routes/permission.admin.routes.integration.spec.ts:6:58)

  ΓùÅ Integration Tests: Permission Admin Routes (/api/admin/permissions) ΓÇ║ GET /api/admin/permissions/:permissionName ΓÇ║ should return 200 and the permission if found

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

      166 |                  .set('Authorization', TEST_ADMIN_TOKEN);
      167 |
    > 168 |              expect(response.status).toBe(200);
          |                                      ^
      169 |              expect(response.body.permissionName).toBe(permName);
      170 |              expect(mockPermissionAdminService.getPermission).toHaveBeenCalledWith(
      171 |                  expect.objectContaining({ id: 'test-admin-id-123' }),

      at tests/integration/routes/permission.admin.routes.integration.spec.ts:168:38
      at fulfilled (tests/integration/routes/permission.admin.routes.integration.spec.ts:6:58)

  ΓùÅ Integration Tests: Permission Admin Routes (/api/admin/permissions) ΓÇ║ GET /api/admin/permissions/:permissionName ΓÇ║ should return 404 if permission not found

    expect(received).toBe(expected) // Object.is equality

    Expected: 404
    Received: 500

      180 |                  .set('Authorization', TEST_ADMIN_TOKEN);
      181 |
    > 182 |              expect(response.status).toBe(404);
          |                                      ^
      183 |              // Check based on controller's response or NotFoundError handling in middleware
      184 |              expect(response.body.message).toContain('not found');
      185 |          });

      at tests/integration/routes/permission.admin.routes.integration.spec.ts:182:38
      at fulfilled (tests/integration/routes/permission.admin.routes.integration.spec.ts:6:58)

  ΓùÅ Integration Tests: Permission Admin Routes (/api/admin/permissions) ΓÇ║ DELETE /api/admin/permissions/:permissionName ΓÇ║ should return 204 on successful deletion

    expect(received).toBe(expected) // Object.is equality

    Expected: 204
    Received: 500

      275 |                  .set('Authorization', TEST_ADMIN_TOKEN);
      276 |
    > 277 |              expect(response.status).toBe(204);
          |                                      ^
      278 |              expect(mockPermissionAdminService.deletePermission).toHaveBeenCalledWith(
      279 |                  expect.objectContaining({ id: 'test-admin-id-123' }),
      280 |                  permName

      at tests/integration/routes/permission.admin.routes.integration.spec.ts:277:38
      at fulfilled (tests/integration/routes/permission.admin.routes.integration.spec.ts:6:58)

  ΓùÅ Integration Tests: Permission Admin Routes (/api/admin/permissions) ΓÇ║ DELETE /api/admin/permissions/:permissionName ΓÇ║ should return 404 if permission not found for deletion

    expect(received).toBe(expected) // Object.is equality

    Expected: 404
    Received: 500

      289 |                  .delete(`${BASE_API_PATH}/${permName}`)
      290 |                  .set('Authorization', TEST_ADMIN_TOKEN);
    > 291 |              expect(response.status).toBe(404);
          |                                      ^
      292 |          });
      293 |
      294 |          it('should return 401 if token is invalid/missing', async () => {

      at tests/integration/routes/permission.admin.routes.integration.spec.ts:291:38
      at fulfilled (tests/integration/routes/permission.admin.routes.integration.spec.ts:6:58)

  ΓùÅ Integration Tests: Permission Admin Routes (/api/admin/permissions) ΓÇ║ GET /api/admin/permissions/:permissionName/roles ΓÇ║ should return 200 and list of role names

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

      309 |                  .set('Authorization', TEST_ADMIN_TOKEN);
      310 |
    > 311 |              expect(response.status).toBe(200);
          |                                      ^
      312 |              expect(response.body).toEqual({ roles });
      313 |              expect(mockPermissionAdminService.listRolesForPermission).toHaveBeenCalledWith(
      314 |                  expect.objectContaining({ id: 'test-admin-id-123' }),

      at tests/integration/routes/permission.admin.routes.integration.spec.ts:311:38
      at fulfilled (tests/integration/routes/permission.admin.routes.integration.spec.ts:6:58)

  ΓùÅ Integration Tests: Permission Admin Routes (/api/admin/permissions) ΓÇ║ GET /api/admin/permissions/:permissionName/roles ΓÇ║ should return 404 if permission is not found

    expect(received).toBe(expected) // Object.is equality

    Expected: 404
    Received: 500

      324 |                  .get(`${BASE_API_PATH}/${permName}/roles`)
      325 |                  .set('Authorization', TEST_ADMIN_TOKEN);
    > 326 |              expect(response.status).toBe(404);
          |                                      ^
      327 |         });
      328 |          it('should return 401 if token is invalid/missing', async () => {
      329 |              const response = await request(app).get(`${BASE_API_PATH}/${permName}/roles`);

      at tests/integration/routes/permission.admin.routes.integration.spec.ts:326:38
      at fulfilled (tests/integration/routes/permission.admin.routes.integration.spec.ts:6:58)

FAIL tests/integration/routes/user.admin.routes.integration.spec.ts (33.526 s)
  ΓùÅ Integration Tests: User Admin Routes (/api/admin/users) ΓÇ║ Authentication Guard ΓÇ║ should allow access with the correct test bypass token

    expected 200 "OK", got 500 "Internal Server Error"

      234 |                 .get('/api/admin/users')
      235 |                 .set('Authorization', TEST_ADMIN_TOKEN)
    > 236 |                 .expect(HttpStatusCode.OK); // 200
          |                  ^
      237 |         });
      238 |     });
      239 |     // --- POST Create User ---

      at tests/integration/routes/user.admin.routes.integration.spec.ts:236:18
      at tests/integration/routes/user.admin.routes.integration.spec.ts:9:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/user.admin.routes.integration.spec.ts:5:12)
      at Object.<anonymous> (tests/integration/routes/user.admin.routes.integration.spec.ts:231:81)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: User Admin Routes (/api/admin/users) ΓÇ║ POST /api/admin/users ΓÇ║ should return 400 Bad Request if validation fails

    expected 400 "Bad Request", got 201 "Created"

      275 |                 .set(MOCK_AUTH_HEADER)
      276 |                 .send(invalidPayload)
    > 277 |                 .expect(HttpStatusCode.BAD_REQUEST); // 400
          |                  ^
      278 |             expect(mockUserAdminService.createUser).not.toHaveBeenCalled();
      279 |         });
      280 |

      at tests/integration/routes/user.admin.routes.integration.spec.ts:277:18
      at tests/integration/routes/user.admin.routes.integration.spec.ts:9:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/user.admin.routes.integration.spec.ts:5:12)
      at Object.<anonymous> (tests/integration/routes/user.admin.routes.integration.spec.ts:271:76)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: User Admin Routes (/api/admin/users) ΓÇ║ GET /api/admin/users ΓÇ║ should return 200 OK with a list of users

    expected 200 "OK", got 500 "Internal Server Error"

      313 |                 .get('/api/admin/users')
      314 |                 .set(MOCK_AUTH_HEADER)
    > 315 |                 .expect(HttpStatusCode.OK); // 200
          |                  ^
      316 |             expect(mockUserAdminService.listUsers).toHaveBeenCalledTimes(1);
      317 |         });
      318 |

      at tests/integration/routes/user.admin.routes.integration.spec.ts:315:18
      at tests/integration/routes/user.admin.routes.integration.spec.ts:9:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/user.admin.routes.integration.spec.ts:5:12)
      at Object.<anonymous> (tests/integration/routes/user.admin.routes.integration.spec.ts:306:68)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: User Admin Routes (/api/admin/users) ΓÇ║ GET /api/admin/users ΓÇ║ should pass query parameters to the service

    expected 200 "OK", got 500 "Internal Server Error"

      323 |                 .query({ limit: 5, filter: 'status="Enabled"', paginationToken: 'prev' })
      324 |                 .set(MOCK_AUTH_HEADER)
    > 325 |                 .expect(HttpStatusCode.OK);
          |                  ^
      326 |             expect(mockUserAdminService.listUsers).toHaveBeenCalledWith(expect.anything(), { limit: 5, filter: 'status="Enabled"', paginationToken: 'prev' });
      327 |         });
      328 |

      at tests/integration/routes/user.admin.routes.integration.spec.ts:325:18
      at tests/integration/routes/user.admin.routes.integration.spec.ts:9:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/user.admin.routes.integration.spec.ts:5:12)
      at Object.<anonymous> (tests/integration/routes/user.admin.routes.integration.spec.ts:319:70)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: User Admin Routes (/api/admin/users) ΓÇ║ GET /api/admin/users ΓÇ║ should return 500 if the service fails unexpectedly

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 1
    Received number of calls: 0

      334 |                 .set(MOCK_AUTH_HEADER)
      335 |                 .expect(HttpStatusCode.INTERNAL_SERVER_ERROR); // 500
    > 336 |             expect(mockUserAdminService.listUsers).toHaveBeenCalledTimes(1);
          |                                                    ^
      337 |         });
      338 |     });
      339 |

      at tests/integration/routes/user.admin.routes.integration.spec.ts:336:52
      at fulfilled (tests/integration/routes/user.admin.routes.integration.spec.ts:6:58)

  ΓùÅ Integration Tests: User Admin Routes (/api/admin/users) ΓÇ║ User Group Management ΓÇ║ DELETE /api/admin/users/:username/groups/:groupName ΓÇ║ should return 204 No Content when removing user from group

    expected 204 "No Content", got 500 "Internal Server Error"

      658 |                     .delete(`/api/admin/users/${targetUsername}/groups/${testGroupName}`)
      659 |                     .set(MOCK_AUTH_HEADER)
    > 660 |                     .expect(HttpStatusCode.NO_CONTENT); // 204
          |                      ^
      661 |                 expect(mockUserAdminService.removeUserFromGroup).toHaveBeenCalledWith(expect.anything(), targetUsername, testGroupName);
      662 |             });
      663 |

      at tests/integration/routes/user.admin.routes.integration.spec.ts:660:22
      at tests/integration/routes/user.admin.routes.integration.spec.ts:9:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/user.admin.routes.integration.spec.ts:5:12)
      at Object.<anonymous> (tests/integration/routes/user.admin.routes.integration.spec.ts:655:89)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: User Admin Routes (/api/admin/users) ΓÇ║ User Group Management ΓÇ║ DELETE /api/admin/users/:username/groups/:groupName ΓÇ║ should return 404 if user/group not found (via service error)

    expected 404 "Not Found", got 500 "Internal Server Error"

      668 |                     .delete(`/api/admin/users/${targetUsername}/groups/${testGroupName}`)
      669 |                     .set(MOCK_AUTH_HEADER)
    > 670 |                     .expect(HttpStatusCode.NOT_FOUND); // 404
          |                      ^
      671 |                 expect(mockUserAdminService.removeUserFromGroup).toHaveBeenCalledTimes(1);
      672 |
      673 |

      at tests/integration/routes/user.admin.routes.integration.spec.ts:670:22
      at tests/integration/routes/user.admin.routes.integration.spec.ts:9:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/user.admin.routes.integration.spec.ts:5:12)
      at Object.<anonymous> (tests/integration/routes/user.admin.routes.integration.spec.ts:664:92)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

FAIL tests/integration/routes/policy.admin.routes.integration.spec.ts (34.238 s)
  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId ΓÇ║ should return 200 OK with policy data if policy exists

    expected 200 "OK", got 500 "Internal Server Error"

      134 |                 .get(`${BASE_API_PATH}/${targetPolicyId}`)
      135 |                 .set(MOCK_AUTH_HEADER)
    > 136 |                 .expect(HttpStatusCode.OK) // 200
          |                  ^
      137 |                 .expect(res => {
      138 |                     expect(res.body.id).toBe(targetPolicyId);
      139 |                     expect(res.body.policyName).toBe('get.policy');

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:136:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:131:81)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId ΓÇ║ should return 404 Not Found if service returns null

    expected 404 "Not Found", got 500 "Internal Server Error"

      147 |                 .get(`${BASE_API_PATH}/${targetPolicyId}`)
      148 |                 .set(MOCK_AUTH_HEADER)
    > 149 |                 .expect(HttpStatusCode.NOT_FOUND); // 404
          |                  ^
      150 |             expect(mockPolicyAdminService.getPolicy).toHaveBeenCalledWith(expect.anything(), targetPolicyId);
      151 |         });
      152 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:149:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:144:78)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId ΓÇ║ should return 404 Not Found if service throws PolicyNotFoundError

    expected 404 "Not Found", got 500 "Internal Server Error"

      158 |                 .get(`${BASE_API_PATH}/${targetPolicyId}`)
      159 |                 .set(MOCK_AUTH_HEADER)
    > 160 |                 .expect(HttpStatusCode.NOT_FOUND); // 404
          |                  ^
      161 |             expect(mockPolicyAdminService.getPolicy).toHaveBeenCalledWith(expect.anything(), targetPolicyId);
      162 |         });
      163 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:160:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:153:92)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId ΓÇ║ should return 400 Bad Request if policyId param is not a valid UUID

    expected 400 "Bad Request", got 500 "Internal Server Error"

      167 |                 .get(`${BASE_API_PATH}/${invalidId}`)
      168 |                 .set(MOCK_AUTH_HEADER)
    > 169 |                 .expect(HttpStatusCode.BAD_REQUEST); // 400 (Handled by validation middleware)
          |                  ^
      170 |             expect(mockPolicyAdminService.getPolicy).not.toHaveBeenCalled();
      171 |         });
      172 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:169:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:164:94)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId ΓÇ║ should return 500 if the service fails unexpectedly

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: Anything, "a1b2c3d4-e5f6-7890-1234-567890abcdef"

    Number of calls: 0

      178 |                 .set(MOCK_AUTH_HEADER)
      179 |                 .expect(HttpStatusCode.INTERNAL_SERVER_ERROR); // 500
    > 180 |             expect(mockPolicyAdminService.getPolicy).toHaveBeenCalledWith(expect.anything(), targetPolicyId);
          |                                                      ^
      181 |         });
      182 |
      183 |         it('should return 401 Unauthorized if token is missing', async () => {

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:180:54
      at fulfilled (tests/integration/routes/policy.admin.routes.integration.spec.ts:5:58)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies ΓÇ║ should return 200 OK with a list of policies

    expected 200 "OK", got 500 "Internal Server Error"

      196 |                  .get(BASE_API_PATH)
      197 |                  .set(MOCK_AUTH_HEADER)
    > 198 |                  .expect(HttpStatusCode.OK); // 200
          |                   ^
      199 |              expect(mockPolicyAdminService.listPolicies).toHaveBeenCalledTimes(1);
      200 |              expect(mockPolicyAdminService.listPolicies).toHaveBeenCalledWith(expect.anything(), { limit: undefined, language: undefined, startKey: undefined });
      201 |          });

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:198:19
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:192:72)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies ΓÇ║ should pass pagination and filter parameters to the service

    expected 200 "OK", got 500 "Internal Server Error"

      207 |                  .query({ limit: 15, language: 'rego', startKey: 'opaqueStartKey' })
      208 |                  .set(MOCK_AUTH_HEADER)
    > 209 |                  .expect(HttpStatusCode.OK); // 200
          |                   ^
      210 |              expect(mockPolicyAdminService.listPolicies).toHaveBeenCalledTimes(1);
      211 |              expect(mockPolicyAdminService.listPolicies).toHaveBeenCalledWith(expect.anything(), { limit: '15', language: 'rego', startKey: 'opaqueStartKey' });
      212 |          });

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:209:19
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:203:88)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies ΓÇ║ should return 500 if the service fails unexpectedly

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 1
    Received number of calls: 0

      219 |                  .set(MOCK_AUTH_HEADER)
      220 |                  .expect(HttpStatusCode.INTERNAL_SERVER_ERROR); // 500
    > 221 |              expect(mockPolicyAdminService.listPolicies).toHaveBeenCalledTimes(1);
          |                                                          ^
      222 |          });
      223 |
      224 |          it('should return 401 Unauthorized if token is missing', async () => {

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:221:58
      at fulfilled (tests/integration/routes/policy.admin.routes.integration.spec.ts:5:58)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ PUT /api/admin/policies/:policyId ΓÇ║ should return 200 OK with updated policy data if service succeeds

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    - Expected
    + Received

      {"attributes": {"cognito:groups": ["policy-admin", "user"], "cognito:username": "test-admin", "sub": "test-admin-id-123"}, "id": "test-admin-id-123", "roles": ["policy-admin", "user"], "tenantId": "unknown-tenant", "username": "test-admin"},
      "a1b2c3d4-e5f6-7890-1234-567890abcdef",
      Object {
        "description": "Updated Integration Description",
    -   "version": 2,
      },

    Number of calls: 1

      250 |                     expect(res.body.version).toBe(MOCK_VALID_UPDATE_POLICY_PAYLOAD.version);
      251 |                 });
    > 252 |             expect(mockPolicyAdminService.updatePolicy).toHaveBeenCalledWith(expect.anything(), targetPolicyId, MOCK_VALID_UPDATE_POLICY_PAYLOAD);
          |                                                         ^
      253 |         });
      254 |
      255 |          it('should return 404 Not Found if service throws PolicyNotFoundError', async () => {

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:252:57
      at fulfilled (tests/integration/routes/policy.admin.routes.integration.spec.ts:5:58)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ DELETE /api/admin/policies/:policyId ΓÇ║ should return 204 No Content if service succeeds

    expected 204 "No Content", got 500 "Internal Server Error"

      311 |                 .delete(`${BASE_API_PATH}/${targetPolicyId}`)
      312 |                 .set(MOCK_AUTH_HEADER)
    > 313 |                 .expect(HttpStatusCode.NO_CONTENT); // 204
          |                  ^
      314 |             expect(mockPolicyAdminService.deletePolicy).toHaveBeenCalledWith(expect.anything(), targetPolicyId);
      315 |         });
      316 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:313:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:308:75)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ DELETE /api/admin/policies/:policyId ΓÇ║ should return 404 Not Found if service throws PolicyNotFoundError

    expected 404 "Not Found", got 500 "Internal Server Error"

      322 |                 .delete(`${BASE_API_PATH}/${targetPolicyId}`)
      323 |                 .set(MOCK_AUTH_HEADER)
    > 324 |                 .expect(HttpStatusCode.NOT_FOUND); // 404
          |                  ^
      325 |             expect(mockPolicyAdminService.deletePolicy).toHaveBeenCalledWith(expect.anything(), targetPolicyId);
      326 |         });
      327 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:324:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:317:92)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ DELETE /api/admin/policies/:policyId ΓÇ║ should return 400 Bad Request if policyId param is invalid

    expected 400 "Bad Request", got 500 "Internal Server Error"

      330 |                 .delete(`${BASE_API_PATH}/invalid-uuid`)
      331 |                 .set(MOCK_AUTH_HEADER)
    > 332 |                 .expect(HttpStatusCode.BAD_REQUEST); // 400
          |                  ^
      333 |             expect(mockPolicyAdminService.deletePolicy).not.toHaveBeenCalled();
      334 |         });
      335 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:332:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:328:86)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ DELETE /api/admin/policies/:policyId ΓÇ║ should return 500 if service fails unexpectedly

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: Anything, "b1c2d3e4-f5a6-7890-1234-567890abcdef"

    Number of calls: 0

      341 |                 .set(MOCK_AUTH_HEADER)
      342 |                 .expect(HttpStatusCode.INTERNAL_SERVER_ERROR); // 500
    > 343 |             expect(mockPolicyAdminService.deletePolicy).toHaveBeenCalledWith(expect.anything(), targetPolicyId);
          |                                                         ^
      344 |         });
      345 |
      346 |         it('should return 401 Unauthorized if token is missing', async () => {

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:343:57
      at fulfilled (tests/integration/routes/policy.admin.routes.integration.spec.ts:5:58)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId/versions/:version ΓÇ║ should return 200 OK with policy version data if found

    expected 200 "OK", got 500 "Internal Server Error"

      362 |                 .get(`${BASE_API_PATH}/${policyId}/versions/${version}`)
      363 |                 .set(MOCK_AUTH_HEADER)
    > 364 |                 .expect(HttpStatusCode.OK)
          |                  ^
      365 |                 .expect(res => {
      366 |                     expect(res.body.id).toBe(policyId);
      367 |                     expect(res.body.version).toBe(version);

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:364:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:359:81)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId/versions/:version ΓÇ║ should return 404 Not Found if policy version not found

    expected 404 "Not Found", got 500 "Internal Server Error"

      375 |                 .get(`${BASE_API_PATH}/${policyId}/versions/${version}`)
      376 |                 .set(MOCK_AUTH_HEADER)
    > 377 |                 .expect(HttpStatusCode.NOT_FOUND);
          |                  ^
      378 |             expect(mockPolicyAdminService.getPolicyVersion).toHaveBeenCalledWith(expect.anything(), policyId, version);
      379 |         });
      380 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:377:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:372:82)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId/versions/:version ΓÇ║ should return 400 Bad Request if policyId is invalid

    expected 400 "Bad Request", got 500 "Internal Server Error"

      383 |                 .get(`${BASE_API_PATH}/invalid-uuid/versions/${version}`)
      384 |                 .set(MOCK_AUTH_HEADER)
    > 385 |                 .expect(HttpStatusCode.BAD_REQUEST);
          |                  ^
      386 |             expect(mockPolicyAdminService.getPolicyVersion).not.toHaveBeenCalled();
      387 |         });
      388 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:385:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:381:79)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId/versions/:version ΓÇ║ should return 400 Bad Request if version is invalid

    expected 400 "Bad Request", got 500 "Internal Server Error"

      391 |                 .get(`${BASE_API_PATH}/${policyId}/versions/invalid-version`)
      392 |                 .set(MOCK_AUTH_HEADER)
    > 393 |                 .expect(HttpStatusCode.BAD_REQUEST);
          |                  ^
      394 |             expect(mockPolicyAdminService.getPolicyVersion).not.toHaveBeenCalled();
      395 |         });
      396 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:393:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:389:78)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId/versions/:version ΓÇ║ should return 500 Internal Server Error if service fails unexpectedly

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: Anything, "c1d2e3f4-a5b6-7890-1234-567890abcdef", 1

    Number of calls: 0

      402 |                 .set(MOCK_AUTH_HEADER)
      403 |                 .expect(HttpStatusCode.INTERNAL_SERVER_ERROR);
    > 404 |             expect(mockPolicyAdminService.getPolicyVersion).toHaveBeenCalledWith(expect.anything(), policyId, version);
          |                                                             ^
      405 |         });
      406 |
      407 |         it('should return 401 Unauthorized if token is missing', async () => {

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:404:61
      at fulfilled (tests/integration/routes/policy.admin.routes.integration.spec.ts:5:58)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId/versions ΓÇ║ should return 200 OK with a list of policy versions

    expected 200 "OK", got 500 "Internal Server Error"

      425 |                 .get(`${BASE_API_PATH}/${policyId}/versions`)
      426 |                 .set(MOCK_AUTH_HEADER)
    > 427 |                 .expect(HttpStatusCode.OK)
          |                  ^
      428 |                 .expect(res => {
      429 |                     expect(res.body).toHaveLength(2);
      430 |                     expect(res.body[0].version).toBe(1);

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:427:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:422:78)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId/versions ΓÇ║ should return 404 Not Found if policy does not exist

    expected 404 "Not Found", got 500 "Internal Server Error"

      441 |                 .get(`${BASE_API_PATH}/${policyId}/versions`)
      442 |                 .set(MOCK_AUTH_HEADER)
    > 443 |                 .expect(HttpStatusCode.NOT_FOUND);
          |                  ^
      444 |             expect(mockPolicyAdminService.listPolicyVersions).toHaveBeenCalledWith(expect.anything(), policyId);
      445 |         });
      446 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:443:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:436:79)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId/versions ΓÇ║ should return 400 Bad Request if policyId is invalid

    expected 400 "Bad Request", got 500 "Internal Server Error"

      449 |                 .get(`${BASE_API_PATH}/invalid-uuid/versions`)
      450 |                 .set(MOCK_AUTH_HEADER)
    > 451 |                 .expect(HttpStatusCode.BAD_REQUEST);
          |                  ^
      452 |             expect(mockPolicyAdminService.listPolicyVersions).not.toHaveBeenCalled();
      453 |         });
      454 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:451:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:447:79)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId/versions ΓÇ║ should return 500 Internal Server Error if service fails unexpectedly

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: Anything, "d1e2f3a4-b5c6-7890-1234-567890abcdef"

    Number of calls: 0

      460 |                 .set(MOCK_AUTH_HEADER)
      461 |                 .expect(HttpStatusCode.INTERNAL_SERVER_ERROR);
    > 462 |             expect(mockPolicyAdminService.listPolicyVersions).toHaveBeenCalledWith(expect.anything(), policyId);
          |                                                               ^
      463 |         });
      464 |
      465 |         it('should return 401 Unauthorized if token is missing', async () => {

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:462:63
      at fulfilled (tests/integration/routes/policy.admin.routes.integration.spec.ts:5:58)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ POST /api/admin/policies/:policyId/rollback ΓÇ║ should return 200 OK with rolled back policy data on success

    expected 200 "OK", got 500 "Internal Server Error"

      481 |                 .post(`${BASE_API_PATH}/${policyId}/rollback/${version}`)
      482 |                 .set(MOCK_AUTH_HEADER)
    > 483 |                 .expect(HttpStatusCode.OK)
          |                  ^
      484 |                 .expect(res => {
      485 |                     expect(res.body.id).toBe(policyId);
      486 |                     expect(res.body.version).toBe(version);

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:483:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:478:87)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ POST /api/admin/policies/:policyId/rollback ΓÇ║ should return 404 Not Found if policy or version not found

    expected 404 "Not Found", got 500 "Internal Server Error"

      496 |                 .post(`${BASE_API_PATH}/${policyId}/rollback/${version}`)
      497 |                 .set(MOCK_AUTH_HEADER)
    > 498 |                 .expect(HttpStatusCode.NOT_FOUND);
          |                  ^
      499 |             expect(mockPolicyAdminService.rollbackPolicy).toHaveBeenCalledWith(expect.anything(), policyId, version);
      500 |         });
      501 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:498:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:491:85)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ POST /api/admin/policies/:policyId/rollback ΓÇ║ should return 400 Bad Request if policyId is invalid

    expected 400 "Bad Request", got 500 "Internal Server Error"

      504 |                 .post(`${BASE_API_PATH}/invalid-uuid/rollback/${version}`)
      505 |                 .set(MOCK_AUTH_HEADER)
    > 506 |                 .expect(HttpStatusCode.BAD_REQUEST);
          |                  ^
      507 |             expect(mockPolicyAdminService.rollbackPolicy).not.toHaveBeenCalled();
      508 |         });
      509 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:506:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:502:79)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ POST /api/admin/policies/:policyId/rollback ΓÇ║ should return 400 Bad Request if version is invalid or missing

    expected 400 "Bad Request", got 500 "Internal Server Error"

      512 |                 .post(`${BASE_API_PATH}/${policyId}/rollback/invalid-version`)
      513 |                 .set(MOCK_AUTH_HEADER)
    > 514 |                 .expect(HttpStatusCode.BAD_REQUEST);
          |                  ^
      515 |             expect(mockPolicyAdminService.rollbackPolicy).not.toHaveBeenCalled();
      516 |         });
      517 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:514:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:510:89)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ POST /api/admin/policies/:policyId/rollback ΓÇ║ should return 500 Internal Server Error if service fails unexpectedly

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: Anything, "e1f2a3b4-c5d6-7890-1234-567890abcdef", 1

    Number of calls: 0

      523 |                 .set(MOCK_AUTH_HEADER)
      524 |                 .expect(HttpStatusCode.INTERNAL_SERVER_ERROR);
    > 525 |             expect(mockPolicyAdminService.rollbackPolicy).toHaveBeenCalledWith(expect.anything(), policyId, version);
          |                                                           ^
      526 |         });
      527 |
      528 |         it('should return 401 Unauthorized if token is missing', async () => {

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:525:59
      at fulfilled (tests/integration/routes/policy.admin.routes.integration.spec.ts:5:58)

FAIL tests/debug/dynamodb.debug.spec.ts
  ΓùÅ DynamoDB Table Creation Debug Test ΓÇ║ should create a role using DynamoRoleRepository

    expect(received).resolves.not.toThrow()

    Received promise rejected instead of resolved
    Rejected to value: [DatabaseError: Failed to create role: User: arn:aws:iam::410844822442:user/PBAC-Admin is not authorized to perform: dynamodb:PutItem on resource: arn:aws:dynamodb:ap-south-1:410844822442:table/TestAuthzTable because no identity-based policy allows the dynamodb:PutItem action]

      53 |         const roleRepository = persistenceContainer.resolve<IRoleRepository>(TYPES.RoleRepository);
      54 |         const testRole = new Role('test-tenant', 'debug-role', 'Debug Role Description');
    > 55 |         await expect(roleRepository.create(testRole)).resolves.not.toThrow();
         |               ^
      56 |
      57 |         // Verify by fetching
      58 |         const found = await roleRepository.findByName('test-tenant', testRole.roleName);

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at tests/debug/dynamodb.debug.spec.ts:55:15
      at tests/debug/dynamodb.debug.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/debug/dynamodb.debug.spec.ts:4:12)
      at Object.<anonymous> (tests/debug/dynamodb.debug.spec.ts:52:70)


  ΓùÅ Test suite failed to run

    ResourceInUseException: Attempt to change a resource which is still in use: Table is being created: TestAuthzTable

      at de_ResourceInUseExceptionRes (node_modules/.pnpm/@aws-sdk+client-dynamodb@3.879.0/node_modules/@aws-sdk/client-dynamodb/dist-cjs/index.js:2603:21)
      at de_CommandError (node_modules/.pnpm/@aws-sdk+client-dynamodb@3.879.0/node_modules/@aws-sdk/client-dynamodb/dist-cjs/index.js:2296:19)
      at node_modules/.pnpm/@smithy+middleware-serde@4.0.9/node_modules/@smithy/middleware-serde/dist-cjs/index.js:36:20
      at node_modules/.pnpm/@smithy+core@3.9.0/node_modules/@smithy/core/dist-cjs/index.js:193:18
      at node_modules/.pnpm/@smithy+middleware-retry@4.1.20/node_modules/@smithy/middleware-retry/dist-cjs/index.js:320:38
      at node_modules/.pnpm/@aws-sdk+middleware-logger@3.876.0/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js:33:22

FAIL tests/integration/Persistence/DynamoUserProfileRepository.integration.spec.ts
  ΓùÅ DynamoUserProfileRepository Integration Tests ΓÇ║ should throw error when saving duplicate user profile (implement check in repo)

    ValidationException: The provided key element does not match the schema

      at throwDefaultError (node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:425:20)
      at node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:434:5
      at de_CommandError (node_modules/.pnpm/@aws-sdk+client-dynamodb@3.879.0/node_modules/@aws-sdk/client-dynamodb/dist-cjs/index.js:2359:14)
      at node_modules/.pnpm/@smithy+middleware-serde@4.0.9/node_modules/@smithy/middleware-serde/dist-cjs/index.js:36:20
      at node_modules/.pnpm/@aws-sdk+lib-dynamodb@3.879_ee4568148364d683af0669b014af13ba/node_modules/@aws-sdk/lib-dynamodb/dist-cjs/index.js:173:30
      at node_modules/.pnpm/@smithy+core@3.9.0/node_modules/@smithy/core/dist-cjs/index.js:193:18
      at node_modules/.pnpm/@smithy+middleware-retry@4.1.20/node_modules/@smithy/middleware-retry/dist-cjs/index.js:320:38
      at node_modules/.pnpm/@aws-sdk+middleware-logger@3.876.0/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js:33:22

  ΓùÅ DynamoUserProfileRepository Integration Tests ΓÇ║ should find an existing profile by ID

    ValidationException: The provided key element does not match the schema

      at throwDefaultError (node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:425:20)
      at node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:434:5
      at de_CommandError (node_modules/.pnpm/@aws-sdk+client-dynamodb@3.879.0/node_modules/@aws-sdk/client-dynamodb/dist-cjs/index.js:2359:14)
      at node_modules/.pnpm/@smithy+middleware-serde@4.0.9/node_modules/@smithy/middleware-serde/dist-cjs/index.js:36:20
      at node_modules/.pnpm/@aws-sdk+lib-dynamodb@3.879_ee4568148364d683af0669b014af13ba/node_modules/@aws-sdk/lib-dynamodb/dist-cjs/index.js:173:30
      at node_modules/.pnpm/@smithy+core@3.9.0/node_modules/@smithy/core/dist-cjs/index.js:193:18
      at node_modules/.pnpm/@smithy+middleware-retry@4.1.20/node_modules/@smithy/middleware-retry/dist-cjs/index.js:320:38
      at node_modules/.pnpm/@aws-sdk+middleware-logger@3.876.0/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js:33:22

  ΓùÅ DynamoUserProfileRepository Integration Tests ΓÇ║ should return null when finding non-existent profile by ID

    ValidationException: The provided key element does not match the schema

      at throwDefaultError (node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:425:20)
      at node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:434:5
      at de_CommandError (node_modules/.pnpm/@aws-sdk+client-dynamodb@3.879.0/node_modules/@aws-sdk/client-dynamodb/dist-cjs/index.js:2359:14)
      at node_modules/.pnpm/@smithy+middleware-serde@4.0.9/node_modules/@smithy/middleware-serde/dist-cjs/index.js:36:20
      at node_modules/.pnpm/@aws-sdk+lib-dynamodb@3.879_ee4568148364d683af0669b014af13ba/node_modules/@aws-sdk/lib-dynamodb/dist-cjs/index.js:173:30
      at node_modules/.pnpm/@smithy+core@3.9.0/node_modules/@smithy/core/dist-cjs/index.js:193:18
      at node_modules/.pnpm/@smithy+middleware-retry@4.1.20/node_modules/@smithy/middleware-retry/dist-cjs/index.js:320:38
      at node_modules/.pnpm/@aws-sdk+middleware-logger@3.876.0/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js:33:22

  ΓùÅ DynamoUserProfileRepository Integration Tests ΓÇ║ should find an existing profile by Email (assuming index exists)

    ValidationException: The provided key element does not match the schema

      at throwDefaultError (node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:425:20)
      at node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:434:5
      at de_CommandError (node_modules/.pnpm/@aws-sdk+client-dynamodb@3.879.0/node_modules/@aws-sdk/client-dynamodb/dist-cjs/index.js:2359:14)
      at node_modules/.pnpm/@smithy+middleware-serde@4.0.9/node_modules/@smithy/middleware-serde/dist-cjs/index.js:36:20
      at node_modules/.pnpm/@aws-sdk+lib-dynamodb@3.879_ee4568148364d683af0669b014af13ba/node_modules/@aws-sdk/lib-dynamodb/dist-cjs/index.js:173:30
      at node_modules/.pnpm/@smithy+core@3.9.0/node_modules/@smithy/core/dist-cjs/index.js:193:18
      at node_modules/.pnpm/@smithy+middleware-retry@4.1.20/node_modules/@smithy/middleware-retry/dist-cjs/index.js:320:38
      at node_modules/.pnpm/@aws-sdk+middleware-logger@3.876.0/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js:33:22

  ΓùÅ DynamoUserProfileRepository Integration Tests ΓÇ║ should return null when finding non-existent profile by Email

    ValidationException: The provided key element does not match the schema

      at throwDefaultError (node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:425:20)
      at node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:434:5
      at de_CommandError (node_modules/.pnpm/@aws-sdk+client-dynamodb@3.879.0/node_modules/@aws-sdk/client-dynamodb/dist-cjs/index.js:2359:14)
      at node_modules/.pnpm/@smithy+middleware-serde@4.0.9/node_modules/@smithy/middleware-serde/dist-cjs/index.js:36:20
      at node_modules/.pnpm/@aws-sdk+lib-dynamodb@3.879_ee4568148364d683af0669b014af13ba/node_modules/@aws-sdk/lib-dynamodb/dist-cjs/index.js:173:30
      at node_modules/.pnpm/@smithy+core@3.9.0/node_modules/@smithy/core/dist-cjs/index.js:193:18
      at node_modules/.pnpm/@smithy+middleware-retry@4.1.20/node_modules/@smithy/middleware-retry/dist-cjs/index.js:320:38
      at node_modules/.pnpm/@aws-sdk+middleware-logger@3.876.0/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js:33:22

  ΓùÅ DynamoUserProfileRepository Integration Tests ΓÇ║ should update an existing profile

    ValidationException: The provided key element does not match the schema

      at throwDefaultError (node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:425:20)
      at node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:434:5
      at de_CommandError (node_modules/.pnpm/@aws-sdk+client-dynamodb@3.879.0/node_modules/@aws-sdk/client-dynamodb/dist-cjs/index.js:2359:14)
      at node_modules/.pnpm/@smithy+middleware-serde@4.0.9/node_modules/@smithy/middleware-serde/dist-cjs/index.js:36:20
      at node_modules/.pnpm/@aws-sdk+lib-dynamodb@3.879_ee4568148364d683af0669b014af13ba/node_modules/@aws-sdk/lib-dynamodb/dist-cjs/index.js:173:30
      at node_modules/.pnpm/@smithy+core@3.9.0/node_modules/@smithy/core/dist-cjs/index.js:193:18
      at node_modules/.pnpm/@smithy+middleware-retry@4.1.20/node_modules/@smithy/middleware-retry/dist-cjs/index.js:320:38
      at node_modules/.pnpm/@aws-sdk+middleware-logger@3.876.0/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js:33:22

  ΓùÅ DynamoUserProfileRepository Integration Tests ΓÇ║ should throw error when updating non-existent profile (implement check)

    ValidationException: The provided key element does not match the schema

      at throwDefaultError (node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:425:20)
      at node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:434:5
      at de_CommandError (node_modules/.pnpm/@aws-sdk+client-dynamodb@3.879.0/node_modules/@aws-sdk/client-dynamodb/dist-cjs/index.js:2359:14)
      at node_modules/.pnpm/@smithy+middleware-serde@4.0.9/node_modules/@smithy/middleware-serde/dist-cjs/index.js:36:20
      at node_modules/.pnpm/@aws-sdk+lib-dynamodb@3.879_ee4568148364d683af0669b014af13ba/node_modules/@aws-sdk/lib-dynamodb/dist-cjs/index.js:173:30
      at node_modules/.pnpm/@smithy+core@3.9.0/node_modules/@smithy/core/dist-cjs/index.js:193:18
      at node_modules/.pnpm/@smithy+middleware-retry@4.1.20/node_modules/@smithy/middleware-retry/dist-cjs/index.js:320:38
      at node_modules/.pnpm/@aws-sdk+middleware-logger@3.876.0/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js:33:22

  ΓùÅ DynamoUserProfileRepository Integration Tests ΓÇ║ should delete an existing profile

    ValidationException: The provided key element does not match the schema

      at throwDefaultError (node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:425:20)
      at node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:434:5
      at de_CommandError (node_modules/.pnpm/@aws-sdk+client-dynamodb@3.879.0/node_modules/@aws-sdk/client-dynamodb/dist-cjs/index.js:2359:14)
      at node_modules/.pnpm/@smithy+middleware-serde@4.0.9/node_modules/@smithy/middleware-serde/dist-cjs/index.js:36:20
      at node_modules/.pnpm/@aws-sdk+lib-dynamodb@3.879_ee4568148364d683af0669b014af13ba/node_modules/@aws-sdk/lib-dynamodb/dist-cjs/index.js:173:30
      at node_modules/.pnpm/@smithy+core@3.9.0/node_modules/@smithy/core/dist-cjs/index.js:193:18
      at node_modules/.pnpm/@smithy+middleware-retry@4.1.20/node_modules/@smithy/middleware-retry/dist-cjs/index.js:320:38
      at node_modules/.pnpm/@aws-sdk+middleware-logger@3.876.0/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js:33:22

  ΓùÅ DynamoUserProfileRepository Integration Tests ΓÇ║ should not throw when deleting non-existent profile (idempotent)

    ValidationException: The provided key element does not match the schema

      at throwDefaultError (node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:425:20)
      at node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:434:5
      at de_CommandError (node_modules/.pnpm/@aws-sdk+client-dynamodb@3.879.0/node_modules/@aws-sdk/client-dynamodb/dist-cjs/index.js:2359:14)
      at node_modules/.pnpm/@smithy+middleware-serde@4.0.9/node_modules/@smithy/middleware-serde/dist-cjs/index.js:36:20
      at node_modules/.pnpm/@aws-sdk+lib-dynamodb@3.879_ee4568148364d683af0669b014af13ba/node_modules/@aws-sdk/lib-dynamodb/dist-cjs/index.js:173:30
      at node_modules/.pnpm/@smithy+core@3.9.0/node_modules/@smithy/core/dist-cjs/index.js:193:18
      at node_modules/.pnpm/@smithy+middleware-retry@4.1.20/node_modules/@smithy/middleware-retry/dist-cjs/index.js:320:38
      at node_modules/.pnpm/@aws-sdk+middleware-logger@3.876.0/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js:33:22

FAIL tests/integration/Adapter/CognitoUserMgmtAdapter.integration.spec.ts (7.011 s)
  ΓùÅ CognitoUserMgmtAdapter Integration Tests ΓÇ║ should list users, groups, and users in a group

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      176 |         // List groups
      177 |         const groupsResult = await adapter.adminListGroups();
    > 178 |         expect(groupsResult.groups.some(g => g.GroupName === primaryGroupName)).toBe(true);
          |                                                                                 ^
      179 |
      180 |         // List users in group
      181 |         await adapter.adminAddUserToGroup(primaryUsername, primaryGroupName);

      at tests/integration/Adapter/CognitoUserMgmtAdapter.integration.spec.ts:178:81
      at fulfilled (tests/integration/Adapter/CognitoUserMgmtAdapter.integration.spec.ts:5:58)


Test Suites: 10 failed, 28 passed, 38 total
Tests:       77 failed, 440 passed, 517 total
Snapshots:   0 total
Time:        45.023 s, estimated 47 s
Ran all test suites.
Table TestRoles deleted successfully. Waiting for it to be deleted...
Table TestUsers deleted successfully. Waiting for it to be deleted...
Table TestPolicies deleted successfully. Waiting for it to be deleted...
Table TestPermissions deleted successfully. Waiting for it to be deleted...
Table TestAssignments deleted successfully. Waiting for it to be deleted...
