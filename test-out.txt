[dotenv@17.2.1] injecting env (11) from .env.test -- tip: ≡ƒôí auto-backup env with Radar: https://dotenvx.com/radar
Table TestPermissions created successfully. Waiting for it to become active...
Table TestRoles created successfully. Waiting for it to become active...
Table TestPolicies created successfully. Waiting for it to become active...
Table TestAssignments created successfully. Waiting for it to become active...
Table TestUsers created successfully. Waiting for it to become active...
FAIL tests/integration/routes/user.admin.routes.integration.spec.ts (28.528 s)
  ΓùÅ Console

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - req.body: {
        username: 'post-create-1771843630270@example.com',
        temporaryPassword: 'ValidPassword123!',
        userAttributes: {
          email: 'post-create-1771843630270@example.com',
          name: 'Integration Test User'
        }
      }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'username', 'temporaryPassword', 'userAttributes' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"username":"post-create-1771843630270@example.com","temporaryPassword":"ValidPassword123!","userAttributes":{"email":"post-create-1771843630270@example.com","name":"Integration Test User"}}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      Bypassing validation for CreateUserAdminSchema for debugging. Schema matched!

      at src/api/middlewares/validation.middleware.ts:27:25

    console.log
      Validation Middleware - req.body: { temporaryPassword: 'short', userAttributes: {} }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'temporaryPassword', 'userAttributes' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"temporaryPassword":"short","userAttributes":{}}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      Bypassing validation for CreateUserAdminSchema for debugging. Schema matched!

      at src/api/middlewares/validation.middleware.ts:27:25

    console.log
      Validation Middleware - req.body: {
        username: 'test-integ-1771843629144@example.com',
        temporaryPassword: 'ValidPassword123!',
        userAttributes: {
          email: 'test-integ-1771843629144@example.com',
          name: 'Integration Test User'
        }
      }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'username', 'temporaryPassword', 'userAttributes' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"username":"test-integ-1771843629144@example.com","temporaryPassword":"ValidPassword123!","userAttributes":{"email":"test-integ-1771843629144@example.com","name":"Integration Test User"}}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      Bypassing validation for CreateUserAdminSchema for debugging. Schema matched!

      at src/api/middlewares/validation.middleware.ts:27:25

    console.log
      Validation Middleware - req.body: {
        username: 'test-integ-1771843629144@example.com',
        temporaryPassword: 'ValidPassword123!',
        userAttributes: {
          email: 'test-integ-1771843629144@example.com',
          name: 'Integration Test User'
        }
      }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'username', 'temporaryPassword', 'userAttributes' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"username":"test-integ-1771843629144@example.com","temporaryPassword":"ValidPassword123!","userAttributes":{"email":"test-integ-1771843629144@example.com","name":"Integration Test User"}}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      Bypassing validation for CreateUserAdminSchema for debugging. Schema matched!

      at src/api/middlewares/validation.middleware.ts:27:25

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - req.body: {
        attributesToUpdate: {
          given_name: 'UpdatedIntegFirstName',
          family_name: 'UpdatedIntegLastName',
          'custom:role': 'integ-tester'
        }
      }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'attributesToUpdate' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"attributesToUpdate":{"given_name":"UpdatedIntegFirstName","family_name":"UpdatedIntegLastName","custom:role":"integ-tester"}}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      Validation Middleware - req.body: { wrongField: 'some value' }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'wrongField' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"wrongField":"some value"}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      Validation Middleware - req.body: {
        attributesToUpdate: {
          given_name: 'UpdatedIntegFirstName',
          family_name: 'UpdatedIntegLastName',
          'custom:role': 'integ-tester'
        }
      }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'attributesToUpdate' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"attributesToUpdate":{"given_name":"UpdatedIntegFirstName","family_name":"UpdatedIntegLastName","custom:role":"integ-tester"}}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      Validation Middleware - req.body: {
        attributesToUpdate: {
          given_name: 'UpdatedIntegFirstName',
          family_name: 'UpdatedIntegLastName',
          'custom:role': 'integ-tester'
        }
      }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'attributesToUpdate' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"attributesToUpdate":{"given_name":"UpdatedIntegFirstName","family_name":"UpdatedIntegLastName","custom:role":"integ-tester"}}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      Validation Middleware - req.body: { password: 'NewSecureIntegPassword456!', permanent: true }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'password', 'permanent' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"password":"NewSecureIntegPassword456!","permanent":true}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      Validation Middleware - req.body: { permanent: true }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'permanent' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"permanent":true}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      Validation Middleware - req.body: { password: 'NewSecureIntegPassword456!', permanent: true }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'password', 'permanent' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"password":"NewSecureIntegPassword456!","permanent":true}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      Validation Middleware - req.body: { password: 'NewSecureIntegPassword456!', permanent: true }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'password', 'permanent' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"password":"NewSecureIntegPassword456!","permanent":true}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      Validation Middleware - req.body: { groupName: 'TestGroup-1771843629144' }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'groupName' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"groupName":"TestGroup-1771843629144"}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      Validation Middleware - req.body: {}

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): []

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      Validation Middleware - req.body: { groupName: 'TestGroup-1771843629144' }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'groupName' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"groupName":"TestGroup-1771843629144"}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

  ΓùÅ Integration Tests: User Admin Routes (/api/admin/users) ΓÇ║ Authentication Guard ΓÇ║ should allow access with the correct test bypass token

    expected 200 "OK", got 500 "Internal Server Error"

      234 |                 .get('/api/admin/users')
      235 |                 .set('Authorization', TEST_ADMIN_TOKEN)
    > 236 |                 .expect(HttpStatusCode.OK); // 200
          |                  ^
      237 |         });
      238 |     });
      239 |     // --- POST Create User ---

      at tests/integration/routes/user.admin.routes.integration.spec.ts:236:18
      at tests/integration/routes/user.admin.routes.integration.spec.ts:9:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/user.admin.routes.integration.spec.ts:5:12)
      at Object.<anonymous> (tests/integration/routes/user.admin.routes.integration.spec.ts:231:81)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: User Admin Routes (/api/admin/users) ΓÇ║ POST /api/admin/users ΓÇ║ should return 400 Bad Request if validation fails

    expected 400 "Bad Request", got 201 "Created"

      275 |                 .set(MOCK_AUTH_HEADER)
      276 |                 .send(invalidPayload)
    > 277 |                 .expect(HttpStatusCode.BAD_REQUEST); // 400
          |                  ^
      278 |             expect(mockUserAdminService.createUser).not.toHaveBeenCalled();
      279 |         });
      280 |

      at tests/integration/routes/user.admin.routes.integration.spec.ts:277:18
      at tests/integration/routes/user.admin.routes.integration.spec.ts:9:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/user.admin.routes.integration.spec.ts:5:12)
      at Object.<anonymous> (tests/integration/routes/user.admin.routes.integration.spec.ts:271:76)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: User Admin Routes (/api/admin/users) ΓÇ║ GET /api/admin/users ΓÇ║ should return 200 OK with a list of users

    expected 200 "OK", got 500 "Internal Server Error"

      313 |                 .get('/api/admin/users')
      314 |                 .set(MOCK_AUTH_HEADER)
    > 315 |                 .expect(HttpStatusCode.OK); // 200
          |                  ^
      316 |             expect(mockUserAdminService.listUsers).toHaveBeenCalledTimes(1);
      317 |         });
      318 |

      at tests/integration/routes/user.admin.routes.integration.spec.ts:315:18
      at tests/integration/routes/user.admin.routes.integration.spec.ts:9:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/user.admin.routes.integration.spec.ts:5:12)
      at Object.<anonymous> (tests/integration/routes/user.admin.routes.integration.spec.ts:306:68)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: User Admin Routes (/api/admin/users) ΓÇ║ GET /api/admin/users ΓÇ║ should pass query parameters to the service

    expected 200 "OK", got 500 "Internal Server Error"

      323 |                 .query({ limit: 5, filter: 'status="Enabled"', paginationToken: 'prev' })
      324 |                 .set(MOCK_AUTH_HEADER)
    > 325 |                 .expect(HttpStatusCode.OK);
          |                  ^
      326 |             expect(mockUserAdminService.listUsers).toHaveBeenCalledWith(expect.anything(), { limit: 5, filter: 'status="Enabled"', paginationToken: 'prev' });
      327 |         });
      328 |

      at tests/integration/routes/user.admin.routes.integration.spec.ts:325:18
      at tests/integration/routes/user.admin.routes.integration.spec.ts:9:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/user.admin.routes.integration.spec.ts:5:12)
      at Object.<anonymous> (tests/integration/routes/user.admin.routes.integration.spec.ts:319:70)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: User Admin Routes (/api/admin/users) ΓÇ║ GET /api/admin/users ΓÇ║ should return 500 if the service fails unexpectedly

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 1
    Received number of calls: 0

      334 |                 .set(MOCK_AUTH_HEADER)
      335 |                 .expect(HttpStatusCode.INTERNAL_SERVER_ERROR); // 500
    > 336 |             expect(mockUserAdminService.listUsers).toHaveBeenCalledTimes(1);
          |                                                    ^
      337 |         });
      338 |     });
      339 |

      at tests/integration/routes/user.admin.routes.integration.spec.ts:336:52
      at fulfilled (tests/integration/routes/user.admin.routes.integration.spec.ts:6:58)

  ΓùÅ Integration Tests: User Admin Routes (/api/admin/users) ΓÇ║ User Group Management ΓÇ║ DELETE /api/admin/users/:username/groups/:groupName ΓÇ║ should return 204 No Content when removing user from group

    expected 204 "No Content", got 500 "Internal Server Error"

      658 |                     .delete(`/api/admin/users/${targetUsername}/groups/${testGroupName}`)
      659 |                     .set(MOCK_AUTH_HEADER)
    > 660 |                     .expect(HttpStatusCode.NO_CONTENT); // 204
          |                      ^
      661 |                 expect(mockUserAdminService.removeUserFromGroup).toHaveBeenCalledWith(expect.anything(), targetUsername, testGroupName);
      662 |             });
      663 |

      at tests/integration/routes/user.admin.routes.integration.spec.ts:660:22
      at tests/integration/routes/user.admin.routes.integration.spec.ts:9:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/user.admin.routes.integration.spec.ts:5:12)
      at Object.<anonymous> (tests/integration/routes/user.admin.routes.integration.spec.ts:655:89)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: User Admin Routes (/api/admin/users) ΓÇ║ User Group Management ΓÇ║ DELETE /api/admin/users/:username/groups/:groupName ΓÇ║ should return 404 if user/group not found (via service error)

    expected 404 "Not Found", got 500 "Internal Server Error"

      668 |                     .delete(`/api/admin/users/${targetUsername}/groups/${testGroupName}`)
      669 |                     .set(MOCK_AUTH_HEADER)
    > 670 |                     .expect(HttpStatusCode.NOT_FOUND); // 404
          |                      ^
      671 |                 expect(mockUserAdminService.removeUserFromGroup).toHaveBeenCalledTimes(1);
      672 |
      673 |

      at tests/integration/routes/user.admin.routes.integration.spec.ts:670:22
      at tests/integration/routes/user.admin.routes.integration.spec.ts:9:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/user.admin.routes.integration.spec.ts:5:12)
      at Object.<anonymous> (tests/integration/routes/user.admin.routes.integration.spec.ts:664:92)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

FAIL tests/e2e/group.admin.e2e.spec.ts (29.285 s)
  ΓùÅ Console

    console.log
      Validation Middleware - req.body: {
        groupName: 'test-group-1771843630980',
        description: 'A test group for e2e tests'
      }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'groupName', 'description' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"groupName":"test-group-1771843630980","description":"A test group for e2e tests"}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - req.body: { roleName: 'test-role-for-group-1771843630980' }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'roleName' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"roleName":"test-role-for-group-1771843630980"}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

  ΓùÅ Group Admin E2E ΓÇ║ should get the created group

    expected 200 "OK", got 500 "Internal Server Error"

      54 |             .get(`${BASE_API_PATH}/${groupName}`)
      55 |             .set('Authorization', `Bearer ${adminToken}`)
    > 56 |             .expect(200);
         |              ^
      57 |
      58 |         expect(response.body.groupName).toBe(groupName);
      59 |         expect(userMgmtAdapterMock.adminGetGroup).toHaveBeenCalledWith(groupName);

      at tests/e2e/group.admin.e2e.spec.ts:56:14
      at tests/e2e/group.admin.e2e.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/e2e/group.admin.e2e.spec.ts:4:12)
      at Object.<anonymous> (tests/e2e/group.admin.e2e.spec.ts:50:51)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Group Admin E2E ΓÇ║ should assign a role to the group

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "test-group-1771843630980", "test-role-for-group-1771843630980"
    Received: "unknown-tenant", "test-group-1771843630980", "test-role-for-group-1771843630980"

    Number of calls: 1

      71 |             .expect(200); // Changed from 204 to 200
      72 |         
    > 73 |         expect(assignmentRepositoryMock.assignRoleToGroup).toHaveBeenCalledWith(groupName, roleName);
         |                                                            ^
      74 |     });
      75 |
      76 |     it('should list the roles for the group', async () => {

      at tests/e2e/group.admin.e2e.spec.ts:73:60
      at fulfilled (tests/e2e/group.admin.e2e.spec.ts:5:58)

  ΓùÅ Group Admin E2E ΓÇ║ should list the roles for the group

    expected 200 "OK", got 500 "Internal Server Error"

      81 |             .get(`${BASE_API_PATH}/${groupName}/roles`)
      82 |             .set('Authorization', `Bearer ${adminToken}`)
    > 83 |             .expect(200);
         |              ^
      84 |
      85 |         expect(response.body.roles).toContain(roleName); // Changed to response.body.roles
      86 |         expect(assignmentRepositoryMock.findRolesByGroupName).toHaveBeenCalledWith(groupName);

      at tests/e2e/group.admin.e2e.spec.ts:83:14
      at tests/e2e/group.admin.e2e.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/e2e/group.admin.e2e.spec.ts:4:12)
      at Object.<anonymous> (tests/e2e/group.admin.e2e.spec.ts:76:58)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Group Admin E2E ΓÇ║ should remove the role from the group

    expected 204 "No Content", got 500 "Internal Server Error"

      93 |             .delete(`${BASE_API_PATH}/${groupName}/roles/${roleName}`)
      94 |             .set('Authorization', `Bearer ${adminToken}`)
    > 95 |             .expect(204);
         |              ^
      96 |         
      97 |         expect(assignmentRepositoryMock.removeRoleFromGroup).toHaveBeenCalledWith(groupName, roleName);
      98 |     });

      at tests/e2e/group.admin.e2e.spec.ts:95:14
      at tests/e2e/group.admin.e2e.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/e2e/group.admin.e2e.spec.ts:4:12)
      at Object.<anonymous> (tests/e2e/group.admin.e2e.spec.ts:89:60)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Group Admin E2E ΓÇ║ should delete the group

    expected 204 "No Content", got 500 "Internal Server Error"

      104 |             .delete(`${BASE_API_PATH}/${groupName}`)
      105 |             .set('Authorization', `Bearer ${adminToken}`)
    > 106 |             .expect(204);
          |              ^
      107 |         
      108 |         expect(userMgmtAdapterMock.adminDeleteGroup).toHaveBeenCalledWith(groupName);
      109 |     });

      at tests/e2e/group.admin.e2e.spec.ts:106:14
      at tests/e2e/group.admin.e2e.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/e2e/group.admin.e2e.spec.ts:4:12)
      at Object.<anonymous> (tests/e2e/group.admin.e2e.spec.ts:100:46)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

FAIL tests/e2e/user.admin.e2e.spec.ts (29.351 s)
  ΓùÅ Console

    console.log
      Validation Middleware - req.body: {
        body: {
          username: 'test-user-1771843631008',
          temporaryPassword: 'Password123!',
          userAttributes: { email: 'test-user-1771843631008@example.com', name: 'Test User' }
        }
      }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'body' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"body":{"username":"test-user-1771843631008","temporaryPassword":"Password123!","userAttributes":{"email":"test-user-1771843631008@example.com","name":"Test User"}}}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      Bypassing validation for CreateUserAdminSchema for debugging. Schema matched!

      at src/api/middlewares/validation.middleware.ts:27:25

    console.log
      Validation Middleware - req.body: { groupName: 'test-group-1771843631009' }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'groupName' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"groupName":"test-group-1771843631009"}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

  ΓùÅ User Admin E2E ΓÇ║ should create a new user

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    - Expected
    + Received

      Object {
    +   "body": Object {
          "temporaryPassword": "Password123!",
          "userAttributes": Object {
            "email": "test-user-1771843631008@example.com",
            "name": "Test User",
          },
          "username": "test-user-1771843631008",
    +   },
      },

    Number of calls: 1

      53 |         expect(response.status).toBe(201); // Added explicit status check
      54 |         expect(response.body.username).toBe(username);
    > 55 |         expect(userMgmtAdapterMock.adminCreateUser).toHaveBeenCalledWith(userDetails);
         |                                                     ^
      56 |     });
      57 |
      58 |     it('should get the created user', async () => {

      at tests/e2e/user.admin.e2e.spec.ts:55:53
      at fulfilled (tests/e2e/user.admin.e2e.spec.ts:5:58)

  ΓùÅ User Admin E2E ΓÇ║ should update the user attributes

    expected 204 "No Content", got 404 "Not Found"

      81 |             .set('Authorization', `Bearer ${adminToken}`)
      82 |             .send(attributesToUpdate)
    > 83 |             .expect(204);
         |              ^
      84 |         
      85 |         expect(userMgmtAdapterMock.adminUpdateUserAttributes).toHaveBeenCalledWith({ username, ...attributesToUpdate });
      86 |     });

      at tests/e2e/user.admin.e2e.spec.ts:83:14
      at tests/e2e/user.admin.e2e.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/e2e/user.admin.e2e.spec.ts:4:12)
      at Object.<anonymous> (tests/e2e/user.admin.e2e.spec.ts:71:56)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ User Admin E2E ΓÇ║ should add a user to a group

    expected 204 "No Content", got 200 "OK"

       96 |             .set('Authorization', `Bearer ${adminToken}`)
       97 |             .send({ groupName })
    >  98 |             .expect(204);
          |              ^
       99 |         
      100 |         expect(userMgmtAdapterMock.adminAddUserToGroup).toHaveBeenCalledWith(username, groupName);
      101 |     });

      at tests/e2e/user.admin.e2e.spec.ts:98:14
      at tests/e2e/user.admin.e2e.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/e2e/user.admin.e2e.spec.ts:4:12)
      at Object.<anonymous> (tests/e2e/user.admin.e2e.spec.ts:91:51)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ User Admin E2E ΓÇ║ should remove the user from the group

    expected 204 "No Content", got 500 "Internal Server Error"

      120 |             .delete(`${BASE_API_PATH}/${username}/groups/${groupName}`)
      121 |             .set('Authorization', `Bearer ${adminToken}`)
    > 122 |             .expect(204);
          |              ^
      123 |         
      124 |         expect(userMgmtAdapterMock.adminRemoveUserFromGroup).toHaveBeenCalledWith(username, groupName);
      125 |     });

      at tests/e2e/user.admin.e2e.spec.ts:122:14
      at tests/e2e/user.admin.e2e.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/e2e/user.admin.e2e.spec.ts:4:12)
      at Object.<anonymous> (tests/e2e/user.admin.e2e.spec.ts:116:60)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ User Admin E2E ΓÇ║ should disable the user

    expected 204 "No Content", got 404 "Not Found"

      131 |             .post(`${BASE_API_PATH}/${username}/disable`)
      132 |             .set('Authorization', `Bearer ${adminToken}`)
    > 133 |             .expect(204);
          |              ^
      134 |         
      135 |         expect(userMgmtAdapterMock.adminDisableUser).toHaveBeenCalledWith(username);
      136 |     });

      at tests/e2e/user.admin.e2e.spec.ts:133:14
      at tests/e2e/user.admin.e2e.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/e2e/user.admin.e2e.spec.ts:4:12)
      at Object.<anonymous> (tests/e2e/user.admin.e2e.spec.ts:127:46)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ User Admin E2E ΓÇ║ should enable the user

    expected 204 "No Content", got 404 "Not Found"

      142 |             .post(`${BASE_API_PATH}/${username}/enable`)
      143 |             .set('Authorization', `Bearer ${adminToken}`)
    > 144 |             .expect(204);
          |              ^
      145 |         
      146 |         expect(userMgmtAdapterMock.adminEnableUser).toHaveBeenCalledWith(username);
      147 |     });

      at tests/e2e/user.admin.e2e.spec.ts:144:14
      at tests/e2e/user.admin.e2e.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/e2e/user.admin.e2e.spec.ts:4:12)
      at Object.<anonymous> (tests/e2e/user.admin.e2e.spec.ts:138:45)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

FAIL tests/unit/application/services/policy.admin.service.spec.ts
  ΓùÅ PolicyAdminService ΓÇ║ getPolicy ΓÇ║ should return a policy if found

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "policy-id-123"
    Received: "test-tenant", "policy-id-123"

    Number of calls: 1

      52 |             const result = await service.getPolicy(adminUser, policyId);
      53 |
    > 54 |             expect(policyRepositoryMock.findById).toHaveBeenCalledWith(policyId);
         |                                                   ^
      55 |             expect(result).toEqual(policyEntity);
      56 |         });
      57 |

      at tests/unit/application/services/policy.admin.service.spec.ts:54:51
      at fulfilled (tests/unit/application/services/policy.admin.service.spec.ts:5:58)

  ΓùÅ PolicyAdminService ΓÇ║ updatePolicy ΓÇ║ should update a policy successfully, incrementing the version

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "policy-id-123"
    Received: "test-tenant", "policy-id-123"

    Number of calls: 1

      73 |             const result = await service.updatePolicy(adminUser, policyId, updateDetails);
      74 |
    > 75 |             expect(policyRepositoryMock.findById).toHaveBeenCalledWith(policyId);
         |                                                   ^
      76 |             expect(policyRepositoryMock.save).toHaveBeenCalledWith(expect.objectContaining({
      77 |                 version: policyEntity.version + 1,
      78 |                 policyName: 'Updated Policy'

      at tests/unit/application/services/policy.admin.service.spec.ts:75:51
      at fulfilled (tests/unit/application/services/policy.admin.service.spec.ts:5:58)

  ΓùÅ PolicyAdminService ΓÇ║ deletePolicy ΓÇ║ should delete a policy successfully

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "policy-id-123"
    Received: "test-tenant", "policy-id-123"

    Number of calls: 1

       95 |             await service.deletePolicy(adminUser, policyId);
       96 |
    >  97 |             expect(policyRepositoryMock.delete).toHaveBeenCalledWith(policyId);
          |                                                 ^
       98 |             expect(loggerMock.info).toHaveBeenCalledWith(expect.stringContaining('DELETE_POLICY'), expect.any(Object));
       99 |         });
      100 |     });

      at tests/unit/application/services/policy.admin.service.spec.ts:97:49
      at fulfilled (tests/unit/application/services/policy.admin.service.spec.ts:5:58)

  ΓùÅ PolicyAdminService ΓÇ║ listPolicies ΓÇ║ should list policies

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {}
    Received: "test-tenant", {}

    Number of calls: 1

      107 |             const result = await service.listPolicies(adminUser, {});
      108 |
    > 109 |             expect(policyRepositoryMock.list).toHaveBeenCalledWith({});
          |                                               ^
      110 |             expect(result).toEqual(policies);
      111 |         });
      112 |     });

      at tests/unit/application/services/policy.admin.service.spec.ts:109:47
      at fulfilled (tests/unit/application/services/policy.admin.service.spec.ts:5:58)

  ΓùÅ PolicyAdminService ΓÇ║ getPolicyVersion ΓÇ║ should retrieve a specific version of a policy

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "policy-id-123", 1
    Received: "test-tenant", "policy-id-123", 1

    Number of calls: 1

      118 |             const result = await service.getPolicyVersion(adminUser, policyId, 1);
      119 |
    > 120 |             expect(policyRepositoryMock.getPolicyVersion).toHaveBeenCalledWith(policyId, 1);
          |                                                           ^
      121 |             expect(result).toEqual(policyEntity);
      122 |         });
      123 |

      at tests/unit/application/services/policy.admin.service.spec.ts:120:59
      at fulfilled (tests/unit/application/services/policy.admin.service.spec.ts:5:58)

  ΓùÅ PolicyAdminService ΓÇ║ listPolicyVersions ΓÇ║ should list all policy versions

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "policy-id-123"
    Received: "test-tenant", "policy-id-123"

    Number of calls: 1

      138 |             const result = await service.listPolicyVersions(adminUser, policyId);
      139 |
    > 140 |             expect(policyRepositoryMock.listPolicyVersions).toHaveBeenCalledWith(policyId);
          |                                                             ^
      141 |             expect(result).toEqual(versions);
      142 |         });
      143 |     });

      at tests/unit/application/services/policy.admin.service.spec.ts:140:61
      at fulfilled (tests/unit/application/services/policy.admin.service.spec.ts:5:58)

  ΓùÅ PolicyAdminService ΓÇ║ rollbackPolicy ΓÇ║ should rollback a policy to a specific version

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "policy-id-123", 1
    Received: "test-tenant", "policy-id-123", 1

    Number of calls: 1

      152 |             const result = await service.rollbackPolicy(adminUser, policyId, 1);
      153 |
    > 154 |             expect(policyRepositoryMock.getPolicyVersion).toHaveBeenCalledWith(policyId, 1);
          |                                                           ^
      155 |             expect(policyRepositoryMock.save).toHaveBeenCalledWith(expect.objectContaining({
      156 |                 id: 'new-policy-id',
      157 |                 version: 1

      at tests/unit/application/services/policy.admin.service.spec.ts:154:59
      at fulfilled (tests/unit/application/services/policy.admin.service.spec.ts:5:58)

FAIL tests/integration/routes/permission.admin.routes.integration.spec.ts (30.256 s)
  ΓùÅ Console

    console.info
      [WinstonLogger] Logger initialized with level "info" in "test" environment.

      at WinstonLogger.initializeLogger (src/infrastructure/logging/WinstonLogger.ts:68:17)
          at Array.map (<anonymous>)

    console.log
      {"level":"warn","message":"CORS_ORIGIN is set to \"*\" in a non-development environment. This is insecure!","metadata":{},"timestamp":"2026-02-23T10:47:11.666Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"CORS configured for origin: *","metadata":{},"timestamp":"2026-02-23T10:47:11.686Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"Application setup complete for environment: test","metadata":{},"timestamp":"2026-02-23T10:47:11.691Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> POST /api/admin/permissions","metadata":{"correlationId":"71582d4d-913f-4fff-ae83-34f18d7205f2","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"POST","requestId":"71582d4d-913f-4fff-ae83-34f18d7205f2","url":"/api/admin/permissions","userId":"anonymous"},"timestamp":"2026-02-23T10:47:11.942Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 71582d4d-913f-4fff-ae83-34f18d7205f2] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["permission-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:47:11.975Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: {
        permissionName: 'perm:test-1771843625242',
        description: 'Test Permission Description'
      }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'permissionName', 'description' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"permissionName":"perm:test-1771843625242","description":"Test Permission Description"}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      {"level":"info","message":"<-- POST /api/admin/permissions 201 87.888ms","metadata":{"contentLength":"88","correlationId":"71582d4d-913f-4fff-ae83-34f18d7205f2","durationMs":87.888,"eventType":"finish","requestId":"71582d4d-913f-4fff-ae83-34f18d7205f2","statusCode":201,"userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.029Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> POST /api/admin/permissions","metadata":{"correlationId":"bf68979d-a592-4d31-93e9-f724ae2b5400","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"POST","requestId":"bf68979d-a592-4d31-93e9-f724ae2b5400","url":"/api/admin/permissions","userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.084Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - bf68979d-a592-4d31-93e9-f724ae2b5400] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["permission-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:47:12.087Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: { description: 'Only description' }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'description' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"description":"Only description"}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      {"level":"warn","message":"Request validation failed [bf68979d-a592-4d31-93e9-f724ae2b5400]:","metadata":{"errors":{"permissionName":"Permission name is required"}},"timestamp":"2026-02-23T10:47:12.095Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)
          at Generator.throw (<anonymous>)

    console.log
      {"level":"warn","message":"Client error processing request: Input validation failed","metadata":{"correlationId":"bf68979d-a592-4d31-93e9-f724ae2b5400","details":{"permissionName":"Permission name is required"},"errorMessage":"Input validation failed","errorName":"ValidationError","isOperational":true,"method":"POST","path":"/api/admin/permissions","requestId":"bf68979d-a592-4d31-93e9-f724ae2b5400","stack":"ValidationError: Input validation failed\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:57:41\n    at Generator.throw (<anonymous>)\n    at rejected (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:6:65)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":400,"userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.105Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)
          at Generator.throw (<anonymous>)

    console.log
      {"level":"warn","message":"<-- POST /api/admin/permissions 400 26.952ms","metadata":{"contentLength":"189","correlationId":"bf68979d-a592-4d31-93e9-f724ae2b5400","durationMs":26.952,"eventType":"finish","requestId":"bf68979d-a592-4d31-93e9-f724ae2b5400","statusCode":400,"userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.110Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> POST /api/admin/permissions","metadata":{"correlationId":"b14b1eed-f5d0-4096-ba72-22a4be1c7a72","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"POST","requestId":"b14b1eed-f5d0-4096-ba72-22a4be1c7a72","url":"/api/admin/permissions","userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.161Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - b14b1eed-f5d0-4096-ba72-22a4be1c7a72] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["permission-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:47:12.165Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: {
        permissionName: 'perm:test-1771843625242',
        description: 'Test Permission Description'
      }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'permissionName', 'description' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"permissionName":"perm:test-1771843625242","description":"Test Permission Description"}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      {"level":"error","message":"[PermAdminCtrl] Failed to create permission perm:test-1771843625242","metadata":{"error":{"adminUserId":"test-admin-id-123","error":{"isOperational":true,"name":"PermissionExistsError","statusCode":409}}},"timestamp":"2026-02-23T10:47:12.174Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)
          at Generator.throw (<anonymous>)

    console.log
      {"level":"warn","message":"Client error processing request: Permission 'perm:test-1771843625242' already exists.","metadata":{"correlationId":"b14b1eed-f5d0-4096-ba72-22a4be1c7a72","errorMessage":"Permission 'perm:test-1771843625242' already exists.","errorName":"PermissionExistsError","isOperational":true,"method":"POST","path":"/api/admin/permissions","requestId":"b14b1eed-f5d0-4096-ba72-22a4be1c7a72","stack":"PermissionExistsError: Permission 'perm:test-1771843625242' already exists.\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\permission.admin.routes.integration.spec.ts:136:28\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\permission.admin.routes.integration.spec.ts:9:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\permission.admin.routes.integration.spec.ts:5:12)\n    at Object.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\permission.admin.routes.integration.spec.ts:134:74)\n    at Promise.then.completed (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\testWorker.js:108:12)","statusCode":409,"userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.179Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)
          at Generator.throw (<anonymous>)

    console.log
      {"level":"warn","message":"<-- POST /api/admin/permissions 409 23.248ms","metadata":{"contentLength":"165","correlationId":"b14b1eed-f5d0-4096-ba72-22a4be1c7a72","durationMs":23.248,"eventType":"finish","requestId":"b14b1eed-f5d0-4096-ba72-22a4be1c7a72","statusCode":409,"userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.184Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> POST /api/admin/permissions","metadata":{"correlationId":"8f71d97e-124c-4f43-8219-8cebf7da01ad","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"POST","requestId":"8f71d97e-124c-4f43-8219-8cebf7da01ad","url":"/api/admin/permissions","userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.213Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Authentication: Missing or invalid Authorization header.","metadata":{},"timestamp":"2026-02-23T10:47:12.216Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Client error processing request: Authorization header missing or invalid.","metadata":{"correlationId":"8f71d97e-124c-4f43-8219-8cebf7da01ad","errorMessage":"Authorization header missing or invalid.","errorName":"AuthenticationError","isOperational":true,"method":"POST","path":"/api/admin/permissions","requestId":"8f71d97e-124c-4f43-8219-8cebf7da01ad","stack":"AuthenticationError: Authorization header missing or invalid.\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:32:25\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:27:70\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestLogger.middleware.ts:84:9\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:32\n    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)\n    at middleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:13)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at addRequestId (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestId.middleware.ts:33:5)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at urlencodedParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\urlencoded.js:57:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\read.js:132:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:214:14)\n    at invokeCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\raw-body@3.0.0\\node_modules\\raw-body\\index.js:238:16)\n    at done (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\raw-body@3.0.0\\node_modules\\raw-body\\index.js:227:7)\n    at IncomingMessage.onEnd (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\raw-body@3.0.0\\node_modules\\raw-body\\index.js:287:7)\n    at IncomingMessage.emit (node:events:519:28)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at processTicksAndRejections (node:internal/process/task_queues:90:21)","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.239Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"<-- POST /api/admin/permissions 401 33.351ms","metadata":{"contentLength":"151","correlationId":"8f71d97e-124c-4f43-8219-8cebf7da01ad","durationMs":33.351,"eventType":"finish","requestId":"8f71d97e-124c-4f43-8219-8cebf7da01ad","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.246Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/permissions/perm:read","metadata":{"correlationId":"a5369f4b-dd64-423a-9327-bf859c64a275","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"a5369f4b-dd64-423a-9327-bf859c64a275","url":"/api/admin/permissions/perm:read","userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.287Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - a5369f4b-dd64-423a-9327-bf859c64a275] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["permission-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:47:12.296Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [a5369f4b-dd64-423a-9327-bf859c64a275]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:47:12.306Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"a5369f4b-dd64-423a-9327-bf859c64a275","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/permissions/perm:read","requestId":"a5369f4b-dd64-423a-9327-bf859c64a275","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:12.309Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/permissions/perm:read 500 33.703ms","metadata":{"error":{"contentLength":"3814","correlationId":"a5369f4b-dd64-423a-9327-bf859c64a275","durationMs":33.703,"eventType":"finish","requestId":"a5369f4b-dd64-423a-9327-bf859c64a275","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:12.321Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/permissions/not-found-perm","metadata":{"correlationId":"76840544-344a-44bf-9696-322ed91fb9f0","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"76840544-344a-44bf-9696-322ed91fb9f0","url":"/api/admin/permissions/not-found-perm","userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.345Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 76840544-344a-44bf-9696-322ed91fb9f0] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["permission-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:47:12.349Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [76840544-344a-44bf-9696-322ed91fb9f0]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:47:12.354Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"76840544-344a-44bf-9696-322ed91fb9f0","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/permissions/not-found-perm","requestId":"76840544-344a-44bf-9696-322ed91fb9f0","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:12.356Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/permissions/not-found-perm 500 16.769ms","metadata":{"error":{"contentLength":"3814","correlationId":"76840544-344a-44bf-9696-322ed91fb9f0","durationMs":16.769,"eventType":"finish","requestId":"76840544-344a-44bf-9696-322ed91fb9f0","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:12.361Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/permissions/perm:read","metadata":{"correlationId":"a94a4d4a-5bf6-4efd-b56a-80e6e17eb7c1","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"a94a4d4a-5bf6-4efd-b56a-80e6e17eb7c1","url":"/api/admin/permissions/perm:read","userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.407Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Authentication: Missing or invalid Authorization header.","metadata":{},"timestamp":"2026-02-23T10:47:12.411Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Client error processing request: Authorization header missing or invalid.","metadata":{"correlationId":"a94a4d4a-5bf6-4efd-b56a-80e6e17eb7c1","errorMessage":"Authorization header missing or invalid.","errorName":"AuthenticationError","isOperational":true,"method":"GET","path":"/api/admin/permissions/perm:read","requestId":"a94a4d4a-5bf6-4efd-b56a-80e6e17eb7c1","stack":"AuthenticationError: Authorization header missing or invalid.\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:32:25\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:27:70\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestLogger.middleware.ts:84:9\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:32\n    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)\n    at middleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:13)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at addRequestId (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestId.middleware.ts:33:5)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at urlencodedParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\urlencoded.js:68:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at jsonParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\json.js:100:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at requestMetricsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestMetrics.middleware.ts:26:3)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at cors (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:188:7)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:224:17\n    at originCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:214:15)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:531:6)\n    at xXssProtectionMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:311:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPoweredByMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:304:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPermittedCrossDomainPoliciesMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:297:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xFrameOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:281:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDownloadOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:261:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDnsPrefetchControlMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:254:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xContentTypeOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:246:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at strictTransportSecurityMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:239:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at referrerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:207:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at originAgentClusterMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:182:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginResourcePolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:175:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginOpenerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:159:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at contentSecurityPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:124:4)","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.424Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"<-- GET /api/admin/permissions/perm:read 401 32.771ms","metadata":{"contentLength":"151","correlationId":"a94a4d4a-5bf6-4efd-b56a-80e6e17eb7c1","durationMs":32.771,"eventType":"finish","requestId":"a94a4d4a-5bf6-4efd-b56a-80e6e17eb7c1","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.440Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/permissions?limit=10","metadata":{"correlationId":"719f9844-e82c-4a33-afb8-3b71c70fa164","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"719f9844-e82c-4a33-afb8-3b71c70fa164","url":"/api/admin/permissions?limit=10","userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.489Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 719f9844-e82c-4a33-afb8-3b71c70fa164] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["permission-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:47:12.494Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"<-- GET /api/admin/permissions?limit=10 200 20.221ms","metadata":{"contentLength":"265","correlationId":"719f9844-e82c-4a33-afb8-3b71c70fa164","durationMs":20.221,"eventType":"finish","requestId":"719f9844-e82c-4a33-afb8-3b71c70fa164","statusCode":200,"userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.509Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/permissions","metadata":{"correlationId":"0aa4cc25-3831-4f62-b048-409598d8236c","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"0aa4cc25-3831-4f62-b048-409598d8236c","url":"/api/admin/permissions","userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.547Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Authentication: Missing or invalid Authorization header.","metadata":{},"timestamp":"2026-02-23T10:47:12.555Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Client error processing request: Authorization header missing or invalid.","metadata":{"correlationId":"0aa4cc25-3831-4f62-b048-409598d8236c","errorMessage":"Authorization header missing or invalid.","errorName":"AuthenticationError","isOperational":true,"method":"GET","path":"/api/admin/permissions","requestId":"0aa4cc25-3831-4f62-b048-409598d8236c","stack":"AuthenticationError: Authorization header missing or invalid.\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:32:25\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:27:70\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestLogger.middleware.ts:84:9\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:32\n    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)\n    at middleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:13)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at addRequestId (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestId.middleware.ts:33:5)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at urlencodedParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\urlencoded.js:68:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at jsonParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\json.js:100:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at requestMetricsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestMetrics.middleware.ts:26:3)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at cors (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:188:7)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:224:17\n    at originCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:214:15)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:531:6)\n    at xXssProtectionMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:311:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPoweredByMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:304:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPermittedCrossDomainPoliciesMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:297:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xFrameOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:281:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDownloadOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:261:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDnsPrefetchControlMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:254:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xContentTypeOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:246:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at strictTransportSecurityMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:239:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at referrerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:207:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at originAgentClusterMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:182:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginResourcePolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:175:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginOpenerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:159:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at contentSecurityPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:124:4)","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.564Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"<-- GET /api/admin/permissions 401 39.792ms","metadata":{"contentLength":"151","correlationId":"0aa4cc25-3831-4f62-b048-409598d8236c","durationMs":39.792,"eventType":"finish","requestId":"0aa4cc25-3831-4f62-b048-409598d8236c","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.587Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> PUT /api/admin/permissions/perm:update","metadata":{"correlationId":"e663a9ab-5a3d-4016-b0bb-923859142bb9","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"PUT","requestId":"e663a9ab-5a3d-4016-b0bb-923859142bb9","url":"/api/admin/permissions/perm:update","userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.650Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - e663a9ab-5a3d-4016-b0bb-923859142bb9] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["permission-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:47:12.653Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: { description: 'Updated description' }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'description' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"description":"Updated description"}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      {"level":"info","message":"<-- PUT /api/admin/permissions/perm:update 200 15.438ms","metadata":{"contentLength":"171","correlationId":"e663a9ab-5a3d-4016-b0bb-923859142bb9","durationMs":15.438,"eventType":"finish","requestId":"e663a9ab-5a3d-4016-b0bb-923859142bb9","statusCode":200,"userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.666Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> PUT /api/admin/permissions/not-found-perm","metadata":{"correlationId":"9b28bb4f-9eeb-463b-8604-ca8fab16809a","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"PUT","requestId":"9b28bb4f-9eeb-463b-8604-ca8fab16809a","url":"/api/admin/permissions/not-found-perm","userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.695Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 9b28bb4f-9eeb-463b-8604-ca8fab16809a] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["permission-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:47:12.698Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: { description: 'Updated description' }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'description' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"description":"Updated description"}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      {"level":"warn","message":"<-- PUT /api/admin/permissions/not-found-perm 404 12.122ms","metadata":{"contentLength":"63","correlationId":"9b28bb4f-9eeb-463b-8604-ca8fab16809a","durationMs":12.122,"eventType":"finish","requestId":"9b28bb4f-9eeb-463b-8604-ca8fab16809a","statusCode":404,"userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.707Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> PUT /api/admin/permissions/perm:update","metadata":{"correlationId":"0cd033e6-a6bb-48ab-8a13-80b8a5485bb3","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"PUT","requestId":"0cd033e6-a6bb-48ab-8a13-80b8a5485bb3","url":"/api/admin/permissions/perm:update","userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.735Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 0cd033e6-a6bb-48ab-8a13-80b8a5485bb3] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["permission-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:47:12.738Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: {}

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): []

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      {"level":"warn","message":"Request validation failed [0cd033e6-a6bb-48ab-8a13-80b8a5485bb3]:","metadata":{"errors":{"":"No update data provided"}},"timestamp":"2026-02-23T10:47:12.753Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)
          at Generator.throw (<anonymous>)

    console.log
      {"level":"warn","message":"Client error processing request: Input validation failed","metadata":{"correlationId":"0cd033e6-a6bb-48ab-8a13-80b8a5485bb3","details":{"":"No update data provided"},"errorMessage":"Input validation failed","errorName":"ValidationError","isOperational":true,"method":"PUT","path":"/api/admin/permissions/perm:update","requestId":"0cd033e6-a6bb-48ab-8a13-80b8a5485bb3","stack":"ValidationError: Input validation failed\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:57:41\n    at Generator.throw (<anonymous>)\n    at rejected (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:6:65)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":400,"userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.755Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)
          at Generator.throw (<anonymous>)

    console.log
      {"level":"warn","message":"<-- PUT /api/admin/permissions/perm:update 400 23.340ms","metadata":{"contentLength":"171","correlationId":"0cd033e6-a6bb-48ab-8a13-80b8a5485bb3","durationMs":23.34,"eventType":"finish","requestId":"0cd033e6-a6bb-48ab-8a13-80b8a5485bb3","statusCode":400,"userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.758Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> PUT /api/admin/permissions/perm:update","metadata":{"correlationId":"d9a979f0-4286-4025-aa69-a168b3d75f95","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"PUT","requestId":"d9a979f0-4286-4025-aa69-a168b3d75f95","url":"/api/admin/permissions/perm:update","userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.784Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Authentication: Missing or invalid Authorization header.","metadata":{},"timestamp":"2026-02-23T10:47:12.786Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Client error processing request: Authorization header missing or invalid.","metadata":{"correlationId":"d9a979f0-4286-4025-aa69-a168b3d75f95","errorMessage":"Authorization header missing or invalid.","errorName":"AuthenticationError","isOperational":true,"method":"PUT","path":"/api/admin/permissions/perm:update","requestId":"d9a979f0-4286-4025-aa69-a168b3d75f95","stack":"AuthenticationError: Authorization header missing or invalid.\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:32:25\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:27:70\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestLogger.middleware.ts:84:9\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:32\n    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)\n    at middleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:13)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at addRequestId (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestId.middleware.ts:33:5)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at urlencodedParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\urlencoded.js:57:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\read.js:132:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:214:14)\n    at invokeCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\raw-body@3.0.0\\node_modules\\raw-body\\index.js:238:16)\n    at done (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\raw-body@3.0.0\\node_modules\\raw-body\\index.js:227:7)\n    at IncomingMessage.onEnd (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\raw-body@3.0.0\\node_modules\\raw-body\\index.js:287:7)\n    at IncomingMessage.emit (node:events:519:28)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at processTicksAndRejections (node:internal/process/task_queues:90:21)","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.791Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"<-- PUT /api/admin/permissions/perm:update 401 11.846ms","metadata":{"contentLength":"151","correlationId":"d9a979f0-4286-4025-aa69-a168b3d75f95","durationMs":11.846,"eventType":"finish","requestId":"d9a979f0-4286-4025-aa69-a168b3d75f95","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.796Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> DELETE /api/admin/permissions/perm:delete","metadata":{"correlationId":"e6d356a7-69f2-4f9c-8278-7af97b6b1ed2","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"DELETE","requestId":"e6d356a7-69f2-4f9c-8278-7af97b6b1ed2","url":"/api/admin/permissions/perm:delete","userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.821Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - e6d356a7-69f2-4f9c-8278-7af97b6b1ed2] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["permission-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:47:12.825Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [e6d356a7-69f2-4f9c-8278-7af97b6b1ed2]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:47:12.829Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"e6d356a7-69f2-4f9c-8278-7af97b6b1ed2","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"DELETE","path":"/api/admin/permissions/perm:delete","requestId":"e6d356a7-69f2-4f9c-8278-7af97b6b1ed2","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:12.831Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- DELETE /api/admin/permissions/perm:delete 500 16.729ms","metadata":{"error":{"contentLength":"3814","correlationId":"e6d356a7-69f2-4f9c-8278-7af97b6b1ed2","durationMs":16.729,"eventType":"finish","requestId":"e6d356a7-69f2-4f9c-8278-7af97b6b1ed2","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:12.838Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> DELETE /api/admin/permissions/perm:delete","metadata":{"correlationId":"b9b299f7-e363-4f7a-99bc-d831c8702578","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"DELETE","requestId":"b9b299f7-e363-4f7a-99bc-d831c8702578","url":"/api/admin/permissions/perm:delete","userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.861Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - b9b299f7-e363-4f7a-99bc-d831c8702578] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["permission-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:47:12.866Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [b9b299f7-e363-4f7a-99bc-d831c8702578]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:47:12.872Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"b9b299f7-e363-4f7a-99bc-d831c8702578","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"DELETE","path":"/api/admin/permissions/perm:delete","requestId":"b9b299f7-e363-4f7a-99bc-d831c8702578","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:12.874Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- DELETE /api/admin/permissions/perm:delete 500 16.820ms","metadata":{"error":{"contentLength":"3814","correlationId":"b9b299f7-e363-4f7a-99bc-d831c8702578","durationMs":16.82,"eventType":"finish","requestId":"b9b299f7-e363-4f7a-99bc-d831c8702578","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:12.878Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> DELETE /api/admin/permissions/perm:delete","metadata":{"correlationId":"48adfe65-93b4-4b2d-94f2-a2c68f5cbf4f","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"DELETE","requestId":"48adfe65-93b4-4b2d-94f2-a2c68f5cbf4f","url":"/api/admin/permissions/perm:delete","userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.917Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Authentication: Missing or invalid Authorization header.","metadata":{},"timestamp":"2026-02-23T10:47:12.921Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Client error processing request: Authorization header missing or invalid.","metadata":{"correlationId":"48adfe65-93b4-4b2d-94f2-a2c68f5cbf4f","errorMessage":"Authorization header missing or invalid.","errorName":"AuthenticationError","isOperational":true,"method":"DELETE","path":"/api/admin/permissions/perm:delete","requestId":"48adfe65-93b4-4b2d-94f2-a2c68f5cbf4f","stack":"AuthenticationError: Authorization header missing or invalid.\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:32:25\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:27:70\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestLogger.middleware.ts:84:9\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:32\n    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)\n    at middleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:13)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at addRequestId (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestId.middleware.ts:33:5)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at urlencodedParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\urlencoded.js:68:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at jsonParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\json.js:100:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at requestMetricsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestMetrics.middleware.ts:26:3)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at cors (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:188:7)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:224:17\n    at originCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:214:15)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:531:6)\n    at xXssProtectionMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:311:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPoweredByMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:304:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPermittedCrossDomainPoliciesMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:297:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xFrameOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:281:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDownloadOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:261:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDnsPrefetchControlMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:254:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xContentTypeOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:246:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at strictTransportSecurityMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:239:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at referrerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:207:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at originAgentClusterMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:182:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginResourcePolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:175:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginOpenerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:159:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at contentSecurityPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:124:4)","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.928Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"<-- DELETE /api/admin/permissions/perm:delete 401 16.304ms","metadata":{"contentLength":"151","correlationId":"48adfe65-93b4-4b2d-94f2-a2c68f5cbf4f","durationMs":16.304,"eventType":"finish","requestId":"48adfe65-93b4-4b2d-94f2-a2c68f5cbf4f","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.934Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/permissions/perm:with:roles/roles","metadata":{"correlationId":"7bd2fae1-d8b7-41eb-89fc-bd634edb1641","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"7bd2fae1-d8b7-41eb-89fc-bd634edb1641","url":"/api/admin/permissions/perm:with:roles/roles","userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.959Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 7bd2fae1-d8b7-41eb-89fc-bd634edb1641] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["permission-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:47:12.963Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [7bd2fae1-d8b7-41eb-89fc-bd634edb1641]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:47:12.967Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"7bd2fae1-d8b7-41eb-89fc-bd634edb1641","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/permissions/perm:with:roles/roles","requestId":"7bd2fae1-d8b7-41eb-89fc-bd634edb1641","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:12.970Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/permissions/perm:with:roles/roles 500 14.301ms","metadata":{"error":{"contentLength":"3814","correlationId":"7bd2fae1-d8b7-41eb-89fc-bd634edb1641","durationMs":14.301,"eventType":"finish","requestId":"7bd2fae1-d8b7-41eb-89fc-bd634edb1641","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:12.974Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/permissions/perm:with:roles/roles","metadata":{"correlationId":"4300c7b1-5d7e-4bf2-b914-5f45683801ce","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"4300c7b1-5d7e-4bf2-b914-5f45683801ce","url":"/api/admin/permissions/perm:with:roles/roles","userId":"anonymous"},"timestamp":"2026-02-23T10:47:13.000Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 4300c7b1-5d7e-4bf2-b914-5f45683801ce] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["permission-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:47:13.003Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [4300c7b1-5d7e-4bf2-b914-5f45683801ce]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:47:13.007Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"4300c7b1-5d7e-4bf2-b914-5f45683801ce","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/permissions/perm:with:roles/roles","requestId":"4300c7b1-5d7e-4bf2-b914-5f45683801ce","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:13.009Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/permissions/perm:with:roles/roles 500 13.579ms","metadata":{"error":{"contentLength":"3814","correlationId":"4300c7b1-5d7e-4bf2-b914-5f45683801ce","durationMs":13.579,"eventType":"finish","requestId":"4300c7b1-5d7e-4bf2-b914-5f45683801ce","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:13.013Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/permissions/perm:with:roles/roles","metadata":{"correlationId":"b2c58b24-8ec5-432c-b9f2-4230db459ef9","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"b2c58b24-8ec5-432c-b9f2-4230db459ef9","url":"/api/admin/permissions/perm:with:roles/roles","userId":"anonymous"},"timestamp":"2026-02-23T10:47:13.031Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Authentication: Missing or invalid Authorization header.","metadata":{},"timestamp":"2026-02-23T10:47:13.035Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Client error processing request: Authorization header missing or invalid.","metadata":{"correlationId":"b2c58b24-8ec5-432c-b9f2-4230db459ef9","errorMessage":"Authorization header missing or invalid.","errorName":"AuthenticationError","isOperational":true,"method":"GET","path":"/api/admin/permissions/perm:with:roles/roles","requestId":"b2c58b24-8ec5-432c-b9f2-4230db459ef9","stack":"AuthenticationError: Authorization header missing or invalid.\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:32:25\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:27:70\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestLogger.middleware.ts:84:9\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:32\n    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)\n    at middleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:13)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at addRequestId (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestId.middleware.ts:33:5)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at urlencodedParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\urlencoded.js:68:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at jsonParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\json.js:100:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at requestMetricsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestMetrics.middleware.ts:26:3)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at cors (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:188:7)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:224:17\n    at originCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:214:15)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:531:6)\n    at xXssProtectionMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:311:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPoweredByMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:304:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPermittedCrossDomainPoliciesMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:297:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xFrameOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:281:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDownloadOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:261:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDnsPrefetchControlMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:254:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xContentTypeOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:246:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at strictTransportSecurityMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:239:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at referrerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:207:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at originAgentClusterMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:182:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginResourcePolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:175:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginOpenerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:159:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at contentSecurityPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:124:4)","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T10:47:13.050Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"<-- GET /api/admin/permissions/perm:with:roles/roles 401 24.658ms","metadata":{"contentLength":"151","correlationId":"b2c58b24-8ec5-432c-b9f2-4230db459ef9","durationMs":24.658,"eventType":"finish","requestId":"b2c58b24-8ec5-432c-b9f2-4230db459ef9","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T10:47:13.056Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

  ΓùÅ Integration Tests: Permission Admin Routes (/api/admin/permissions) ΓÇ║ POST /api/admin/permissions ΓÇ║ should return 400 on validation error (e.g., missing permissionName)

    expect(received).toEqual(expected) // deep equality

    - Expected  - 1
    + Received  + 1

      Object {
    -   "body.permissionName": "Permission name is required",
    +   "permissionName": "Permission name is required",
      }

      128 |              expect(response.status).toBe(400);
      129 |              expect(response.body.name).toBe('ValidationError');
    > 130 |              expect(response.body.details).toEqual({'body.permissionName': 'Permission name is required'});
          |                                            ^
      131 |              expect(mockPermissionAdminService.createPermission).not.toHaveBeenCalled();
      132 |         });
      133 |

      at tests/integration/routes/permission.admin.routes.integration.spec.ts:130:44
      at fulfilled (tests/integration/routes/permission.admin.routes.integration.spec.ts:6:58)

  ΓùÅ Integration Tests: Permission Admin Routes (/api/admin/permissions) ΓÇ║ GET /api/admin/permissions/:permissionName ΓÇ║ should return 200 and the permission if found

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

      166 |                  .set('Authorization', TEST_ADMIN_TOKEN);
      167 |
    > 168 |              expect(response.status).toBe(200);
          |                                      ^
      169 |              expect(response.body.permissionName).toBe(permName);
      170 |              expect(mockPermissionAdminService.getPermission).toHaveBeenCalledWith(
      171 |                  expect.objectContaining({ id: 'test-admin-id-123' }),

      at tests/integration/routes/permission.admin.routes.integration.spec.ts:168:38
      at fulfilled (tests/integration/routes/permission.admin.routes.integration.spec.ts:6:58)

  ΓùÅ Integration Tests: Permission Admin Routes (/api/admin/permissions) ΓÇ║ GET /api/admin/permissions/:permissionName ΓÇ║ should return 404 if permission not found

    expect(received).toBe(expected) // Object.is equality

    Expected: 404
    Received: 500

      180 |                  .set('Authorization', TEST_ADMIN_TOKEN);
      181 |
    > 182 |              expect(response.status).toBe(404);
          |                                      ^
      183 |              // Check based on controller's response or NotFoundError handling in middleware
      184 |              expect(response.body.message).toContain('not found');
      185 |          });

      at tests/integration/routes/permission.admin.routes.integration.spec.ts:182:38
      at fulfilled (tests/integration/routes/permission.admin.routes.integration.spec.ts:6:58)

  ΓùÅ Integration Tests: Permission Admin Routes (/api/admin/permissions) ΓÇ║ DELETE /api/admin/permissions/:permissionName ΓÇ║ should return 204 on successful deletion

    expect(received).toBe(expected) // Object.is equality

    Expected: 204
    Received: 500

      275 |                  .set('Authorization', TEST_ADMIN_TOKEN);
      276 |
    > 277 |              expect(response.status).toBe(204);
          |                                      ^
      278 |              expect(mockPermissionAdminService.deletePermission).toHaveBeenCalledWith(
      279 |                  expect.objectContaining({ id: 'test-admin-id-123' }),
      280 |                  permName

      at tests/integration/routes/permission.admin.routes.integration.spec.ts:277:38
      at fulfilled (tests/integration/routes/permission.admin.routes.integration.spec.ts:6:58)

  ΓùÅ Integration Tests: Permission Admin Routes (/api/admin/permissions) ΓÇ║ DELETE /api/admin/permissions/:permissionName ΓÇ║ should return 404 if permission not found for deletion

    expect(received).toBe(expected) // Object.is equality

    Expected: 404
    Received: 500

      289 |                  .delete(`${BASE_API_PATH}/${permName}`)
      290 |                  .set('Authorization', TEST_ADMIN_TOKEN);
    > 291 |              expect(response.status).toBe(404);
          |                                      ^
      292 |          });
      293 |
      294 |          it('should return 401 if token is invalid/missing', async () => {

      at tests/integration/routes/permission.admin.routes.integration.spec.ts:291:38
      at fulfilled (tests/integration/routes/permission.admin.routes.integration.spec.ts:6:58)

  ΓùÅ Integration Tests: Permission Admin Routes (/api/admin/permissions) ΓÇ║ GET /api/admin/permissions/:permissionName/roles ΓÇ║ should return 200 and list of role names

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

      309 |                  .set('Authorization', TEST_ADMIN_TOKEN);
      310 |
    > 311 |              expect(response.status).toBe(200);
          |                                      ^
      312 |              expect(response.body).toEqual({ roles });
      313 |              expect(mockPermissionAdminService.listRolesForPermission).toHaveBeenCalledWith(
      314 |                  expect.objectContaining({ id: 'test-admin-id-123' }),

      at tests/integration/routes/permission.admin.routes.integration.spec.ts:311:38
      at fulfilled (tests/integration/routes/permission.admin.routes.integration.spec.ts:6:58)

  ΓùÅ Integration Tests: Permission Admin Routes (/api/admin/permissions) ΓÇ║ GET /api/admin/permissions/:permissionName/roles ΓÇ║ should return 404 if permission is not found

    expect(received).toBe(expected) // Object.is equality

    Expected: 404
    Received: 500

      324 |                  .get(`${BASE_API_PATH}/${permName}/roles`)
      325 |                  .set('Authorization', TEST_ADMIN_TOKEN);
    > 326 |              expect(response.status).toBe(404);
          |                                      ^
      327 |         });
      328 |          it('should return 401 if token is invalid/missing', async () => {
      329 |              const response = await request(app).get(`${BASE_API_PATH}/${permName}/roles`);

      at tests/integration/routes/permission.admin.routes.integration.spec.ts:326:38
      at fulfilled (tests/integration/routes/permission.admin.routes.integration.spec.ts:6:58)

FAIL tests/integration/routes/role.admin.routes.integration.spec.ts (30.364 s)
  ΓùÅ Console

    console.info
      [WinstonLogger] Logger initialized with level "info" in "test" environment.

      at WinstonLogger.initializeLogger (src/infrastructure/logging/WinstonLogger.ts:68:17)
          at Array.map (<anonymous>)

    console.log
      {"level":"warn","message":"CORS_ORIGIN is set to \"*\" in a non-development environment. This is insecure!","metadata":{},"timestamp":"2026-02-23T10:47:12.043Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"CORS configured for origin: *","metadata":{},"timestamp":"2026-02-23T10:47:12.062Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"Application setup complete for environment: test","metadata":{},"timestamp":"2026-02-23T10:47:12.073Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> POST /api/admin/roles","metadata":{"correlationId":"b6fc6cfd-cfe9-47e5-8927-47691f8083ee","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"POST","requestId":"b6fc6cfd-cfe9-47e5-8927-47691f8083ee","url":"/api/admin/roles","userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.286Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - b6fc6cfd-cfe9-47e5-8927-47691f8083ee] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["role-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:47:12.320Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: {
        roleName: 'role-test-1771843625529',
        description: 'Test Role Description'
      }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'roleName', 'description' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"roleName":"role-test-1771843625529","description":"Test Role Description"}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      {"level":"info","message":"<-- POST /api/admin/roles 201 75.414ms","metadata":{"contentLength":"76","correlationId":"b6fc6cfd-cfe9-47e5-8927-47691f8083ee","durationMs":75.414,"eventType":"finish","requestId":"b6fc6cfd-cfe9-47e5-8927-47691f8083ee","statusCode":201,"userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.361Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/roles","metadata":{"correlationId":"d6dfd1c2-98f1-427c-8cf7-33059e877d97","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"d6dfd1c2-98f1-427c-8cf7-33059e877d97","url":"/api/admin/roles","userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.448Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - d6dfd1c2-98f1-427c-8cf7-33059e877d97] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["role-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:47:12.457Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"<-- GET /api/admin/roles 200 17.501ms","metadata":{"contentLength":"156","correlationId":"d6dfd1c2-98f1-427c-8cf7-33059e877d97","durationMs":17.501,"eventType":"finish","requestId":"d6dfd1c2-98f1-427c-8cf7-33059e877d97","statusCode":200,"userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.465Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/roles/test-role","metadata":{"correlationId":"b6dfa389-3b80-409c-b991-1f46c03a2f5e","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"b6dfa389-3b80-409c-b991-1f46c03a2f5e","url":"/api/admin/roles/test-role","userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.510Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - b6dfa389-3b80-409c-b991-1f46c03a2f5e] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["role-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:47:12.515Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [b6dfa389-3b80-409c-b991-1f46c03a2f5e]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:47:12.536Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"b6dfa389-3b80-409c-b991-1f46c03a2f5e","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/roles/test-role","requestId":"b6dfa389-3b80-409c-b991-1f46c03a2f5e","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:12.541Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/roles/test-role 500 39.765ms","metadata":{"error":{"contentLength":"3814","correlationId":"b6dfa389-3b80-409c-b991-1f46c03a2f5e","durationMs":39.765,"eventType":"finish","requestId":"b6dfa389-3b80-409c-b991-1f46c03a2f5e","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:12.550Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/roles/test-role","metadata":{"correlationId":"0937cde2-bc46-4caa-b1f3-5d50b577466c","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"0937cde2-bc46-4caa-b1f3-5d50b577466c","url":"/api/admin/roles/test-role","userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.586Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 0937cde2-bc46-4caa-b1f3-5d50b577466c] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["role-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:47:12.591Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [0937cde2-bc46-4caa-b1f3-5d50b577466c]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:47:12.596Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"0937cde2-bc46-4caa-b1f3-5d50b577466c","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/roles/test-role","requestId":"0937cde2-bc46-4caa-b1f3-5d50b577466c","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:12.600Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/roles/test-role 500 20.157ms","metadata":{"error":{"contentLength":"3814","correlationId":"0937cde2-bc46-4caa-b1f3-5d50b577466c","durationMs":20.157,"eventType":"finish","requestId":"0937cde2-bc46-4caa-b1f3-5d50b577466c","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:12.606Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/roles/test-role","metadata":{"correlationId":"a77264a1-1dc3-4dad-81ab-044fca4f491b","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"a77264a1-1dc3-4dad-81ab-044fca4f491b","url":"/api/admin/roles/test-role","userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.639Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Authentication: Missing or invalid Authorization header.","metadata":{},"timestamp":"2026-02-23T10:47:12.644Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Client error processing request: Authorization header missing or invalid.","metadata":{"correlationId":"a77264a1-1dc3-4dad-81ab-044fca4f491b","errorMessage":"Authorization header missing or invalid.","errorName":"AuthenticationError","isOperational":true,"method":"GET","path":"/api/admin/roles/test-role","requestId":"a77264a1-1dc3-4dad-81ab-044fca4f491b","stack":"AuthenticationError: Authorization header missing or invalid.\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:32:25\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:27:70\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestLogger.middleware.ts:84:9\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:32\n    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)\n    at middleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:13)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at addRequestId (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestId.middleware.ts:33:5)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at urlencodedParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\urlencoded.js:68:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at jsonParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\json.js:100:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at requestMetricsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestMetrics.middleware.ts:26:3)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at cors (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:188:7)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:224:17\n    at originCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:214:15)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:531:6)\n    at xXssProtectionMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:311:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPoweredByMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:304:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPermittedCrossDomainPoliciesMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:297:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xFrameOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:281:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDownloadOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:261:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDnsPrefetchControlMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:254:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xContentTypeOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:246:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at strictTransportSecurityMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:239:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at referrerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:207:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at originAgentClusterMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:182:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginResourcePolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:175:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginOpenerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:159:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at contentSecurityPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:124:4)","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.687Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"<-- GET /api/admin/roles/test-role 401 58.085ms","metadata":{"contentLength":"151","correlationId":"a77264a1-1dc3-4dad-81ab-044fca4f491b","durationMs":58.085,"eventType":"finish","requestId":"a77264a1-1dc3-4dad-81ab-044fca4f491b","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.697Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> PUT /api/admin/roles/test-role-to-update","metadata":{"correlationId":"6aa61ace-519d-450c-b88f-166461480139","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"PUT","requestId":"6aa61ace-519d-450c-b88f-166461480139","url":"/api/admin/roles/test-role-to-update","userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.730Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 6aa61ace-519d-450c-b88f-166461480139] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["role-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:47:12.735Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: { description: 'Updated Integration Description' }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'description' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"description":"Updated Integration Description"}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      {"level":"info","message":"<-- PUT /api/admin/roles/test-role-to-update 200 18.679ms","metadata":{"contentLength":"185","correlationId":"6aa61ace-519d-450c-b88f-166461480139","durationMs":18.679,"eventType":"finish","requestId":"6aa61ace-519d-450c-b88f-166461480139","statusCode":200,"userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.749Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> PUT /api/admin/roles/test-role-to-update","metadata":{"correlationId":"80e78a0c-d5e0-478c-9dee-b9344a617dd4","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"PUT","requestId":"80e78a0c-d5e0-478c-9dee-b9344a617dd4","url":"/api/admin/roles/test-role-to-update","userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.773Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 80e78a0c-d5e0-478c-9dee-b9344a617dd4] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["role-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:47:12.776Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: { description: 'Updated Integration Description' }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'description' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"description":"Updated Integration Description"}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      {"level":"warn","message":"<-- PUT /api/admin/roles/test-role-to-update 404 12.098ms","metadata":{"contentLength":"62","correlationId":"80e78a0c-d5e0-478c-9dee-b9344a617dd4","durationMs":12.098,"eventType":"finish","requestId":"80e78a0c-d5e0-478c-9dee-b9344a617dd4","statusCode":404,"userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.785Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> PUT /api/admin/roles/test-role-to-update","metadata":{"correlationId":"cda099ba-2319-45e4-b2aa-f24d0590a945","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"PUT","requestId":"cda099ba-2319-45e4-b2aa-f24d0590a945","url":"/api/admin/roles/test-role-to-update","userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.846Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Authentication: Missing or invalid Authorization header.","metadata":{},"timestamp":"2026-02-23T10:47:12.848Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Client error processing request: Authorization header missing or invalid.","metadata":{"correlationId":"cda099ba-2319-45e4-b2aa-f24d0590a945","errorMessage":"Authorization header missing or invalid.","errorName":"AuthenticationError","isOperational":true,"method":"PUT","path":"/api/admin/roles/test-role-to-update","requestId":"cda099ba-2319-45e4-b2aa-f24d0590a945","stack":"AuthenticationError: Authorization header missing or invalid.\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:32:25\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:27:70\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestLogger.middleware.ts:84:9\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:32\n    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)\n    at middleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:13)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at addRequestId (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestId.middleware.ts:33:5)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at urlencodedParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\urlencoded.js:57:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\read.js:132:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:214:14)\n    at invokeCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\raw-body@3.0.0\\node_modules\\raw-body\\index.js:238:16)\n    at done (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\raw-body@3.0.0\\node_modules\\raw-body\\index.js:227:7)\n    at IncomingMessage.onEnd (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\raw-body@3.0.0\\node_modules\\raw-body\\index.js:287:7)\n    at IncomingMessage.emit (node:events:519:28)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at processTicksAndRejections (node:internal/process/task_queues:90:21)","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.856Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"<-- PUT /api/admin/roles/test-role-to-update 401 20.192ms","metadata":{"contentLength":"151","correlationId":"cda099ba-2319-45e4-b2aa-f24d0590a945","durationMs":20.192,"eventType":"finish","requestId":"cda099ba-2319-45e4-b2aa-f24d0590a945","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.866Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> DELETE /api/admin/roles/test-role-to-delete","metadata":{"correlationId":"a072318f-b8bd-4ff6-80ca-d47c04fbf428","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"DELETE","requestId":"a072318f-b8bd-4ff6-80ca-d47c04fbf428","url":"/api/admin/roles/test-role-to-delete","userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.899Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - a072318f-b8bd-4ff6-80ca-d47c04fbf428] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["role-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:47:12.905Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [a072318f-b8bd-4ff6-80ca-d47c04fbf428]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:47:12.913Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"a072318f-b8bd-4ff6-80ca-d47c04fbf428","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"DELETE","path":"/api/admin/roles/test-role-to-delete","requestId":"a072318f-b8bd-4ff6-80ca-d47c04fbf428","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:12.917Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- DELETE /api/admin/roles/test-role-to-delete 500 23.610ms","metadata":{"error":{"contentLength":"3814","correlationId":"a072318f-b8bd-4ff6-80ca-d47c04fbf428","durationMs":23.61,"eventType":"finish","requestId":"a072318f-b8bd-4ff6-80ca-d47c04fbf428","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:12.923Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> DELETE /api/admin/roles/test-role-to-delete","metadata":{"correlationId":"eb56f991-179f-4301-88e7-21e9be0ae538","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"DELETE","requestId":"eb56f991-179f-4301-88e7-21e9be0ae538","url":"/api/admin/roles/test-role-to-delete","userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.959Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - eb56f991-179f-4301-88e7-21e9be0ae538] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["role-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:47:12.963Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [eb56f991-179f-4301-88e7-21e9be0ae538]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:47:12.968Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"eb56f991-179f-4301-88e7-21e9be0ae538","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"DELETE","path":"/api/admin/roles/test-role-to-delete","requestId":"eb56f991-179f-4301-88e7-21e9be0ae538","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:12.971Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- DELETE /api/admin/roles/test-role-to-delete 500 17.701ms","metadata":{"error":{"contentLength":"3814","correlationId":"eb56f991-179f-4301-88e7-21e9be0ae538","durationMs":17.701,"eventType":"finish","requestId":"eb56f991-179f-4301-88e7-21e9be0ae538","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:12.976Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> DELETE /api/admin/roles/test-role-to-delete","metadata":{"correlationId":"54f90c70-d2f4-4cb9-87cf-130a7e98f7f5","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"DELETE","requestId":"54f90c70-d2f4-4cb9-87cf-130a7e98f7f5","url":"/api/admin/roles/test-role-to-delete","userId":"anonymous"},"timestamp":"2026-02-23T10:47:13.014Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Authentication: Missing or invalid Authorization header.","metadata":{},"timestamp":"2026-02-23T10:47:13.019Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Client error processing request: Authorization header missing or invalid.","metadata":{"correlationId":"54f90c70-d2f4-4cb9-87cf-130a7e98f7f5","errorMessage":"Authorization header missing or invalid.","errorName":"AuthenticationError","isOperational":true,"method":"DELETE","path":"/api/admin/roles/test-role-to-delete","requestId":"54f90c70-d2f4-4cb9-87cf-130a7e98f7f5","stack":"AuthenticationError: Authorization header missing or invalid.\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:32:25\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:27:70\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestLogger.middleware.ts:84:9\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:32\n    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)\n    at middleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:13)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at addRequestId (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestId.middleware.ts:33:5)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at urlencodedParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\urlencoded.js:68:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at jsonParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\json.js:100:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at requestMetricsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestMetrics.middleware.ts:26:3)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at cors (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:188:7)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:224:17\n    at originCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:214:15)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:531:6)\n    at xXssProtectionMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:311:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPoweredByMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:304:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPermittedCrossDomainPoliciesMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:297:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xFrameOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:281:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDownloadOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:261:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDnsPrefetchControlMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:254:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xContentTypeOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:246:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at strictTransportSecurityMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:239:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at referrerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:207:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at originAgentClusterMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:182:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginResourcePolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:175:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginOpenerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:159:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at contentSecurityPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:124:4)","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T10:47:13.027Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"<-- DELETE /api/admin/roles/test-role-to-delete 401 20.912ms","metadata":{"contentLength":"151","correlationId":"54f90c70-d2f4-4cb9-87cf-130a7e98f7f5","durationMs":20.912,"eventType":"finish","requestId":"54f90c70-d2f4-4cb9-87cf-130a7e98f7f5","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T10:47:13.035Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> POST /api/admin/roles/role-for-permissions/permissions","metadata":{"correlationId":"82a49e24-1523-475b-9854-eb292e920cca","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"POST","requestId":"82a49e24-1523-475b-9854-eb292e920cca","url":"/api/admin/roles/role-for-permissions/permissions","userId":"anonymous"},"timestamp":"2026-02-23T10:47:13.062Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 82a49e24-1523-475b-9854-eb292e920cca] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["role-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:47:13.064Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: { permissionName: 'permission-for-role' }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'permissionName' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"permissionName":"permission-for-role"}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      {"level":"info","message":"<-- POST /api/admin/roles/role-for-permissions/permissions 204 12.452ms","metadata":{"correlationId":"82a49e24-1523-475b-9854-eb292e920cca","durationMs":12.452,"eventType":"finish","requestId":"82a49e24-1523-475b-9854-eb292e920cca","statusCode":204,"userId":"anonymous"},"timestamp":"2026-02-23T10:47:13.074Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> DELETE /api/admin/roles/role-for-permissions/permissions/permission-for-role","metadata":{"correlationId":"b91b7b41-597f-4f1b-91fb-d9d44d369b74","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"DELETE","requestId":"b91b7b41-597f-4f1b-91fb-d9d44d369b74","url":"/api/admin/roles/role-for-permissions/permissions/permission-for-role","userId":"anonymous"},"timestamp":"2026-02-23T10:47:13.097Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - b91b7b41-597f-4f1b-91fb-d9d44d369b74] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["role-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:47:13.102Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [b91b7b41-597f-4f1b-91fb-d9d44d369b74]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:47:13.108Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"b91b7b41-597f-4f1b-91fb-d9d44d369b74","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"DELETE","path":"/api/admin/roles/role-for-permissions/permissions/permission-for-role","requestId":"b91b7b41-597f-4f1b-91fb-d9d44d369b74","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:13.110Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- DELETE /api/admin/roles/role-for-permissions/permissions/permission-for-role 500 19.586ms","metadata":{"error":{"contentLength":"3951","correlationId":"b91b7b41-597f-4f1b-91fb-d9d44d369b74","durationMs":19.586,"eventType":"finish","requestId":"b91b7b41-597f-4f1b-91fb-d9d44d369b74","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:13.116Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/roles/role-for-permissions/permissions","metadata":{"correlationId":"e0d94f51-8001-45ab-8214-7873b575d635","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"e0d94f51-8001-45ab-8214-7873b575d635","url":"/api/admin/roles/role-for-permissions/permissions","userId":"anonymous"},"timestamp":"2026-02-23T10:47:13.156Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - e0d94f51-8001-45ab-8214-7873b575d635] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["role-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:47:13.160Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [e0d94f51-8001-45ab-8214-7873b575d635]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:47:13.166Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"e0d94f51-8001-45ab-8214-7873b575d635","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/roles/role-for-permissions/permissions","requestId":"e0d94f51-8001-45ab-8214-7873b575d635","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:13.169Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/roles/role-for-permissions/permissions 500 17.993ms","metadata":{"error":{"contentLength":"3814","correlationId":"e0d94f51-8001-45ab-8214-7873b575d635","durationMs":17.993,"eventType":"finish","requestId":"e0d94f51-8001-45ab-8214-7873b575d635","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:13.174Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

  ΓùÅ Integration Tests: Role Admin Routes (/api/admin/roles) ΓÇ║ GET /api/admin/roles/:roleName ΓÇ║ should return 200 OK with role data if role exists

    expected 200 "OK", got 500 "Internal Server Error"

      142 |                 .get(`${BASE_API_PATH}/${targetRoleName}`)
      143 |                 .set(MOCK_AUTH_HEADER)
    > 144 |                 .expect(HttpStatusCode.OK) // 200
          |                  ^
      145 |                 .expect(res => {
      146 |                     expect(res.body.roleName).toBe(targetRoleName);
      147 |                     expect(res.body.description).toBe('get role');

      at tests/integration/routes/role.admin.routes.integration.spec.ts:144:18
      at tests/integration/routes/role.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/role.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/role.admin.routes.integration.spec.ts:139:77)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Role Admin Routes (/api/admin/roles) ΓÇ║ GET /api/admin/roles/:roleName ΓÇ║ should return 404 Not Found if service returns null

    expected 404 "Not Found", got 500 "Internal Server Error"

      155 |                 .get(`${BASE_API_PATH}/${targetRoleName}`)
      156 |                 .set(MOCK_AUTH_HEADER)
    > 157 |                 .expect(HttpStatusCode.NOT_FOUND); // 404
          |                  ^
      158 |             expect(mockRoleAdminService.getRole).toHaveBeenCalledWith(expect.anything(), targetRoleName);
      159 |         });
      160 |

      at tests/integration/routes/role.admin.routes.integration.spec.ts:157:18
      at tests/integration/routes/role.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/role.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/role.admin.routes.integration.spec.ts:152:78)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Role Admin Routes (/api/admin/roles) ΓÇ║ DELETE /api/admin/roles/:roleName ΓÇ║ should return 204 No Content if service succeeds

    expected 204 "No Content", got 500 "Internal Server Error"

      215 |                 .delete(`${BASE_API_PATH}/${targetRoleName}`)
      216 |                 .set(MOCK_AUTH_HEADER)
    > 217 |                 .expect(HttpStatusCode.NO_CONTENT); // 204
          |                  ^
      218 |             expect(mockRoleAdminService.deleteRole).toHaveBeenCalledWith(expect.anything(), targetRoleName);
      219 |         });
      220 |

      at tests/integration/routes/role.admin.routes.integration.spec.ts:217:18
      at tests/integration/routes/role.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/role.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/role.admin.routes.integration.spec.ts:212:75)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Role Admin Routes (/api/admin/roles) ΓÇ║ DELETE /api/admin/roles/:roleName ΓÇ║ should return 404 Not Found if service throws RoleNotFoundError

    expected 404 "Not Found", got 500 "Internal Server Error"

      226 |                 .delete(`${BASE_API_PATH}/${targetRoleName}`)
      227 |                 .set(MOCK_AUTH_HEADER)
    > 228 |                 .expect(HttpStatusCode.NOT_FOUND); // 404
          |                  ^
      229 |             expect(mockRoleAdminService.deleteRole).toHaveBeenCalledWith(expect.anything(), targetRoleName);
      230 |         });
      231 |

      at tests/integration/routes/role.admin.routes.integration.spec.ts:228:18
      at tests/integration/routes/role.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/role.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/role.admin.routes.integration.spec.ts:221:90)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Role Admin Routes (/api/admin/roles) ΓÇ║ Permissions Management (/api/admin/roles/:roleName/permissions) ΓÇ║ DELETE /:roleName/permissions/:permissionName ΓÇ║ should return 204 No Content on successful removal

    expected 204 "No Content", got 500 "Internal Server Error"

      260 |                     .delete(`${BASE_API_PATH}/${targetRoleName}/permissions/${targetPermissionName}`)
      261 |                     .set(MOCK_AUTH_HEADER)
    > 262 |                     .expect(HttpStatusCode.NO_CONTENT); // 204
          |                      ^
      263 |                 expect(mockRoleAdminService.removePermissionFromRole).toHaveBeenCalledWith(expect.anything(), targetRoleName, targetPermissionName);
      264 |             });
      265 |         });

      at tests/integration/routes/role.admin.routes.integration.spec.ts:262:22
      at tests/integration/routes/role.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/role.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/role.admin.routes.integration.spec.ts:257:81)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Role Admin Routes (/api/admin/roles) ΓÇ║ Permissions Management (/api/admin/roles/:roleName/permissions) ΓÇ║ GET /:roleName/permissions ΓÇ║ should return 200 OK with a list of permission names

    expected 200 "OK", got 500 "Internal Server Error"

      272 |                     .get(`${BASE_API_PATH}/${targetRoleName}/permissions`)
      273 |                     .set(MOCK_AUTH_HEADER)
    > 274 |                     .expect(HttpStatusCode.OK) // 200
          |                      ^
      275 |                     .expect(res => {
      276 |                         expect(res.body.permissions).toEqual(mockPermissions);
      277 |                     });

      at tests/integration/routes/role.admin.routes.integration.spec.ts:274:22
      at tests/integration/routes/role.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/role.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/role.admin.routes.integration.spec.ts:268:83)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

FAIL tests/integration/routes/group.admin.routes.integration.spec.ts (30.384 s)
  ΓùÅ Console

    console.info
      [WinstonLogger] Logger initialized with level "info" in "test" environment.

      at WinstonLogger.initializeLogger (src/infrastructure/logging/WinstonLogger.ts:68:17)
          at Array.map (<anonymous>)

    console.log
      {"level":"warn","message":"CORS_ORIGIN is set to \"*\" in a non-development environment. This is insecure!","metadata":{},"timestamp":"2026-02-23T10:47:11.754Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"CORS configured for origin: *","metadata":{},"timestamp":"2026-02-23T10:47:11.780Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"Application setup complete for environment: test","metadata":{},"timestamp":"2026-02-23T10:47:11.785Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> POST /api/admin/groups","metadata":{"correlationId":"747f1e09-057a-42f8-9849-30ba87070fe1","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"POST","requestId":"747f1e09-057a-42f8-9849-30ba87070fe1","url":"/api/admin/groups","userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.063Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 747f1e09-057a-42f8-9849-30ba87070fe1] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["group-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:47:12.089Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: {
        groupName: 'Test-Group-1771843625376',
        description: 'Integration Test Group Description',
        precedence: 10
      }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'groupName', 'description', 'precedence' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"groupName":"Test-Group-1771843625376","description":"Integration Test Group Description","precedence":10}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      {"level":"info","message":"<-- POST /api/admin/groups 201 67.785ms","metadata":{"contentLength":"179","correlationId":"747f1e09-057a-42f8-9849-30ba87070fe1","durationMs":67.785,"eventType":"finish","requestId":"747f1e09-057a-42f8-9849-30ba87070fe1","statusCode":201,"userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.130Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> POST /api/admin/groups","metadata":{"correlationId":"0b71e1e2-5366-46f0-874d-5a1fb038644d","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"POST","requestId":"0b71e1e2-5366-46f0-874d-5a1fb038644d","url":"/api/admin/groups","userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.209Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 0b71e1e2-5366-46f0-874d-5a1fb038644d] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["group-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:47:12.212Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: { description: 'Only desc' }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'description' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"description":"Only desc"}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      {"level":"warn","message":"Request validation failed [0b71e1e2-5366-46f0-874d-5a1fb038644d]:","metadata":{"errors":{"groupName":"Group name is required"}},"timestamp":"2026-02-23T10:47:12.222Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)
          at Generator.throw (<anonymous>)

    console.log
      {"level":"warn","message":"Client error processing request: Input validation failed","metadata":{"correlationId":"0b71e1e2-5366-46f0-874d-5a1fb038644d","details":{"groupName":"Group name is required"},"errorMessage":"Input validation failed","errorName":"ValidationError","isOperational":true,"method":"POST","path":"/api/admin/groups","requestId":"0b71e1e2-5366-46f0-874d-5a1fb038644d","stack":"ValidationError: Input validation failed\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:57:41\n    at Generator.throw (<anonymous>)\n    at rejected (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:6:65)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":400,"userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.230Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)
          at Generator.throw (<anonymous>)

    console.log
      {"level":"warn","message":"<-- POST /api/admin/groups 400 28.283ms","metadata":{"contentLength":"179","correlationId":"0b71e1e2-5366-46f0-874d-5a1fb038644d","durationMs":28.283,"eventType":"finish","requestId":"0b71e1e2-5366-46f0-874d-5a1fb038644d","statusCode":400,"userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.237Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> POST /api/admin/groups","metadata":{"correlationId":"4ee935f9-935f-4501-a8c1-81df2f8f6644","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"POST","requestId":"4ee935f9-935f-4501-a8c1-81df2f8f6644","url":"/api/admin/groups","userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.291Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 4ee935f9-935f-4501-a8c1-81df2f8f6644] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["group-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:47:12.298Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: {
        groupName: 'Test-Group-1771843625376',
        description: 'Integration Test Group Description',
        precedence: 10
      }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'groupName', 'description', 'precedence' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"groupName":"Test-Group-1771843625376","description":"Integration Test Group Description","precedence":10}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      {"level":"error","message":"[GroupAdminCtrl] Failed to create group Test-Group-1771843625376","metadata":{"error":{"adminUserId":"test-admin-id-123","error":{"isOperational":true,"name":"GroupExistsError","statusCode":409}}},"timestamp":"2026-02-23T10:47:12.307Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)
          at Generator.throw (<anonymous>)

    console.log
      {"level":"warn","message":"Client error processing request: Group 'Group exists' already exists.","metadata":{"correlationId":"4ee935f9-935f-4501-a8c1-81df2f8f6644","errorMessage":"Group 'Group exists' already exists.","errorName":"GroupExistsError","isOperational":true,"method":"POST","path":"/api/admin/groups","requestId":"4ee935f9-935f-4501-a8c1-81df2f8f6644","stack":"GroupExistsError: Group 'Group exists' already exists.\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\group.admin.routes.integration.spec.ts:174:35\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\group.admin.routes.integration.spec.ts:9:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\group.admin.routes.integration.spec.ts:5:12)\n    at Object.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\group.admin.routes.integration.spec.ts:172:88)\n    at Promise.then.completed (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\testWorker.js:108:12)","statusCode":409,"userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.312Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)
          at Generator.throw (<anonymous>)

    console.log
      {"level":"warn","message":"<-- POST /api/admin/groups 409 27.057ms","metadata":{"contentLength":"144","correlationId":"4ee935f9-935f-4501-a8c1-81df2f8f6644","durationMs":27.057,"eventType":"finish","requestId":"4ee935f9-935f-4501-a8c1-81df2f8f6644","statusCode":409,"userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.318Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> POST /api/admin/groups","metadata":{"correlationId":"763fc8bb-3e34-4cbd-9982-d4fe997d96f7","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"POST","requestId":"763fc8bb-3e34-4cbd-9982-d4fe997d96f7","url":"/api/admin/groups","userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.375Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 763fc8bb-3e34-4cbd-9982-d4fe997d96f7] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["group-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:47:12.379Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: {
        groupName: 'Test-Group-1771843625376',
        description: 'Integration Test Group Description',
        precedence: 10
      }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'groupName', 'description', 'precedence' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"groupName":"Test-Group-1771843625376","description":"Integration Test Group Description","precedence":10}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      {"level":"error","message":"[GroupAdminCtrl] Failed to create group Test-Group-1771843625376","metadata":{"error":{"adminUserId":"test-admin-id-123","error":{}}},"timestamp":"2026-02-23T10:47:12.392Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)
          at Generator.throw (<anonymous>)

    console.log
      {"level":"error","message":"Server error processing request: DB connection failed","metadata":{"error":{"correlationId":"763fc8bb-3e34-4cbd-9982-d4fe997d96f7","errorMessage":"DB connection failed","errorName":"Error","isOperational":false,"method":"POST","path":"/api/admin/groups","requestId":"763fc8bb-3e34-4cbd-9982-d4fe997d96f7","stack":"Error: DB connection failed\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\group.admin.routes.integration.spec.ts:185:34\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\group.admin.routes.integration.spec.ts:9:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\group.admin.routes.integration.spec.ts:5:12)\n    at Object.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\group.admin.routes.integration.spec.ts:184:104)\n    at Promise.then.completed (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\testWorker.js:108:12)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:12.396Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)
          at Generator.throw (<anonymous>)

    console.log
      {"level":"error","message":"<-- POST /api/admin/groups 500 26.520ms","metadata":{"error":{"contentLength":"3133","correlationId":"763fc8bb-3e34-4cbd-9982-d4fe997d96f7","durationMs":26.52,"eventType":"finish","requestId":"763fc8bb-3e34-4cbd-9982-d4fe997d96f7","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:12.402Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/groups","metadata":{"correlationId":"daa19939-b64f-4ea7-bd3f-87f0d82240d4","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"daa19939-b64f-4ea7-bd3f-87f0d82240d4","url":"/api/admin/groups","userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.433Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Authentication: Missing or invalid Authorization header.","metadata":{},"timestamp":"2026-02-23T10:47:12.441Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Client error processing request: Authorization header missing or invalid.","metadata":{"correlationId":"daa19939-b64f-4ea7-bd3f-87f0d82240d4","errorMessage":"Authorization header missing or invalid.","errorName":"AuthenticationError","isOperational":true,"method":"GET","path":"/api/admin/groups","requestId":"daa19939-b64f-4ea7-bd3f-87f0d82240d4","stack":"AuthenticationError: Authorization header missing or invalid.\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:32:25\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:27:70\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestLogger.middleware.ts:84:9\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:32\n    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)\n    at middleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:13)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at addRequestId (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestId.middleware.ts:33:5)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at urlencodedParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\urlencoded.js:68:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at jsonParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\json.js:100:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at requestMetricsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestMetrics.middleware.ts:26:3)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at cors (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:188:7)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:224:17\n    at originCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:214:15)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:531:6)\n    at xXssProtectionMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:311:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPoweredByMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:304:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPermittedCrossDomainPoliciesMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:297:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xFrameOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:281:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDownloadOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:261:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDnsPrefetchControlMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:254:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xContentTypeOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:246:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at strictTransportSecurityMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:239:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at referrerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:207:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at originAgentClusterMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:182:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginResourcePolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:175:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginOpenerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:159:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at contentSecurityPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:124:4)","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.505Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"<-- GET /api/admin/groups 401 89.933ms","metadata":{"contentLength":"151","correlationId":"daa19939-b64f-4ea7-bd3f-87f0d82240d4","durationMs":89.933,"eventType":"finish","requestId":"daa19939-b64f-4ea7-bd3f-87f0d82240d4","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.523Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/groups/Get-Group-Test","metadata":{"correlationId":"410e99fd-dfb1-4317-871e-6fae1553f4b4","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"410e99fd-dfb1-4317-871e-6fae1553f4b4","url":"/api/admin/groups/Get-Group-Test","userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.556Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 410e99fd-dfb1-4317-871e-6fae1553f4b4] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["group-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:47:12.561Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [410e99fd-dfb1-4317-871e-6fae1553f4b4]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:47:12.570Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"410e99fd-dfb1-4317-871e-6fae1553f4b4","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/groups/Get-Group-Test","requestId":"410e99fd-dfb1-4317-871e-6fae1553f4b4","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:12.573Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/groups/Get-Group-Test 500 23.197ms","metadata":{"error":{"contentLength":"3814","correlationId":"410e99fd-dfb1-4317-871e-6fae1553f4b4","durationMs":23.197,"eventType":"finish","requestId":"410e99fd-dfb1-4317-871e-6fae1553f4b4","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:12.579Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/groups/Get-Group-Test","metadata":{"correlationId":"b5171c10-ec3f-4b3b-96e5-8889b004ab03","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"b5171c10-ec3f-4b3b-96e5-8889b004ab03","url":"/api/admin/groups/Get-Group-Test","userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.621Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - b5171c10-ec3f-4b3b-96e5-8889b004ab03] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["group-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:47:12.626Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [b5171c10-ec3f-4b3b-96e5-8889b004ab03]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:47:12.631Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"b5171c10-ec3f-4b3b-96e5-8889b004ab03","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/groups/Get-Group-Test","requestId":"b5171c10-ec3f-4b3b-96e5-8889b004ab03","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:12.634Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/groups/Get-Group-Test 500 20.270ms","metadata":{"error":{"contentLength":"3814","correlationId":"b5171c10-ec3f-4b3b-96e5-8889b004ab03","durationMs":20.27,"eventType":"finish","requestId":"b5171c10-ec3f-4b3b-96e5-8889b004ab03","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:12.642Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/groups/Get-Group-Test","metadata":{"correlationId":"7e74251e-fa7a-4303-8a90-7373072d5d61","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"7e74251e-fa7a-4303-8a90-7373072d5d61","url":"/api/admin/groups/Get-Group-Test","userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.675Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 7e74251e-fa7a-4303-8a90-7373072d5d61] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["group-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:47:12.679Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [7e74251e-fa7a-4303-8a90-7373072d5d61]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:47:12.687Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"7e74251e-fa7a-4303-8a90-7373072d5d61","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/groups/Get-Group-Test","requestId":"7e74251e-fa7a-4303-8a90-7373072d5d61","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:12.690Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/groups/Get-Group-Test 500 21.175ms","metadata":{"error":{"contentLength":"3814","correlationId":"7e74251e-fa7a-4303-8a90-7373072d5d61","durationMs":21.175,"eventType":"finish","requestId":"7e74251e-fa7a-4303-8a90-7373072d5d61","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:12.696Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/groups/Invalid%20Group%20Name%20With%20Spaces","metadata":{"correlationId":"69c46fa0-6a9d-4e83-a071-a2f388806903","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"69c46fa0-6a9d-4e83-a071-a2f388806903","url":"/api/admin/groups/Invalid%20Group%20Name%20With%20Spaces","userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.749Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 69c46fa0-6a9d-4e83-a071-a2f388806903] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["group-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:47:12.754Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [69c46fa0-6a9d-4e83-a071-a2f388806903]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:47:12.759Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"69c46fa0-6a9d-4e83-a071-a2f388806903","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/groups/Invalid%20Group%20Name%20With%20Spaces","requestId":"69c46fa0-6a9d-4e83-a071-a2f388806903","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:12.763Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/groups/Invalid%20Group%20Name%20With%20Spaces 500 21.144ms","metadata":{"error":{"contentLength":"3814","correlationId":"69c46fa0-6a9d-4e83-a071-a2f388806903","durationMs":21.144,"eventType":"finish","requestId":"69c46fa0-6a9d-4e83-a071-a2f388806903","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:12.769Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/groups/Get-Group-Test","metadata":{"correlationId":"01022e1c-e3b1-4b10-b429-07e5dd985a11","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"01022e1c-e3b1-4b10-b429-07e5dd985a11","url":"/api/admin/groups/Get-Group-Test","userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.842Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 01022e1c-e3b1-4b10-b429-07e5dd985a11] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["group-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:47:12.846Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [01022e1c-e3b1-4b10-b429-07e5dd985a11]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:47:12.852Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"01022e1c-e3b1-4b10-b429-07e5dd985a11","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/groups/Get-Group-Test","requestId":"01022e1c-e3b1-4b10-b429-07e5dd985a11","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:12.855Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/groups/Get-Group-Test 500 19.616ms","metadata":{"error":{"contentLength":"3814","correlationId":"01022e1c-e3b1-4b10-b429-07e5dd985a11","durationMs":19.616,"eventType":"finish","requestId":"01022e1c-e3b1-4b10-b429-07e5dd985a11","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:12.861Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/groups/Get-Group-Test","metadata":{"correlationId":"95fa3f04-9d10-4d85-ab53-11ff39dc476e","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"95fa3f04-9d10-4d85-ab53-11ff39dc476e","url":"/api/admin/groups/Get-Group-Test","userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.910Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Authentication: Missing or invalid Authorization header.","metadata":{},"timestamp":"2026-02-23T10:47:12.914Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Client error processing request: Authorization header missing or invalid.","metadata":{"correlationId":"95fa3f04-9d10-4d85-ab53-11ff39dc476e","errorMessage":"Authorization header missing or invalid.","errorName":"AuthenticationError","isOperational":true,"method":"GET","path":"/api/admin/groups/Get-Group-Test","requestId":"95fa3f04-9d10-4d85-ab53-11ff39dc476e","stack":"AuthenticationError: Authorization header missing or invalid.\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:32:25\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:27:70\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestLogger.middleware.ts:84:9\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:32\n    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)\n    at middleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:13)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at addRequestId (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestId.middleware.ts:33:5)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at urlencodedParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\urlencoded.js:68:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at jsonParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\json.js:100:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at requestMetricsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestMetrics.middleware.ts:26:3)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at cors (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:188:7)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:224:17\n    at originCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:214:15)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:531:6)\n    at xXssProtectionMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:311:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPoweredByMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:304:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPermittedCrossDomainPoliciesMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:297:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xFrameOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:281:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDownloadOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:261:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDnsPrefetchControlMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:254:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xContentTypeOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:246:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at strictTransportSecurityMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:239:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at referrerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:207:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at originAgentClusterMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:182:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginResourcePolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:175:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginOpenerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:159:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at contentSecurityPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:124:4)","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.922Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"<-- GET /api/admin/groups/Get-Group-Test 401 17.382ms","metadata":{"contentLength":"151","correlationId":"95fa3f04-9d10-4d85-ab53-11ff39dc476e","durationMs":17.382,"eventType":"finish","requestId":"95fa3f04-9d10-4d85-ab53-11ff39dc476e","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.928Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> DELETE /api/admin/groups/Delete-Group-Test","metadata":{"correlationId":"c8b87527-0039-4390-a1a6-d7cb76d820eb","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"DELETE","requestId":"c8b87527-0039-4390-a1a6-d7cb76d820eb","url":"/api/admin/groups/Delete-Group-Test","userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.960Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - c8b87527-0039-4390-a1a6-d7cb76d820eb] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["group-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:47:12.964Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [c8b87527-0039-4390-a1a6-d7cb76d820eb]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:47:12.968Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"c8b87527-0039-4390-a1a6-d7cb76d820eb","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"DELETE","path":"/api/admin/groups/Delete-Group-Test","requestId":"c8b87527-0039-4390-a1a6-d7cb76d820eb","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:12.970Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- DELETE /api/admin/groups/Delete-Group-Test 500 15.251ms","metadata":{"error":{"contentLength":"3814","correlationId":"c8b87527-0039-4390-a1a6-d7cb76d820eb","durationMs":15.251,"eventType":"finish","requestId":"c8b87527-0039-4390-a1a6-d7cb76d820eb","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:12.975Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> DELETE /api/admin/groups/Delete-Group-Test","metadata":{"correlationId":"53bd9966-c721-4ecb-9449-14710171b424","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"DELETE","requestId":"53bd9966-c721-4ecb-9449-14710171b424","url":"/api/admin/groups/Delete-Group-Test","userId":"anonymous"},"timestamp":"2026-02-23T10:47:13.015Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 53bd9966-c721-4ecb-9449-14710171b424] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["group-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:47:13.019Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [53bd9966-c721-4ecb-9449-14710171b424]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:47:13.023Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"53bd9966-c721-4ecb-9449-14710171b424","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"DELETE","path":"/api/admin/groups/Delete-Group-Test","requestId":"53bd9966-c721-4ecb-9449-14710171b424","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:13.025Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- DELETE /api/admin/groups/Delete-Group-Test 500 15.468ms","metadata":{"error":{"contentLength":"3814","correlationId":"53bd9966-c721-4ecb-9449-14710171b424","durationMs":15.468,"eventType":"finish","requestId":"53bd9966-c721-4ecb-9449-14710171b424","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:13.030Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> DELETE /api/admin/groups/Invalid%20Chars%20%24","metadata":{"correlationId":"ca29ea76-aec9-4d5a-b9cf-55bdb43eaa6c","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"DELETE","requestId":"ca29ea76-aec9-4d5a-b9cf-55bdb43eaa6c","url":"/api/admin/groups/Invalid%20Chars%20%24","userId":"anonymous"},"timestamp":"2026-02-23T10:47:13.058Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - ca29ea76-aec9-4d5a-b9cf-55bdb43eaa6c] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["group-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:47:13.062Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [ca29ea76-aec9-4d5a-b9cf-55bdb43eaa6c]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:47:13.067Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"ca29ea76-aec9-4d5a-b9cf-55bdb43eaa6c","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"DELETE","path":"/api/admin/groups/Invalid%20Chars%20%24","requestId":"ca29ea76-aec9-4d5a-b9cf-55bdb43eaa6c","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:13.070Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- DELETE /api/admin/groups/Invalid%20Chars%20%24 500 17.471ms","metadata":{"error":{"contentLength":"3814","correlationId":"ca29ea76-aec9-4d5a-b9cf-55bdb43eaa6c","durationMs":17.471,"eventType":"finish","requestId":"ca29ea76-aec9-4d5a-b9cf-55bdb43eaa6c","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:13.075Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> DELETE /api/admin/groups/Delete-Group-Test","metadata":{"correlationId":"576154e2-92e1-4b13-b24d-849041863c46","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"DELETE","requestId":"576154e2-92e1-4b13-b24d-849041863c46","url":"/api/admin/groups/Delete-Group-Test","userId":"anonymous"},"timestamp":"2026-02-23T10:47:13.094Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 576154e2-92e1-4b13-b24d-849041863c46] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["group-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:47:13.097Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [576154e2-92e1-4b13-b24d-849041863c46]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:47:13.103Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"576154e2-92e1-4b13-b24d-849041863c46","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"DELETE","path":"/api/admin/groups/Delete-Group-Test","requestId":"576154e2-92e1-4b13-b24d-849041863c46","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:13.107Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- DELETE /api/admin/groups/Delete-Group-Test 500 18.371ms","metadata":{"error":{"contentLength":"3814","correlationId":"576154e2-92e1-4b13-b24d-849041863c46","durationMs":18.371,"eventType":"finish","requestId":"576154e2-92e1-4b13-b24d-849041863c46","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:13.113Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> DELETE /api/admin/groups/Delete-Group-Test","metadata":{"correlationId":"94a85459-bd69-472a-baf6-3f377d20d487","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"DELETE","requestId":"94a85459-bd69-472a-baf6-3f377d20d487","url":"/api/admin/groups/Delete-Group-Test","userId":"anonymous"},"timestamp":"2026-02-23T10:47:13.137Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Authentication: Missing or invalid Authorization header.","metadata":{},"timestamp":"2026-02-23T10:47:13.140Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Client error processing request: Authorization header missing or invalid.","metadata":{"correlationId":"94a85459-bd69-472a-baf6-3f377d20d487","errorMessage":"Authorization header missing or invalid.","errorName":"AuthenticationError","isOperational":true,"method":"DELETE","path":"/api/admin/groups/Delete-Group-Test","requestId":"94a85459-bd69-472a-baf6-3f377d20d487","stack":"AuthenticationError: Authorization header missing or invalid.\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:32:25\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:27:70\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestLogger.middleware.ts:84:9\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:32\n    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)\n    at middleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:13)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at addRequestId (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestId.middleware.ts:33:5)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at urlencodedParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\urlencoded.js:68:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at jsonParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\json.js:100:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at requestMetricsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestMetrics.middleware.ts:26:3)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at cors (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:188:7)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:224:17\n    at originCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:214:15)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:531:6)\n    at xXssProtectionMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:311:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPoweredByMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:304:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPermittedCrossDomainPoliciesMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:297:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xFrameOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:281:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDownloadOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:261:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDnsPrefetchControlMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:254:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xContentTypeOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:246:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at strictTransportSecurityMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:239:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at referrerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:207:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at originAgentClusterMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:182:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginResourcePolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:175:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginOpenerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:159:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at contentSecurityPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:124:4)","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T10:47:13.148Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"<-- DELETE /api/admin/groups/Delete-Group-Test 401 22.320ms","metadata":{"contentLength":"151","correlationId":"94a85459-bd69-472a-baf6-3f377d20d487","durationMs":22.32,"eventType":"finish","requestId":"94a85459-bd69-472a-baf6-3f377d20d487","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T10:47:13.159Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

  ΓùÅ Integration Tests: Group Admin Routes (/api/admin/groups) ΓÇ║ GET /api/admin/groups/:groupName ΓÇ║ should return 200 OK with group data if group exists

    expected 200 "OK", got 500 "Internal Server Error"

      210 |                 .get(`${BASE_API_PATH}/${targetgroupName}`)
      211 |                 .set(MOCK_AUTH_HEADER)
    > 212 |                 .expect(HttpStatusCode.OK); // 200
          |                  ^
      213 |             expect(mockGroupAdminService.getGroup).toHaveBeenCalledWith(expect.anything(), targetgroupName);
      214 |         });
      215 |

      at tests/integration/routes/group.admin.routes.integration.spec.ts:212:18
      at tests/integration/routes/group.admin.routes.integration.spec.ts:9:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/group.admin.routes.integration.spec.ts:5:12)
      at Object.<anonymous> (tests/integration/routes/group.admin.routes.integration.spec.ts:207:79)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Group Admin Routes (/api/admin/groups) ΓÇ║ GET /api/admin/groups/:groupName ΓÇ║ should return 404 Not Found if service returns null

    expected 404 "Not Found", got 500 "Internal Server Error"

      219 |                 .get(`${BASE_API_PATH}/${targetgroupName}`)
      220 |                 .set(MOCK_AUTH_HEADER)
    > 221 |                 .expect(HttpStatusCode.NOT_FOUND); // 404 (Handled by controller)
          |                  ^
      222 |             expect(mockGroupAdminService.getGroup).toHaveBeenCalledWith(expect.anything(), targetgroupName);
      223 |         });
      224 |

      at tests/integration/routes/group.admin.routes.integration.spec.ts:221:18
      at tests/integration/routes/group.admin.routes.integration.spec.ts:9:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/group.admin.routes.integration.spec.ts:5:12)
      at Object.<anonymous> (tests/integration/routes/group.admin.routes.integration.spec.ts:216:78)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Group Admin Routes (/api/admin/groups) ΓÇ║ GET /api/admin/groups/:groupName ΓÇ║ should return 404 Not Found if service throws NotFoundError

    expected 404 "Not Found", got 500 "Internal Server Error"

      230 |                 .get(`${BASE_API_PATH}/${targetgroupName}`)
      231 |                 .set(MOCK_AUTH_HEADER)
    > 232 |                 .expect(HttpStatusCode.NOT_FOUND); // 404 (Handled by error middleware)
          |                  ^
      233 |             expect(mockGroupAdminService.getGroup).toHaveBeenCalledWith(expect.anything(), targetgroupName);
      234 |         });
      235 |

      at tests/integration/routes/group.admin.routes.integration.spec.ts:232:18
      at tests/integration/routes/group.admin.routes.integration.spec.ts:9:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/group.admin.routes.integration.spec.ts:5:12)
      at Object.<anonymous> (tests/integration/routes/group.admin.routes.integration.spec.ts:225:86)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Group Admin Routes (/api/admin/groups) ΓÇ║ GET /api/admin/groups/:groupName ΓÇ║ should return 400 Bad Request if groupName param is invalid

    expected 400 "Bad Request", got 500 "Internal Server Error"

      239 |                 .get(`${BASE_API_PATH}/${encodeURIComponent(invalidgroupName)}`) // URL encode it
      240 |                 .set(MOCK_AUTH_HEADER)
    > 241 |                 .expect(HttpStatusCode.BAD_REQUEST); // 400 (Handled by validation middleware)
          |                  ^
      242 |             expect(mockGroupAdminService.getGroup).not.toHaveBeenCalled();
      243 |         });
      244 |

      at tests/integration/routes/group.admin.routes.integration.spec.ts:241:18
      at tests/integration/routes/group.admin.routes.integration.spec.ts:9:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/group.admin.routes.integration.spec.ts:5:12)
      at Object.<anonymous> (tests/integration/routes/group.admin.routes.integration.spec.ts:236:86)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Group Admin Routes (/api/admin/groups) ΓÇ║ GET /api/admin/groups/:groupName ΓÇ║ should return 500 if the service fails unexpectedly

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: Anything, "Get-Group-Test"

    Number of calls: 0

      250 |                 .set(MOCK_AUTH_HEADER)
      251 |                 .expect(HttpStatusCode.INTERNAL_SERVER_ERROR); // 500
    > 252 |             expect(mockGroupAdminService.getGroup).toHaveBeenCalledWith(expect.anything(), targetgroupName);
          |                                                    ^
      253 |         });
      254 |
      255 |         it('should return 401 Unauthorized if token is missing', async () => {

      at tests/integration/routes/group.admin.routes.integration.spec.ts:252:52
      at fulfilled (tests/integration/routes/group.admin.routes.integration.spec.ts:6:58)

  ΓùÅ Integration Tests: Group Admin Routes (/api/admin/groups) ΓÇ║ DELETE /api/admin/groups/:groupName ΓÇ║ should return 204 No Content if service succeeds

    expected 204 "No Content", got 500 "Internal Server Error"

      269 |                 .delete(`${BASE_API_PATH}/${targetgroupName}`)
      270 |                 .set(MOCK_AUTH_HEADER)
    > 271 |                 .expect(HttpStatusCode.NO_CONTENT); // 204
          |                  ^
      272 |             expect(mockGroupAdminService.deleteGroup).toHaveBeenCalledWith(expect.anything(), targetgroupName);
      273 |         });
      274 |

      at tests/integration/routes/group.admin.routes.integration.spec.ts:271:18
      at tests/integration/routes/group.admin.routes.integration.spec.ts:9:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/group.admin.routes.integration.spec.ts:5:12)
      at Object.<anonymous> (tests/integration/routes/group.admin.routes.integration.spec.ts:266:75)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Group Admin Routes (/api/admin/groups) ΓÇ║ DELETE /api/admin/groups/:groupName ΓÇ║ should return 404 Not Found if service throws NotFoundError

    expected 404 "Not Found", got 500 "Internal Server Error"

      280 |                 .delete(`${BASE_API_PATH}/${targetgroupName}`)
      281 |                 .set(MOCK_AUTH_HEADER)
    > 282 |                 .expect(HttpStatusCode.NOT_FOUND); // 404
          |                  ^
      283 |             expect(mockGroupAdminService.deleteGroup).toHaveBeenCalledWith(expect.anything(), targetgroupName);
      284 |         });
      285 |

      at tests/integration/routes/group.admin.routes.integration.spec.ts:282:18
      at tests/integration/routes/group.admin.routes.integration.spec.ts:9:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/group.admin.routes.integration.spec.ts:5:12)
      at Object.<anonymous> (tests/integration/routes/group.admin.routes.integration.spec.ts:275:86)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Group Admin Routes (/api/admin/groups) ΓÇ║ DELETE /api/admin/groups/:groupName ΓÇ║ should return 400 Bad Request if groupName param is invalid

    expected 400 "Bad Request", got 500 "Internal Server Error"

      289 |                 .delete(`${BASE_API_PATH}/${encodeURIComponent(invalidgroupName)}`)
      290 |                 .set(MOCK_AUTH_HEADER)
    > 291 |                 .expect(HttpStatusCode.BAD_REQUEST); // 400
          |                  ^
      292 |             expect(mockGroupAdminService.deleteGroup).not.toHaveBeenCalled();
      293 |         });
      294 |

      at tests/integration/routes/group.admin.routes.integration.spec.ts:291:18
      at tests/integration/routes/group.admin.routes.integration.spec.ts:9:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/group.admin.routes.integration.spec.ts:5:12)
      at Object.<anonymous> (tests/integration/routes/group.admin.routes.integration.spec.ts:286:86)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Group Admin Routes (/api/admin/groups) ΓÇ║ DELETE /api/admin/groups/:groupName ΓÇ║ should return 500 if service fails unexpectedly

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: Anything, "Delete-Group-Test"

    Number of calls: 0

      300 |                 .set(MOCK_AUTH_HEADER)
      301 |                 .expect(HttpStatusCode.INTERNAL_SERVER_ERROR); // 500
    > 302 |             expect(mockGroupAdminService.deleteGroup).toHaveBeenCalledWith(expect.anything(), targetgroupName);
          |                                                       ^
      303 |         });
      304 |
      305 |         it('should return 401 Unauthorized if token is missing', async () => {

      at tests/integration/routes/group.admin.routes.integration.spec.ts:302:55
      at fulfilled (tests/integration/routes/group.admin.routes.integration.spec.ts:6:58)

FAIL tests/debug/dynamodb.debug.spec.ts
  ΓùÅ Console

    console.log
      Table TestAuthzTable created successfully.

      at tests/helpers/dynamodb.helper.ts:37:17

    console.error
      Error deleting table TestAuthzTable: ResourceInUseException: Attempt to change a resource which is still in use: Table is being created: TestAuthzTable
          at de_ResourceInUseExceptionRes (E:\NodeJS\PBAC_Auth\user-management-service\node_modules\.pnpm\@aws-sdk+client-dynamodb@3.879.0\node_modules\@aws-sdk\client-dynamodb\dist-cjs\index.js:2603:21)
          at de_CommandError (E:\NodeJS\PBAC_Auth\user-management-service\node_modules\.pnpm\@aws-sdk+client-dynamodb@3.879.0\node_modules\@aws-sdk\client-dynamodb\dist-cjs\index.js:2296:19)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at E:\NodeJS\PBAC_Auth\user-management-service\node_modules\.pnpm\@smithy+middleware-serde@4.0.9\node_modules\@smithy\middleware-serde\dist-cjs\index.js:36:20
          at E:\NodeJS\PBAC_Auth\user-management-service\node_modules\.pnpm\@smithy+core@3.9.0\node_modules\@smithy\core\dist-cjs\index.js:193:18
          at E:\NodeJS\PBAC_Auth\user-management-service\node_modules\.pnpm\@smithy+middleware-retry@4.1.20\node_modules\@smithy\middleware-retry\dist-cjs\index.js:320:38
          at E:\NodeJS\PBAC_Auth\user-management-service\node_modules\.pnpm\@aws-sdk+middleware-logger@3.876.0\node_modules\@aws-sdk\middleware-logger\dist-cjs\index.js:33:22 {
        '$fault': 'client',
        '$metadata': {
          httpStatusCode: 400,
          requestId: 'GAO0JCHUN40P4K3ET4M1U3SNO3VV4KQNSO5AEMVJF66Q9ASUAAJG',
          extendedRequestId: undefined,
          cfId: undefined,
          attempts: 1,
          totalRetryDelay: 0
        },
        __type: 'com.amazonaws.dynamodb.v20120810#ResourceInUseException'
      }

      58 |             console.log(`Table ${tableName} not found.`);
      59 |         } else {
    > 60 |             console.error(`Error deleting table ${tableName}:`, error);
         |                     ^
      61 |             throw error;
      62 |         }
      63 |     }

      at tests/helpers/dynamodb.helper.ts:60:21
          at Generator.throw (<anonymous>)
      at rejected (tests/helpers/dynamodb.helper.ts:6:65)

  ΓùÅ DynamoDB Table Creation Debug Test ΓÇ║ should resolve DynamoDBProvider and list tables

    Attempted to resolve unregistered dependency token: "Symbol(DynamoDBProvider)"

      43 |
      44 |     it('should resolve DynamoDBProvider and list tables', async () => {
    > 45 |         const dbProvider = persistenceContainer.resolve<DynamoDBProvider>(TYPES.DynamoDBProvider);
         |                                                 ^
      46 |         const client = dbProvider.client;
      47 |         const command = new ListTablesCommand({});
      48 |         const result = await client.send(command);

      at InternalDependencyContainer.resolve (node_modules/.pnpm/tsyringe@4.10.0/node_modules/tsyringe/dist/cjs/dependency-container.js:108:19)
      at tests/debug/dynamodb.debug.spec.ts:45:49
      at tests/debug/dynamodb.debug.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/debug/dynamodb.debug.spec.ts:4:12)
      at Object.<anonymous> (tests/debug/dynamodb.debug.spec.ts:44:70)

  ΓùÅ DynamoDB Table Creation Debug Test ΓÇ║ should create a role using DynamoRoleRepository

    expect(received).resolves.not.toThrow()

    Received promise rejected instead of resolved
    Rejected to value: [DatabaseError: Failed to create role: User: arn:aws:iam::410844822442:user/PBAC-Admin is not authorized to perform: dynamodb:PutItem on resource: arn:aws:dynamodb:ap-south-1:410844822442:table/TestAuthzTable because no identity-based policy allows the dynamodb:PutItem action]

      53 |         const roleRepository = persistenceContainer.resolve<IRoleRepository>(TYPES.RoleRepository);
      54 |         const testRole = new Role('test-tenant', 'debug-role', 'Debug Role Description');
    > 55 |         await expect(roleRepository.create(testRole)).resolves.not.toThrow();
         |               ^
      56 |
      57 |         // Verify by fetching
      58 |         const found = await roleRepository.findByName('test-tenant', testRole.roleName);

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at tests/debug/dynamodb.debug.spec.ts:55:15
      at tests/debug/dynamodb.debug.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/debug/dynamodb.debug.spec.ts:4:12)
      at Object.<anonymous> (tests/debug/dynamodb.debug.spec.ts:52:70)


  ΓùÅ Test suite failed to run

    ResourceInUseException: Attempt to change a resource which is still in use: Table is being created: TestAuthzTable

      at de_ResourceInUseExceptionRes (node_modules/.pnpm/@aws-sdk+client-dynamodb@3.879.0/node_modules/@aws-sdk/client-dynamodb/dist-cjs/index.js:2603:21)
      at de_CommandError (node_modules/.pnpm/@aws-sdk+client-dynamodb@3.879.0/node_modules/@aws-sdk/client-dynamodb/dist-cjs/index.js:2296:19)
      at node_modules/.pnpm/@smithy+middleware-serde@4.0.9/node_modules/@smithy/middleware-serde/dist-cjs/index.js:36:20
      at node_modules/.pnpm/@smithy+core@3.9.0/node_modules/@smithy/core/dist-cjs/index.js:193:18
      at node_modules/.pnpm/@smithy+middleware-retry@4.1.20/node_modules/@smithy/middleware-retry/dist-cjs/index.js:320:38
      at node_modules/.pnpm/@aws-sdk+middleware-logger@3.876.0/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js:33:22

FAIL tests/integration/Persistence/DynamoUserProfileRepository.integration.spec.ts
  ΓùÅ Console

    console.log
      Table TestUsers cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

  ΓùÅ DynamoUserProfileRepository Integration Tests ΓÇ║ should throw error when saving duplicate user profile (implement check in repo)

    ValidationException: The provided key element does not match the schema

      at throwDefaultError (node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:425:20)
      at node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:434:5
      at de_CommandError (node_modules/.pnpm/@aws-sdk+client-dynamodb@3.879.0/node_modules/@aws-sdk/client-dynamodb/dist-cjs/index.js:2359:14)
      at node_modules/.pnpm/@smithy+middleware-serde@4.0.9/node_modules/@smithy/middleware-serde/dist-cjs/index.js:36:20
      at node_modules/.pnpm/@aws-sdk+lib-dynamodb@3.879_ee4568148364d683af0669b014af13ba/node_modules/@aws-sdk/lib-dynamodb/dist-cjs/index.js:173:30
      at node_modules/.pnpm/@smithy+core@3.9.0/node_modules/@smithy/core/dist-cjs/index.js:193:18
      at node_modules/.pnpm/@smithy+middleware-retry@4.1.20/node_modules/@smithy/middleware-retry/dist-cjs/index.js:320:38
      at node_modules/.pnpm/@aws-sdk+middleware-logger@3.876.0/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js:33:22

  ΓùÅ DynamoUserProfileRepository Integration Tests ΓÇ║ should find an existing profile by ID

    ValidationException: The provided key element does not match the schema

      at throwDefaultError (node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:425:20)
      at node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:434:5
      at de_CommandError (node_modules/.pnpm/@aws-sdk+client-dynamodb@3.879.0/node_modules/@aws-sdk/client-dynamodb/dist-cjs/index.js:2359:14)
      at node_modules/.pnpm/@smithy+middleware-serde@4.0.9/node_modules/@smithy/middleware-serde/dist-cjs/index.js:36:20
      at node_modules/.pnpm/@aws-sdk+lib-dynamodb@3.879_ee4568148364d683af0669b014af13ba/node_modules/@aws-sdk/lib-dynamodb/dist-cjs/index.js:173:30
      at node_modules/.pnpm/@smithy+core@3.9.0/node_modules/@smithy/core/dist-cjs/index.js:193:18
      at node_modules/.pnpm/@smithy+middleware-retry@4.1.20/node_modules/@smithy/middleware-retry/dist-cjs/index.js:320:38
      at node_modules/.pnpm/@aws-sdk+middleware-logger@3.876.0/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js:33:22

  ΓùÅ DynamoUserProfileRepository Integration Tests ΓÇ║ should return null when finding non-existent profile by ID

    ValidationException: The provided key element does not match the schema

      at throwDefaultError (node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:425:20)
      at node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:434:5
      at de_CommandError (node_modules/.pnpm/@aws-sdk+client-dynamodb@3.879.0/node_modules/@aws-sdk/client-dynamodb/dist-cjs/index.js:2359:14)
      at node_modules/.pnpm/@smithy+middleware-serde@4.0.9/node_modules/@smithy/middleware-serde/dist-cjs/index.js:36:20
      at node_modules/.pnpm/@aws-sdk+lib-dynamodb@3.879_ee4568148364d683af0669b014af13ba/node_modules/@aws-sdk/lib-dynamodb/dist-cjs/index.js:173:30
      at node_modules/.pnpm/@smithy+core@3.9.0/node_modules/@smithy/core/dist-cjs/index.js:193:18
      at node_modules/.pnpm/@smithy+middleware-retry@4.1.20/node_modules/@smithy/middleware-retry/dist-cjs/index.js:320:38
      at node_modules/.pnpm/@aws-sdk+middleware-logger@3.876.0/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js:33:22

  ΓùÅ DynamoUserProfileRepository Integration Tests ΓÇ║ should find an existing profile by Email (assuming index exists)

    ValidationException: The provided key element does not match the schema

      at throwDefaultError (node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:425:20)
      at node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:434:5
      at de_CommandError (node_modules/.pnpm/@aws-sdk+client-dynamodb@3.879.0/node_modules/@aws-sdk/client-dynamodb/dist-cjs/index.js:2359:14)
      at node_modules/.pnpm/@smithy+middleware-serde@4.0.9/node_modules/@smithy/middleware-serde/dist-cjs/index.js:36:20
      at node_modules/.pnpm/@aws-sdk+lib-dynamodb@3.879_ee4568148364d683af0669b014af13ba/node_modules/@aws-sdk/lib-dynamodb/dist-cjs/index.js:173:30
      at node_modules/.pnpm/@smithy+core@3.9.0/node_modules/@smithy/core/dist-cjs/index.js:193:18
      at node_modules/.pnpm/@smithy+middleware-retry@4.1.20/node_modules/@smithy/middleware-retry/dist-cjs/index.js:320:38
      at node_modules/.pnpm/@aws-sdk+middleware-logger@3.876.0/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js:33:22

  ΓùÅ DynamoUserProfileRepository Integration Tests ΓÇ║ should return null when finding non-existent profile by Email

    ValidationException: The provided key element does not match the schema

      at throwDefaultError (node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:425:20)
      at node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:434:5
      at de_CommandError (node_modules/.pnpm/@aws-sdk+client-dynamodb@3.879.0/node_modules/@aws-sdk/client-dynamodb/dist-cjs/index.js:2359:14)
      at node_modules/.pnpm/@smithy+middleware-serde@4.0.9/node_modules/@smithy/middleware-serde/dist-cjs/index.js:36:20
      at node_modules/.pnpm/@aws-sdk+lib-dynamodb@3.879_ee4568148364d683af0669b014af13ba/node_modules/@aws-sdk/lib-dynamodb/dist-cjs/index.js:173:30
      at node_modules/.pnpm/@smithy+core@3.9.0/node_modules/@smithy/core/dist-cjs/index.js:193:18
      at node_modules/.pnpm/@smithy+middleware-retry@4.1.20/node_modules/@smithy/middleware-retry/dist-cjs/index.js:320:38
      at node_modules/.pnpm/@aws-sdk+middleware-logger@3.876.0/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js:33:22

  ΓùÅ DynamoUserProfileRepository Integration Tests ΓÇ║ should update an existing profile

    ValidationException: The provided key element does not match the schema

      at throwDefaultError (node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:425:20)
      at node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:434:5
      at de_CommandError (node_modules/.pnpm/@aws-sdk+client-dynamodb@3.879.0/node_modules/@aws-sdk/client-dynamodb/dist-cjs/index.js:2359:14)
      at node_modules/.pnpm/@smithy+middleware-serde@4.0.9/node_modules/@smithy/middleware-serde/dist-cjs/index.js:36:20
      at node_modules/.pnpm/@aws-sdk+lib-dynamodb@3.879_ee4568148364d683af0669b014af13ba/node_modules/@aws-sdk/lib-dynamodb/dist-cjs/index.js:173:30
      at node_modules/.pnpm/@smithy+core@3.9.0/node_modules/@smithy/core/dist-cjs/index.js:193:18
      at node_modules/.pnpm/@smithy+middleware-retry@4.1.20/node_modules/@smithy/middleware-retry/dist-cjs/index.js:320:38
      at node_modules/.pnpm/@aws-sdk+middleware-logger@3.876.0/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js:33:22

  ΓùÅ DynamoUserProfileRepository Integration Tests ΓÇ║ should throw error when updating non-existent profile (implement check)

    ValidationException: The provided key element does not match the schema

      at throwDefaultError (node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:425:20)
      at node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:434:5
      at de_CommandError (node_modules/.pnpm/@aws-sdk+client-dynamodb@3.879.0/node_modules/@aws-sdk/client-dynamodb/dist-cjs/index.js:2359:14)
      at node_modules/.pnpm/@smithy+middleware-serde@4.0.9/node_modules/@smithy/middleware-serde/dist-cjs/index.js:36:20
      at node_modules/.pnpm/@aws-sdk+lib-dynamodb@3.879_ee4568148364d683af0669b014af13ba/node_modules/@aws-sdk/lib-dynamodb/dist-cjs/index.js:173:30
      at node_modules/.pnpm/@smithy+core@3.9.0/node_modules/@smithy/core/dist-cjs/index.js:193:18
      at node_modules/.pnpm/@smithy+middleware-retry@4.1.20/node_modules/@smithy/middleware-retry/dist-cjs/index.js:320:38
      at node_modules/.pnpm/@aws-sdk+middleware-logger@3.876.0/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js:33:22

  ΓùÅ DynamoUserProfileRepository Integration Tests ΓÇ║ should delete an existing profile

    ValidationException: The provided key element does not match the schema

      at throwDefaultError (node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:425:20)
      at node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:434:5
      at de_CommandError (node_modules/.pnpm/@aws-sdk+client-dynamodb@3.879.0/node_modules/@aws-sdk/client-dynamodb/dist-cjs/index.js:2359:14)
      at node_modules/.pnpm/@smithy+middleware-serde@4.0.9/node_modules/@smithy/middleware-serde/dist-cjs/index.js:36:20
      at node_modules/.pnpm/@aws-sdk+lib-dynamodb@3.879_ee4568148364d683af0669b014af13ba/node_modules/@aws-sdk/lib-dynamodb/dist-cjs/index.js:173:30
      at node_modules/.pnpm/@smithy+core@3.9.0/node_modules/@smithy/core/dist-cjs/index.js:193:18
      at node_modules/.pnpm/@smithy+middleware-retry@4.1.20/node_modules/@smithy/middleware-retry/dist-cjs/index.js:320:38
      at node_modules/.pnpm/@aws-sdk+middleware-logger@3.876.0/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js:33:22

  ΓùÅ DynamoUserProfileRepository Integration Tests ΓÇ║ should not throw when deleting non-existent profile (idempotent)

    ValidationException: The provided key element does not match the schema

      at throwDefaultError (node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:425:20)
      at node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:434:5
      at de_CommandError (node_modules/.pnpm/@aws-sdk+client-dynamodb@3.879.0/node_modules/@aws-sdk/client-dynamodb/dist-cjs/index.js:2359:14)
      at node_modules/.pnpm/@smithy+middleware-serde@4.0.9/node_modules/@smithy/middleware-serde/dist-cjs/index.js:36:20
      at node_modules/.pnpm/@aws-sdk+lib-dynamodb@3.879_ee4568148364d683af0669b014af13ba/node_modules/@aws-sdk/lib-dynamodb/dist-cjs/index.js:173:30
      at node_modules/.pnpm/@smithy+core@3.9.0/node_modules/@smithy/core/dist-cjs/index.js:193:18
      at node_modules/.pnpm/@smithy+middleware-retry@4.1.20/node_modules/@smithy/middleware-retry/dist-cjs/index.js:320:38
      at node_modules/.pnpm/@aws-sdk+middleware-logger@3.876.0/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js:33:22

FAIL tests/integration/routes/policy.admin.routes.integration.spec.ts (31.08 s)
  ΓùÅ Console

    console.info
      [WinstonLogger] Logger initialized with level "info" in "test" environment.

      at WinstonLogger.initializeLogger (src/infrastructure/logging/WinstonLogger.ts:68:17)
          at Array.map (<anonymous>)

    console.log
      {"level":"warn","message":"CORS_ORIGIN is set to \"*\" in a non-development environment. This is insecure!","metadata":{},"timestamp":"2026-02-23T10:47:11.637Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"CORS configured for origin: *","metadata":{},"timestamp":"2026-02-23T10:47:11.654Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"Application setup complete for environment: test","metadata":{},"timestamp":"2026-02-23T10:47:11.658Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> POST /api/admin/policies","metadata":{"correlationId":"751e4357-30ad-4ad2-8839-6242c34741d1","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"POST","requestId":"751e4357-30ad-4ad2-8839-6242c34741d1","url":"/api/admin/policies","userId":"anonymous"},"timestamp":"2026-02-23T10:47:11.888Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 751e4357-30ad-4ad2-8839-6242c34741d1] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:47:11.940Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: {
        policyName: 'policy-test-1771843625257',
        policyDefinition: 'package test\ndefault allow = false',
        policyLanguage: 'rego',
        description: 'Test Policy Description'
      }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'policyName', 'policyDefinition', 'policyLanguage', 'description' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"policyName":"policy-test-1771843625257","policyDefinition":"package test\ndefault allow = false","policyLanguage":"rego","description":"Test Policy Description"}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      {"level":"info","message":"<-- POST /api/admin/policies 201 95.087ms","metadata":{"contentLength":"175","correlationId":"751e4357-30ad-4ad2-8839-6242c34741d1","durationMs":95.087,"eventType":"finish","requestId":"751e4357-30ad-4ad2-8839-6242c34741d1","statusCode":201,"userId":"anonymous"},"timestamp":"2026-02-23T10:47:11.982Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","metadata":{"correlationId":"ff233857-f0f9-4996-b908-f23d5f0ea650","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"ff233857-f0f9-4996-b908-f23d5f0ea650","url":"/api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.046Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - ff233857-f0f9-4996-b908-f23d5f0ea650] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:47:12.055Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [ff233857-f0f9-4996-b908-f23d5f0ea650]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:47:12.078Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"ff233857-f0f9-4996-b908-f23d5f0ea650","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","requestId":"ff233857-f0f9-4996-b908-f23d5f0ea650","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:12.084Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef 500 44.642ms","metadata":{"error":{"contentLength":"3814","correlationId":"ff233857-f0f9-4996-b908-f23d5f0ea650","durationMs":44.642,"eventType":"finish","requestId":"ff233857-f0f9-4996-b908-f23d5f0ea650","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:12.090Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","metadata":{"correlationId":"147b116f-1b08-4079-b3d9-970d064b55c9","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"147b116f-1b08-4079-b3d9-970d064b55c9","url":"/api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.135Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 147b116f-1b08-4079-b3d9-970d064b55c9] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:47:12.140Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [147b116f-1b08-4079-b3d9-970d064b55c9]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:47:12.144Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"147b116f-1b08-4079-b3d9-970d064b55c9","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","requestId":"147b116f-1b08-4079-b3d9-970d064b55c9","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:12.151Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef 500 20.422ms","metadata":{"error":{"contentLength":"3814","correlationId":"147b116f-1b08-4079-b3d9-970d064b55c9","durationMs":20.422,"eventType":"finish","requestId":"147b116f-1b08-4079-b3d9-970d064b55c9","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:12.155Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","metadata":{"correlationId":"13f1970e-109f-42cf-85e4-340c33e0fdd2","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"13f1970e-109f-42cf-85e4-340c33e0fdd2","url":"/api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.197Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 13f1970e-109f-42cf-85e4-340c33e0fdd2] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:47:12.203Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [13f1970e-109f-42cf-85e4-340c33e0fdd2]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:47:12.209Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"13f1970e-109f-42cf-85e4-340c33e0fdd2","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","requestId":"13f1970e-109f-42cf-85e4-340c33e0fdd2","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:12.211Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef 500 20.110ms","metadata":{"error":{"contentLength":"3814","correlationId":"13f1970e-109f-42cf-85e4-340c33e0fdd2","durationMs":20.11,"eventType":"finish","requestId":"13f1970e-109f-42cf-85e4-340c33e0fdd2","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:12.217Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/policies/not-a-uuid","metadata":{"correlationId":"5f9d7326-c66c-4d21-9ee4-6f6cca2379d9","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"5f9d7326-c66c-4d21-9ee4-6f6cca2379d9","url":"/api/admin/policies/not-a-uuid","userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.249Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 5f9d7326-c66c-4d21-9ee4-6f6cca2379d9] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:47:12.254Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [5f9d7326-c66c-4d21-9ee4-6f6cca2379d9]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:47:12.259Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"5f9d7326-c66c-4d21-9ee4-6f6cca2379d9","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/policies/not-a-uuid","requestId":"5f9d7326-c66c-4d21-9ee4-6f6cca2379d9","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:12.261Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/policies/not-a-uuid 500 17.548ms","metadata":{"error":{"contentLength":"3814","correlationId":"5f9d7326-c66c-4d21-9ee4-6f6cca2379d9","durationMs":17.548,"eventType":"finish","requestId":"5f9d7326-c66c-4d21-9ee4-6f6cca2379d9","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:12.267Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","metadata":{"correlationId":"fec23b63-f376-4904-ae4a-36ac3de0e6ab","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"fec23b63-f376-4904-ae4a-36ac3de0e6ab","url":"/api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.296Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - fec23b63-f376-4904-ae4a-36ac3de0e6ab] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:47:12.301Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [fec23b63-f376-4904-ae4a-36ac3de0e6ab]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:47:12.309Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"fec23b63-f376-4904-ae4a-36ac3de0e6ab","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","requestId":"fec23b63-f376-4904-ae4a-36ac3de0e6ab","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:12.312Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef 500 20.819ms","metadata":{"error":{"contentLength":"3814","correlationId":"fec23b63-f376-4904-ae4a-36ac3de0e6ab","durationMs":20.819,"eventType":"finish","requestId":"fec23b63-f376-4904-ae4a-36ac3de0e6ab","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:12.317Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","metadata":{"correlationId":"0f049e70-c8d1-4414-a8f1-b83d2bd9ac46","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"0f049e70-c8d1-4414-a8f1-b83d2bd9ac46","url":"/api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.374Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Authentication: Missing or invalid Authorization header.","metadata":{},"timestamp":"2026-02-23T10:47:12.377Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Client error processing request: Authorization header missing or invalid.","metadata":{"correlationId":"0f049e70-c8d1-4414-a8f1-b83d2bd9ac46","errorMessage":"Authorization header missing or invalid.","errorName":"AuthenticationError","isOperational":true,"method":"GET","path":"/api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","requestId":"0f049e70-c8d1-4414-a8f1-b83d2bd9ac46","stack":"AuthenticationError: Authorization header missing or invalid.\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:32:25\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:27:70\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestLogger.middleware.ts:84:9\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:32\n    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)\n    at middleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:13)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at addRequestId (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestId.middleware.ts:33:5)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at urlencodedParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\urlencoded.js:68:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at jsonParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\json.js:100:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at requestMetricsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestMetrics.middleware.ts:26:3)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at cors (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:188:7)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:224:17\n    at originCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:214:15)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:531:6)\n    at xXssProtectionMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:311:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPoweredByMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:304:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPermittedCrossDomainPoliciesMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:297:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xFrameOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:281:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDownloadOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:261:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDnsPrefetchControlMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:254:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xContentTypeOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:246:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at strictTransportSecurityMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:239:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at referrerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:207:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at originAgentClusterMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:182:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginResourcePolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:175:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginOpenerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:159:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at contentSecurityPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:124:4)","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.403Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"<-- GET /api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef 401 59.218ms","metadata":{"contentLength":"151","correlationId":"0f049e70-c8d1-4414-a8f1-b83d2bd9ac46","durationMs":59.218,"eventType":"finish","requestId":"0f049e70-c8d1-4414-a8f1-b83d2bd9ac46","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.433Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/policies","metadata":{"correlationId":"e29517e6-d55c-4f69-aa6b-e3631b528e1e","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"e29517e6-d55c-4f69-aa6b-e3631b528e1e","url":"/api/admin/policies","userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.481Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - e29517e6-d55c-4f69-aa6b-e3631b528e1e] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:47:12.487Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [e29517e6-d55c-4f69-aa6b-e3631b528e1e]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:47:12.492Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"e29517e6-d55c-4f69-aa6b-e3631b528e1e","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/policies","requestId":"e29517e6-d55c-4f69-aa6b-e3631b528e1e","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:12.495Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/policies 500 18.556ms","metadata":{"error":{"contentLength":"3541","correlationId":"e29517e6-d55c-4f69-aa6b-e3631b528e1e","durationMs":18.556,"eventType":"finish","requestId":"e29517e6-d55c-4f69-aa6b-e3631b528e1e","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:12.499Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/policies?limit=15&language=rego&startKey=opaqueStartKey","metadata":{"correlationId":"e7ed5fba-cc2c-4112-9214-7d94e15d780e","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"e7ed5fba-cc2c-4112-9214-7d94e15d780e","url":"/api/admin/policies?limit=15&language=rego&startKey=opaqueStartKey","userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.535Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - e7ed5fba-cc2c-4112-9214-7d94e15d780e] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:47:12.539Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [e7ed5fba-cc2c-4112-9214-7d94e15d780e]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:47:12.544Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"e7ed5fba-cc2c-4112-9214-7d94e15d780e","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/policies?limit=15&language=rego&startKey=opaqueStartKey","requestId":"e7ed5fba-cc2c-4112-9214-7d94e15d780e","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:12.547Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/policies?limit=15&language=rego&startKey=opaqueStartKey 500 19.405ms","metadata":{"error":{"contentLength":"3541","correlationId":"e7ed5fba-cc2c-4112-9214-7d94e15d780e","durationMs":19.405,"eventType":"finish","requestId":"e7ed5fba-cc2c-4112-9214-7d94e15d780e","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:12.554Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/policies","metadata":{"correlationId":"56961c43-4438-4e7c-a9f6-9dc87dcb4b97","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"56961c43-4438-4e7c-a9f6-9dc87dcb4b97","url":"/api/admin/policies","userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.596Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 56961c43-4438-4e7c-a9f6-9dc87dcb4b97] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:47:12.605Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [56961c43-4438-4e7c-a9f6-9dc87dcb4b97]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:47:12.609Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"56961c43-4438-4e7c-a9f6-9dc87dcb4b97","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/policies","requestId":"56961c43-4438-4e7c-a9f6-9dc87dcb4b97","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:12.613Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/policies 500 29.037ms","metadata":{"error":{"contentLength":"3541","correlationId":"56961c43-4438-4e7c-a9f6-9dc87dcb4b97","durationMs":29.037,"eventType":"finish","requestId":"56961c43-4438-4e7c-a9f6-9dc87dcb4b97","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:12.625Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/policies","metadata":{"correlationId":"5c7bd633-35bd-49b2-a498-d4ee1592e799","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"5c7bd633-35bd-49b2-a498-d4ee1592e799","url":"/api/admin/policies","userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.659Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Authentication: Missing or invalid Authorization header.","metadata":{},"timestamp":"2026-02-23T10:47:12.663Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Client error processing request: Authorization header missing or invalid.","metadata":{"correlationId":"5c7bd633-35bd-49b2-a498-d4ee1592e799","errorMessage":"Authorization header missing or invalid.","errorName":"AuthenticationError","isOperational":true,"method":"GET","path":"/api/admin/policies","requestId":"5c7bd633-35bd-49b2-a498-d4ee1592e799","stack":"AuthenticationError: Authorization header missing or invalid.\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:32:25\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:27:70\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestLogger.middleware.ts:84:9\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:32\n    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)\n    at middleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:13)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at addRequestId (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestId.middleware.ts:33:5)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at urlencodedParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\urlencoded.js:68:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at jsonParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\json.js:100:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at requestMetricsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestMetrics.middleware.ts:26:3)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at cors (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:188:7)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:224:17\n    at originCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:214:15)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:531:6)\n    at xXssProtectionMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:311:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPoweredByMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:304:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPermittedCrossDomainPoliciesMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:297:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xFrameOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:281:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDownloadOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:261:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDnsPrefetchControlMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:254:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xContentTypeOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:246:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at strictTransportSecurityMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:239:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at referrerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:207:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at originAgentClusterMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:182:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginResourcePolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:175:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginOpenerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:159:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at contentSecurityPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:124:4)","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.672Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"<-- GET /api/admin/policies 401 19.283ms","metadata":{"contentLength":"151","correlationId":"5c7bd633-35bd-49b2-a498-d4ee1592e799","durationMs":19.283,"eventType":"finish","requestId":"5c7bd633-35bd-49b2-a498-d4ee1592e799","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.678Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> PUT /api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","metadata":{"correlationId":"dc3c4490-a7eb-4ce8-bba1-8438c9d50752","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"PUT","requestId":"dc3c4490-a7eb-4ce8-bba1-8438c9d50752","url":"/api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.705Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - dc3c4490-a7eb-4ce8-bba1-8438c9d50752] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:47:12.709Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: { description: 'Updated Integration Description', version: 2 }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'description', 'version' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"description":"Updated Integration Description","version":2}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      {"level":"info","message":"<-- PUT /api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef 200 13.532ms","metadata":{"contentLength":"309","correlationId":"dc3c4490-a7eb-4ce8-bba1-8438c9d50752","durationMs":13.532,"eventType":"finish","requestId":"dc3c4490-a7eb-4ce8-bba1-8438c9d50752","statusCode":200,"userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.719Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> PUT /api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","metadata":{"correlationId":"46971d7c-7a75-42a8-a110-50b232e8ae7b","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"PUT","requestId":"46971d7c-7a75-42a8-a110-50b232e8ae7b","url":"/api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.764Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 46971d7c-7a75-42a8-a110-50b232e8ae7b] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:47:12.767Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: { description: 'Updated Integration Description', version: 2 }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'description', 'version' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"description":"Updated Integration Description","version":2}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      {"level":"warn","message":"Client error processing request: Policy with identifier 'a1b2c3d4-e5f6-7890-1234-567890abcdef' not found.","metadata":{"correlationId":"46971d7c-7a75-42a8-a110-50b232e8ae7b","errorMessage":"Policy with identifier 'a1b2c3d4-e5f6-7890-1234-567890abcdef' not found.","errorName":"PolicyNotFoundError","isOperational":true,"method":"PUT","path":"/api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","requestId":"46971d7c-7a75-42a8-a110-50b232e8ae7b","stack":"PolicyNotFoundError: Policy with identifier 'a1b2c3d4-e5f6-7890-1234-567890abcdef' not found.\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:257:35\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:4:12)\n    at Object.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:255:93)\n    at Promise.then.completed (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\testWorker.js:108:12)","statusCode":404,"userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.775Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"<-- PUT /api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef 404 14.375ms","metadata":{"contentLength":"183","correlationId":"46971d7c-7a75-42a8-a110-50b232e8ae7b","durationMs":14.375,"eventType":"finish","requestId":"46971d7c-7a75-42a8-a110-50b232e8ae7b","statusCode":404,"userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.778Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> PUT /api/admin/policies/invalid-uuid","metadata":{"correlationId":"fb1e1bff-8376-4b72-8ff7-158d4b338127","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"PUT","requestId":"fb1e1bff-8376-4b72-8ff7-158d4b338127","url":"/api/admin/policies/invalid-uuid","userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.800Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - fb1e1bff-8376-4b72-8ff7-158d4b338127] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:47:12.803Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: { description: 'Updated Integration Description', version: 2 }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'description', 'version' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"description":"Updated Integration Description","version":2}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      {"level":"warn","message":"Request validation failed [fb1e1bff-8376-4b72-8ff7-158d4b338127]:","metadata":{"errors":{"policyId":"Policy ID must be a valid UUID"}},"timestamp":"2026-02-23T10:47:12.811Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)
          at Generator.throw (<anonymous>)

    console.log
      {"level":"warn","message":"Client error processing request: Input validation failed","metadata":{"correlationId":"fb1e1bff-8376-4b72-8ff7-158d4b338127","details":{"policyId":"Policy ID must be a valid UUID"},"errorMessage":"Input validation failed","errorName":"ValidationError","isOperational":true,"method":"PUT","path":"/api/admin/policies/invalid-uuid","requestId":"fb1e1bff-8376-4b72-8ff7-158d4b338127","stack":"ValidationError: Input validation failed\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:57:41\n    at Generator.throw (<anonymous>)\n    at rejected (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:6:65)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":400,"userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.814Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"<-- PUT /api/admin/policies/invalid-uuid 400 18.011ms","metadata":{"contentLength":"186","correlationId":"fb1e1bff-8376-4b72-8ff7-158d4b338127","durationMs":18.011,"eventType":"finish","requestId":"fb1e1bff-8376-4b72-8ff7-158d4b338127","statusCode":400,"userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.818Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> PUT /api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","metadata":{"correlationId":"47fff8b4-470d-4f88-afbe-25ba6c694aa9","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"PUT","requestId":"47fff8b4-470d-4f88-afbe-25ba6c694aa9","url":"/api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.841Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 47fff8b4-470d-4f88-afbe-25ba6c694aa9] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:47:12.844Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: {}

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): []

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      {"level":"warn","message":"Request validation failed [47fff8b4-470d-4f88-afbe-25ba6c694aa9]:","metadata":{"errors":{"":"At least one field must be provided for update."}},"timestamp":"2026-02-23T10:47:12.850Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)
          at Generator.throw (<anonymous>)

    console.log
      {"level":"warn","message":"Client error processing request: Input validation failed","metadata":{"correlationId":"47fff8b4-470d-4f88-afbe-25ba6c694aa9","details":{"":"At least one field must be provided for update."},"errorMessage":"Input validation failed","errorName":"ValidationError","isOperational":true,"method":"PUT","path":"/api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","requestId":"47fff8b4-470d-4f88-afbe-25ba6c694aa9","stack":"ValidationError: Input validation failed\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:57:41\n    at Generator.throw (<anonymous>)\n    at rejected (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:6:65)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":400,"userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.852Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"<-- PUT /api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef 400 13.788ms","metadata":{"contentLength":"195","correlationId":"47fff8b4-470d-4f88-afbe-25ba6c694aa9","durationMs":13.788,"eventType":"finish","requestId":"47fff8b4-470d-4f88-afbe-25ba6c694aa9","statusCode":400,"userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.855Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> PUT /api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","metadata":{"correlationId":"19a34029-5dfe-4590-b586-c3711266b33a","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"PUT","requestId":"19a34029-5dfe-4590-b586-c3711266b33a","url":"/api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.889Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 19a34029-5dfe-4590-b586-c3711266b33a] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:47:12.892Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: { description: 'Updated Integration Description', version: 2 }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'description', 'version' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"description":"Updated Integration Description","version":2}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      {"level":"error","message":"[PolicyAdminCtrl] Failed to update policy a1b2c3d4-e5f6-7890-1234-567890abcdef","metadata":{"error":{"adminUserId":"test-admin-id-123","error":{}}},"timestamp":"2026-02-23T10:47:12.900Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)
          at Generator.throw (<anonymous>)

    console.log
      {"level":"error","message":"Server error processing request: Update policy internal failure","metadata":{"error":{"correlationId":"19a34029-5dfe-4590-b586-c3711266b33a","errorMessage":"Update policy internal failure","errorName":"Error","isOperational":false,"method":"PUT","path":"/api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","requestId":"19a34029-5dfe-4590-b586-c3711266b33a","stack":"Error: Update policy internal failure\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:286:35\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:4:12)\n    at Object.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:285:75)\n    at Promise.then.completed (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\testWorker.js:108:12)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:12.905Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- PUT /api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef 500 20.506ms","metadata":{"error":{"contentLength":"3156","correlationId":"19a34029-5dfe-4590-b586-c3711266b33a","durationMs":20.506,"eventType":"finish","requestId":"19a34029-5dfe-4590-b586-c3711266b33a","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:12.909Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> PUT /api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","metadata":{"correlationId":"37729799-c89f-4553-9f14-2da3971d347b","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"PUT","requestId":"37729799-c89f-4553-9f14-2da3971d347b","url":"/api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.947Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Authentication: Missing or invalid Authorization header.","metadata":{},"timestamp":"2026-02-23T10:47:12.950Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Client error processing request: Authorization header missing or invalid.","metadata":{"correlationId":"37729799-c89f-4553-9f14-2da3971d347b","errorMessage":"Authorization header missing or invalid.","errorName":"AuthenticationError","isOperational":true,"method":"PUT","path":"/api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef","requestId":"37729799-c89f-4553-9f14-2da3971d347b","stack":"AuthenticationError: Authorization header missing or invalid.\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:32:25\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:27:70\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestLogger.middleware.ts:84:9\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:32\n    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)\n    at middleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:13)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at addRequestId (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestId.middleware.ts:33:5)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at urlencodedParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\urlencoded.js:57:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\read.js:132:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:214:14)\n    at invokeCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\raw-body@3.0.0\\node_modules\\raw-body\\index.js:238:16)\n    at done (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\raw-body@3.0.0\\node_modules\\raw-body\\index.js:227:7)\n    at IncomingMessage.onEnd (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\raw-body@3.0.0\\node_modules\\raw-body\\index.js:287:7)\n    at IncomingMessage.emit (node:events:519:28)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at processTicksAndRejections (node:internal/process/task_queues:90:21)","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.959Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"<-- PUT /api/admin/policies/a1b2c3d4-e5f6-7890-1234-567890abcdef 401 14.799ms","metadata":{"contentLength":"151","correlationId":"37729799-c89f-4553-9f14-2da3971d347b","durationMs":14.799,"eventType":"finish","requestId":"37729799-c89f-4553-9f14-2da3971d347b","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.962Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> DELETE /api/admin/policies/b1c2d3e4-f5a6-7890-1234-567890abcdef","metadata":{"correlationId":"49a69202-7d81-43c1-ab53-86312e601c19","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"DELETE","requestId":"49a69202-7d81-43c1-ab53-86312e601c19","url":"/api/admin/policies/b1c2d3e4-f5a6-7890-1234-567890abcdef","userId":"anonymous"},"timestamp":"2026-02-23T10:47:12.994Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 49a69202-7d81-43c1-ab53-86312e601c19] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:47:12.999Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [49a69202-7d81-43c1-ab53-86312e601c19]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:47:13.004Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"49a69202-7d81-43c1-ab53-86312e601c19","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"DELETE","path":"/api/admin/policies/b1c2d3e4-f5a6-7890-1234-567890abcdef","requestId":"49a69202-7d81-43c1-ab53-86312e601c19","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:13.006Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- DELETE /api/admin/policies/b1c2d3e4-f5a6-7890-1234-567890abcdef 500 16.312ms","metadata":{"error":{"contentLength":"3814","correlationId":"49a69202-7d81-43c1-ab53-86312e601c19","durationMs":16.312,"eventType":"finish","requestId":"49a69202-7d81-43c1-ab53-86312e601c19","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:13.010Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> DELETE /api/admin/policies/b1c2d3e4-f5a6-7890-1234-567890abcdef","metadata":{"correlationId":"465cda75-904b-4188-a694-d615caf92c01","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"DELETE","requestId":"465cda75-904b-4188-a694-d615caf92c01","url":"/api/admin/policies/b1c2d3e4-f5a6-7890-1234-567890abcdef","userId":"anonymous"},"timestamp":"2026-02-23T10:47:13.028Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 465cda75-904b-4188-a694-d615caf92c01] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:47:13.032Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [465cda75-904b-4188-a694-d615caf92c01]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:47:13.037Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"465cda75-904b-4188-a694-d615caf92c01","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"DELETE","path":"/api/admin/policies/b1c2d3e4-f5a6-7890-1234-567890abcdef","requestId":"465cda75-904b-4188-a694-d615caf92c01","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:13.039Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- DELETE /api/admin/policies/b1c2d3e4-f5a6-7890-1234-567890abcdef 500 14.885ms","metadata":{"error":{"contentLength":"3814","correlationId":"465cda75-904b-4188-a694-d615caf92c01","durationMs":14.885,"eventType":"finish","requestId":"465cda75-904b-4188-a694-d615caf92c01","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:13.042Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> DELETE /api/admin/policies/invalid-uuid","metadata":{"correlationId":"012e7fc0-45fd-4ff4-a8ed-43d491a13377","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"DELETE","requestId":"012e7fc0-45fd-4ff4-a8ed-43d491a13377","url":"/api/admin/policies/invalid-uuid","userId":"anonymous"},"timestamp":"2026-02-23T10:47:13.072Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 012e7fc0-45fd-4ff4-a8ed-43d491a13377] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:47:13.076Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [012e7fc0-45fd-4ff4-a8ed-43d491a13377]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:47:13.079Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"012e7fc0-45fd-4ff4-a8ed-43d491a13377","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"DELETE","path":"/api/admin/policies/invalid-uuid","requestId":"012e7fc0-45fd-4ff4-a8ed-43d491a13377","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:13.082Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- DELETE /api/admin/policies/invalid-uuid 500 12.492ms","metadata":{"error":{"contentLength":"3814","correlationId":"012e7fc0-45fd-4ff4-a8ed-43d491a13377","durationMs":12.492,"eventType":"finish","requestId":"012e7fc0-45fd-4ff4-a8ed-43d491a13377","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:13.085Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> DELETE /api/admin/policies/b1c2d3e4-f5a6-7890-1234-567890abcdef","metadata":{"correlationId":"e7c89bbb-e5dd-463c-a1db-154e06efcb17","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"DELETE","requestId":"e7c89bbb-e5dd-463c-a1db-154e06efcb17","url":"/api/admin/policies/b1c2d3e4-f5a6-7890-1234-567890abcdef","userId":"anonymous"},"timestamp":"2026-02-23T10:47:13.104Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - e7c89bbb-e5dd-463c-a1db-154e06efcb17] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:47:13.109Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [e7c89bbb-e5dd-463c-a1db-154e06efcb17]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:47:13.113Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"e7c89bbb-e5dd-463c-a1db-154e06efcb17","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"DELETE","path":"/api/admin/policies/b1c2d3e4-f5a6-7890-1234-567890abcdef","requestId":"e7c89bbb-e5dd-463c-a1db-154e06efcb17","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:13.116Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- DELETE /api/admin/policies/b1c2d3e4-f5a6-7890-1234-567890abcdef 500 15.670ms","metadata":{"error":{"contentLength":"3814","correlationId":"e7c89bbb-e5dd-463c-a1db-154e06efcb17","durationMs":15.67,"eventType":"finish","requestId":"e7c89bbb-e5dd-463c-a1db-154e06efcb17","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:13.120Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> DELETE /api/admin/policies/b1c2d3e4-f5a6-7890-1234-567890abcdef","metadata":{"correlationId":"c70b9a70-e6c2-4130-a2b6-33866ff058f9","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"DELETE","requestId":"c70b9a70-e6c2-4130-a2b6-33866ff058f9","url":"/api/admin/policies/b1c2d3e4-f5a6-7890-1234-567890abcdef","userId":"anonymous"},"timestamp":"2026-02-23T10:47:13.147Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Authentication: Missing or invalid Authorization header.","metadata":{},"timestamp":"2026-02-23T10:47:13.150Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Client error processing request: Authorization header missing or invalid.","metadata":{"correlationId":"c70b9a70-e6c2-4130-a2b6-33866ff058f9","errorMessage":"Authorization header missing or invalid.","errorName":"AuthenticationError","isOperational":true,"method":"DELETE","path":"/api/admin/policies/b1c2d3e4-f5a6-7890-1234-567890abcdef","requestId":"c70b9a70-e6c2-4130-a2b6-33866ff058f9","stack":"AuthenticationError: Authorization header missing or invalid.\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:32:25\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:27:70\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestLogger.middleware.ts:84:9\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:32\n    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)\n    at middleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:13)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at addRequestId (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestId.middleware.ts:33:5)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at urlencodedParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\urlencoded.js:68:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at jsonParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\json.js:100:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at requestMetricsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestMetrics.middleware.ts:26:3)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at cors (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:188:7)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:224:17\n    at originCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:214:15)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:531:6)\n    at xXssProtectionMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:311:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPoweredByMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:304:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPermittedCrossDomainPoliciesMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:297:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xFrameOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:281:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDownloadOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:261:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDnsPrefetchControlMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:254:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xContentTypeOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:246:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at strictTransportSecurityMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:239:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at referrerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:207:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at originAgentClusterMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:182:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginResourcePolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:175:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginOpenerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:159:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at contentSecurityPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:124:4)","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T10:47:13.159Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"<-- DELETE /api/admin/policies/b1c2d3e4-f5a6-7890-1234-567890abcdef 401 17.169ms","metadata":{"contentLength":"151","correlationId":"c70b9a70-e6c2-4130-a2b6-33866ff058f9","durationMs":17.169,"eventType":"finish","requestId":"c70b9a70-e6c2-4130-a2b6-33866ff058f9","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T10:47:13.164Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/policies/c1d2e3f4-a5b6-7890-1234-567890abcdef/versions/1","metadata":{"correlationId":"69be34ad-1267-4d37-8190-d833d98520bd","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"69be34ad-1267-4d37-8190-d833d98520bd","url":"/api/admin/policies/c1d2e3f4-a5b6-7890-1234-567890abcdef/versions/1","userId":"anonymous"},"timestamp":"2026-02-23T10:47:13.202Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 69be34ad-1267-4d37-8190-d833d98520bd] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:47:13.206Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [69be34ad-1267-4d37-8190-d833d98520bd]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:47:13.210Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"69be34ad-1267-4d37-8190-d833d98520bd","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/policies/c1d2e3f4-a5b6-7890-1234-567890abcdef/versions/1","requestId":"69be34ad-1267-4d37-8190-d833d98520bd","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:13.212Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/policies/c1d2e3f4-a5b6-7890-1234-567890abcdef/versions/1 500 14.316ms","metadata":{"error":{"contentLength":"3951","correlationId":"69be34ad-1267-4d37-8190-d833d98520bd","durationMs":14.316,"eventType":"finish","requestId":"69be34ad-1267-4d37-8190-d833d98520bd","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:13.216Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/policies/c1d2e3f4-a5b6-7890-1234-567890abcdef/versions/1","metadata":{"correlationId":"2362ff1b-f6ff-4f2e-9b24-de80e8525150","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"2362ff1b-f6ff-4f2e-9b24-de80e8525150","url":"/api/admin/policies/c1d2e3f4-a5b6-7890-1234-567890abcdef/versions/1","userId":"anonymous"},"timestamp":"2026-02-23T10:47:13.236Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 2362ff1b-f6ff-4f2e-9b24-de80e8525150] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:47:13.240Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [2362ff1b-f6ff-4f2e-9b24-de80e8525150]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:47:13.244Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"2362ff1b-f6ff-4f2e-9b24-de80e8525150","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/policies/c1d2e3f4-a5b6-7890-1234-567890abcdef/versions/1","requestId":"2362ff1b-f6ff-4f2e-9b24-de80e8525150","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:13.246Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/policies/c1d2e3f4-a5b6-7890-1234-567890abcdef/versions/1 500 13.819ms","metadata":{"error":{"contentLength":"3951","correlationId":"2362ff1b-f6ff-4f2e-9b24-de80e8525150","durationMs":13.819,"eventType":"finish","requestId":"2362ff1b-f6ff-4f2e-9b24-de80e8525150","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:13.250Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/policies/invalid-uuid/versions/1","metadata":{"correlationId":"c4f9e6ff-021e-4bae-b2b3-278f1f33560f","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"c4f9e6ff-021e-4bae-b2b3-278f1f33560f","url":"/api/admin/policies/invalid-uuid/versions/1","userId":"anonymous"},"timestamp":"2026-02-23T10:47:13.270Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - c4f9e6ff-021e-4bae-b2b3-278f1f33560f] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:47:13.273Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [c4f9e6ff-021e-4bae-b2b3-278f1f33560f]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:47:13.276Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"c4f9e6ff-021e-4bae-b2b3-278f1f33560f","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/policies/invalid-uuid/versions/1","requestId":"c4f9e6ff-021e-4bae-b2b3-278f1f33560f","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:13.279Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/policies/invalid-uuid/versions/1 500 13.718ms","metadata":{"error":{"contentLength":"3951","correlationId":"c4f9e6ff-021e-4bae-b2b3-278f1f33560f","durationMs":13.718,"eventType":"finish","requestId":"c4f9e6ff-021e-4bae-b2b3-278f1f33560f","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:13.283Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/policies/c1d2e3f4-a5b6-7890-1234-567890abcdef/versions/invalid-version","metadata":{"correlationId":"68276544-94af-4047-a742-0f6789a89ad4","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"68276544-94af-4047-a742-0f6789a89ad4","url":"/api/admin/policies/c1d2e3f4-a5b6-7890-1234-567890abcdef/versions/invalid-version","userId":"anonymous"},"timestamp":"2026-02-23T10:47:13.304Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 68276544-94af-4047-a742-0f6789a89ad4] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:47:13.308Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [68276544-94af-4047-a742-0f6789a89ad4]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:47:13.312Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"68276544-94af-4047-a742-0f6789a89ad4","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/policies/c1d2e3f4-a5b6-7890-1234-567890abcdef/versions/invalid-version","requestId":"68276544-94af-4047-a742-0f6789a89ad4","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:13.315Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/policies/c1d2e3f4-a5b6-7890-1234-567890abcdef/versions/invalid-version 500 14.894ms","metadata":{"error":{"contentLength":"3951","correlationId":"68276544-94af-4047-a742-0f6789a89ad4","durationMs":14.894,"eventType":"finish","requestId":"68276544-94af-4047-a742-0f6789a89ad4","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:13.318Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/policies/c1d2e3f4-a5b6-7890-1234-567890abcdef/versions/1","metadata":{"correlationId":"7ec1d04c-e791-4c9e-9a36-ac2c2bf9139c","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"7ec1d04c-e791-4c9e-9a36-ac2c2bf9139c","url":"/api/admin/policies/c1d2e3f4-a5b6-7890-1234-567890abcdef/versions/1","userId":"anonymous"},"timestamp":"2026-02-23T10:47:13.343Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 7ec1d04c-e791-4c9e-9a36-ac2c2bf9139c] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:47:13.347Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [7ec1d04c-e791-4c9e-9a36-ac2c2bf9139c]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:47:13.352Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"7ec1d04c-e791-4c9e-9a36-ac2c2bf9139c","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/policies/c1d2e3f4-a5b6-7890-1234-567890abcdef/versions/1","requestId":"7ec1d04c-e791-4c9e-9a36-ac2c2bf9139c","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:13.353Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/policies/c1d2e3f4-a5b6-7890-1234-567890abcdef/versions/1 500 12.991ms","metadata":{"error":{"contentLength":"3951","correlationId":"7ec1d04c-e791-4c9e-9a36-ac2c2bf9139c","durationMs":12.991,"eventType":"finish","requestId":"7ec1d04c-e791-4c9e-9a36-ac2c2bf9139c","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:13.356Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/policies/c1d2e3f4-a5b6-7890-1234-567890abcdef/versions/1","metadata":{"correlationId":"1f9bf3c7-204b-4a28-a989-59d6f78ad895","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"1f9bf3c7-204b-4a28-a989-59d6f78ad895","url":"/api/admin/policies/c1d2e3f4-a5b6-7890-1234-567890abcdef/versions/1","userId":"anonymous"},"timestamp":"2026-02-23T10:47:13.377Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Authentication: Missing or invalid Authorization header.","metadata":{},"timestamp":"2026-02-23T10:47:13.379Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Client error processing request: Authorization header missing or invalid.","metadata":{"correlationId":"1f9bf3c7-204b-4a28-a989-59d6f78ad895","errorMessage":"Authorization header missing or invalid.","errorName":"AuthenticationError","isOperational":true,"method":"GET","path":"/api/admin/policies/c1d2e3f4-a5b6-7890-1234-567890abcdef/versions/1","requestId":"1f9bf3c7-204b-4a28-a989-59d6f78ad895","stack":"AuthenticationError: Authorization header missing or invalid.\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:32:25\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:27:70\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestLogger.middleware.ts:84:9\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:32\n    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)\n    at middleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:13)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at addRequestId (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestId.middleware.ts:33:5)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at urlencodedParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\urlencoded.js:68:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at jsonParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\json.js:100:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at requestMetricsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestMetrics.middleware.ts:26:3)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at cors (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:188:7)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:224:17\n    at originCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:214:15)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:531:6)\n    at xXssProtectionMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:311:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPoweredByMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:304:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPermittedCrossDomainPoliciesMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:297:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xFrameOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:281:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDownloadOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:261:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDnsPrefetchControlMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:254:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xContentTypeOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:246:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at strictTransportSecurityMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:239:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at referrerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:207:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at originAgentClusterMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:182:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginResourcePolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:175:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginOpenerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:159:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at contentSecurityPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:124:4)","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T10:47:13.387Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"<-- GET /api/admin/policies/c1d2e3f4-a5b6-7890-1234-567890abcdef/versions/1 401 14.892ms","metadata":{"contentLength":"151","correlationId":"1f9bf3c7-204b-4a28-a989-59d6f78ad895","durationMs":14.892,"eventType":"finish","requestId":"1f9bf3c7-204b-4a28-a989-59d6f78ad895","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T10:47:13.392Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/policies/d1e2f3a4-b5c6-7890-1234-567890abcdef/versions","metadata":{"correlationId":"a50c7d59-6432-456e-a7a0-913e2a865fd8","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"a50c7d59-6432-456e-a7a0-913e2a865fd8","url":"/api/admin/policies/d1e2f3a4-b5c6-7890-1234-567890abcdef/versions","userId":"anonymous"},"timestamp":"2026-02-23T10:47:13.411Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - a50c7d59-6432-456e-a7a0-913e2a865fd8] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:47:13.414Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [a50c7d59-6432-456e-a7a0-913e2a865fd8]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:47:13.418Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"a50c7d59-6432-456e-a7a0-913e2a865fd8","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/policies/d1e2f3a4-b5c6-7890-1234-567890abcdef/versions","requestId":"a50c7d59-6432-456e-a7a0-913e2a865fd8","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:13.420Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/policies/d1e2f3a4-b5c6-7890-1234-567890abcdef/versions 500 12.573ms","metadata":{"error":{"contentLength":"3814","correlationId":"a50c7d59-6432-456e-a7a0-913e2a865fd8","durationMs":12.573,"eventType":"finish","requestId":"a50c7d59-6432-456e-a7a0-913e2a865fd8","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:13.423Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/policies/d1e2f3a4-b5c6-7890-1234-567890abcdef/versions","metadata":{"correlationId":"12209108-0861-4f97-a417-9862ae1ff70c","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"12209108-0861-4f97-a417-9862ae1ff70c","url":"/api/admin/policies/d1e2f3a4-b5c6-7890-1234-567890abcdef/versions","userId":"anonymous"},"timestamp":"2026-02-23T10:47:13.445Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 12209108-0861-4f97-a417-9862ae1ff70c] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:47:13.449Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [12209108-0861-4f97-a417-9862ae1ff70c]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:47:13.451Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"12209108-0861-4f97-a417-9862ae1ff70c","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/policies/d1e2f3a4-b5c6-7890-1234-567890abcdef/versions","requestId":"12209108-0861-4f97-a417-9862ae1ff70c","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:13.452Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/policies/d1e2f3a4-b5c6-7890-1234-567890abcdef/versions 500 11.802ms","metadata":{"error":{"contentLength":"3814","correlationId":"12209108-0861-4f97-a417-9862ae1ff70c","durationMs":11.802,"eventType":"finish","requestId":"12209108-0861-4f97-a417-9862ae1ff70c","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:13.457Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/policies/invalid-uuid/versions","metadata":{"correlationId":"9307019b-04d1-4fbf-8fd5-b17317bd2403","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"9307019b-04d1-4fbf-8fd5-b17317bd2403","url":"/api/admin/policies/invalid-uuid/versions","userId":"anonymous"},"timestamp":"2026-02-23T10:47:13.480Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 9307019b-04d1-4fbf-8fd5-b17317bd2403] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:47:13.484Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [9307019b-04d1-4fbf-8fd5-b17317bd2403]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:47:13.488Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"9307019b-04d1-4fbf-8fd5-b17317bd2403","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/policies/invalid-uuid/versions","requestId":"9307019b-04d1-4fbf-8fd5-b17317bd2403","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:13.490Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/policies/invalid-uuid/versions 500 12.105ms","metadata":{"error":{"contentLength":"3814","correlationId":"9307019b-04d1-4fbf-8fd5-b17317bd2403","durationMs":12.105,"eventType":"finish","requestId":"9307019b-04d1-4fbf-8fd5-b17317bd2403","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:13.492Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/policies/d1e2f3a4-b5c6-7890-1234-567890abcdef/versions","metadata":{"correlationId":"6c93e879-2a80-4faf-99fb-739e11c09a54","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"6c93e879-2a80-4faf-99fb-739e11c09a54","url":"/api/admin/policies/d1e2f3a4-b5c6-7890-1234-567890abcdef/versions","userId":"anonymous"},"timestamp":"2026-02-23T10:47:13.513Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 6c93e879-2a80-4faf-99fb-739e11c09a54] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:47:13.517Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [6c93e879-2a80-4faf-99fb-739e11c09a54]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:47:13.520Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"6c93e879-2a80-4faf-99fb-739e11c09a54","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/policies/d1e2f3a4-b5c6-7890-1234-567890abcdef/versions","requestId":"6c93e879-2a80-4faf-99fb-739e11c09a54","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:13.522Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- GET /api/admin/policies/d1e2f3a4-b5c6-7890-1234-567890abcdef/versions 500 12.254ms","metadata":{"error":{"contentLength":"3814","correlationId":"6c93e879-2a80-4faf-99fb-739e11c09a54","durationMs":12.254,"eventType":"finish","requestId":"6c93e879-2a80-4faf-99fb-739e11c09a54","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:13.525Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/admin/policies/d1e2f3a4-b5c6-7890-1234-567890abcdef/versions","metadata":{"correlationId":"db162868-ae20-470f-ab3a-053d6012cf59","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"db162868-ae20-470f-ab3a-053d6012cf59","url":"/api/admin/policies/d1e2f3a4-b5c6-7890-1234-567890abcdef/versions","userId":"anonymous"},"timestamp":"2026-02-23T10:47:13.544Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Authentication: Missing or invalid Authorization header.","metadata":{},"timestamp":"2026-02-23T10:47:13.548Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Client error processing request: Authorization header missing or invalid.","metadata":{"correlationId":"db162868-ae20-470f-ab3a-053d6012cf59","errorMessage":"Authorization header missing or invalid.","errorName":"AuthenticationError","isOperational":true,"method":"GET","path":"/api/admin/policies/d1e2f3a4-b5c6-7890-1234-567890abcdef/versions","requestId":"db162868-ae20-470f-ab3a-053d6012cf59","stack":"AuthenticationError: Authorization header missing or invalid.\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:32:25\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:27:70\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestLogger.middleware.ts:84:9\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:32\n    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)\n    at middleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:13)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at addRequestId (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestId.middleware.ts:33:5)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at urlencodedParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\urlencoded.js:68:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at jsonParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\json.js:100:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at requestMetricsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestMetrics.middleware.ts:26:3)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at cors (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:188:7)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:224:17\n    at originCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:214:15)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:531:6)\n    at xXssProtectionMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:311:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPoweredByMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:304:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPermittedCrossDomainPoliciesMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:297:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xFrameOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:281:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDownloadOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:261:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDnsPrefetchControlMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:254:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xContentTypeOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:246:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at strictTransportSecurityMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:239:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at referrerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:207:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at originAgentClusterMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:182:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginResourcePolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:175:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginOpenerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:159:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at contentSecurityPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:124:4)","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T10:47:13.555Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"<-- GET /api/admin/policies/d1e2f3a4-b5c6-7890-1234-567890abcdef/versions 401 14.339ms","metadata":{"contentLength":"151","correlationId":"db162868-ae20-470f-ab3a-053d6012cf59","durationMs":14.339,"eventType":"finish","requestId":"db162868-ae20-470f-ab3a-053d6012cf59","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T10:47:13.558Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> POST /api/admin/policies/e1f2a3b4-c5d6-7890-1234-567890abcdef/rollback/1","metadata":{"correlationId":"27c53ef3-7a1e-499c-bacc-543912a24d89","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"POST","requestId":"27c53ef3-7a1e-499c-bacc-543912a24d89","url":"/api/admin/policies/e1f2a3b4-c5d6-7890-1234-567890abcdef/rollback/1","userId":"anonymous"},"timestamp":"2026-02-23T10:47:13.581Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 27c53ef3-7a1e-499c-bacc-543912a24d89] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:47:13.584Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [27c53ef3-7a1e-499c-bacc-543912a24d89]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:47:13.588Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"27c53ef3-7a1e-499c-bacc-543912a24d89","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"POST","path":"/api/admin/policies/e1f2a3b4-c5d6-7890-1234-567890abcdef/rollback/1","requestId":"27c53ef3-7a1e-499c-bacc-543912a24d89","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:13.591Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- POST /api/admin/policies/e1f2a3b4-c5d6-7890-1234-567890abcdef/rollback/1 500 12.881ms","metadata":{"error":{"contentLength":"3951","correlationId":"27c53ef3-7a1e-499c-bacc-543912a24d89","durationMs":12.881,"eventType":"finish","requestId":"27c53ef3-7a1e-499c-bacc-543912a24d89","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:13.594Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> POST /api/admin/policies/e1f2a3b4-c5d6-7890-1234-567890abcdef/rollback/1","metadata":{"correlationId":"a5feb52f-3315-4808-8e33-db446d2ebc5b","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"POST","requestId":"a5feb52f-3315-4808-8e33-db446d2ebc5b","url":"/api/admin/policies/e1f2a3b4-c5d6-7890-1234-567890abcdef/rollback/1","userId":"anonymous"},"timestamp":"2026-02-23T10:47:13.613Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - a5feb52f-3315-4808-8e33-db446d2ebc5b] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:47:13.617Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [a5feb52f-3315-4808-8e33-db446d2ebc5b]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:47:13.619Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"a5feb52f-3315-4808-8e33-db446d2ebc5b","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"POST","path":"/api/admin/policies/e1f2a3b4-c5d6-7890-1234-567890abcdef/rollback/1","requestId":"a5feb52f-3315-4808-8e33-db446d2ebc5b","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:13.620Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- POST /api/admin/policies/e1f2a3b4-c5d6-7890-1234-567890abcdef/rollback/1 500 10.051ms","metadata":{"error":{"contentLength":"3951","correlationId":"a5feb52f-3315-4808-8e33-db446d2ebc5b","durationMs":10.051,"eventType":"finish","requestId":"a5feb52f-3315-4808-8e33-db446d2ebc5b","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:13.623Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> POST /api/admin/policies/invalid-uuid/rollback/1","metadata":{"correlationId":"9ec6401c-3b0e-42cc-bd64-7d2f2ff01304","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"POST","requestId":"9ec6401c-3b0e-42cc-bd64-7d2f2ff01304","url":"/api/admin/policies/invalid-uuid/rollback/1","userId":"anonymous"},"timestamp":"2026-02-23T10:47:13.638Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 9ec6401c-3b0e-42cc-bd64-7d2f2ff01304] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:47:13.641Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [9ec6401c-3b0e-42cc-bd64-7d2f2ff01304]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:47:13.644Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"9ec6401c-3b0e-42cc-bd64-7d2f2ff01304","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"POST","path":"/api/admin/policies/invalid-uuid/rollback/1","requestId":"9ec6401c-3b0e-42cc-bd64-7d2f2ff01304","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:13.645Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- POST /api/admin/policies/invalid-uuid/rollback/1 500 9.370ms","metadata":{"error":{"contentLength":"3951","correlationId":"9ec6401c-3b0e-42cc-bd64-7d2f2ff01304","durationMs":9.37,"eventType":"finish","requestId":"9ec6401c-3b0e-42cc-bd64-7d2f2ff01304","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:13.647Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> POST /api/admin/policies/e1f2a3b4-c5d6-7890-1234-567890abcdef/rollback/invalid-version","metadata":{"correlationId":"e9ed263d-90a8-4dbe-bd43-5eb3c1e49e6c","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"POST","requestId":"e9ed263d-90a8-4dbe-bd43-5eb3c1e49e6c","url":"/api/admin/policies/e1f2a3b4-c5d6-7890-1234-567890abcdef/rollback/invalid-version","userId":"anonymous"},"timestamp":"2026-02-23T10:47:13.672Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - e9ed263d-90a8-4dbe-bd43-5eb3c1e49e6c] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:47:13.675Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [e9ed263d-90a8-4dbe-bd43-5eb3c1e49e6c]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:47:13.678Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"e9ed263d-90a8-4dbe-bd43-5eb3c1e49e6c","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"POST","path":"/api/admin/policies/e1f2a3b4-c5d6-7890-1234-567890abcdef/rollback/invalid-version","requestId":"e9ed263d-90a8-4dbe-bd43-5eb3c1e49e6c","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:13.680Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- POST /api/admin/policies/e1f2a3b4-c5d6-7890-1234-567890abcdef/rollback/invalid-version 500 11.010ms","metadata":{"error":{"contentLength":"3951","correlationId":"e9ed263d-90a8-4dbe-bd43-5eb3c1e49e6c","durationMs":11.01,"eventType":"finish","requestId":"e9ed263d-90a8-4dbe-bd43-5eb3c1e49e6c","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:13.683Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> POST /api/admin/policies/e1f2a3b4-c5d6-7890-1234-567890abcdef/rollback/1","metadata":{"correlationId":"5246eeec-90a7-4668-8bc2-44e6434fef7e","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"POST","requestId":"5246eeec-90a7-4668-8bc2-44e6434fef7e","url":"/api/admin/policies/e1f2a3b4-c5d6-7890-1234-567890abcdef/rollback/1","userId":"anonymous"},"timestamp":"2026-02-23T10:47:13.700Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"[AdminGuard - 5246eeec-90a7-4668-8bc2-44e6434fef7e] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["policy-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T10:47:13.704Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      {"level":"error","message":"Unexpected error during validation middleware [5246eeec-90a7-4668-8bc2-44e6434fef7e]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T10:47:13.708Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"5246eeec-90a7-4668-8bc2-44e6434fef7e","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"POST","path":"/api/admin/policies/e1f2a3b4-c5d6-7890-1234-567890abcdef/rollback/1","requestId":"5246eeec-90a7-4668-8bc2-44e6434fef7e","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:13.710Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"<-- POST /api/admin/policies/e1f2a3b4-c5d6-7890-1234-567890abcdef/rollback/1 500 13.446ms","metadata":{"error":{"contentLength":"3951","correlationId":"5246eeec-90a7-4668-8bc2-44e6434fef7e","durationMs":13.446,"eventType":"finish","requestId":"5246eeec-90a7-4668-8bc2-44e6434fef7e","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T10:47:13.713Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> POST /api/admin/policies/e1f2a3b4-c5d6-7890-1234-567890abcdef/rollback","metadata":{"correlationId":"245d05ea-d621-4b3e-baf5-7a6c5a2e3662","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"POST","requestId":"245d05ea-d621-4b3e-baf5-7a6c5a2e3662","url":"/api/admin/policies/e1f2a3b4-c5d6-7890-1234-567890abcdef/rollback","userId":"anonymous"},"timestamp":"2026-02-23T10:47:13.728Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Authentication: Missing or invalid Authorization header.","metadata":{},"timestamp":"2026-02-23T10:47:13.731Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Client error processing request: Authorization header missing or invalid.","metadata":{"correlationId":"245d05ea-d621-4b3e-baf5-7a6c5a2e3662","errorMessage":"Authorization header missing or invalid.","errorName":"AuthenticationError","isOperational":true,"method":"POST","path":"/api/admin/policies/e1f2a3b4-c5d6-7890-1234-567890abcdef/rollback","requestId":"245d05ea-d621-4b3e-baf5-7a6c5a2e3662","stack":"AuthenticationError: Authorization header missing or invalid.\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:32:25\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:27:70\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestLogger.middleware.ts:84:9\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:32\n    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)\n    at middleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:13)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at addRequestId (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestId.middleware.ts:33:5)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at urlencodedParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\urlencoded.js:57:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\read.js:132:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:214:14)\n    at invokeCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\raw-body@3.0.0\\node_modules\\raw-body\\index.js:238:16)\n    at done (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\raw-body@3.0.0\\node_modules\\raw-body\\index.js:227:7)\n    at IncomingMessage.onEnd (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\raw-body@3.0.0\\node_modules\\raw-body\\index.js:287:7)\n    at IncomingMessage.emit (node:events:519:28)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at processTicksAndRejections (node:internal/process/task_queues:90:21)","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T10:47:13.735Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"<-- POST /api/admin/policies/e1f2a3b4-c5d6-7890-1234-567890abcdef/rollback 401 9.299ms","metadata":{"contentLength":"151","correlationId":"245d05ea-d621-4b3e-baf5-7a6c5a2e3662","durationMs":9.299,"eventType":"finish","requestId":"245d05ea-d621-4b3e-baf5-7a6c5a2e3662","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T10:47:13.737Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId ΓÇ║ should return 200 OK with policy data if policy exists

    expected 200 "OK", got 500 "Internal Server Error"

      134 |                 .get(`${BASE_API_PATH}/${targetPolicyId}`)
      135 |                 .set(MOCK_AUTH_HEADER)
    > 136 |                 .expect(HttpStatusCode.OK) // 200
          |                  ^
      137 |                 .expect(res => {
      138 |                     expect(res.body.id).toBe(targetPolicyId);
      139 |                     expect(res.body.policyName).toBe('get.policy');

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:136:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:131:81)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId ΓÇ║ should return 404 Not Found if service returns null

    expected 404 "Not Found", got 500 "Internal Server Error"

      147 |                 .get(`${BASE_API_PATH}/${targetPolicyId}`)
      148 |                 .set(MOCK_AUTH_HEADER)
    > 149 |                 .expect(HttpStatusCode.NOT_FOUND); // 404
          |                  ^
      150 |             expect(mockPolicyAdminService.getPolicy).toHaveBeenCalledWith(expect.anything(), targetPolicyId);
      151 |         });
      152 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:149:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:144:78)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId ΓÇ║ should return 404 Not Found if service throws PolicyNotFoundError

    expected 404 "Not Found", got 500 "Internal Server Error"

      158 |                 .get(`${BASE_API_PATH}/${targetPolicyId}`)
      159 |                 .set(MOCK_AUTH_HEADER)
    > 160 |                 .expect(HttpStatusCode.NOT_FOUND); // 404
          |                  ^
      161 |             expect(mockPolicyAdminService.getPolicy).toHaveBeenCalledWith(expect.anything(), targetPolicyId);
      162 |         });
      163 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:160:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:153:92)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId ΓÇ║ should return 400 Bad Request if policyId param is not a valid UUID

    expected 400 "Bad Request", got 500 "Internal Server Error"

      167 |                 .get(`${BASE_API_PATH}/${invalidId}`)
      168 |                 .set(MOCK_AUTH_HEADER)
    > 169 |                 .expect(HttpStatusCode.BAD_REQUEST); // 400 (Handled by validation middleware)
          |                  ^
      170 |             expect(mockPolicyAdminService.getPolicy).not.toHaveBeenCalled();
      171 |         });
      172 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:169:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:164:94)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId ΓÇ║ should return 500 if the service fails unexpectedly

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: Anything, "a1b2c3d4-e5f6-7890-1234-567890abcdef"

    Number of calls: 0

      178 |                 .set(MOCK_AUTH_HEADER)
      179 |                 .expect(HttpStatusCode.INTERNAL_SERVER_ERROR); // 500
    > 180 |             expect(mockPolicyAdminService.getPolicy).toHaveBeenCalledWith(expect.anything(), targetPolicyId);
          |                                                      ^
      181 |         });
      182 |
      183 |         it('should return 401 Unauthorized if token is missing', async () => {

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:180:54
      at fulfilled (tests/integration/routes/policy.admin.routes.integration.spec.ts:5:58)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies ΓÇ║ should return 200 OK with a list of policies

    expected 200 "OK", got 500 "Internal Server Error"

      196 |                  .get(BASE_API_PATH)
      197 |                  .set(MOCK_AUTH_HEADER)
    > 198 |                  .expect(HttpStatusCode.OK); // 200
          |                   ^
      199 |              expect(mockPolicyAdminService.listPolicies).toHaveBeenCalledTimes(1);
      200 |              expect(mockPolicyAdminService.listPolicies).toHaveBeenCalledWith(expect.anything(), { limit: undefined, language: undefined, startKey: undefined });
      201 |          });

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:198:19
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:192:72)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies ΓÇ║ should pass pagination and filter parameters to the service

    expected 200 "OK", got 500 "Internal Server Error"

      207 |                  .query({ limit: 15, language: 'rego', startKey: 'opaqueStartKey' })
      208 |                  .set(MOCK_AUTH_HEADER)
    > 209 |                  .expect(HttpStatusCode.OK); // 200
          |                   ^
      210 |              expect(mockPolicyAdminService.listPolicies).toHaveBeenCalledTimes(1);
      211 |              expect(mockPolicyAdminService.listPolicies).toHaveBeenCalledWith(expect.anything(), { limit: '15', language: 'rego', startKey: 'opaqueStartKey' });
      212 |          });

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:209:19
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:203:88)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies ΓÇ║ should return 500 if the service fails unexpectedly

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 1
    Received number of calls: 0

      219 |                  .set(MOCK_AUTH_HEADER)
      220 |                  .expect(HttpStatusCode.INTERNAL_SERVER_ERROR); // 500
    > 221 |              expect(mockPolicyAdminService.listPolicies).toHaveBeenCalledTimes(1);
          |                                                          ^
      222 |          });
      223 |
      224 |          it('should return 401 Unauthorized if token is missing', async () => {

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:221:58
      at fulfilled (tests/integration/routes/policy.admin.routes.integration.spec.ts:5:58)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ PUT /api/admin/policies/:policyId ΓÇ║ should return 200 OK with updated policy data if service succeeds

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    - Expected
    + Received

      {"attributes": {"cognito:groups": ["policy-admin", "user"], "cognito:username": "test-admin", "sub": "test-admin-id-123"}, "id": "test-admin-id-123", "roles": ["policy-admin", "user"], "tenantId": "unknown-tenant", "username": "test-admin"},
      "a1b2c3d4-e5f6-7890-1234-567890abcdef",
      Object {
        "description": "Updated Integration Description",
    -   "version": 2,
      },

    Number of calls: 1

      250 |                     expect(res.body.version).toBe(MOCK_VALID_UPDATE_POLICY_PAYLOAD.version);
      251 |                 });
    > 252 |             expect(mockPolicyAdminService.updatePolicy).toHaveBeenCalledWith(expect.anything(), targetPolicyId, MOCK_VALID_UPDATE_POLICY_PAYLOAD);
          |                                                         ^
      253 |         });
      254 |
      255 |          it('should return 404 Not Found if service throws PolicyNotFoundError', async () => {

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:252:57
      at fulfilled (tests/integration/routes/policy.admin.routes.integration.spec.ts:5:58)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ DELETE /api/admin/policies/:policyId ΓÇ║ should return 204 No Content if service succeeds

    expected 204 "No Content", got 500 "Internal Server Error"

      311 |                 .delete(`${BASE_API_PATH}/${targetPolicyId}`)
      312 |                 .set(MOCK_AUTH_HEADER)
    > 313 |                 .expect(HttpStatusCode.NO_CONTENT); // 204
          |                  ^
      314 |             expect(mockPolicyAdminService.deletePolicy).toHaveBeenCalledWith(expect.anything(), targetPolicyId);
      315 |         });
      316 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:313:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:308:75)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ DELETE /api/admin/policies/:policyId ΓÇ║ should return 404 Not Found if service throws PolicyNotFoundError

    expected 404 "Not Found", got 500 "Internal Server Error"

      322 |                 .delete(`${BASE_API_PATH}/${targetPolicyId}`)
      323 |                 .set(MOCK_AUTH_HEADER)
    > 324 |                 .expect(HttpStatusCode.NOT_FOUND); // 404
          |                  ^
      325 |             expect(mockPolicyAdminService.deletePolicy).toHaveBeenCalledWith(expect.anything(), targetPolicyId);
      326 |         });
      327 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:324:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:317:92)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ DELETE /api/admin/policies/:policyId ΓÇ║ should return 400 Bad Request if policyId param is invalid

    expected 400 "Bad Request", got 500 "Internal Server Error"

      330 |                 .delete(`${BASE_API_PATH}/invalid-uuid`)
      331 |                 .set(MOCK_AUTH_HEADER)
    > 332 |                 .expect(HttpStatusCode.BAD_REQUEST); // 400
          |                  ^
      333 |             expect(mockPolicyAdminService.deletePolicy).not.toHaveBeenCalled();
      334 |         });
      335 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:332:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:328:86)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ DELETE /api/admin/policies/:policyId ΓÇ║ should return 500 if service fails unexpectedly

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: Anything, "b1c2d3e4-f5a6-7890-1234-567890abcdef"

    Number of calls: 0

      341 |                 .set(MOCK_AUTH_HEADER)
      342 |                 .expect(HttpStatusCode.INTERNAL_SERVER_ERROR); // 500
    > 343 |             expect(mockPolicyAdminService.deletePolicy).toHaveBeenCalledWith(expect.anything(), targetPolicyId);
          |                                                         ^
      344 |         });
      345 |
      346 |         it('should return 401 Unauthorized if token is missing', async () => {

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:343:57
      at fulfilled (tests/integration/routes/policy.admin.routes.integration.spec.ts:5:58)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId/versions/:version ΓÇ║ should return 200 OK with policy version data if found

    expected 200 "OK", got 500 "Internal Server Error"

      362 |                 .get(`${BASE_API_PATH}/${policyId}/versions/${version}`)
      363 |                 .set(MOCK_AUTH_HEADER)
    > 364 |                 .expect(HttpStatusCode.OK)
          |                  ^
      365 |                 .expect(res => {
      366 |                     expect(res.body.id).toBe(policyId);
      367 |                     expect(res.body.version).toBe(version);

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:364:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:359:81)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId/versions/:version ΓÇ║ should return 404 Not Found if policy version not found

    expected 404 "Not Found", got 500 "Internal Server Error"

      375 |                 .get(`${BASE_API_PATH}/${policyId}/versions/${version}`)
      376 |                 .set(MOCK_AUTH_HEADER)
    > 377 |                 .expect(HttpStatusCode.NOT_FOUND);
          |                  ^
      378 |             expect(mockPolicyAdminService.getPolicyVersion).toHaveBeenCalledWith(expect.anything(), policyId, version);
      379 |         });
      380 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:377:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:372:82)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId/versions/:version ΓÇ║ should return 400 Bad Request if policyId is invalid

    expected 400 "Bad Request", got 500 "Internal Server Error"

      383 |                 .get(`${BASE_API_PATH}/invalid-uuid/versions/${version}`)
      384 |                 .set(MOCK_AUTH_HEADER)
    > 385 |                 .expect(HttpStatusCode.BAD_REQUEST);
          |                  ^
      386 |             expect(mockPolicyAdminService.getPolicyVersion).not.toHaveBeenCalled();
      387 |         });
      388 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:385:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:381:79)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId/versions/:version ΓÇ║ should return 400 Bad Request if version is invalid

    expected 400 "Bad Request", got 500 "Internal Server Error"

      391 |                 .get(`${BASE_API_PATH}/${policyId}/versions/invalid-version`)
      392 |                 .set(MOCK_AUTH_HEADER)
    > 393 |                 .expect(HttpStatusCode.BAD_REQUEST);
          |                  ^
      394 |             expect(mockPolicyAdminService.getPolicyVersion).not.toHaveBeenCalled();
      395 |         });
      396 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:393:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:389:78)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId/versions/:version ΓÇ║ should return 500 Internal Server Error if service fails unexpectedly

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: Anything, "c1d2e3f4-a5b6-7890-1234-567890abcdef", 1

    Number of calls: 0

      402 |                 .set(MOCK_AUTH_HEADER)
      403 |                 .expect(HttpStatusCode.INTERNAL_SERVER_ERROR);
    > 404 |             expect(mockPolicyAdminService.getPolicyVersion).toHaveBeenCalledWith(expect.anything(), policyId, version);
          |                                                             ^
      405 |         });
      406 |
      407 |         it('should return 401 Unauthorized if token is missing', async () => {

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:404:61
      at fulfilled (tests/integration/routes/policy.admin.routes.integration.spec.ts:5:58)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId/versions ΓÇ║ should return 200 OK with a list of policy versions

    expected 200 "OK", got 500 "Internal Server Error"

      425 |                 .get(`${BASE_API_PATH}/${policyId}/versions`)
      426 |                 .set(MOCK_AUTH_HEADER)
    > 427 |                 .expect(HttpStatusCode.OK)
          |                  ^
      428 |                 .expect(res => {
      429 |                     expect(res.body).toHaveLength(2);
      430 |                     expect(res.body[0].version).toBe(1);

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:427:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:422:78)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId/versions ΓÇ║ should return 404 Not Found if policy does not exist

    expected 404 "Not Found", got 500 "Internal Server Error"

      441 |                 .get(`${BASE_API_PATH}/${policyId}/versions`)
      442 |                 .set(MOCK_AUTH_HEADER)
    > 443 |                 .expect(HttpStatusCode.NOT_FOUND);
          |                  ^
      444 |             expect(mockPolicyAdminService.listPolicyVersions).toHaveBeenCalledWith(expect.anything(), policyId);
      445 |         });
      446 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:443:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:436:79)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId/versions ΓÇ║ should return 400 Bad Request if policyId is invalid

    expected 400 "Bad Request", got 500 "Internal Server Error"

      449 |                 .get(`${BASE_API_PATH}/invalid-uuid/versions`)
      450 |                 .set(MOCK_AUTH_HEADER)
    > 451 |                 .expect(HttpStatusCode.BAD_REQUEST);
          |                  ^
      452 |             expect(mockPolicyAdminService.listPolicyVersions).not.toHaveBeenCalled();
      453 |         });
      454 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:451:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:447:79)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId/versions ΓÇ║ should return 500 Internal Server Error if service fails unexpectedly

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: Anything, "d1e2f3a4-b5c6-7890-1234-567890abcdef"

    Number of calls: 0

      460 |                 .set(MOCK_AUTH_HEADER)
      461 |                 .expect(HttpStatusCode.INTERNAL_SERVER_ERROR);
    > 462 |             expect(mockPolicyAdminService.listPolicyVersions).toHaveBeenCalledWith(expect.anything(), policyId);
          |                                                               ^
      463 |         });
      464 |
      465 |         it('should return 401 Unauthorized if token is missing', async () => {

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:462:63
      at fulfilled (tests/integration/routes/policy.admin.routes.integration.spec.ts:5:58)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ POST /api/admin/policies/:policyId/rollback ΓÇ║ should return 200 OK with rolled back policy data on success

    expected 200 "OK", got 500 "Internal Server Error"

      481 |                 .post(`${BASE_API_PATH}/${policyId}/rollback/${version}`)
      482 |                 .set(MOCK_AUTH_HEADER)
    > 483 |                 .expect(HttpStatusCode.OK)
          |                  ^
      484 |                 .expect(res => {
      485 |                     expect(res.body.id).toBe(policyId);
      486 |                     expect(res.body.version).toBe(version);

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:483:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:478:87)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ POST /api/admin/policies/:policyId/rollback ΓÇ║ should return 404 Not Found if policy or version not found

    expected 404 "Not Found", got 500 "Internal Server Error"

      496 |                 .post(`${BASE_API_PATH}/${policyId}/rollback/${version}`)
      497 |                 .set(MOCK_AUTH_HEADER)
    > 498 |                 .expect(HttpStatusCode.NOT_FOUND);
          |                  ^
      499 |             expect(mockPolicyAdminService.rollbackPolicy).toHaveBeenCalledWith(expect.anything(), policyId, version);
      500 |         });
      501 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:498:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:491:85)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ POST /api/admin/policies/:policyId/rollback ΓÇ║ should return 400 Bad Request if policyId is invalid

    expected 400 "Bad Request", got 500 "Internal Server Error"

      504 |                 .post(`${BASE_API_PATH}/invalid-uuid/rollback/${version}`)
      505 |                 .set(MOCK_AUTH_HEADER)
    > 506 |                 .expect(HttpStatusCode.BAD_REQUEST);
          |                  ^
      507 |             expect(mockPolicyAdminService.rollbackPolicy).not.toHaveBeenCalled();
      508 |         });
      509 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:506:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:502:79)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ POST /api/admin/policies/:policyId/rollback ΓÇ║ should return 400 Bad Request if version is invalid or missing

    expected 400 "Bad Request", got 500 "Internal Server Error"

      512 |                 .post(`${BASE_API_PATH}/${policyId}/rollback/invalid-version`)
      513 |                 .set(MOCK_AUTH_HEADER)
    > 514 |                 .expect(HttpStatusCode.BAD_REQUEST);
          |                  ^
      515 |             expect(mockPolicyAdminService.rollbackPolicy).not.toHaveBeenCalled();
      516 |         });
      517 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:514:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:510:89)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ POST /api/admin/policies/:policyId/rollback ΓÇ║ should return 500 Internal Server Error if service fails unexpectedly

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: Anything, "e1f2a3b4-c5d6-7890-1234-567890abcdef", 1

    Number of calls: 0

      523 |                 .set(MOCK_AUTH_HEADER)
      524 |                 .expect(HttpStatusCode.INTERNAL_SERVER_ERROR);
    > 525 |             expect(mockPolicyAdminService.rollbackPolicy).toHaveBeenCalledWith(expect.anything(), policyId, version);
          |                                                           ^
      526 |         });
      527 |
      528 |         it('should return 401 Unauthorized if token is missing', async () => {

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:525:59
      at fulfilled (tests/integration/routes/policy.admin.routes.integration.spec.ts:5:58)

FAIL tests/unit/application/services/group.admin.service.spec.ts
  ΓùÅ GroupAdminService ΓÇ║ assignRoleToGroup ΓÇ║ should assign a role to a group successfully

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "test-group", "test-role"
    Received: "test-tenant", "test-group", "test-role"

    Number of calls: 1

      137 |             await service.assignRoleToGroup(adminUser, groupName, roleName);
      138 |
    > 139 |             expect(assignmentRepositoryMock.assignRoleToGroup).toHaveBeenCalledWith(groupName, roleName);
          |                                                                ^
      140 |         });
      141 |
      142 |         it('should throw GroupNotFoundError if group does not exist', async () => {

      at tests/unit/application/services/group.admin.service.spec.ts:139:64
      at fulfilled (tests/unit/application/services/group.admin.service.spec.ts:5:58)

  ΓùÅ GroupAdminService ΓÇ║ removeRoleFromGroup ΓÇ║ should remove a role from a group successfully

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "test-group", "test-role"
    Received: "test-tenant", "test-group", "test-role"

    Number of calls: 1

      170 |             await service.removeRoleFromGroup(adminUser, groupName, roleName);
      171 |
    > 172 |             expect(assignmentRepositoryMock.removeRoleFromGroup).toHaveBeenCalledWith(groupName, roleName);
          |                                                                  ^
      173 |         });
      174 |
      175 |         it('should throw AssignmentError on failure', async () => {

      at tests/unit/application/services/group.admin.service.spec.ts:172:66
      at fulfilled (tests/unit/application/services/group.admin.service.spec.ts:5:58)

FAIL tests/unit/application/services/permission.admin.service.spec.ts
  ΓùÅ PermissionAdminService ΓÇ║ getPermission ΓÇ║ should return a permission if found

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "test-permission"
    Received: "test-tenant", "test-permission"

    Number of calls: 1

      86 |             const result = await service.getPermission(adminUser, permissionName);
      87 |
    > 88 |             expect(permissionRepoMock.findByName).toHaveBeenCalledWith(permissionName);
         |                                                   ^
      89 |             expect(result).toEqual(permissionEntity);
      90 |         });
      91 |

      at tests/unit/application/services/permission.admin.service.spec.ts:88:51
      at fulfilled (tests/unit/application/services/permission.admin.service.spec.ts:5:58)

  ΓùÅ PermissionAdminService ΓÇ║ listPermissions ΓÇ║ should list permissions

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {}
    Received: "test-tenant", {}

    Number of calls: 1

      106 |             const result = await service.listPermissions(adminUser, {});
      107 |
    > 108 |             expect(permissionRepoMock.list).toHaveBeenCalledWith({});
          |                                             ^
      109 |             expect(result).toEqual(permissions);
      110 |         });
      111 |     });

      at tests/unit/application/services/permission.admin.service.spec.ts:108:45
      at fulfilled (tests/unit/application/services/permission.admin.service.spec.ts:5:58)

  ΓùÅ PermissionAdminService ΓÇ║ updatePermission ΓÇ║ should update a permission successfully

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "test-permission", {"description": "Updated description"}
    Received: "test-tenant", "test-permission", {"description": "Updated description"}

    Number of calls: 1

      119 |             const result = await service.updatePermission(adminUser, permissionName, updates);
      120 |
    > 121 |             expect(permissionRepoMock.update).toHaveBeenCalledWith(permissionName, updates);
          |                                               ^
      122 |             expect(result).toEqual(updatedPermission);
      123 |         });
      124 |     });

      at tests/unit/application/services/permission.admin.service.spec.ts:121:47
      at fulfilled (tests/unit/application/services/permission.admin.service.spec.ts:5:58)

  ΓùÅ PermissionAdminService ΓÇ║ deletePermission ΓÇ║ should delete a permission and its assignments successfully

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "test-permission"
    Received: "test-tenant", "test-permission"

    Number of calls: 1

      131 |             await service.deletePermission(adminUser, permissionName);
      132 |
    > 133 |             expect(permissionRepoMock.delete).toHaveBeenCalledWith(permissionName);
          |                                               ^
      134 |             expect(assignmentRepoMock.removeAllAssignmentsForPermission).toHaveBeenCalledWith(permissionName);
      135 |         });
      136 |

      at tests/unit/application/services/permission.admin.service.spec.ts:133:47
      at fulfilled (tests/unit/application/services/permission.admin.service.spec.ts:5:58)

FAIL tests/unit/application/services/role.admin.service.spec.ts
  ΓùÅ RoleAdminService ΓÇ║ getRole ΓÇ║ should return a role if found

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "test-role"
    Received: "test-tenant", "test-role"

    Number of calls: 1

       96 |             const result = await service.getRole(adminUser, roleName);
       97 |
    >  98 |             expect(roleRepoMock.findByName).toHaveBeenCalledWith(roleName);
          |                                             ^
       99 |             expect(result).toEqual(roleEntity);
      100 |         });
      101 |

      at tests/unit/application/services/role.admin.service.spec.ts:98:45
      at fulfilled (tests/unit/application/services/role.admin.service.spec.ts:5:58)

  ΓùÅ RoleAdminService ΓÇ║ listRoles ΓÇ║ should list roles

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {}
    Received: "test-tenant", {}

    Number of calls: 1

      116 |             const result = await service.listRoles(adminUser, {});
      117 |
    > 118 |             expect(roleRepoMock.list).toHaveBeenCalledWith({});
          |                                       ^
      119 |             expect(result).toEqual(roles);
      120 |         });
      121 |     });

      at tests/unit/application/services/role.admin.service.spec.ts:118:39
      at fulfilled (tests/unit/application/services/role.admin.service.spec.ts:5:58)

  ΓùÅ RoleAdminService ΓÇ║ updateRole ΓÇ║ should update a role successfully

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "test-role", {"description": "Updated description"}
    Received: "test-tenant", "test-role", {"description": "Updated description"}

    Number of calls: 1

      129 |             const result = await service.updateRole(adminUser, roleName, updates);
      130 |
    > 131 |             expect(roleRepoMock.update).toHaveBeenCalledWith(roleName, updates);
          |                                         ^
      132 |             expect(result).toEqual(updatedRole);
      133 |         });
      134 |     });

      at tests/unit/application/services/role.admin.service.spec.ts:131:41
      at fulfilled (tests/unit/application/services/role.admin.service.spec.ts:5:58)

  ΓùÅ RoleAdminService ΓÇ║ deleteRole ΓÇ║ should delete a role and its assignments successfully

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "test-role"
    Received: "test-tenant", "test-role"

    Number of calls: 1

      141 |             await service.deleteRole(adminUser, roleName);
      142 |
    > 143 |             expect(roleRepoMock.delete).toHaveBeenCalledWith(roleName);
          |                                         ^
      144 |             expect(assignmentRepoMock.removeAllAssignmentsForRole).toHaveBeenCalledWith(roleName);
      145 |         });
      146 |

      at tests/unit/application/services/role.admin.service.spec.ts:143:41
      at fulfilled (tests/unit/application/services/role.admin.service.spec.ts:5:58)

  ΓùÅ RoleAdminService ΓÇ║ assignPermissionToRole ΓÇ║ should assign a permission to a role successfully

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "test-role", "test-permission"
    Received: "test-tenant", "test-role", "test-permission"

    Number of calls: 1

      172 |             await service.assignPermissionToRole(adminUser, roleName, permissionName);
      173 |
    > 174 |             expect(assignmentRepoMock.assignPermissionToRole).toHaveBeenCalledWith(roleName, permissionName);
          |                                                               ^
      175 |         });
      176 |
      177 |         it('should throw RoleNotFoundError if role does not exist', async () => {

      at tests/unit/application/services/role.admin.service.spec.ts:174:63
      at fulfilled (tests/unit/application/services/role.admin.service.spec.ts:5:58)

  ΓùÅ RoleAdminService ΓÇ║ removePermissionFromRole ΓÇ║ should remove a permission from a role successfully

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "test-role", "test-permission"
    Received: "test-tenant", "test-role", "test-permission"

    Number of calls: 1

      197 |             await service.removePermissionFromRole(adminUser, roleName, permissionName);
      198 |
    > 199 |             expect(assignmentRepoMock.removePermissionFromRole).toHaveBeenCalledWith(roleName, permissionName);
          |                                                                 ^
      200 |         });
      201 |
      202 |         it('should throw AssignmentError on failure', async () => {

      at tests/unit/application/services/role.admin.service.spec.ts:199:65
      at fulfilled (tests/unit/application/services/role.admin.service.spec.ts:5:58)

FAIL tests/unit/api/middlewares/jwtAuth.middleware.spec.ts
  ΓùÅ jwtAuthMiddleware ΓÇ║ should populate req.user and req.accessToken and call next() on successful validation

    expect(received).toEqual(expected) // deep equality

    - Expected  - 1
    + Received  + 0

    @@ -9,8 +9,7 @@
        },
        "id": "user123",
        "roles": Array [
          "users",
        ],
    -   "tenantId": "test-tenant",
        "username": "testuser",
      }

      89 |
      90 |         expect(jwtValidatorMock.validate).toHaveBeenCalledWith(validToken.split(' ')[1]);
    > 91 |         expect(req.user).toEqual({
         |                          ^
      92 |             id: 'user123', tenantId: 'test-tenant',
      93 |             username: 'testuser',
      94 |             roles: ['users'],

      at tests/unit/api/middlewares/jwtAuth.middleware.spec.ts:91:26
      at fulfilled (tests/unit/api/middlewares/jwtAuth.middleware.spec.ts:5:58)

FAIL tests/unit/infrastructure/adapters/policy-engine/DynamoDbPolicyEngineAdapter.spec.ts
  ΓùÅ DynamoDbPolicyEngineAdapter ΓÇ║ getPolicyDefinition ΓÇ║ should return policy definition if found

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "policy-id"
    Received: "test-tenant", "policy-id"

    Number of calls: 1

      73 |             const result = await adapter.getPolicyDefinition('test-tenant', policyId);
      74 |
    > 75 |             expect(policyRepositoryMock.findById).toHaveBeenCalledWith(policyId);
         |                                                   ^
      76 |             expect(result).toBe(mockPolicy.policyDefinition);
      77 |             expect(loggerMock.debug).toHaveBeenCalledWith(expect.stringContaining('Successfully retrieved policy definition'));
      78 |         });

      at tests/unit/infrastructure/adapters/policy-engine/DynamoDbPolicyEngineAdapter.spec.ts:75:51
      at fulfilled (tests/unit/infrastructure/adapters/policy-engine/DynamoDbPolicyEngineAdapter.spec.ts:5:58)

  ΓùÅ DynamoDbPolicyEngineAdapter ΓÇ║ getPolicyDefinition ΓÇ║ should return null if policy not found

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "policy-id"
    Received: "test-tenant", "policy-id"

    Number of calls: 1

      83 |             const result = await adapter.getPolicyDefinition('test-tenant', policyId);
      84 |
    > 85 |             expect(policyRepositoryMock.findById).toHaveBeenCalledWith(policyId);
         |                                                   ^
      86 |             expect(result).toBeNull();
      87 |             expect(loggerMock.warn).toHaveBeenCalledWith(expect.stringContaining('Policy definition not found'));
      88 |         });

      at tests/unit/infrastructure/adapters/policy-engine/DynamoDbPolicyEngineAdapter.spec.ts:85:51
      at fulfilled (tests/unit/infrastructure/adapters/policy-engine/DynamoDbPolicyEngineAdapter.spec.ts:5:58)

  ΓùÅ DynamoDbPolicyEngineAdapter ΓÇ║ deletePolicyDefinition ΓÇ║ should delete policy and log success

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "policy-id"
    Received: "test-tenant", "policy-id"

    Number of calls: 1

      106 |             await adapter.deletePolicyDefinition('test-tenant', policyId);
      107 |
    > 108 |             expect(policyRepositoryMock.delete).toHaveBeenCalledWith(policyId);
          |                                                 ^
      109 |             expect(loggerMock.info).toHaveBeenCalledWith(expect.stringContaining('Successfully deleted policy definition'));
      110 |         });
      111 |

      at tests/unit/infrastructure/adapters/policy-engine/DynamoDbPolicyEngineAdapter.spec.ts:108:49
      at fulfilled (tests/unit/infrastructure/adapters/policy-engine/DynamoDbPolicyEngineAdapter.spec.ts:5:58)

PASS tests/unit/api/middlewares/admin.auth.guard.middleware.spec.ts
PASS tests/integration/Persistence/DynamoPermissionRepository.integration.spec.ts
  ΓùÅ Console

    console.log
      Table TestPermissions cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestPermissions cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestPermissions cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestPermissions cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestPermissions cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestPermissions cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestPermissions cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestPermissions cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestPermissions cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

PASS tests/integration/Persistence/DynamoRoleRepository.integration.spec.ts
  ΓùÅ Console

    console.log
      Table TestRoles cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestRoles cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestRoles cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestRoles cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestRoles cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestRoles cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestRoles cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestRoles cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestRoles cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

PASS tests/unit/infrastructure/config/EnvironmentConfigService.spec.ts
PASS tests/integration/Persistence/DynamoPolicyRepository.integration.spec.ts
  ΓùÅ Console

    console.log
      Table TestPolicies cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestPolicies cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestPolicies cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestPolicies cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestPolicies cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestPolicies cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestPolicies cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestPolicies cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestPolicies cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestPolicies cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestPolicies cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestPolicies cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

PASS tests/unit/api/controllers/group.admin.controller.spec.ts
PASS tests/unit/infrastructure/persistence/dynamodb/dynamodb.client.spec.ts
PASS tests/unit/infrastructure/adapters/cognito/CognitoUserMgmtAdapter.spec.ts
PASS tests/integration/routes/system.routes.integration.spec.ts
  ΓùÅ Console

    console.info
      [WinstonLogger] Logger initialized with level "info" in "test" environment.

      at WinstonLogger.initializeLogger (src/infrastructure/logging/WinstonLogger.ts:68:17)
          at Array.map (<anonymous>)

    console.log
      {"level":"warn","message":"CORS_ORIGIN is set to \"*\" in a non-development environment. This is insecure!","metadata":{},"timestamp":"2026-02-23T10:47:16.937Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"CORS configured for origin: *","metadata":{},"timestamp":"2026-02-23T10:47:16.939Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"Application setup complete for environment: test","metadata":{},"timestamp":"2026-02-23T10:47:16.942Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/system/health","metadata":{"correlationId":"03695f02-8597-4b63-bb50-114aabf5ce9a","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"03695f02-8597-4b63-bb50-114aabf5ce9a","url":"/api/system/health","userId":"anonymous"},"timestamp":"2026-02-23T10:47:16.989Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"<-- GET /api/system/health 200 8.205ms","metadata":{"contentLength":"54","correlationId":"03695f02-8597-4b63-bb50-114aabf5ce9a","durationMs":8.205,"eventType":"finish","requestId":"03695f02-8597-4b63-bb50-114aabf5ce9a","statusCode":200,"userId":"anonymous"},"timestamp":"2026-02-23T10:47:16.998Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/system/server-info","metadata":{"correlationId":"3ac07582-cdf2-4cb5-a051-5f063c54ae52","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"3ac07582-cdf2-4cb5-a051-5f063c54ae52","url":"/api/system/server-info","userId":"anonymous"},"timestamp":"2026-02-23T10:47:17.031Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"<-- GET /api/system/server-info 200 7.344ms","metadata":{"contentLength":"148","correlationId":"3ac07582-cdf2-4cb5-a051-5f063c54ae52","durationMs":7.344,"eventType":"finish","requestId":"3ac07582-cdf2-4cb5-a051-5f063c54ae52","statusCode":200,"userId":"anonymous"},"timestamp":"2026-02-23T10:47:17.038Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/system/metrics","metadata":{"correlationId":"c1076e4e-9b22-477f-9463-1ac58dd40288","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"c1076e4e-9b22-477f-9463-1ac58dd40288","url":"/api/system/metrics","userId":"anonymous"},"timestamp":"2026-02-23T10:47:17.069Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"<-- GET /api/system/metrics 200 19.206ms","metadata":{"correlationId":"c1076e4e-9b22-477f-9463-1ac58dd40288","durationMs":19.206,"eventType":"finish","requestId":"c1076e4e-9b22-477f-9463-1ac58dd40288","statusCode":200,"userId":"anonymous"},"timestamp":"2026-02-23T10:47:17.088Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"--> GET /api/non-existent-route","metadata":{"correlationId":"8f2e9c8f-ff0b-4153-aab7-be848e4f414a","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"8f2e9c8f-ff0b-4153-aab7-be848e4f414a","url":"/api/non-existent-route","userId":"anonymous"},"timestamp":"2026-02-23T10:47:17.115Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"Route not found: GET /api/non-existent-route","metadata":{"requestId":"8f2e9c8f-ff0b-4153-aab7-be848e4f414a"},"timestamp":"2026-02-23T10:47:17.119Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"<-- GET /api/non-existent-route 404 9.632ms","metadata":{"contentLength":"170","correlationId":"8f2e9c8f-ff0b-4153-aab7-be848e4f414a","durationMs":9.632,"eventType":"finish","requestId":"8f2e9c8f-ff0b-4153-aab7-be848e4f414a","statusCode":404,"userId":"anonymous"},"timestamp":"2026-02-23T10:47:17.125Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

PASS tests/unit/infrastructure/resilience/applyResilience.spec.ts
PASS tests/unit/api/controllers/policy.admin.controller.spec.ts
PASS tests/unit/application/services/user.admin.service.spec.ts
  ΓùÅ Console

    console.warn
      Cognito user missing 'sub' attribute, using username as ID: test-user

      70 |         const finalUserId = userId ?? cognitoUser.Username ?? 'unknown-id';
      71 |         if (!userId && cognitoUser.Username) {
    > 72 |             console.warn(`Cognito user missing 'sub' attribute, using username as ID: ${cognitoUser.Username}`);
         |                     ^
      73 |         }
      74 |
      75 |         return new AdminUserView(

      at Function.fromCognitoUser (src/domain/entities/AdminUserView.ts:72:21)
      at UserAdminService.<anonymous> (src/application/services/user.admin.service.ts:68:34)
      at fulfilled (src/application/services/user.admin.service.ts:17:58)

    console.warn
      Cognito user missing 'sub' attribute, using username as ID: test-user

      70 |         const finalUserId = userId ?? cognitoUser.Username ?? 'unknown-id';
      71 |         if (!userId && cognitoUser.Username) {
    > 72 |             console.warn(`Cognito user missing 'sub' attribute, using username as ID: ${cognitoUser.Username}`);
         |                     ^
      73 |         }
      74 |
      75 |         return new AdminUserView(

      at Function.fromCognitoUser (src/domain/entities/AdminUserView.ts:72:21)
      at UserAdminService.<anonymous> (src/application/services/user.admin.service.ts:96:34)
      at fulfilled (src/application/services/user.admin.service.ts:17:58)

    console.warn
      Cognito user missing 'sub' attribute, using username as ID: user1

      70 |         const finalUserId = userId ?? cognitoUser.Username ?? 'unknown-id';
      71 |         if (!userId && cognitoUser.Username) {
    > 72 |             console.warn(`Cognito user missing 'sub' attribute, using username as ID: ${cognitoUser.Username}`);
         |                     ^
      73 |         }
      74 |
      75 |         return new AdminUserView(

      at Function.fromCognitoUser (src/domain/entities/AdminUserView.ts:72:21)
      at UserAdminService.<anonymous> (src/application/services/user.admin.service.ts:131:38)
      at fulfilled (src/application/services/user.admin.service.ts:17:58)

    console.warn
      Cognito user missing 'sub' attribute, using username as ID: user1

      70 |         const finalUserId = userId ?? cognitoUser.Username ?? 'unknown-id';
      71 |         if (!userId && cognitoUser.Username) {
    > 72 |             console.warn(`Cognito user missing 'sub' attribute, using username as ID: ${cognitoUser.Username}`);
         |                     ^
      73 |         }
      74 |
      75 |         return new AdminUserView(

      at Function.fromCognitoUser (src/domain/entities/AdminUserView.ts:72:21)
      at UserAdminService.<anonymous> (src/application/services/user.admin.service.ts:131:38)
      at fulfilled (src/application/services/user.admin.service.ts:17:58)

    console.warn
      Cognito user missing 'sub' attribute, using username as ID: user1

      70 |         const finalUserId = userId ?? cognitoUser.Username ?? 'unknown-id';
      71 |         if (!userId && cognitoUser.Username) {
    > 72 |             console.warn(`Cognito user missing 'sub' attribute, using username as ID: ${cognitoUser.Username}`);
         |                     ^
      73 |         }
      74 |
      75 |         return new AdminUserView(

      at Function.fromCognitoUser (src/domain/entities/AdminUserView.ts:72:21)
      at src/application/services/user.admin.service.ts:328:67
          at Array.map (<anonymous>)
      at UserAdminService.<anonymous> (src/application/services/user.admin.service.ts:328:44)
      at fulfilled (src/application/services/user.admin.service.ts:17:58)

PASS tests/unit/infrastructure/logging/WinstonLogger.spec.ts
  ΓùÅ Console

    console.info
      [WinstonLogger] Logger initialized with level "info" in "development" environment.

      at WinstonLogger.initializeLogger (src/infrastructure/logging/WinstonLogger.ts:68:17)

    console.info
      [WinstonLogger] Logger initialized with level "debug" in "development" environment.

      at WinstonLogger.initializeLogger (src/infrastructure/logging/WinstonLogger.ts:68:17)

    console.info
      [WinstonLogger] CloudWatch transport configured for group "test-log-group" and stream "test-log-stream"

      at WinstonLogger.initializeLogger (src/infrastructure/logging/WinstonLogger.ts:51:25)

    console.info
      [WinstonLogger] Logger initialized with level "info" in "production" environment.

      at WinstonLogger.initializeLogger (src/infrastructure/logging/WinstonLogger.ts:68:17)

    console.info
      [WinstonLogger] CloudWatch transport configured for group "test-log-group" and stream "test-log-stream"

      at WinstonLogger.initializeLogger (src/infrastructure/logging/WinstonLogger.ts:51:25)

    console.info
      [WinstonLogger] Elasticsearch transport configured for host "http://localhost:9200"

      at WinstonLogger.initializeLogger (src/infrastructure/logging/WinstonLogger.ts:64:25)

    console.info
      [WinstonLogger] Logger initialized with level "info" in "production" environment.

      at WinstonLogger.initializeLogger (src/infrastructure/logging/WinstonLogger.ts:68:17)

    console.info
      [WinstonLogger] Logger initialized with level "info" in "development" environment.

      at WinstonLogger.initializeLogger (src/infrastructure/logging/WinstonLogger.ts:68:17)

    console.info
      [WinstonLogger] Logger initialized with level "debug" in "development" environment.

      at WinstonLogger.initializeLogger (src/infrastructure/logging/WinstonLogger.ts:68:17)

    console.info
      [WinstonLogger] Logger initialized with level "debug" in "development" environment.

      at WinstonLogger.initializeLogger (src/infrastructure/logging/WinstonLogger.ts:68:17)

    console.info
      [WinstonLogger] Logger initialized with level "debug" in "development" environment.

      at WinstonLogger.initializeLogger (src/infrastructure/logging/WinstonLogger.ts:68:17)

    console.info
      [WinstonLogger] Logger initialized with level "debug" in "development" environment.

      at WinstonLogger.initializeLogger (src/infrastructure/logging/WinstonLogger.ts:68:17)

    console.info
      [WinstonLogger] Logger initialized with level "debug" in "development" environment.

      at WinstonLogger.initializeLogger (src/infrastructure/logging/WinstonLogger.ts:68:17)

    console.info
      [WinstonLogger] Logger initialized with level "debug" in "development" environment.

      at WinstonLogger.initializeLogger (src/infrastructure/logging/WinstonLogger.ts:68:17)

    console.info
      [WinstonLogger] Logger initialized with level "debug" in "development" environment.

      at WinstonLogger.initializeLogger (src/infrastructure/logging/WinstonLogger.ts:68:17)

    console.info
      [WinstonLogger] Logger initialized with level "debug" in "development" environment.

      at WinstonLogger.initializeLogger (src/infrastructure/logging/WinstonLogger.ts:68:17)

    console.info
      [WinstonLogger] Logger initialized with level "debug" in "development" environment.

      at WinstonLogger.initializeLogger (src/infrastructure/logging/WinstonLogger.ts:68:17)

PASS tests/unit/api/middlewares/validation.middleware.spec.ts
  ΓùÅ Console

    console.log
      Validation Middleware - req.body: { name: 'John Doe', age: 30 }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'name', 'age' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"name":"John Doe","age":30}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      Validation Middleware - req.body: { name: '', age: 17 }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'name', 'age' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"name":"","age":17}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      Validation Middleware - req.body: { name: 'Jane Doe', age: 25 }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'name', 'age' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"name":"Jane Doe","age":25}

      at src/api/middlewares/validation.middleware.ts:23:21

    console.log
      Validation Middleware - req.body: { name: 'test' }

      at src/api/middlewares/validation.middleware.ts:21:21

    console.log
      Validation Middleware - Object.keys(req.body): [ 'name' ]

      at src/api/middlewares/validation.middleware.ts:22:21

    console.log
      Validation Middleware - JSON.stringify(req.body): {"name":"test"}

      at src/api/middlewares/validation.middleware.ts:23:21

PASS tests/unit/api/middlewares/requestId.middleware.spec.ts
PASS tests/unit/api/middlewares/requestLogger.middleware.spec.ts
PASS tests/unit/api/middlewares/requestMetrics.middleware.spec.ts
PASS tests/unit/infrastructure/resilience/circuit-breaker.config.spec.ts
PASS tests/unit/api/middlewares/error.middleware.spec.ts
PASS tests/unit/infrastructure/monitoring/metrics.spec.ts
PASS tests/unit/api/controllers/user.admin.controller.spec.ts
PASS tests/integration/Adapter/CognitoUserMgmtAdapter.integration.spec.ts (7.434 s)
  ΓùÅ Console

    console.info
      [ConfigService] Reading configuration from process.env (expected to be populated by --env-file)

      at new EnvironmentConfigService (src/infrastructure/config/EnvironmentConfigService.ts:36:17)
          at Array.map (<anonymous>)

    console.debug
      [ConfigService] Configuration loaded (keys only): [
        'ALLUSERSPROFILE',
        'ANDROID_HOME',
        'ANTIGRAVITY_AGENT',
        'ANTIGRAVITY_CLI_ALIAS',
        'APPDATA',
        'AWS_ACCESS_KEY_ID',
        'AWS_REGION',
        'AWS_SECRET_ACCESS_KEY',
        'ChocolateyInstall',
        'ChocolateyLastPathUpdate',
        'CHROME_CRASHPAD_PIPE_NAME',
        'CLASSPATH',
        'COGNITO_CLIENT_ID',
        'COGNITO_ISSUER',
        'COGNITO_JWKS_URI',
        'COGNITO_USER_POOL_ID',
        'COLOR',
        'COLORTERM',
        'CommonProgramFiles',
        'CommonProgramFiles(x86)',
        'CommonProgramW6432',
        'COMPUTERNAME',
        'ComSpec',
        'DriverData',
        'EDITOR',
        'GIT_ASKPASS',
        'GRADLE_HOME',
        'HOME',
        'HOMEDRIVE',
        'HOMEPATH',
        'INIT_CWD',
        'INTEL_DEV_REDIST',
        'JAVA_HOME',
        'JEST_WORKER_ID',
        'LANG',
        'LOCALAPPDATA',
        'LOGONSERVER',
        'LOG_LEVEL',
        'MICROSOFT_WINDOWSAPPRUNTIME_BASE_DIRECTORY',
        'MIC_LD_LIBRARY_PATH',
        'NODE',
        'NODE_ENV',
        'NODE_PATH',
        'npm_command',
        'npm_config_cache',
        'npm_config_globalconfig',
        'npm_config_global_prefix',
        'npm_config_init_module',
        'npm_config_local_prefix',
        'npm_config_node_gyp',
        'npm_config_noproxy',
        'npm_config_npm_version',
        'npm_config_prefix',
        'npm_config_userconfig',
        'npm_config_user_agent',
        'npm_execpath',
        'npm_lifecycle_event',
        'npm_lifecycle_script',
        'npm_node_execpath',
        'npm_package_json',
        'npm_package_name',
        'npm_package_version',
        'NUMBER_OF_PROCESSORS',
        'NVM_HOME',
        'NVM_SYMLINK',
        'OneDrive',
        'OneDriveConsumer',
        'OS',
        'PAGER',
        'Path',
        'PATHEXT',
        'PNPM_HOME',
        'PORT',
        'POSH_INSTALLER',
        'POSH_THEMES_PATH',
        'POWERSHELL_DISTRIBUTION_CHANNEL',
        'PROCESSOR_ARCHITECTURE',
        'PROCESSOR_IDENTIFIER',
        'PROCESSOR_LEVEL',
        'PROCESSOR_REVISION',
        'ProgramData',
        'ProgramFiles',
        'ProgramFiles(x86)',
        'ProgramW6432',
        'PROMPT',
        'PSModulePath',
        'PUBLIC',
        'RUN_COGNITO_INTEGRATION_TESTS',
        'SystemDrive',
        'SystemRoot',
        'TEMP',
        'TERM_PROGRAM',
        'TERM_PROGRAM_VERSION',
        'TMP',
        'TS_JEST',
        'USERDOMAIN',
        'USERDOMAIN_ROAMINGPROFILE',
        'USERNAME',
        'USERPROFILE',
        'VSCODE_GIT_ASKPASS_EXTRA_ARGS',
        ... 8 more items
      ]

      at new EnvironmentConfigService (src/infrastructure/config/EnvironmentConfigService.ts:41:21)
          at Array.map (<anonymous>)

    console.info
      [ConfigService] Required configuration keys verified.

      at new EnvironmentConfigService (src/infrastructure/config/EnvironmentConfigService.ts:49:17)
          at Array.map (<anonymous>)

    console.info
      [WinstonLogger] Logger initialized with level "info" in "test" environment.

      at WinstonLogger.initializeLogger (src/infrastructure/logging/WinstonLogger.ts:68:17)
          at Array.map (<anonymous>)

    console.log
      {"level":"info","message":"CognitoUserMgmtAdapter initialized","metadata":{"region":"ap-south-1","userPoolId":"ap-south-1_7mqSevmEI"},"timestamp":"2026-02-23T10:47:16.919Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.warn
      Running Cognito integration tests against User Pool ID: ap-south-1_7mqSevmEI

      35 |                 throw new Error("Cognito adapter test running without TEST user pool ID configured. ABORTING.");
      36 |             }
    > 37 |             console.warn(`Running Cognito integration tests against User Pool ID: ${testPoolId}`);
         |                     ^
      38 |
      39 |             // Create shared resources
      40 |             const userDetails: AdminCreateUserDetails = {

      at tests/integration/Adapter/CognitoUserMgmtAdapter.integration.spec.ts:37:21
      at tests/integration/Adapter/CognitoUserMgmtAdapter.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/Adapter/CognitoUserMgmtAdapter.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/Adapter/CognitoUserMgmtAdapter.integration.spec.ts:28:26)

    console.log
      {"level":"info","message":"Admin successfully created user: primary-user-1771843636861","metadata":{},"timestamp":"2026-02-23T10:47:17.442Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"Admin successfully updated attributes for user: primary-user-1771843636861","metadata":{},"timestamp":"2026-02-23T10:47:17.625Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"Admin successfully created group: primary-group-1771843636861","metadata":{},"timestamp":"2026-02-23T10:47:17.844Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"CircuitBreaker (UnnamedService) failure detected.","metadata":{"error":{"message":"User account already exists","name":"UsernameExistsException","stack":"UsernameExistsException: User account already exists\n    at de_UsernameExistsExceptionRes (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@aws-sdk+client-cognito-identity-provider@3.879.0\\node_modules\\@aws-sdk\\client-cognito-identity-provider\\dist-cjs\\index.js:5124:21)\n    at de_CommandError (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@aws-sdk+client-cognito-identity-provider@3.879.0\\node_modules\\@aws-sdk\\client-cognito-identity-provider\\dist-cjs\\index.js:4616:19)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+middleware-serde@4.0.9\\node_modules\\@smithy\\middleware-serde\\dist-cjs\\index.js:36:20\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+core@3.9.0\\node_modules\\@smithy\\core\\dist-cjs\\index.js:193:18\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+middleware-retry@4.1.20\\node_modules\\@smithy\\middleware-retry\\dist-cjs\\index.js:320:38\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@aws-sdk+middleware-logger@3.876.0\\node_modules\\@aws-sdk\\middleware-logger\\dist-cjs\\index.js:33:22"}},"timestamp":"2026-02-23T10:47:18.419Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"CircuitBreaker (UnnamedService) opened. Service failing.","metadata":{},"timestamp":"2026-02-23T10:47:18.422Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Cognito Admin error during adminCreateUser","metadata":{"error":{"errorMessage":"User account already exists","errorName":"UsernameExistsException","stack":"UsernameExistsException: User account already exists\n    at de_UsernameExistsExceptionRes (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@aws-sdk+client-cognito-identity-provider@3.879.0\\node_modules\\@aws-sdk\\client-cognito-identity-provider\\dist-cjs\\index.js:5124:21)\n    at de_CommandError (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@aws-sdk+client-cognito-identity-provider@3.879.0\\node_modules\\@aws-sdk\\client-cognito-identity-provider\\dist-cjs\\index.js:4616:19)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+middleware-serde@4.0.9\\node_modules\\@smithy\\middleware-serde\\dist-cjs\\index.js:36:20\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+core@3.9.0\\node_modules\\@smithy\\core\\dist-cjs\\index.js:193:18\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+middleware-retry@4.1.20\\node_modules\\@smithy\\middleware-retry\\dist-cjs\\index.js:320:38\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@aws-sdk+middleware-logger@3.876.0\\node_modules\\@aws-sdk\\middleware-logger\\dist-cjs\\index.js:33:22"}},"timestamp":"2026-02-23T10:47:18.423Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)
          at Generator.throw (<anonymous>)

    console.log
      {"level":"error","message":"CircuitBreaker (UnnamedService) failure detected.","metadata":{"error":{"message":"User does not exist.","name":"UserNotFoundException","stack":"UserNotFoundException: User does not exist.\n    at de_UserNotFoundExceptionRes (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@aws-sdk+client-cognito-identity-provider@3.879.0\\node_modules\\@aws-sdk\\client-cognito-identity-provider\\dist-cjs\\index.js:5142:21)\n    at de_CommandError (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@aws-sdk+client-cognito-identity-provider@3.879.0\\node_modules\\@aws-sdk\\client-cognito-identity-provider\\dist-cjs\\index.js:4580:19)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+middleware-serde@4.0.9\\node_modules\\@smithy\\middleware-serde\\dist-cjs\\index.js:36:20\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+core@3.9.0\\node_modules\\@smithy\\core\\dist-cjs\\index.js:193:18\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+middleware-retry@4.1.20\\node_modules\\@smithy\\middleware-retry\\dist-cjs\\index.js:320:38\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@aws-sdk+middleware-logger@3.876.0\\node_modules\\@aws-sdk\\middleware-logger\\dist-cjs\\index.js:33:22"}},"timestamp":"2026-02-23T10:47:18.526Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"CircuitBreaker (UnnamedService) opened. Service failing.","metadata":{},"timestamp":"2026-02-23T10:47:18.527Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"CircuitBreaker (UnnamedService) failure detected.","metadata":{"error":{"message":"A group with the name already exists.","name":"GroupExistsException","stack":"GroupExistsException: A group with the name already exists.\n    at de_GroupExistsExceptionRes (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@aws-sdk+client-cognito-identity-provider@3.879.0\\node_modules\\@aws-sdk\\client-cognito-identity-provider\\dist-cjs\\index.js:4827:21)\n    at de_CommandError (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@aws-sdk+client-cognito-identity-provider@3.879.0\\node_modules\\@aws-sdk\\client-cognito-identity-provider\\dist-cjs\\index.js:4682:19)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+middleware-serde@4.0.9\\node_modules\\@smithy\\middleware-serde\\dist-cjs\\index.js:36:20\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+core@3.9.0\\node_modules\\@smithy\\core\\dist-cjs\\index.js:193:18\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+middleware-retry@4.1.20\\node_modules\\@smithy\\middleware-retry\\dist-cjs\\index.js:320:38\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@aws-sdk+middleware-logger@3.876.0\\node_modules\\@aws-sdk\\middleware-logger\\dist-cjs\\index.js:33:22"}},"timestamp":"2026-02-23T10:47:18.808Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"warn","message":"CircuitBreaker (UnnamedService) opened. Service failing.","metadata":{},"timestamp":"2026-02-23T10:47:18.809Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"error","message":"Cognito Admin error during adminCreateGroup","metadata":{"error":{"errorMessage":"A group with the name already exists.","errorName":"GroupExistsException","stack":"GroupExistsException: A group with the name already exists.\n    at de_GroupExistsExceptionRes (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@aws-sdk+client-cognito-identity-provider@3.879.0\\node_modules\\@aws-sdk\\client-cognito-identity-provider\\dist-cjs\\index.js:4827:21)\n    at de_CommandError (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@aws-sdk+client-cognito-identity-provider@3.879.0\\node_modules\\@aws-sdk\\client-cognito-identity-provider\\dist-cjs\\index.js:4682:19)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+middleware-serde@4.0.9\\node_modules\\@smithy\\middleware-serde\\dist-cjs\\index.js:36:20\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+core@3.9.0\\node_modules\\@smithy\\core\\dist-cjs\\index.js:193:18\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+middleware-retry@4.1.20\\node_modules\\@smithy\\middleware-retry\\dist-cjs\\index.js:320:38\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@aws-sdk+middleware-logger@3.876.0\\node_modules\\@aws-sdk\\middleware-logger\\dist-cjs\\index.js:33:22"}},"timestamp":"2026-02-23T10:47:18.810Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)
          at Generator.throw (<anonymous>)

    console.log
      {"level":"info","message":"Admin successfully added user primary-user-1771843636861 to group primary-group-1771843636861","metadata":{},"timestamp":"2026-02-23T10:47:19.030Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"Admin successfully removed user primary-user-1771843636861 from group primary-group-1771843636861","metadata":{},"timestamp":"2026-02-23T10:47:19.321Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"Admin successfully updated attributes for user: primary-user-1771843636861","metadata":{},"timestamp":"2026-02-23T10:47:19.616Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"Admin successfully disabled user: primary-user-1771843636861","metadata":{},"timestamp":"2026-02-23T10:47:19.886Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"Admin successfully enabled user: primary-user-1771843636861","metadata":{},"timestamp":"2026-02-23T10:47:20.116Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"Admin successfully set password for user: primary-user-1771843636861","metadata":{},"timestamp":"2026-02-23T10:47:20.451Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"Admin successfully added user primary-user-1771843636861 to group primary-group-1771843636861","metadata":{},"timestamp":"2026-02-23T10:47:20.861Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"Admin successfully removed user primary-user-1771843636861 from group primary-group-1771843636861","metadata":{},"timestamp":"2026-02-23T10:47:21.095Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Cleaning up all Cognito resources...

      at tests/integration/Adapter/CognitoUserMgmtAdapter.integration.spec.ts:61:17

    console.log
      {"level":"info","message":"Admin successfully removed user primary-user-1771843636861 from group primary-group-1771843636861","metadata":{},"timestamp":"2026-02-23T10:47:21.238Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"Admin successfully deleted user: primary-user-1771843636861","metadata":{},"timestamp":"2026-02-23T10:47:21.444Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Cleaned up user: primary-user-1771843636861

      at tests/integration/Adapter/CognitoUserMgmtAdapter.integration.spec.ts:78:25

    console.log
      {"level":"info","message":"Request to deactivate group: primary-group-1771843636861.","metadata":{},"timestamp":"2026-02-23T10:47:21.446Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      {"level":"info","message":"Admin successfully deactivated group: primary-group-1771843636861","metadata":{},"timestamp":"2026-02-23T10:47:21.644Z"}

      at Console.log (node_modules/.pnpm/winston@3.17.0/node_modules/winston/lib/winston/transports/console.js:87:23)

    console.log
      Cleaned up group: primary-group-1771843636861

      at tests/integration/Adapter/CognitoUserMgmtAdapter.integration.spec.ts:90:25

PASS tests/integration/Persistence/DynamoAssignmentRepository.integration.spec.ts (8.6 s)
  ΓùÅ Console

    console.log
      Table TestAssignments cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestAssignments cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestAssignments cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestAssignments cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestAssignments cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestAssignments cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestAssignments cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestAssignments cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestAssignments cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestAssignments cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestAssignments cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestAssignments cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestAssignments cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestAssignments cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestAssignments cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestAssignments cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestAssignments cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestAssignments cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13

    console.log
      Table TestAssignments cleared successfully.

      at tests/helpers/dynamodb.helper.ts:89:13


Summary of all failing tests
FAIL tests/integration/routes/user.admin.routes.integration.spec.ts (28.528 s)
  ΓùÅ Integration Tests: User Admin Routes (/api/admin/users) ΓÇ║ Authentication Guard ΓÇ║ should allow access with the correct test bypass token

    expected 200 "OK", got 500 "Internal Server Error"

      234 |                 .get('/api/admin/users')
      235 |                 .set('Authorization', TEST_ADMIN_TOKEN)
    > 236 |                 .expect(HttpStatusCode.OK); // 200
          |                  ^
      237 |         });
      238 |     });
      239 |     // --- POST Create User ---

      at tests/integration/routes/user.admin.routes.integration.spec.ts:236:18
      at tests/integration/routes/user.admin.routes.integration.spec.ts:9:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/user.admin.routes.integration.spec.ts:5:12)
      at Object.<anonymous> (tests/integration/routes/user.admin.routes.integration.spec.ts:231:81)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: User Admin Routes (/api/admin/users) ΓÇ║ POST /api/admin/users ΓÇ║ should return 400 Bad Request if validation fails

    expected 400 "Bad Request", got 201 "Created"

      275 |                 .set(MOCK_AUTH_HEADER)
      276 |                 .send(invalidPayload)
    > 277 |                 .expect(HttpStatusCode.BAD_REQUEST); // 400
          |                  ^
      278 |             expect(mockUserAdminService.createUser).not.toHaveBeenCalled();
      279 |         });
      280 |

      at tests/integration/routes/user.admin.routes.integration.spec.ts:277:18
      at tests/integration/routes/user.admin.routes.integration.spec.ts:9:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/user.admin.routes.integration.spec.ts:5:12)
      at Object.<anonymous> (tests/integration/routes/user.admin.routes.integration.spec.ts:271:76)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: User Admin Routes (/api/admin/users) ΓÇ║ GET /api/admin/users ΓÇ║ should return 200 OK with a list of users

    expected 200 "OK", got 500 "Internal Server Error"

      313 |                 .get('/api/admin/users')
      314 |                 .set(MOCK_AUTH_HEADER)
    > 315 |                 .expect(HttpStatusCode.OK); // 200
          |                  ^
      316 |             expect(mockUserAdminService.listUsers).toHaveBeenCalledTimes(1);
      317 |         });
      318 |

      at tests/integration/routes/user.admin.routes.integration.spec.ts:315:18
      at tests/integration/routes/user.admin.routes.integration.spec.ts:9:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/user.admin.routes.integration.spec.ts:5:12)
      at Object.<anonymous> (tests/integration/routes/user.admin.routes.integration.spec.ts:306:68)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: User Admin Routes (/api/admin/users) ΓÇ║ GET /api/admin/users ΓÇ║ should pass query parameters to the service

    expected 200 "OK", got 500 "Internal Server Error"

      323 |                 .query({ limit: 5, filter: 'status="Enabled"', paginationToken: 'prev' })
      324 |                 .set(MOCK_AUTH_HEADER)
    > 325 |                 .expect(HttpStatusCode.OK);
          |                  ^
      326 |             expect(mockUserAdminService.listUsers).toHaveBeenCalledWith(expect.anything(), { limit: 5, filter: 'status="Enabled"', paginationToken: 'prev' });
      327 |         });
      328 |

      at tests/integration/routes/user.admin.routes.integration.spec.ts:325:18
      at tests/integration/routes/user.admin.routes.integration.spec.ts:9:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/user.admin.routes.integration.spec.ts:5:12)
      at Object.<anonymous> (tests/integration/routes/user.admin.routes.integration.spec.ts:319:70)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: User Admin Routes (/api/admin/users) ΓÇ║ GET /api/admin/users ΓÇ║ should return 500 if the service fails unexpectedly

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 1
    Received number of calls: 0

      334 |                 .set(MOCK_AUTH_HEADER)
      335 |                 .expect(HttpStatusCode.INTERNAL_SERVER_ERROR); // 500
    > 336 |             expect(mockUserAdminService.listUsers).toHaveBeenCalledTimes(1);
          |                                                    ^
      337 |         });
      338 |     });
      339 |

      at tests/integration/routes/user.admin.routes.integration.spec.ts:336:52
      at fulfilled (tests/integration/routes/user.admin.routes.integration.spec.ts:6:58)

  ΓùÅ Integration Tests: User Admin Routes (/api/admin/users) ΓÇ║ User Group Management ΓÇ║ DELETE /api/admin/users/:username/groups/:groupName ΓÇ║ should return 204 No Content when removing user from group

    expected 204 "No Content", got 500 "Internal Server Error"

      658 |                     .delete(`/api/admin/users/${targetUsername}/groups/${testGroupName}`)
      659 |                     .set(MOCK_AUTH_HEADER)
    > 660 |                     .expect(HttpStatusCode.NO_CONTENT); // 204
          |                      ^
      661 |                 expect(mockUserAdminService.removeUserFromGroup).toHaveBeenCalledWith(expect.anything(), targetUsername, testGroupName);
      662 |             });
      663 |

      at tests/integration/routes/user.admin.routes.integration.spec.ts:660:22
      at tests/integration/routes/user.admin.routes.integration.spec.ts:9:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/user.admin.routes.integration.spec.ts:5:12)
      at Object.<anonymous> (tests/integration/routes/user.admin.routes.integration.spec.ts:655:89)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: User Admin Routes (/api/admin/users) ΓÇ║ User Group Management ΓÇ║ DELETE /api/admin/users/:username/groups/:groupName ΓÇ║ should return 404 if user/group not found (via service error)

    expected 404 "Not Found", got 500 "Internal Server Error"

      668 |                     .delete(`/api/admin/users/${targetUsername}/groups/${testGroupName}`)
      669 |                     .set(MOCK_AUTH_HEADER)
    > 670 |                     .expect(HttpStatusCode.NOT_FOUND); // 404
          |                      ^
      671 |                 expect(mockUserAdminService.removeUserFromGroup).toHaveBeenCalledTimes(1);
      672 |
      673 |

      at tests/integration/routes/user.admin.routes.integration.spec.ts:670:22
      at tests/integration/routes/user.admin.routes.integration.spec.ts:9:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/user.admin.routes.integration.spec.ts:5:12)
      at Object.<anonymous> (tests/integration/routes/user.admin.routes.integration.spec.ts:664:92)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

FAIL tests/e2e/group.admin.e2e.spec.ts (29.285 s)
  ΓùÅ Group Admin E2E ΓÇ║ should get the created group

    expected 200 "OK", got 500 "Internal Server Error"

      54 |             .get(`${BASE_API_PATH}/${groupName}`)
      55 |             .set('Authorization', `Bearer ${adminToken}`)
    > 56 |             .expect(200);
         |              ^
      57 |
      58 |         expect(response.body.groupName).toBe(groupName);
      59 |         expect(userMgmtAdapterMock.adminGetGroup).toHaveBeenCalledWith(groupName);

      at tests/e2e/group.admin.e2e.spec.ts:56:14
      at tests/e2e/group.admin.e2e.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/e2e/group.admin.e2e.spec.ts:4:12)
      at Object.<anonymous> (tests/e2e/group.admin.e2e.spec.ts:50:51)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Group Admin E2E ΓÇ║ should assign a role to the group

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "test-group-1771843630980", "test-role-for-group-1771843630980"
    Received: "unknown-tenant", "test-group-1771843630980", "test-role-for-group-1771843630980"

    Number of calls: 1

      71 |             .expect(200); // Changed from 204 to 200
      72 |         
    > 73 |         expect(assignmentRepositoryMock.assignRoleToGroup).toHaveBeenCalledWith(groupName, roleName);
         |                                                            ^
      74 |     });
      75 |
      76 |     it('should list the roles for the group', async () => {

      at tests/e2e/group.admin.e2e.spec.ts:73:60
      at fulfilled (tests/e2e/group.admin.e2e.spec.ts:5:58)

  ΓùÅ Group Admin E2E ΓÇ║ should list the roles for the group

    expected 200 "OK", got 500 "Internal Server Error"

      81 |             .get(`${BASE_API_PATH}/${groupName}/roles`)
      82 |             .set('Authorization', `Bearer ${adminToken}`)
    > 83 |             .expect(200);
         |              ^
      84 |
      85 |         expect(response.body.roles).toContain(roleName); // Changed to response.body.roles
      86 |         expect(assignmentRepositoryMock.findRolesByGroupName).toHaveBeenCalledWith(groupName);

      at tests/e2e/group.admin.e2e.spec.ts:83:14
      at tests/e2e/group.admin.e2e.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/e2e/group.admin.e2e.spec.ts:4:12)
      at Object.<anonymous> (tests/e2e/group.admin.e2e.spec.ts:76:58)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Group Admin E2E ΓÇ║ should remove the role from the group

    expected 204 "No Content", got 500 "Internal Server Error"

      93 |             .delete(`${BASE_API_PATH}/${groupName}/roles/${roleName}`)
      94 |             .set('Authorization', `Bearer ${adminToken}`)
    > 95 |             .expect(204);
         |              ^
      96 |         
      97 |         expect(assignmentRepositoryMock.removeRoleFromGroup).toHaveBeenCalledWith(groupName, roleName);
      98 |     });

      at tests/e2e/group.admin.e2e.spec.ts:95:14
      at tests/e2e/group.admin.e2e.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/e2e/group.admin.e2e.spec.ts:4:12)
      at Object.<anonymous> (tests/e2e/group.admin.e2e.spec.ts:89:60)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Group Admin E2E ΓÇ║ should delete the group

    expected 204 "No Content", got 500 "Internal Server Error"

      104 |             .delete(`${BASE_API_PATH}/${groupName}`)
      105 |             .set('Authorization', `Bearer ${adminToken}`)
    > 106 |             .expect(204);
          |              ^
      107 |         
      108 |         expect(userMgmtAdapterMock.adminDeleteGroup).toHaveBeenCalledWith(groupName);
      109 |     });

      at tests/e2e/group.admin.e2e.spec.ts:106:14
      at tests/e2e/group.admin.e2e.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/e2e/group.admin.e2e.spec.ts:4:12)
      at Object.<anonymous> (tests/e2e/group.admin.e2e.spec.ts:100:46)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

FAIL tests/e2e/user.admin.e2e.spec.ts (29.351 s)
  ΓùÅ User Admin E2E ΓÇ║ should create a new user

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    - Expected
    + Received

      Object {
    +   "body": Object {
          "temporaryPassword": "Password123!",
          "userAttributes": Object {
            "email": "test-user-1771843631008@example.com",
            "name": "Test User",
          },
          "username": "test-user-1771843631008",
    +   },
      },

    Number of calls: 1

      53 |         expect(response.status).toBe(201); // Added explicit status check
      54 |         expect(response.body.username).toBe(username);
    > 55 |         expect(userMgmtAdapterMock.adminCreateUser).toHaveBeenCalledWith(userDetails);
         |                                                     ^
      56 |     });
      57 |
      58 |     it('should get the created user', async () => {

      at tests/e2e/user.admin.e2e.spec.ts:55:53
      at fulfilled (tests/e2e/user.admin.e2e.spec.ts:5:58)

  ΓùÅ User Admin E2E ΓÇ║ should update the user attributes

    expected 204 "No Content", got 404 "Not Found"

      81 |             .set('Authorization', `Bearer ${adminToken}`)
      82 |             .send(attributesToUpdate)
    > 83 |             .expect(204);
         |              ^
      84 |         
      85 |         expect(userMgmtAdapterMock.adminUpdateUserAttributes).toHaveBeenCalledWith({ username, ...attributesToUpdate });
      86 |     });

      at tests/e2e/user.admin.e2e.spec.ts:83:14
      at tests/e2e/user.admin.e2e.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/e2e/user.admin.e2e.spec.ts:4:12)
      at Object.<anonymous> (tests/e2e/user.admin.e2e.spec.ts:71:56)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ User Admin E2E ΓÇ║ should add a user to a group

    expected 204 "No Content", got 200 "OK"

       96 |             .set('Authorization', `Bearer ${adminToken}`)
       97 |             .send({ groupName })
    >  98 |             .expect(204);
          |              ^
       99 |         
      100 |         expect(userMgmtAdapterMock.adminAddUserToGroup).toHaveBeenCalledWith(username, groupName);
      101 |     });

      at tests/e2e/user.admin.e2e.spec.ts:98:14
      at tests/e2e/user.admin.e2e.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/e2e/user.admin.e2e.spec.ts:4:12)
      at Object.<anonymous> (tests/e2e/user.admin.e2e.spec.ts:91:51)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ User Admin E2E ΓÇ║ should remove the user from the group

    expected 204 "No Content", got 500 "Internal Server Error"

      120 |             .delete(`${BASE_API_PATH}/${username}/groups/${groupName}`)
      121 |             .set('Authorization', `Bearer ${adminToken}`)
    > 122 |             .expect(204);
          |              ^
      123 |         
      124 |         expect(userMgmtAdapterMock.adminRemoveUserFromGroup).toHaveBeenCalledWith(username, groupName);
      125 |     });

      at tests/e2e/user.admin.e2e.spec.ts:122:14
      at tests/e2e/user.admin.e2e.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/e2e/user.admin.e2e.spec.ts:4:12)
      at Object.<anonymous> (tests/e2e/user.admin.e2e.spec.ts:116:60)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ User Admin E2E ΓÇ║ should disable the user

    expected 204 "No Content", got 404 "Not Found"

      131 |             .post(`${BASE_API_PATH}/${username}/disable`)
      132 |             .set('Authorization', `Bearer ${adminToken}`)
    > 133 |             .expect(204);
          |              ^
      134 |         
      135 |         expect(userMgmtAdapterMock.adminDisableUser).toHaveBeenCalledWith(username);
      136 |     });

      at tests/e2e/user.admin.e2e.spec.ts:133:14
      at tests/e2e/user.admin.e2e.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/e2e/user.admin.e2e.spec.ts:4:12)
      at Object.<anonymous> (tests/e2e/user.admin.e2e.spec.ts:127:46)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ User Admin E2E ΓÇ║ should enable the user

    expected 204 "No Content", got 404 "Not Found"

      142 |             .post(`${BASE_API_PATH}/${username}/enable`)
      143 |             .set('Authorization', `Bearer ${adminToken}`)
    > 144 |             .expect(204);
          |              ^
      145 |         
      146 |         expect(userMgmtAdapterMock.adminEnableUser).toHaveBeenCalledWith(username);
      147 |     });

      at tests/e2e/user.admin.e2e.spec.ts:144:14
      at tests/e2e/user.admin.e2e.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/e2e/user.admin.e2e.spec.ts:4:12)
      at Object.<anonymous> (tests/e2e/user.admin.e2e.spec.ts:138:45)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

FAIL tests/unit/application/services/policy.admin.service.spec.ts
  ΓùÅ PolicyAdminService ΓÇ║ getPolicy ΓÇ║ should return a policy if found

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "policy-id-123"
    Received: "test-tenant", "policy-id-123"

    Number of calls: 1

      52 |             const result = await service.getPolicy(adminUser, policyId);
      53 |
    > 54 |             expect(policyRepositoryMock.findById).toHaveBeenCalledWith(policyId);
         |                                                   ^
      55 |             expect(result).toEqual(policyEntity);
      56 |         });
      57 |

      at tests/unit/application/services/policy.admin.service.spec.ts:54:51
      at fulfilled (tests/unit/application/services/policy.admin.service.spec.ts:5:58)

  ΓùÅ PolicyAdminService ΓÇ║ updatePolicy ΓÇ║ should update a policy successfully, incrementing the version

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "policy-id-123"
    Received: "test-tenant", "policy-id-123"

    Number of calls: 1

      73 |             const result = await service.updatePolicy(adminUser, policyId, updateDetails);
      74 |
    > 75 |             expect(policyRepositoryMock.findById).toHaveBeenCalledWith(policyId);
         |                                                   ^
      76 |             expect(policyRepositoryMock.save).toHaveBeenCalledWith(expect.objectContaining({
      77 |                 version: policyEntity.version + 1,
      78 |                 policyName: 'Updated Policy'

      at tests/unit/application/services/policy.admin.service.spec.ts:75:51
      at fulfilled (tests/unit/application/services/policy.admin.service.spec.ts:5:58)

  ΓùÅ PolicyAdminService ΓÇ║ deletePolicy ΓÇ║ should delete a policy successfully

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "policy-id-123"
    Received: "test-tenant", "policy-id-123"

    Number of calls: 1

       95 |             await service.deletePolicy(adminUser, policyId);
       96 |
    >  97 |             expect(policyRepositoryMock.delete).toHaveBeenCalledWith(policyId);
          |                                                 ^
       98 |             expect(loggerMock.info).toHaveBeenCalledWith(expect.stringContaining('DELETE_POLICY'), expect.any(Object));
       99 |         });
      100 |     });

      at tests/unit/application/services/policy.admin.service.spec.ts:97:49
      at fulfilled (tests/unit/application/services/policy.admin.service.spec.ts:5:58)

  ΓùÅ PolicyAdminService ΓÇ║ listPolicies ΓÇ║ should list policies

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {}
    Received: "test-tenant", {}

    Number of calls: 1

      107 |             const result = await service.listPolicies(adminUser, {});
      108 |
    > 109 |             expect(policyRepositoryMock.list).toHaveBeenCalledWith({});
          |                                               ^
      110 |             expect(result).toEqual(policies);
      111 |         });
      112 |     });

      at tests/unit/application/services/policy.admin.service.spec.ts:109:47
      at fulfilled (tests/unit/application/services/policy.admin.service.spec.ts:5:58)

  ΓùÅ PolicyAdminService ΓÇ║ getPolicyVersion ΓÇ║ should retrieve a specific version of a policy

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "policy-id-123", 1
    Received: "test-tenant", "policy-id-123", 1

    Number of calls: 1

      118 |             const result = await service.getPolicyVersion(adminUser, policyId, 1);
      119 |
    > 120 |             expect(policyRepositoryMock.getPolicyVersion).toHaveBeenCalledWith(policyId, 1);
          |                                                           ^
      121 |             expect(result).toEqual(policyEntity);
      122 |         });
      123 |

      at tests/unit/application/services/policy.admin.service.spec.ts:120:59
      at fulfilled (tests/unit/application/services/policy.admin.service.spec.ts:5:58)

  ΓùÅ PolicyAdminService ΓÇ║ listPolicyVersions ΓÇ║ should list all policy versions

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "policy-id-123"
    Received: "test-tenant", "policy-id-123"

    Number of calls: 1

      138 |             const result = await service.listPolicyVersions(adminUser, policyId);
      139 |
    > 140 |             expect(policyRepositoryMock.listPolicyVersions).toHaveBeenCalledWith(policyId);
          |                                                             ^
      141 |             expect(result).toEqual(versions);
      142 |         });
      143 |     });

      at tests/unit/application/services/policy.admin.service.spec.ts:140:61
      at fulfilled (tests/unit/application/services/policy.admin.service.spec.ts:5:58)

  ΓùÅ PolicyAdminService ΓÇ║ rollbackPolicy ΓÇ║ should rollback a policy to a specific version

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "policy-id-123", 1
    Received: "test-tenant", "policy-id-123", 1

    Number of calls: 1

      152 |             const result = await service.rollbackPolicy(adminUser, policyId, 1);
      153 |
    > 154 |             expect(policyRepositoryMock.getPolicyVersion).toHaveBeenCalledWith(policyId, 1);
          |                                                           ^
      155 |             expect(policyRepositoryMock.save).toHaveBeenCalledWith(expect.objectContaining({
      156 |                 id: 'new-policy-id',
      157 |                 version: 1

      at tests/unit/application/services/policy.admin.service.spec.ts:154:59
      at fulfilled (tests/unit/application/services/policy.admin.service.spec.ts:5:58)

FAIL tests/integration/routes/permission.admin.routes.integration.spec.ts (30.256 s)
  ΓùÅ Integration Tests: Permission Admin Routes (/api/admin/permissions) ΓÇ║ POST /api/admin/permissions ΓÇ║ should return 400 on validation error (e.g., missing permissionName)

    expect(received).toEqual(expected) // deep equality

    - Expected  - 1
    + Received  + 1

      Object {
    -   "body.permissionName": "Permission name is required",
    +   "permissionName": "Permission name is required",
      }

      128 |              expect(response.status).toBe(400);
      129 |              expect(response.body.name).toBe('ValidationError');
    > 130 |              expect(response.body.details).toEqual({'body.permissionName': 'Permission name is required'});
          |                                            ^
      131 |              expect(mockPermissionAdminService.createPermission).not.toHaveBeenCalled();
      132 |         });
      133 |

      at tests/integration/routes/permission.admin.routes.integration.spec.ts:130:44
      at fulfilled (tests/integration/routes/permission.admin.routes.integration.spec.ts:6:58)

  ΓùÅ Integration Tests: Permission Admin Routes (/api/admin/permissions) ΓÇ║ GET /api/admin/permissions/:permissionName ΓÇ║ should return 200 and the permission if found

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

      166 |                  .set('Authorization', TEST_ADMIN_TOKEN);
      167 |
    > 168 |              expect(response.status).toBe(200);
          |                                      ^
      169 |              expect(response.body.permissionName).toBe(permName);
      170 |              expect(mockPermissionAdminService.getPermission).toHaveBeenCalledWith(
      171 |                  expect.objectContaining({ id: 'test-admin-id-123' }),

      at tests/integration/routes/permission.admin.routes.integration.spec.ts:168:38
      at fulfilled (tests/integration/routes/permission.admin.routes.integration.spec.ts:6:58)

  ΓùÅ Integration Tests: Permission Admin Routes (/api/admin/permissions) ΓÇ║ GET /api/admin/permissions/:permissionName ΓÇ║ should return 404 if permission not found

    expect(received).toBe(expected) // Object.is equality

    Expected: 404
    Received: 500

      180 |                  .set('Authorization', TEST_ADMIN_TOKEN);
      181 |
    > 182 |              expect(response.status).toBe(404);
          |                                      ^
      183 |              // Check based on controller's response or NotFoundError handling in middleware
      184 |              expect(response.body.message).toContain('not found');
      185 |          });

      at tests/integration/routes/permission.admin.routes.integration.spec.ts:182:38
      at fulfilled (tests/integration/routes/permission.admin.routes.integration.spec.ts:6:58)

  ΓùÅ Integration Tests: Permission Admin Routes (/api/admin/permissions) ΓÇ║ DELETE /api/admin/permissions/:permissionName ΓÇ║ should return 204 on successful deletion

    expect(received).toBe(expected) // Object.is equality

    Expected: 204
    Received: 500

      275 |                  .set('Authorization', TEST_ADMIN_TOKEN);
      276 |
    > 277 |              expect(response.status).toBe(204);
          |                                      ^
      278 |              expect(mockPermissionAdminService.deletePermission).toHaveBeenCalledWith(
      279 |                  expect.objectContaining({ id: 'test-admin-id-123' }),
      280 |                  permName

      at tests/integration/routes/permission.admin.routes.integration.spec.ts:277:38
      at fulfilled (tests/integration/routes/permission.admin.routes.integration.spec.ts:6:58)

  ΓùÅ Integration Tests: Permission Admin Routes (/api/admin/permissions) ΓÇ║ DELETE /api/admin/permissions/:permissionName ΓÇ║ should return 404 if permission not found for deletion

    expect(received).toBe(expected) // Object.is equality

    Expected: 404
    Received: 500

      289 |                  .delete(`${BASE_API_PATH}/${permName}`)
      290 |                  .set('Authorization', TEST_ADMIN_TOKEN);
    > 291 |              expect(response.status).toBe(404);
          |                                      ^
      292 |          });
      293 |
      294 |          it('should return 401 if token is invalid/missing', async () => {

      at tests/integration/routes/permission.admin.routes.integration.spec.ts:291:38
      at fulfilled (tests/integration/routes/permission.admin.routes.integration.spec.ts:6:58)

  ΓùÅ Integration Tests: Permission Admin Routes (/api/admin/permissions) ΓÇ║ GET /api/admin/permissions/:permissionName/roles ΓÇ║ should return 200 and list of role names

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 500

      309 |                  .set('Authorization', TEST_ADMIN_TOKEN);
      310 |
    > 311 |              expect(response.status).toBe(200);
          |                                      ^
      312 |              expect(response.body).toEqual({ roles });
      313 |              expect(mockPermissionAdminService.listRolesForPermission).toHaveBeenCalledWith(
      314 |                  expect.objectContaining({ id: 'test-admin-id-123' }),

      at tests/integration/routes/permission.admin.routes.integration.spec.ts:311:38
      at fulfilled (tests/integration/routes/permission.admin.routes.integration.spec.ts:6:58)

  ΓùÅ Integration Tests: Permission Admin Routes (/api/admin/permissions) ΓÇ║ GET /api/admin/permissions/:permissionName/roles ΓÇ║ should return 404 if permission is not found

    expect(received).toBe(expected) // Object.is equality

    Expected: 404
    Received: 500

      324 |                  .get(`${BASE_API_PATH}/${permName}/roles`)
      325 |                  .set('Authorization', TEST_ADMIN_TOKEN);
    > 326 |              expect(response.status).toBe(404);
          |                                      ^
      327 |         });
      328 |          it('should return 401 if token is invalid/missing', async () => {
      329 |              const response = await request(app).get(`${BASE_API_PATH}/${permName}/roles`);

      at tests/integration/routes/permission.admin.routes.integration.spec.ts:326:38
      at fulfilled (tests/integration/routes/permission.admin.routes.integration.spec.ts:6:58)

FAIL tests/integration/routes/role.admin.routes.integration.spec.ts (30.364 s)
  ΓùÅ Integration Tests: Role Admin Routes (/api/admin/roles) ΓÇ║ GET /api/admin/roles/:roleName ΓÇ║ should return 200 OK with role data if role exists

    expected 200 "OK", got 500 "Internal Server Error"

      142 |                 .get(`${BASE_API_PATH}/${targetRoleName}`)
      143 |                 .set(MOCK_AUTH_HEADER)
    > 144 |                 .expect(HttpStatusCode.OK) // 200
          |                  ^
      145 |                 .expect(res => {
      146 |                     expect(res.body.roleName).toBe(targetRoleName);
      147 |                     expect(res.body.description).toBe('get role');

      at tests/integration/routes/role.admin.routes.integration.spec.ts:144:18
      at tests/integration/routes/role.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/role.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/role.admin.routes.integration.spec.ts:139:77)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Role Admin Routes (/api/admin/roles) ΓÇ║ GET /api/admin/roles/:roleName ΓÇ║ should return 404 Not Found if service returns null

    expected 404 "Not Found", got 500 "Internal Server Error"

      155 |                 .get(`${BASE_API_PATH}/${targetRoleName}`)
      156 |                 .set(MOCK_AUTH_HEADER)
    > 157 |                 .expect(HttpStatusCode.NOT_FOUND); // 404
          |                  ^
      158 |             expect(mockRoleAdminService.getRole).toHaveBeenCalledWith(expect.anything(), targetRoleName);
      159 |         });
      160 |

      at tests/integration/routes/role.admin.routes.integration.spec.ts:157:18
      at tests/integration/routes/role.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/role.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/role.admin.routes.integration.spec.ts:152:78)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Role Admin Routes (/api/admin/roles) ΓÇ║ DELETE /api/admin/roles/:roleName ΓÇ║ should return 204 No Content if service succeeds

    expected 204 "No Content", got 500 "Internal Server Error"

      215 |                 .delete(`${BASE_API_PATH}/${targetRoleName}`)
      216 |                 .set(MOCK_AUTH_HEADER)
    > 217 |                 .expect(HttpStatusCode.NO_CONTENT); // 204
          |                  ^
      218 |             expect(mockRoleAdminService.deleteRole).toHaveBeenCalledWith(expect.anything(), targetRoleName);
      219 |         });
      220 |

      at tests/integration/routes/role.admin.routes.integration.spec.ts:217:18
      at tests/integration/routes/role.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/role.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/role.admin.routes.integration.spec.ts:212:75)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Role Admin Routes (/api/admin/roles) ΓÇ║ DELETE /api/admin/roles/:roleName ΓÇ║ should return 404 Not Found if service throws RoleNotFoundError

    expected 404 "Not Found", got 500 "Internal Server Error"

      226 |                 .delete(`${BASE_API_PATH}/${targetRoleName}`)
      227 |                 .set(MOCK_AUTH_HEADER)
    > 228 |                 .expect(HttpStatusCode.NOT_FOUND); // 404
          |                  ^
      229 |             expect(mockRoleAdminService.deleteRole).toHaveBeenCalledWith(expect.anything(), targetRoleName);
      230 |         });
      231 |

      at tests/integration/routes/role.admin.routes.integration.spec.ts:228:18
      at tests/integration/routes/role.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/role.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/role.admin.routes.integration.spec.ts:221:90)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Role Admin Routes (/api/admin/roles) ΓÇ║ Permissions Management (/api/admin/roles/:roleName/permissions) ΓÇ║ DELETE /:roleName/permissions/:permissionName ΓÇ║ should return 204 No Content on successful removal

    expected 204 "No Content", got 500 "Internal Server Error"

      260 |                     .delete(`${BASE_API_PATH}/${targetRoleName}/permissions/${targetPermissionName}`)
      261 |                     .set(MOCK_AUTH_HEADER)
    > 262 |                     .expect(HttpStatusCode.NO_CONTENT); // 204
          |                      ^
      263 |                 expect(mockRoleAdminService.removePermissionFromRole).toHaveBeenCalledWith(expect.anything(), targetRoleName, targetPermissionName);
      264 |             });
      265 |         });

      at tests/integration/routes/role.admin.routes.integration.spec.ts:262:22
      at tests/integration/routes/role.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/role.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/role.admin.routes.integration.spec.ts:257:81)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Role Admin Routes (/api/admin/roles) ΓÇ║ Permissions Management (/api/admin/roles/:roleName/permissions) ΓÇ║ GET /:roleName/permissions ΓÇ║ should return 200 OK with a list of permission names

    expected 200 "OK", got 500 "Internal Server Error"

      272 |                     .get(`${BASE_API_PATH}/${targetRoleName}/permissions`)
      273 |                     .set(MOCK_AUTH_HEADER)
    > 274 |                     .expect(HttpStatusCode.OK) // 200
          |                      ^
      275 |                     .expect(res => {
      276 |                         expect(res.body.permissions).toEqual(mockPermissions);
      277 |                     });

      at tests/integration/routes/role.admin.routes.integration.spec.ts:274:22
      at tests/integration/routes/role.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/role.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/role.admin.routes.integration.spec.ts:268:83)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

FAIL tests/integration/routes/group.admin.routes.integration.spec.ts (30.384 s)
  ΓùÅ Integration Tests: Group Admin Routes (/api/admin/groups) ΓÇ║ GET /api/admin/groups/:groupName ΓÇ║ should return 200 OK with group data if group exists

    expected 200 "OK", got 500 "Internal Server Error"

      210 |                 .get(`${BASE_API_PATH}/${targetgroupName}`)
      211 |                 .set(MOCK_AUTH_HEADER)
    > 212 |                 .expect(HttpStatusCode.OK); // 200
          |                  ^
      213 |             expect(mockGroupAdminService.getGroup).toHaveBeenCalledWith(expect.anything(), targetgroupName);
      214 |         });
      215 |

      at tests/integration/routes/group.admin.routes.integration.spec.ts:212:18
      at tests/integration/routes/group.admin.routes.integration.spec.ts:9:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/group.admin.routes.integration.spec.ts:5:12)
      at Object.<anonymous> (tests/integration/routes/group.admin.routes.integration.spec.ts:207:79)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Group Admin Routes (/api/admin/groups) ΓÇ║ GET /api/admin/groups/:groupName ΓÇ║ should return 404 Not Found if service returns null

    expected 404 "Not Found", got 500 "Internal Server Error"

      219 |                 .get(`${BASE_API_PATH}/${targetgroupName}`)
      220 |                 .set(MOCK_AUTH_HEADER)
    > 221 |                 .expect(HttpStatusCode.NOT_FOUND); // 404 (Handled by controller)
          |                  ^
      222 |             expect(mockGroupAdminService.getGroup).toHaveBeenCalledWith(expect.anything(), targetgroupName);
      223 |         });
      224 |

      at tests/integration/routes/group.admin.routes.integration.spec.ts:221:18
      at tests/integration/routes/group.admin.routes.integration.spec.ts:9:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/group.admin.routes.integration.spec.ts:5:12)
      at Object.<anonymous> (tests/integration/routes/group.admin.routes.integration.spec.ts:216:78)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Group Admin Routes (/api/admin/groups) ΓÇ║ GET /api/admin/groups/:groupName ΓÇ║ should return 404 Not Found if service throws NotFoundError

    expected 404 "Not Found", got 500 "Internal Server Error"

      230 |                 .get(`${BASE_API_PATH}/${targetgroupName}`)
      231 |                 .set(MOCK_AUTH_HEADER)
    > 232 |                 .expect(HttpStatusCode.NOT_FOUND); // 404 (Handled by error middleware)
          |                  ^
      233 |             expect(mockGroupAdminService.getGroup).toHaveBeenCalledWith(expect.anything(), targetgroupName);
      234 |         });
      235 |

      at tests/integration/routes/group.admin.routes.integration.spec.ts:232:18
      at tests/integration/routes/group.admin.routes.integration.spec.ts:9:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/group.admin.routes.integration.spec.ts:5:12)
      at Object.<anonymous> (tests/integration/routes/group.admin.routes.integration.spec.ts:225:86)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Group Admin Routes (/api/admin/groups) ΓÇ║ GET /api/admin/groups/:groupName ΓÇ║ should return 400 Bad Request if groupName param is invalid

    expected 400 "Bad Request", got 500 "Internal Server Error"

      239 |                 .get(`${BASE_API_PATH}/${encodeURIComponent(invalidgroupName)}`) // URL encode it
      240 |                 .set(MOCK_AUTH_HEADER)
    > 241 |                 .expect(HttpStatusCode.BAD_REQUEST); // 400 (Handled by validation middleware)
          |                  ^
      242 |             expect(mockGroupAdminService.getGroup).not.toHaveBeenCalled();
      243 |         });
      244 |

      at tests/integration/routes/group.admin.routes.integration.spec.ts:241:18
      at tests/integration/routes/group.admin.routes.integration.spec.ts:9:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/group.admin.routes.integration.spec.ts:5:12)
      at Object.<anonymous> (tests/integration/routes/group.admin.routes.integration.spec.ts:236:86)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Group Admin Routes (/api/admin/groups) ΓÇ║ GET /api/admin/groups/:groupName ΓÇ║ should return 500 if the service fails unexpectedly

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: Anything, "Get-Group-Test"

    Number of calls: 0

      250 |                 .set(MOCK_AUTH_HEADER)
      251 |                 .expect(HttpStatusCode.INTERNAL_SERVER_ERROR); // 500
    > 252 |             expect(mockGroupAdminService.getGroup).toHaveBeenCalledWith(expect.anything(), targetgroupName);
          |                                                    ^
      253 |         });
      254 |
      255 |         it('should return 401 Unauthorized if token is missing', async () => {

      at tests/integration/routes/group.admin.routes.integration.spec.ts:252:52
      at fulfilled (tests/integration/routes/group.admin.routes.integration.spec.ts:6:58)

  ΓùÅ Integration Tests: Group Admin Routes (/api/admin/groups) ΓÇ║ DELETE /api/admin/groups/:groupName ΓÇ║ should return 204 No Content if service succeeds

    expected 204 "No Content", got 500 "Internal Server Error"

      269 |                 .delete(`${BASE_API_PATH}/${targetgroupName}`)
      270 |                 .set(MOCK_AUTH_HEADER)
    > 271 |                 .expect(HttpStatusCode.NO_CONTENT); // 204
          |                  ^
      272 |             expect(mockGroupAdminService.deleteGroup).toHaveBeenCalledWith(expect.anything(), targetgroupName);
      273 |         });
      274 |

      at tests/integration/routes/group.admin.routes.integration.spec.ts:271:18
      at tests/integration/routes/group.admin.routes.integration.spec.ts:9:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/group.admin.routes.integration.spec.ts:5:12)
      at Object.<anonymous> (tests/integration/routes/group.admin.routes.integration.spec.ts:266:75)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Group Admin Routes (/api/admin/groups) ΓÇ║ DELETE /api/admin/groups/:groupName ΓÇ║ should return 404 Not Found if service throws NotFoundError

    expected 404 "Not Found", got 500 "Internal Server Error"

      280 |                 .delete(`${BASE_API_PATH}/${targetgroupName}`)
      281 |                 .set(MOCK_AUTH_HEADER)
    > 282 |                 .expect(HttpStatusCode.NOT_FOUND); // 404
          |                  ^
      283 |             expect(mockGroupAdminService.deleteGroup).toHaveBeenCalledWith(expect.anything(), targetgroupName);
      284 |         });
      285 |

      at tests/integration/routes/group.admin.routes.integration.spec.ts:282:18
      at tests/integration/routes/group.admin.routes.integration.spec.ts:9:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/group.admin.routes.integration.spec.ts:5:12)
      at Object.<anonymous> (tests/integration/routes/group.admin.routes.integration.spec.ts:275:86)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Group Admin Routes (/api/admin/groups) ΓÇ║ DELETE /api/admin/groups/:groupName ΓÇ║ should return 400 Bad Request if groupName param is invalid

    expected 400 "Bad Request", got 500 "Internal Server Error"

      289 |                 .delete(`${BASE_API_PATH}/${encodeURIComponent(invalidgroupName)}`)
      290 |                 .set(MOCK_AUTH_HEADER)
    > 291 |                 .expect(HttpStatusCode.BAD_REQUEST); // 400
          |                  ^
      292 |             expect(mockGroupAdminService.deleteGroup).not.toHaveBeenCalled();
      293 |         });
      294 |

      at tests/integration/routes/group.admin.routes.integration.spec.ts:291:18
      at tests/integration/routes/group.admin.routes.integration.spec.ts:9:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/group.admin.routes.integration.spec.ts:5:12)
      at Object.<anonymous> (tests/integration/routes/group.admin.routes.integration.spec.ts:286:86)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Group Admin Routes (/api/admin/groups) ΓÇ║ DELETE /api/admin/groups/:groupName ΓÇ║ should return 500 if service fails unexpectedly

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: Anything, "Delete-Group-Test"

    Number of calls: 0

      300 |                 .set(MOCK_AUTH_HEADER)
      301 |                 .expect(HttpStatusCode.INTERNAL_SERVER_ERROR); // 500
    > 302 |             expect(mockGroupAdminService.deleteGroup).toHaveBeenCalledWith(expect.anything(), targetgroupName);
          |                                                       ^
      303 |         });
      304 |
      305 |         it('should return 401 Unauthorized if token is missing', async () => {

      at tests/integration/routes/group.admin.routes.integration.spec.ts:302:55
      at fulfilled (tests/integration/routes/group.admin.routes.integration.spec.ts:6:58)

FAIL tests/debug/dynamodb.debug.spec.ts
  ΓùÅ DynamoDB Table Creation Debug Test ΓÇ║ should resolve DynamoDBProvider and list tables

    Attempted to resolve unregistered dependency token: "Symbol(DynamoDBProvider)"

      43 |
      44 |     it('should resolve DynamoDBProvider and list tables', async () => {
    > 45 |         const dbProvider = persistenceContainer.resolve<DynamoDBProvider>(TYPES.DynamoDBProvider);
         |                                                 ^
      46 |         const client = dbProvider.client;
      47 |         const command = new ListTablesCommand({});
      48 |         const result = await client.send(command);

      at InternalDependencyContainer.resolve (node_modules/.pnpm/tsyringe@4.10.0/node_modules/tsyringe/dist/cjs/dependency-container.js:108:19)
      at tests/debug/dynamodb.debug.spec.ts:45:49
      at tests/debug/dynamodb.debug.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/debug/dynamodb.debug.spec.ts:4:12)
      at Object.<anonymous> (tests/debug/dynamodb.debug.spec.ts:44:70)

  ΓùÅ DynamoDB Table Creation Debug Test ΓÇ║ should create a role using DynamoRoleRepository

    expect(received).resolves.not.toThrow()

    Received promise rejected instead of resolved
    Rejected to value: [DatabaseError: Failed to create role: User: arn:aws:iam::410844822442:user/PBAC-Admin is not authorized to perform: dynamodb:PutItem on resource: arn:aws:dynamodb:ap-south-1:410844822442:table/TestAuthzTable because no identity-based policy allows the dynamodb:PutItem action]

      53 |         const roleRepository = persistenceContainer.resolve<IRoleRepository>(TYPES.RoleRepository);
      54 |         const testRole = new Role('test-tenant', 'debug-role', 'Debug Role Description');
    > 55 |         await expect(roleRepository.create(testRole)).resolves.not.toThrow();
         |               ^
      56 |
      57 |         // Verify by fetching
      58 |         const found = await roleRepository.findByName('test-tenant', testRole.roleName);

      at expect (node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js:113:15)
      at tests/debug/dynamodb.debug.spec.ts:55:15
      at tests/debug/dynamodb.debug.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/debug/dynamodb.debug.spec.ts:4:12)
      at Object.<anonymous> (tests/debug/dynamodb.debug.spec.ts:52:70)


  ΓùÅ Test suite failed to run

    ResourceInUseException: Attempt to change a resource which is still in use: Table is being created: TestAuthzTable

      at de_ResourceInUseExceptionRes (node_modules/.pnpm/@aws-sdk+client-dynamodb@3.879.0/node_modules/@aws-sdk/client-dynamodb/dist-cjs/index.js:2603:21)
      at de_CommandError (node_modules/.pnpm/@aws-sdk+client-dynamodb@3.879.0/node_modules/@aws-sdk/client-dynamodb/dist-cjs/index.js:2296:19)
      at node_modules/.pnpm/@smithy+middleware-serde@4.0.9/node_modules/@smithy/middleware-serde/dist-cjs/index.js:36:20
      at node_modules/.pnpm/@smithy+core@3.9.0/node_modules/@smithy/core/dist-cjs/index.js:193:18
      at node_modules/.pnpm/@smithy+middleware-retry@4.1.20/node_modules/@smithy/middleware-retry/dist-cjs/index.js:320:38
      at node_modules/.pnpm/@aws-sdk+middleware-logger@3.876.0/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js:33:22

FAIL tests/integration/Persistence/DynamoUserProfileRepository.integration.spec.ts
  ΓùÅ DynamoUserProfileRepository Integration Tests ΓÇ║ should throw error when saving duplicate user profile (implement check in repo)

    ValidationException: The provided key element does not match the schema

      at throwDefaultError (node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:425:20)
      at node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:434:5
      at de_CommandError (node_modules/.pnpm/@aws-sdk+client-dynamodb@3.879.0/node_modules/@aws-sdk/client-dynamodb/dist-cjs/index.js:2359:14)
      at node_modules/.pnpm/@smithy+middleware-serde@4.0.9/node_modules/@smithy/middleware-serde/dist-cjs/index.js:36:20
      at node_modules/.pnpm/@aws-sdk+lib-dynamodb@3.879_ee4568148364d683af0669b014af13ba/node_modules/@aws-sdk/lib-dynamodb/dist-cjs/index.js:173:30
      at node_modules/.pnpm/@smithy+core@3.9.0/node_modules/@smithy/core/dist-cjs/index.js:193:18
      at node_modules/.pnpm/@smithy+middleware-retry@4.1.20/node_modules/@smithy/middleware-retry/dist-cjs/index.js:320:38
      at node_modules/.pnpm/@aws-sdk+middleware-logger@3.876.0/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js:33:22

  ΓùÅ DynamoUserProfileRepository Integration Tests ΓÇ║ should find an existing profile by ID

    ValidationException: The provided key element does not match the schema

      at throwDefaultError (node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:425:20)
      at node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:434:5
      at de_CommandError (node_modules/.pnpm/@aws-sdk+client-dynamodb@3.879.0/node_modules/@aws-sdk/client-dynamodb/dist-cjs/index.js:2359:14)
      at node_modules/.pnpm/@smithy+middleware-serde@4.0.9/node_modules/@smithy/middleware-serde/dist-cjs/index.js:36:20
      at node_modules/.pnpm/@aws-sdk+lib-dynamodb@3.879_ee4568148364d683af0669b014af13ba/node_modules/@aws-sdk/lib-dynamodb/dist-cjs/index.js:173:30
      at node_modules/.pnpm/@smithy+core@3.9.0/node_modules/@smithy/core/dist-cjs/index.js:193:18
      at node_modules/.pnpm/@smithy+middleware-retry@4.1.20/node_modules/@smithy/middleware-retry/dist-cjs/index.js:320:38
      at node_modules/.pnpm/@aws-sdk+middleware-logger@3.876.0/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js:33:22

  ΓùÅ DynamoUserProfileRepository Integration Tests ΓÇ║ should return null when finding non-existent profile by ID

    ValidationException: The provided key element does not match the schema

      at throwDefaultError (node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:425:20)
      at node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:434:5
      at de_CommandError (node_modules/.pnpm/@aws-sdk+client-dynamodb@3.879.0/node_modules/@aws-sdk/client-dynamodb/dist-cjs/index.js:2359:14)
      at node_modules/.pnpm/@smithy+middleware-serde@4.0.9/node_modules/@smithy/middleware-serde/dist-cjs/index.js:36:20
      at node_modules/.pnpm/@aws-sdk+lib-dynamodb@3.879_ee4568148364d683af0669b014af13ba/node_modules/@aws-sdk/lib-dynamodb/dist-cjs/index.js:173:30
      at node_modules/.pnpm/@smithy+core@3.9.0/node_modules/@smithy/core/dist-cjs/index.js:193:18
      at node_modules/.pnpm/@smithy+middleware-retry@4.1.20/node_modules/@smithy/middleware-retry/dist-cjs/index.js:320:38
      at node_modules/.pnpm/@aws-sdk+middleware-logger@3.876.0/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js:33:22

  ΓùÅ DynamoUserProfileRepository Integration Tests ΓÇ║ should find an existing profile by Email (assuming index exists)

    ValidationException: The provided key element does not match the schema

      at throwDefaultError (node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:425:20)
      at node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:434:5
      at de_CommandError (node_modules/.pnpm/@aws-sdk+client-dynamodb@3.879.0/node_modules/@aws-sdk/client-dynamodb/dist-cjs/index.js:2359:14)
      at node_modules/.pnpm/@smithy+middleware-serde@4.0.9/node_modules/@smithy/middleware-serde/dist-cjs/index.js:36:20
      at node_modules/.pnpm/@aws-sdk+lib-dynamodb@3.879_ee4568148364d683af0669b014af13ba/node_modules/@aws-sdk/lib-dynamodb/dist-cjs/index.js:173:30
      at node_modules/.pnpm/@smithy+core@3.9.0/node_modules/@smithy/core/dist-cjs/index.js:193:18
      at node_modules/.pnpm/@smithy+middleware-retry@4.1.20/node_modules/@smithy/middleware-retry/dist-cjs/index.js:320:38
      at node_modules/.pnpm/@aws-sdk+middleware-logger@3.876.0/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js:33:22

  ΓùÅ DynamoUserProfileRepository Integration Tests ΓÇ║ should return null when finding non-existent profile by Email

    ValidationException: The provided key element does not match the schema

      at throwDefaultError (node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:425:20)
      at node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:434:5
      at de_CommandError (node_modules/.pnpm/@aws-sdk+client-dynamodb@3.879.0/node_modules/@aws-sdk/client-dynamodb/dist-cjs/index.js:2359:14)
      at node_modules/.pnpm/@smithy+middleware-serde@4.0.9/node_modules/@smithy/middleware-serde/dist-cjs/index.js:36:20
      at node_modules/.pnpm/@aws-sdk+lib-dynamodb@3.879_ee4568148364d683af0669b014af13ba/node_modules/@aws-sdk/lib-dynamodb/dist-cjs/index.js:173:30
      at node_modules/.pnpm/@smithy+core@3.9.0/node_modules/@smithy/core/dist-cjs/index.js:193:18
      at node_modules/.pnpm/@smithy+middleware-retry@4.1.20/node_modules/@smithy/middleware-retry/dist-cjs/index.js:320:38
      at node_modules/.pnpm/@aws-sdk+middleware-logger@3.876.0/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js:33:22

  ΓùÅ DynamoUserProfileRepository Integration Tests ΓÇ║ should update an existing profile

    ValidationException: The provided key element does not match the schema

      at throwDefaultError (node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:425:20)
      at node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:434:5
      at de_CommandError (node_modules/.pnpm/@aws-sdk+client-dynamodb@3.879.0/node_modules/@aws-sdk/client-dynamodb/dist-cjs/index.js:2359:14)
      at node_modules/.pnpm/@smithy+middleware-serde@4.0.9/node_modules/@smithy/middleware-serde/dist-cjs/index.js:36:20
      at node_modules/.pnpm/@aws-sdk+lib-dynamodb@3.879_ee4568148364d683af0669b014af13ba/node_modules/@aws-sdk/lib-dynamodb/dist-cjs/index.js:173:30
      at node_modules/.pnpm/@smithy+core@3.9.0/node_modules/@smithy/core/dist-cjs/index.js:193:18
      at node_modules/.pnpm/@smithy+middleware-retry@4.1.20/node_modules/@smithy/middleware-retry/dist-cjs/index.js:320:38
      at node_modules/.pnpm/@aws-sdk+middleware-logger@3.876.0/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js:33:22

  ΓùÅ DynamoUserProfileRepository Integration Tests ΓÇ║ should throw error when updating non-existent profile (implement check)

    ValidationException: The provided key element does not match the schema

      at throwDefaultError (node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:425:20)
      at node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:434:5
      at de_CommandError (node_modules/.pnpm/@aws-sdk+client-dynamodb@3.879.0/node_modules/@aws-sdk/client-dynamodb/dist-cjs/index.js:2359:14)
      at node_modules/.pnpm/@smithy+middleware-serde@4.0.9/node_modules/@smithy/middleware-serde/dist-cjs/index.js:36:20
      at node_modules/.pnpm/@aws-sdk+lib-dynamodb@3.879_ee4568148364d683af0669b014af13ba/node_modules/@aws-sdk/lib-dynamodb/dist-cjs/index.js:173:30
      at node_modules/.pnpm/@smithy+core@3.9.0/node_modules/@smithy/core/dist-cjs/index.js:193:18
      at node_modules/.pnpm/@smithy+middleware-retry@4.1.20/node_modules/@smithy/middleware-retry/dist-cjs/index.js:320:38
      at node_modules/.pnpm/@aws-sdk+middleware-logger@3.876.0/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js:33:22

  ΓùÅ DynamoUserProfileRepository Integration Tests ΓÇ║ should delete an existing profile

    ValidationException: The provided key element does not match the schema

      at throwDefaultError (node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:425:20)
      at node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:434:5
      at de_CommandError (node_modules/.pnpm/@aws-sdk+client-dynamodb@3.879.0/node_modules/@aws-sdk/client-dynamodb/dist-cjs/index.js:2359:14)
      at node_modules/.pnpm/@smithy+middleware-serde@4.0.9/node_modules/@smithy/middleware-serde/dist-cjs/index.js:36:20
      at node_modules/.pnpm/@aws-sdk+lib-dynamodb@3.879_ee4568148364d683af0669b014af13ba/node_modules/@aws-sdk/lib-dynamodb/dist-cjs/index.js:173:30
      at node_modules/.pnpm/@smithy+core@3.9.0/node_modules/@smithy/core/dist-cjs/index.js:193:18
      at node_modules/.pnpm/@smithy+middleware-retry@4.1.20/node_modules/@smithy/middleware-retry/dist-cjs/index.js:320:38
      at node_modules/.pnpm/@aws-sdk+middleware-logger@3.876.0/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js:33:22

  ΓùÅ DynamoUserProfileRepository Integration Tests ΓÇ║ should not throw when deleting non-existent profile (idempotent)

    ValidationException: The provided key element does not match the schema

      at throwDefaultError (node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:425:20)
      at node_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js:434:5
      at de_CommandError (node_modules/.pnpm/@aws-sdk+client-dynamodb@3.879.0/node_modules/@aws-sdk/client-dynamodb/dist-cjs/index.js:2359:14)
      at node_modules/.pnpm/@smithy+middleware-serde@4.0.9/node_modules/@smithy/middleware-serde/dist-cjs/index.js:36:20
      at node_modules/.pnpm/@aws-sdk+lib-dynamodb@3.879_ee4568148364d683af0669b014af13ba/node_modules/@aws-sdk/lib-dynamodb/dist-cjs/index.js:173:30
      at node_modules/.pnpm/@smithy+core@3.9.0/node_modules/@smithy/core/dist-cjs/index.js:193:18
      at node_modules/.pnpm/@smithy+middleware-retry@4.1.20/node_modules/@smithy/middleware-retry/dist-cjs/index.js:320:38
      at node_modules/.pnpm/@aws-sdk+middleware-logger@3.876.0/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js:33:22

FAIL tests/integration/routes/policy.admin.routes.integration.spec.ts (31.08 s)
  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId ΓÇ║ should return 200 OK with policy data if policy exists

    expected 200 "OK", got 500 "Internal Server Error"

      134 |                 .get(`${BASE_API_PATH}/${targetPolicyId}`)
      135 |                 .set(MOCK_AUTH_HEADER)
    > 136 |                 .expect(HttpStatusCode.OK) // 200
          |                  ^
      137 |                 .expect(res => {
      138 |                     expect(res.body.id).toBe(targetPolicyId);
      139 |                     expect(res.body.policyName).toBe('get.policy');

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:136:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:131:81)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId ΓÇ║ should return 404 Not Found if service returns null

    expected 404 "Not Found", got 500 "Internal Server Error"

      147 |                 .get(`${BASE_API_PATH}/${targetPolicyId}`)
      148 |                 .set(MOCK_AUTH_HEADER)
    > 149 |                 .expect(HttpStatusCode.NOT_FOUND); // 404
          |                  ^
      150 |             expect(mockPolicyAdminService.getPolicy).toHaveBeenCalledWith(expect.anything(), targetPolicyId);
      151 |         });
      152 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:149:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:144:78)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId ΓÇ║ should return 404 Not Found if service throws PolicyNotFoundError

    expected 404 "Not Found", got 500 "Internal Server Error"

      158 |                 .get(`${BASE_API_PATH}/${targetPolicyId}`)
      159 |                 .set(MOCK_AUTH_HEADER)
    > 160 |                 .expect(HttpStatusCode.NOT_FOUND); // 404
          |                  ^
      161 |             expect(mockPolicyAdminService.getPolicy).toHaveBeenCalledWith(expect.anything(), targetPolicyId);
      162 |         });
      163 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:160:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:153:92)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId ΓÇ║ should return 400 Bad Request if policyId param is not a valid UUID

    expected 400 "Bad Request", got 500 "Internal Server Error"

      167 |                 .get(`${BASE_API_PATH}/${invalidId}`)
      168 |                 .set(MOCK_AUTH_HEADER)
    > 169 |                 .expect(HttpStatusCode.BAD_REQUEST); // 400 (Handled by validation middleware)
          |                  ^
      170 |             expect(mockPolicyAdminService.getPolicy).not.toHaveBeenCalled();
      171 |         });
      172 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:169:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:164:94)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId ΓÇ║ should return 500 if the service fails unexpectedly

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: Anything, "a1b2c3d4-e5f6-7890-1234-567890abcdef"

    Number of calls: 0

      178 |                 .set(MOCK_AUTH_HEADER)
      179 |                 .expect(HttpStatusCode.INTERNAL_SERVER_ERROR); // 500
    > 180 |             expect(mockPolicyAdminService.getPolicy).toHaveBeenCalledWith(expect.anything(), targetPolicyId);
          |                                                      ^
      181 |         });
      182 |
      183 |         it('should return 401 Unauthorized if token is missing', async () => {

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:180:54
      at fulfilled (tests/integration/routes/policy.admin.routes.integration.spec.ts:5:58)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies ΓÇ║ should return 200 OK with a list of policies

    expected 200 "OK", got 500 "Internal Server Error"

      196 |                  .get(BASE_API_PATH)
      197 |                  .set(MOCK_AUTH_HEADER)
    > 198 |                  .expect(HttpStatusCode.OK); // 200
          |                   ^
      199 |              expect(mockPolicyAdminService.listPolicies).toHaveBeenCalledTimes(1);
      200 |              expect(mockPolicyAdminService.listPolicies).toHaveBeenCalledWith(expect.anything(), { limit: undefined, language: undefined, startKey: undefined });
      201 |          });

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:198:19
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:192:72)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies ΓÇ║ should pass pagination and filter parameters to the service

    expected 200 "OK", got 500 "Internal Server Error"

      207 |                  .query({ limit: 15, language: 'rego', startKey: 'opaqueStartKey' })
      208 |                  .set(MOCK_AUTH_HEADER)
    > 209 |                  .expect(HttpStatusCode.OK); // 200
          |                   ^
      210 |              expect(mockPolicyAdminService.listPolicies).toHaveBeenCalledTimes(1);
      211 |              expect(mockPolicyAdminService.listPolicies).toHaveBeenCalledWith(expect.anything(), { limit: '15', language: 'rego', startKey: 'opaqueStartKey' });
      212 |          });

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:209:19
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:203:88)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies ΓÇ║ should return 500 if the service fails unexpectedly

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 1
    Received number of calls: 0

      219 |                  .set(MOCK_AUTH_HEADER)
      220 |                  .expect(HttpStatusCode.INTERNAL_SERVER_ERROR); // 500
    > 221 |              expect(mockPolicyAdminService.listPolicies).toHaveBeenCalledTimes(1);
          |                                                          ^
      222 |          });
      223 |
      224 |          it('should return 401 Unauthorized if token is missing', async () => {

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:221:58
      at fulfilled (tests/integration/routes/policy.admin.routes.integration.spec.ts:5:58)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ PUT /api/admin/policies/:policyId ΓÇ║ should return 200 OK with updated policy data if service succeeds

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    - Expected
    + Received

      {"attributes": {"cognito:groups": ["policy-admin", "user"], "cognito:username": "test-admin", "sub": "test-admin-id-123"}, "id": "test-admin-id-123", "roles": ["policy-admin", "user"], "tenantId": "unknown-tenant", "username": "test-admin"},
      "a1b2c3d4-e5f6-7890-1234-567890abcdef",
      Object {
        "description": "Updated Integration Description",
    -   "version": 2,
      },

    Number of calls: 1

      250 |                     expect(res.body.version).toBe(MOCK_VALID_UPDATE_POLICY_PAYLOAD.version);
      251 |                 });
    > 252 |             expect(mockPolicyAdminService.updatePolicy).toHaveBeenCalledWith(expect.anything(), targetPolicyId, MOCK_VALID_UPDATE_POLICY_PAYLOAD);
          |                                                         ^
      253 |         });
      254 |
      255 |          it('should return 404 Not Found if service throws PolicyNotFoundError', async () => {

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:252:57
      at fulfilled (tests/integration/routes/policy.admin.routes.integration.spec.ts:5:58)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ DELETE /api/admin/policies/:policyId ΓÇ║ should return 204 No Content if service succeeds

    expected 204 "No Content", got 500 "Internal Server Error"

      311 |                 .delete(`${BASE_API_PATH}/${targetPolicyId}`)
      312 |                 .set(MOCK_AUTH_HEADER)
    > 313 |                 .expect(HttpStatusCode.NO_CONTENT); // 204
          |                  ^
      314 |             expect(mockPolicyAdminService.deletePolicy).toHaveBeenCalledWith(expect.anything(), targetPolicyId);
      315 |         });
      316 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:313:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:308:75)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ DELETE /api/admin/policies/:policyId ΓÇ║ should return 404 Not Found if service throws PolicyNotFoundError

    expected 404 "Not Found", got 500 "Internal Server Error"

      322 |                 .delete(`${BASE_API_PATH}/${targetPolicyId}`)
      323 |                 .set(MOCK_AUTH_HEADER)
    > 324 |                 .expect(HttpStatusCode.NOT_FOUND); // 404
          |                  ^
      325 |             expect(mockPolicyAdminService.deletePolicy).toHaveBeenCalledWith(expect.anything(), targetPolicyId);
      326 |         });
      327 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:324:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:317:92)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ DELETE /api/admin/policies/:policyId ΓÇ║ should return 400 Bad Request if policyId param is invalid

    expected 400 "Bad Request", got 500 "Internal Server Error"

      330 |                 .delete(`${BASE_API_PATH}/invalid-uuid`)
      331 |                 .set(MOCK_AUTH_HEADER)
    > 332 |                 .expect(HttpStatusCode.BAD_REQUEST); // 400
          |                  ^
      333 |             expect(mockPolicyAdminService.deletePolicy).not.toHaveBeenCalled();
      334 |         });
      335 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:332:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:328:86)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ DELETE /api/admin/policies/:policyId ΓÇ║ should return 500 if service fails unexpectedly

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: Anything, "b1c2d3e4-f5a6-7890-1234-567890abcdef"

    Number of calls: 0

      341 |                 .set(MOCK_AUTH_HEADER)
      342 |                 .expect(HttpStatusCode.INTERNAL_SERVER_ERROR); // 500
    > 343 |             expect(mockPolicyAdminService.deletePolicy).toHaveBeenCalledWith(expect.anything(), targetPolicyId);
          |                                                         ^
      344 |         });
      345 |
      346 |         it('should return 401 Unauthorized if token is missing', async () => {

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:343:57
      at fulfilled (tests/integration/routes/policy.admin.routes.integration.spec.ts:5:58)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId/versions/:version ΓÇ║ should return 200 OK with policy version data if found

    expected 200 "OK", got 500 "Internal Server Error"

      362 |                 .get(`${BASE_API_PATH}/${policyId}/versions/${version}`)
      363 |                 .set(MOCK_AUTH_HEADER)
    > 364 |                 .expect(HttpStatusCode.OK)
          |                  ^
      365 |                 .expect(res => {
      366 |                     expect(res.body.id).toBe(policyId);
      367 |                     expect(res.body.version).toBe(version);

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:364:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:359:81)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId/versions/:version ΓÇ║ should return 404 Not Found if policy version not found

    expected 404 "Not Found", got 500 "Internal Server Error"

      375 |                 .get(`${BASE_API_PATH}/${policyId}/versions/${version}`)
      376 |                 .set(MOCK_AUTH_HEADER)
    > 377 |                 .expect(HttpStatusCode.NOT_FOUND);
          |                  ^
      378 |             expect(mockPolicyAdminService.getPolicyVersion).toHaveBeenCalledWith(expect.anything(), policyId, version);
      379 |         });
      380 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:377:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:372:82)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId/versions/:version ΓÇ║ should return 400 Bad Request if policyId is invalid

    expected 400 "Bad Request", got 500 "Internal Server Error"

      383 |                 .get(`${BASE_API_PATH}/invalid-uuid/versions/${version}`)
      384 |                 .set(MOCK_AUTH_HEADER)
    > 385 |                 .expect(HttpStatusCode.BAD_REQUEST);
          |                  ^
      386 |             expect(mockPolicyAdminService.getPolicyVersion).not.toHaveBeenCalled();
      387 |         });
      388 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:385:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:381:79)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId/versions/:version ΓÇ║ should return 400 Bad Request if version is invalid

    expected 400 "Bad Request", got 500 "Internal Server Error"

      391 |                 .get(`${BASE_API_PATH}/${policyId}/versions/invalid-version`)
      392 |                 .set(MOCK_AUTH_HEADER)
    > 393 |                 .expect(HttpStatusCode.BAD_REQUEST);
          |                  ^
      394 |             expect(mockPolicyAdminService.getPolicyVersion).not.toHaveBeenCalled();
      395 |         });
      396 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:393:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:389:78)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId/versions/:version ΓÇ║ should return 500 Internal Server Error if service fails unexpectedly

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: Anything, "c1d2e3f4-a5b6-7890-1234-567890abcdef", 1

    Number of calls: 0

      402 |                 .set(MOCK_AUTH_HEADER)
      403 |                 .expect(HttpStatusCode.INTERNAL_SERVER_ERROR);
    > 404 |             expect(mockPolicyAdminService.getPolicyVersion).toHaveBeenCalledWith(expect.anything(), policyId, version);
          |                                                             ^
      405 |         });
      406 |
      407 |         it('should return 401 Unauthorized if token is missing', async () => {

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:404:61
      at fulfilled (tests/integration/routes/policy.admin.routes.integration.spec.ts:5:58)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId/versions ΓÇ║ should return 200 OK with a list of policy versions

    expected 200 "OK", got 500 "Internal Server Error"

      425 |                 .get(`${BASE_API_PATH}/${policyId}/versions`)
      426 |                 .set(MOCK_AUTH_HEADER)
    > 427 |                 .expect(HttpStatusCode.OK)
          |                  ^
      428 |                 .expect(res => {
      429 |                     expect(res.body).toHaveLength(2);
      430 |                     expect(res.body[0].version).toBe(1);

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:427:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:422:78)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId/versions ΓÇ║ should return 404 Not Found if policy does not exist

    expected 404 "Not Found", got 500 "Internal Server Error"

      441 |                 .get(`${BASE_API_PATH}/${policyId}/versions`)
      442 |                 .set(MOCK_AUTH_HEADER)
    > 443 |                 .expect(HttpStatusCode.NOT_FOUND);
          |                  ^
      444 |             expect(mockPolicyAdminService.listPolicyVersions).toHaveBeenCalledWith(expect.anything(), policyId);
      445 |         });
      446 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:443:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:436:79)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId/versions ΓÇ║ should return 400 Bad Request if policyId is invalid

    expected 400 "Bad Request", got 500 "Internal Server Error"

      449 |                 .get(`${BASE_API_PATH}/invalid-uuid/versions`)
      450 |                 .set(MOCK_AUTH_HEADER)
    > 451 |                 .expect(HttpStatusCode.BAD_REQUEST);
          |                  ^
      452 |             expect(mockPolicyAdminService.listPolicyVersions).not.toHaveBeenCalled();
      453 |         });
      454 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:451:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:447:79)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ GET /api/admin/policies/:policyId/versions ΓÇ║ should return 500 Internal Server Error if service fails unexpectedly

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: Anything, "d1e2f3a4-b5c6-7890-1234-567890abcdef"

    Number of calls: 0

      460 |                 .set(MOCK_AUTH_HEADER)
      461 |                 .expect(HttpStatusCode.INTERNAL_SERVER_ERROR);
    > 462 |             expect(mockPolicyAdminService.listPolicyVersions).toHaveBeenCalledWith(expect.anything(), policyId);
          |                                                               ^
      463 |         });
      464 |
      465 |         it('should return 401 Unauthorized if token is missing', async () => {

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:462:63
      at fulfilled (tests/integration/routes/policy.admin.routes.integration.spec.ts:5:58)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ POST /api/admin/policies/:policyId/rollback ΓÇ║ should return 200 OK with rolled back policy data on success

    expected 200 "OK", got 500 "Internal Server Error"

      481 |                 .post(`${BASE_API_PATH}/${policyId}/rollback/${version}`)
      482 |                 .set(MOCK_AUTH_HEADER)
    > 483 |                 .expect(HttpStatusCode.OK)
          |                  ^
      484 |                 .expect(res => {
      485 |                     expect(res.body.id).toBe(policyId);
      486 |                     expect(res.body.version).toBe(version);

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:483:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:478:87)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ POST /api/admin/policies/:policyId/rollback ΓÇ║ should return 404 Not Found if policy or version not found

    expected 404 "Not Found", got 500 "Internal Server Error"

      496 |                 .post(`${BASE_API_PATH}/${policyId}/rollback/${version}`)
      497 |                 .set(MOCK_AUTH_HEADER)
    > 498 |                 .expect(HttpStatusCode.NOT_FOUND);
          |                  ^
      499 |             expect(mockPolicyAdminService.rollbackPolicy).toHaveBeenCalledWith(expect.anything(), policyId, version);
      500 |         });
      501 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:498:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:491:85)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ POST /api/admin/policies/:policyId/rollback ΓÇ║ should return 400 Bad Request if policyId is invalid

    expected 400 "Bad Request", got 500 "Internal Server Error"

      504 |                 .post(`${BASE_API_PATH}/invalid-uuid/rollback/${version}`)
      505 |                 .set(MOCK_AUTH_HEADER)
    > 506 |                 .expect(HttpStatusCode.BAD_REQUEST);
          |                  ^
      507 |             expect(mockPolicyAdminService.rollbackPolicy).not.toHaveBeenCalled();
      508 |         });
      509 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:506:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:502:79)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ POST /api/admin/policies/:policyId/rollback ΓÇ║ should return 400 Bad Request if version is invalid or missing

    expected 400 "Bad Request", got 500 "Internal Server Error"

      512 |                 .post(`${BASE_API_PATH}/${policyId}/rollback/invalid-version`)
      513 |                 .set(MOCK_AUTH_HEADER)
    > 514 |                 .expect(HttpStatusCode.BAD_REQUEST);
          |                  ^
      515 |             expect(mockPolicyAdminService.rollbackPolicy).not.toHaveBeenCalled();
      516 |         });
      517 |

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:514:18
      at tests/integration/routes/policy.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/policy.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/policy.admin.routes.integration.spec.ts:510:89)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Policy Admin Routes (/api/admin/policies) ΓÇ║ POST /api/admin/policies/:policyId/rollback ΓÇ║ should return 500 Internal Server Error if service fails unexpectedly

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: Anything, "e1f2a3b4-c5d6-7890-1234-567890abcdef", 1

    Number of calls: 0

      523 |                 .set(MOCK_AUTH_HEADER)
      524 |                 .expect(HttpStatusCode.INTERNAL_SERVER_ERROR);
    > 525 |             expect(mockPolicyAdminService.rollbackPolicy).toHaveBeenCalledWith(expect.anything(), policyId, version);
          |                                                           ^
      526 |         });
      527 |
      528 |         it('should return 401 Unauthorized if token is missing', async () => {

      at tests/integration/routes/policy.admin.routes.integration.spec.ts:525:59
      at fulfilled (tests/integration/routes/policy.admin.routes.integration.spec.ts:5:58)

FAIL tests/unit/application/services/group.admin.service.spec.ts
  ΓùÅ GroupAdminService ΓÇ║ assignRoleToGroup ΓÇ║ should assign a role to a group successfully

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "test-group", "test-role"
    Received: "test-tenant", "test-group", "test-role"

    Number of calls: 1

      137 |             await service.assignRoleToGroup(adminUser, groupName, roleName);
      138 |
    > 139 |             expect(assignmentRepositoryMock.assignRoleToGroup).toHaveBeenCalledWith(groupName, roleName);
          |                                                                ^
      140 |         });
      141 |
      142 |         it('should throw GroupNotFoundError if group does not exist', async () => {

      at tests/unit/application/services/group.admin.service.spec.ts:139:64
      at fulfilled (tests/unit/application/services/group.admin.service.spec.ts:5:58)

  ΓùÅ GroupAdminService ΓÇ║ removeRoleFromGroup ΓÇ║ should remove a role from a group successfully

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "test-group", "test-role"
    Received: "test-tenant", "test-group", "test-role"

    Number of calls: 1

      170 |             await service.removeRoleFromGroup(adminUser, groupName, roleName);
      171 |
    > 172 |             expect(assignmentRepositoryMock.removeRoleFromGroup).toHaveBeenCalledWith(groupName, roleName);
          |                                                                  ^
      173 |         });
      174 |
      175 |         it('should throw AssignmentError on failure', async () => {

      at tests/unit/application/services/group.admin.service.spec.ts:172:66
      at fulfilled (tests/unit/application/services/group.admin.service.spec.ts:5:58)

FAIL tests/unit/application/services/permission.admin.service.spec.ts
  ΓùÅ PermissionAdminService ΓÇ║ getPermission ΓÇ║ should return a permission if found

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "test-permission"
    Received: "test-tenant", "test-permission"

    Number of calls: 1

      86 |             const result = await service.getPermission(adminUser, permissionName);
      87 |
    > 88 |             expect(permissionRepoMock.findByName).toHaveBeenCalledWith(permissionName);
         |                                                   ^
      89 |             expect(result).toEqual(permissionEntity);
      90 |         });
      91 |

      at tests/unit/application/services/permission.admin.service.spec.ts:88:51
      at fulfilled (tests/unit/application/services/permission.admin.service.spec.ts:5:58)

  ΓùÅ PermissionAdminService ΓÇ║ listPermissions ΓÇ║ should list permissions

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {}
    Received: "test-tenant", {}

    Number of calls: 1

      106 |             const result = await service.listPermissions(adminUser, {});
      107 |
    > 108 |             expect(permissionRepoMock.list).toHaveBeenCalledWith({});
          |                                             ^
      109 |             expect(result).toEqual(permissions);
      110 |         });
      111 |     });

      at tests/unit/application/services/permission.admin.service.spec.ts:108:45
      at fulfilled (tests/unit/application/services/permission.admin.service.spec.ts:5:58)

  ΓùÅ PermissionAdminService ΓÇ║ updatePermission ΓÇ║ should update a permission successfully

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "test-permission", {"description": "Updated description"}
    Received: "test-tenant", "test-permission", {"description": "Updated description"}

    Number of calls: 1

      119 |             const result = await service.updatePermission(adminUser, permissionName, updates);
      120 |
    > 121 |             expect(permissionRepoMock.update).toHaveBeenCalledWith(permissionName, updates);
          |                                               ^
      122 |             expect(result).toEqual(updatedPermission);
      123 |         });
      124 |     });

      at tests/unit/application/services/permission.admin.service.spec.ts:121:47
      at fulfilled (tests/unit/application/services/permission.admin.service.spec.ts:5:58)

  ΓùÅ PermissionAdminService ΓÇ║ deletePermission ΓÇ║ should delete a permission and its assignments successfully

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "test-permission"
    Received: "test-tenant", "test-permission"

    Number of calls: 1

      131 |             await service.deletePermission(adminUser, permissionName);
      132 |
    > 133 |             expect(permissionRepoMock.delete).toHaveBeenCalledWith(permissionName);
          |                                               ^
      134 |             expect(assignmentRepoMock.removeAllAssignmentsForPermission).toHaveBeenCalledWith(permissionName);
      135 |         });
      136 |

      at tests/unit/application/services/permission.admin.service.spec.ts:133:47
      at fulfilled (tests/unit/application/services/permission.admin.service.spec.ts:5:58)

FAIL tests/unit/application/services/role.admin.service.spec.ts
  ΓùÅ RoleAdminService ΓÇ║ getRole ΓÇ║ should return a role if found

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "test-role"
    Received: "test-tenant", "test-role"

    Number of calls: 1

       96 |             const result = await service.getRole(adminUser, roleName);
       97 |
    >  98 |             expect(roleRepoMock.findByName).toHaveBeenCalledWith(roleName);
          |                                             ^
       99 |             expect(result).toEqual(roleEntity);
      100 |         });
      101 |

      at tests/unit/application/services/role.admin.service.spec.ts:98:45
      at fulfilled (tests/unit/application/services/role.admin.service.spec.ts:5:58)

  ΓùÅ RoleAdminService ΓÇ║ listRoles ΓÇ║ should list roles

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {}
    Received: "test-tenant", {}

    Number of calls: 1

      116 |             const result = await service.listRoles(adminUser, {});
      117 |
    > 118 |             expect(roleRepoMock.list).toHaveBeenCalledWith({});
          |                                       ^
      119 |             expect(result).toEqual(roles);
      120 |         });
      121 |     });

      at tests/unit/application/services/role.admin.service.spec.ts:118:39
      at fulfilled (tests/unit/application/services/role.admin.service.spec.ts:5:58)

  ΓùÅ RoleAdminService ΓÇ║ updateRole ΓÇ║ should update a role successfully

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "test-role", {"description": "Updated description"}
    Received: "test-tenant", "test-role", {"description": "Updated description"}

    Number of calls: 1

      129 |             const result = await service.updateRole(adminUser, roleName, updates);
      130 |
    > 131 |             expect(roleRepoMock.update).toHaveBeenCalledWith(roleName, updates);
          |                                         ^
      132 |             expect(result).toEqual(updatedRole);
      133 |         });
      134 |     });

      at tests/unit/application/services/role.admin.service.spec.ts:131:41
      at fulfilled (tests/unit/application/services/role.admin.service.spec.ts:5:58)

  ΓùÅ RoleAdminService ΓÇ║ deleteRole ΓÇ║ should delete a role and its assignments successfully

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "test-role"
    Received: "test-tenant", "test-role"

    Number of calls: 1

      141 |             await service.deleteRole(adminUser, roleName);
      142 |
    > 143 |             expect(roleRepoMock.delete).toHaveBeenCalledWith(roleName);
          |                                         ^
      144 |             expect(assignmentRepoMock.removeAllAssignmentsForRole).toHaveBeenCalledWith(roleName);
      145 |         });
      146 |

      at tests/unit/application/services/role.admin.service.spec.ts:143:41
      at fulfilled (tests/unit/application/services/role.admin.service.spec.ts:5:58)

  ΓùÅ RoleAdminService ΓÇ║ assignPermissionToRole ΓÇ║ should assign a permission to a role successfully

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "test-role", "test-permission"
    Received: "test-tenant", "test-role", "test-permission"

    Number of calls: 1

      172 |             await service.assignPermissionToRole(adminUser, roleName, permissionName);
      173 |
    > 174 |             expect(assignmentRepoMock.assignPermissionToRole).toHaveBeenCalledWith(roleName, permissionName);
          |                                                               ^
      175 |         });
      176 |
      177 |         it('should throw RoleNotFoundError if role does not exist', async () => {

      at tests/unit/application/services/role.admin.service.spec.ts:174:63
      at fulfilled (tests/unit/application/services/role.admin.service.spec.ts:5:58)

  ΓùÅ RoleAdminService ΓÇ║ removePermissionFromRole ΓÇ║ should remove a permission from a role successfully

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "test-role", "test-permission"
    Received: "test-tenant", "test-role", "test-permission"

    Number of calls: 1

      197 |             await service.removePermissionFromRole(adminUser, roleName, permissionName);
      198 |
    > 199 |             expect(assignmentRepoMock.removePermissionFromRole).toHaveBeenCalledWith(roleName, permissionName);
          |                                                                 ^
      200 |         });
      201 |
      202 |         it('should throw AssignmentError on failure', async () => {

      at tests/unit/application/services/role.admin.service.spec.ts:199:65
      at fulfilled (tests/unit/application/services/role.admin.service.spec.ts:5:58)

FAIL tests/unit/api/middlewares/jwtAuth.middleware.spec.ts
  ΓùÅ jwtAuthMiddleware ΓÇ║ should populate req.user and req.accessToken and call next() on successful validation

    expect(received).toEqual(expected) // deep equality

    - Expected  - 1
    + Received  + 0

    @@ -9,8 +9,7 @@
        },
        "id": "user123",
        "roles": Array [
          "users",
        ],
    -   "tenantId": "test-tenant",
        "username": "testuser",
      }

      89 |
      90 |         expect(jwtValidatorMock.validate).toHaveBeenCalledWith(validToken.split(' ')[1]);
    > 91 |         expect(req.user).toEqual({
         |                          ^
      92 |             id: 'user123', tenantId: 'test-tenant',
      93 |             username: 'testuser',
      94 |             roles: ['users'],

      at tests/unit/api/middlewares/jwtAuth.middleware.spec.ts:91:26
      at fulfilled (tests/unit/api/middlewares/jwtAuth.middleware.spec.ts:5:58)

FAIL tests/unit/infrastructure/adapters/policy-engine/DynamoDbPolicyEngineAdapter.spec.ts
  ΓùÅ DynamoDbPolicyEngineAdapter ΓÇ║ getPolicyDefinition ΓÇ║ should return policy definition if found

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "policy-id"
    Received: "test-tenant", "policy-id"

    Number of calls: 1

      73 |             const result = await adapter.getPolicyDefinition('test-tenant', policyId);
      74 |
    > 75 |             expect(policyRepositoryMock.findById).toHaveBeenCalledWith(policyId);
         |                                                   ^
      76 |             expect(result).toBe(mockPolicy.policyDefinition);
      77 |             expect(loggerMock.debug).toHaveBeenCalledWith(expect.stringContaining('Successfully retrieved policy definition'));
      78 |         });

      at tests/unit/infrastructure/adapters/policy-engine/DynamoDbPolicyEngineAdapter.spec.ts:75:51
      at fulfilled (tests/unit/infrastructure/adapters/policy-engine/DynamoDbPolicyEngineAdapter.spec.ts:5:58)

  ΓùÅ DynamoDbPolicyEngineAdapter ΓÇ║ getPolicyDefinition ΓÇ║ should return null if policy not found

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "policy-id"
    Received: "test-tenant", "policy-id"

    Number of calls: 1

      83 |             const result = await adapter.getPolicyDefinition('test-tenant', policyId);
      84 |
    > 85 |             expect(policyRepositoryMock.findById).toHaveBeenCalledWith(policyId);
         |                                                   ^
      86 |             expect(result).toBeNull();
      87 |             expect(loggerMock.warn).toHaveBeenCalledWith(expect.stringContaining('Policy definition not found'));
      88 |         });

      at tests/unit/infrastructure/adapters/policy-engine/DynamoDbPolicyEngineAdapter.spec.ts:85:51
      at fulfilled (tests/unit/infrastructure/adapters/policy-engine/DynamoDbPolicyEngineAdapter.spec.ts:5:58)

  ΓùÅ DynamoDbPolicyEngineAdapter ΓÇ║ deletePolicyDefinition ΓÇ║ should delete policy and log success

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "policy-id"
    Received: "test-tenant", "policy-id"

    Number of calls: 1

      106 |             await adapter.deletePolicyDefinition('test-tenant', policyId);
      107 |
    > 108 |             expect(policyRepositoryMock.delete).toHaveBeenCalledWith(policyId);
          |                                                 ^
      109 |             expect(loggerMock.info).toHaveBeenCalledWith(expect.stringContaining('Successfully deleted policy definition'));
      110 |         });
      111 |

      at tests/unit/infrastructure/adapters/policy-engine/DynamoDbPolicyEngineAdapter.spec.ts:108:49
      at fulfilled (tests/unit/infrastructure/adapters/policy-engine/DynamoDbPolicyEngineAdapter.spec.ts:5:58)


Test Suites: 15 failed, 23 passed, 38 total
Tests:       101 failed, 416 passed, 517 total
Snapshots:   0 total
Time:        43.762 s, estimated 55 s
Ran all test suites.
Table TestUsers deleted successfully. Waiting for it to be deleted...
Table TestAssignments deleted successfully. Waiting for it to be deleted...
Table TestRoles deleted successfully. Waiting for it to be deleted...
Table TestPermissions deleted successfully. Waiting for it to be deleted...
Table TestPolicies deleted successfully. Waiting for it to be deleted...
