{"level":"warn","message":"Request validation failed [e5fba5ed-e5dc-4f0e-9bdb-3d21830157d7]:","metadata":{"errors":{"permissionName":"Permission name is required"}},"timestamp":"2026-02-23T13:25:37.533Z"}
{"level":"warn","message":"Client error processing request: Input validation failed","metadata":{"correlationId":"e5fba5ed-e5dc-4f0e-9bdb-3d21830157d7","details":{"permissionName":"Permission name is required"},"errorMessage":"Input validation failed","errorName":"ValidationError","isOperational":true,"method":"POST","path":"/api/admin/permissions","requestId":"e5fba5ed-e5dc-4f0e-9bdb-3d21830157d7","stack":"ValidationError: Input validation failed\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:48:41\n    at Generator.throw (<anonymous>)\n    at rejected (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:6:65)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":400,"userId":"anonymous"},"timestamp":"2026-02-23T13:25:37.536Z"}
{"level":"error","message":"[PermAdminCtrl] Failed to create permission perm:test-1771853135643","metadata":{"error":{"adminUserId":"test-admin-id-123","error":{"isOperational":true,"name":"PermissionExistsError","statusCode":409}}},"timestamp":"2026-02-23T13:25:37.553Z"}
{"level":"warn","message":"Request validation failed [c608b315-92d5-4b43-83b9-606928c37acc]:","metadata":{"errors":{"":"No update data provided"}},"timestamp":"2026-02-23T13:25:37.675Z"}
{"level":"warn","message":"Client error processing request: Input validation failed","metadata":{"correlationId":"c608b315-92d5-4b43-83b9-606928c37acc","details":{"":"No update data provided"},"errorMessage":"Input validation failed","errorName":"ValidationError","isOperational":true,"method":"PUT","path":"/api/admin/permissions/perm:update","requestId":"c608b315-92d5-4b43-83b9-606928c37acc","stack":"ValidationError: Input validation failed\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:48:41\n    at Generator.throw (<anonymous>)\n    at rejected (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:6:65)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":400,"userId":"anonymous"},"timestamp":"2026-02-23T13:25:37.676Z"}
{"level":"error","message":"[PermAdminCtrl] Failed to delete permission perm:delete","metadata":{"error":{"adminUserId":"test-admin-id-123","error":{"isOperational":true,"name":"PermissionNotFoundError","statusCode":404}}},"timestamp":"2026-02-23T13:25:37.707Z"}
{"level":"error","message":"[PermAdminCtrl] Failed to list roles for permission perm:with:roles","metadata":{"error":{"adminUserId":"test-admin-id-123","error":{"isOperational":true,"name":"PermissionNotFoundError","statusCode":404}}},"timestamp":"2026-02-23T13:25:37.745Z"}
FAIL tests/integration/routes/permission.admin.routes.integration.spec.ts
Integration Tests: Permission Admin Routes (/api/admin/permissions)
ΓùÅ Integration Tests: Permission Admin Routes (/api/admin/permissions) ΓÇ║ POST /api/admin/permissions ΓÇ║ should return 400 on validation error (e.g., missing permissionName)
expect(received).toEqual(expected) // deep equality
- Expected  - 1
at tests/integration/routes/permission.admin.routes.integration.spec.ts:130:44
Test Suites: 1 failed, 1 total
Tests:       1 failed, 18 passed, 19 total
