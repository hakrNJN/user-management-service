[dotenv@17.2.1] injecting env (11) from .env.test -- tip: ≡ƒôí auto-backup env with Radar: https://dotenvx.com/radar
Table TestPolicies already exists.
Table TestUsers already exists.
Table TestPermissions already exists.
Table TestAssignments already exists.
Table TestRoles already exists.
  console.info
    [WinstonLogger] Logger initialized with level "info" in "test" environment.

      at WinstonLogger.initializeLogger (src/infrastructure/logging/WinstonLogger.ts:68:17)
          at Array.map (<anonymous>)

{"level":"warn","message":"CORS_ORIGIN is set to \"*\" in a non-development environment. This is insecure!","metadata":{},"timestamp":"2026-02-23T14:18:27.094Z"}
{"level":"info","message":"CORS configured for origin: *","metadata":{},"timestamp":"2026-02-23T14:18:27.098Z"}
{"level":"info","message":"Application setup complete for environment: test","metadata":{},"timestamp":"2026-02-23T14:18:27.101Z"}
{"level":"info","message":"--> POST /api/admin/permissions","metadata":{"correlationId":"307c4d18-9484-4a1e-bf91-908106d03dd7","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"POST","requestId":"307c4d18-9484-4a1e-bf91-908106d03dd7","url":"/api/admin/permissions","userId":"anonymous"},"timestamp":"2026-02-23T14:18:27.189Z"}
{"level":"info","message":"[AdminGuard - 307c4d18-9484-4a1e-bf91-908106d03dd7] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["permission-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T14:18:27.192Z"}
{"level":"info","message":"<-- POST /api/admin/permissions 201 12.152ms","metadata":{"contentLength":"88","correlationId":"307c4d18-9484-4a1e-bf91-908106d03dd7","durationMs":12.152,"eventType":"finish","requestId":"307c4d18-9484-4a1e-bf91-908106d03dd7","statusCode":201,"userId":"anonymous"},"timestamp":"2026-02-23T14:18:27.200Z"}
{"level":"info","message":"--> POST /api/admin/permissions","metadata":{"correlationId":"879657a1-4a52-4daa-a77c-7d596fa88be3","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"POST","requestId":"879657a1-4a52-4daa-a77c-7d596fa88be3","url":"/api/admin/permissions","userId":"anonymous"},"timestamp":"2026-02-23T14:18:27.226Z"}
{"level":"info","message":"[AdminGuard - 879657a1-4a52-4daa-a77c-7d596fa88be3] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["permission-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T14:18:27.227Z"}
{"level":"warn","message":"Request validation failed [879657a1-4a52-4daa-a77c-7d596fa88be3]:","metadata":{"errors":{"permissionName":"Permission name is required"}},"timestamp":"2026-02-23T14:18:27.229Z"}
{"level":"warn","message":"Client error processing request: Input validation failed","metadata":{"correlationId":"879657a1-4a52-4daa-a77c-7d596fa88be3","details":{"permissionName":"Permission name is required"},"errorMessage":"Input validation failed","errorName":"ValidationError","isOperational":true,"method":"POST","path":"/api/admin/permissions","requestId":"879657a1-4a52-4daa-a77c-7d596fa88be3","stack":"ValidationError: Input validation failed\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:51:41\n    at Generator.throw (<anonymous>)\n    at rejected (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:6:65)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":400,"userId":"anonymous"},"timestamp":"2026-02-23T14:18:27.233Z"}
{"level":"warn","message":"<-- POST /api/admin/permissions 400 10.189ms","metadata":{"contentLength":"189","correlationId":"879657a1-4a52-4daa-a77c-7d596fa88be3","durationMs":10.189,"eventType":"finish","requestId":"879657a1-4a52-4daa-a77c-7d596fa88be3","statusCode":400,"userId":"anonymous"},"timestamp":"2026-02-23T14:18:27.236Z"}
{"level":"info","message":"--> POST /api/admin/permissions","metadata":{"correlationId":"5e85c8a7-6179-4428-ad5a-ef382963f569","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"POST","requestId":"5e85c8a7-6179-4428-ad5a-ef382963f569","url":"/api/admin/permissions","userId":"anonymous"},"timestamp":"2026-02-23T14:18:27.257Z"}
{"level":"info","message":"[AdminGuard - 5e85c8a7-6179-4428-ad5a-ef382963f569] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["permission-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T14:18:27.258Z"}
{"level":"error","message":"[PermAdminCtrl] Failed to create permission perm:test-1771856302122","metadata":{"error":{"adminUserId":"test-admin-id-123","error":{"isOperational":true,"name":"PermissionExistsError","statusCode":409}}},"timestamp":"2026-02-23T14:18:27.261Z"}
{"level":"warn","message":"Client error processing request: Permission 'perm:test-1771856302122' already exists.","metadata":{"correlationId":"5e85c8a7-6179-4428-ad5a-ef382963f569","errorMessage":"Permission 'perm:test-1771856302122' already exists.","errorName":"PermissionExistsError","isOperational":true,"method":"POST","path":"/api/admin/permissions","requestId":"5e85c8a7-6179-4428-ad5a-ef382963f569","stack":"PermissionExistsError: Permission 'perm:test-1771856302122' already exists.\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\permission.admin.routes.integration.spec.ts:136:27\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\permission.admin.routes.integration.spec.ts:9:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\permission.admin.routes.integration.spec.ts:5:12)\n    at Object.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\permission.admin.routes.integration.spec.ts:134:73)\n    at Promise.then.completed (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)","statusCode":409,"userId":"anonymous"},"timestamp":"2026-02-23T14:18:27.264Z"}
{"level":"warn","message":"<-- POST /api/admin/permissions 409 10.487ms","metadata":{"contentLength":"165","correlationId":"5e85c8a7-6179-4428-ad5a-ef382963f569","durationMs":10.487,"eventType":"finish","requestId":"5e85c8a7-6179-4428-ad5a-ef382963f569","statusCode":409,"userId":"anonymous"},"timestamp":"2026-02-23T14:18:27.267Z"}
{"level":"info","message":"--> POST /api/admin/permissions","metadata":{"correlationId":"afdca30c-2d43-43c3-8617-53f1fd9cd1cb","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"POST","requestId":"afdca30c-2d43-43c3-8617-53f1fd9cd1cb","url":"/api/admin/permissions","userId":"anonymous"},"timestamp":"2026-02-23T14:18:27.290Z"}
{"level":"warn","message":"Authentication: Missing or invalid Authorization header.","metadata":{},"timestamp":"2026-02-23T14:18:27.290Z"}
{"level":"warn","message":"Client error processing request: Authorization header missing or invalid.","metadata":{"correlationId":"afdca30c-2d43-43c3-8617-53f1fd9cd1cb","errorMessage":"Authorization header missing or invalid.","errorName":"AuthenticationError","isOperational":true,"method":"POST","path":"/api/admin/permissions","requestId":"afdca30c-2d43-43c3-8617-53f1fd9cd1cb","stack":"AuthenticationError: Authorization header missing or invalid.\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:32:25\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:27:70\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestLogger.middleware.ts:84:9\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:32\n    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)\n    at middleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:13)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at addRequestId (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestId.middleware.ts:33:5)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at urlencodedParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\urlencoded.js:57:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\read.js:132:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:214:14)\n    at invokeCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\raw-body@3.0.0\\node_modules\\raw-body\\index.js:238:16)\n    at done (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\raw-body@3.0.0\\node_modules\\raw-body\\index.js:227:7)\n    at IncomingMessage.onEnd (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\raw-body@3.0.0\\node_modules\\raw-body\\index.js:287:7)\n    at IncomingMessage.emit (node:events:519:28)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at processTicksAndRejections (node:internal/process/task_queues:90:21)","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T14:18:27.314Z"}
{"level":"warn","message":"<-- POST /api/admin/permissions 401 26.847ms","metadata":{"contentLength":"151","correlationId":"afdca30c-2d43-43c3-8617-53f1fd9cd1cb","durationMs":26.847,"eventType":"finish","requestId":"afdca30c-2d43-43c3-8617-53f1fd9cd1cb","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T14:18:27.317Z"}
{"level":"info","message":"--> GET /api/admin/permissions/perm:read","metadata":{"correlationId":"09218ee7-0fb0-4d55-85ac-6c481df89f35","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"09218ee7-0fb0-4d55-85ac-6c481df89f35","url":"/api/admin/permissions/perm:read","userId":"anonymous"},"timestamp":"2026-02-23T14:18:27.338Z"}
{"level":"info","message":"[AdminGuard - 09218ee7-0fb0-4d55-85ac-6c481df89f35] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["permission-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T14:18:27.340Z"}
{"level":"info","message":"<-- GET /api/admin/permissions/perm:read 200 9.350ms","metadata":{"contentLength":"165","correlationId":"09218ee7-0fb0-4d55-85ac-6c481df89f35","durationMs":9.35,"eventType":"finish","requestId":"09218ee7-0fb0-4d55-85ac-6c481df89f35","statusCode":200,"userId":"anonymous"},"timestamp":"2026-02-23T14:18:27.347Z"}
{"level":"info","message":"--> GET /api/admin/permissions/not-found-perm","metadata":{"correlationId":"bf7a1384-73ef-4835-baab-531fcc1b1627","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"bf7a1384-73ef-4835-baab-531fcc1b1627","url":"/api/admin/permissions/not-found-perm","userId":"anonymous"},"timestamp":"2026-02-23T14:18:27.377Z"}
{"level":"info","message":"[AdminGuard - bf7a1384-73ef-4835-baab-531fcc1b1627] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["permission-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T14:18:27.378Z"}
{"level":"warn","message":"Client error processing request: Permission 'not-found-perm' not found.","metadata":{"correlationId":"bf7a1384-73ef-4835-baab-531fcc1b1627","errorMessage":"Permission 'not-found-perm' not found.","errorName":"PermissionNotFoundError","isOperational":true,"method":"GET","path":"/api/admin/permissions/not-found-perm","requestId":"bf7a1384-73ef-4835-baab-531fcc1b1627","stack":"PermissionNotFoundError: Permission 'not-found-perm' not found.\n    at PermissionAdminController.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\controllers\\permission.admin.controller.ts:47:22)\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\controllers\\permission.admin.controller.ts:17:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":404,"userId":"anonymous"},"timestamp":"2026-02-23T14:18:27.389Z"}
{"level":"warn","message":"<-- GET /api/admin/permissions/not-found-perm 404 15.614ms","metadata":{"contentLength":"153","correlationId":"bf7a1384-73ef-4835-baab-531fcc1b1627","durationMs":15.614,"eventType":"finish","requestId":"bf7a1384-73ef-4835-baab-531fcc1b1627","statusCode":404,"userId":"anonymous"},"timestamp":"2026-02-23T14:18:27.393Z"}
{"level":"info","message":"--> GET /api/admin/permissions/perm:read","metadata":{"correlationId":"9a94c3f5-ba07-401c-88eb-efbf0ad28342","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"9a94c3f5-ba07-401c-88eb-efbf0ad28342","url":"/api/admin/permissions/perm:read","userId":"anonymous"},"timestamp":"2026-02-23T14:18:27.418Z"}
{"level":"warn","message":"Authentication: Missing or invalid Authorization header.","metadata":{},"timestamp":"2026-02-23T14:18:27.418Z"}
{"level":"warn","message":"Client error processing request: Authorization header missing or invalid.","metadata":{"correlationId":"9a94c3f5-ba07-401c-88eb-efbf0ad28342","errorMessage":"Authorization header missing or invalid.","errorName":"AuthenticationError","isOperational":true,"method":"GET","path":"/api/admin/permissions/perm:read","requestId":"9a94c3f5-ba07-401c-88eb-efbf0ad28342","stack":"AuthenticationError: Authorization header missing or invalid.\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:32:25\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:27:70\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestLogger.middleware.ts:84:9\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:32\n    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)\n    at middleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:13)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at addRequestId (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestId.middleware.ts:33:5)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at urlencodedParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\urlencoded.js:68:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at jsonParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\json.js:100:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at requestMetricsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestMetrics.middleware.ts:26:3)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at cors (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:188:7)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:224:17\n    at originCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:214:15)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:531:6)\n    at xXssProtectionMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:311:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPoweredByMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:304:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPermittedCrossDomainPoliciesMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:297:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xFrameOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:281:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDownloadOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:261:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDnsPrefetchControlMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:254:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xContentTypeOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:246:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at strictTransportSecurityMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:239:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at referrerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:207:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at originAgentClusterMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:182:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginResourcePolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:175:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginOpenerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:159:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at contentSecurityPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:124:4)","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T14:18:27.429Z"}
{"level":"warn","message":"<-- GET /api/admin/permissions/perm:read 401 15.269ms","metadata":{"contentLength":"151","correlationId":"9a94c3f5-ba07-401c-88eb-efbf0ad28342","durationMs":15.269,"eventType":"finish","requestId":"9a94c3f5-ba07-401c-88eb-efbf0ad28342","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T14:18:27.433Z"}
{"level":"info","message":"--> GET /api/admin/permissions?limit=10","metadata":{"correlationId":"b20e4689-1a07-4af6-8ce3-e3021c3041ba","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"b20e4689-1a07-4af6-8ce3-e3021c3041ba","url":"/api/admin/permissions?limit=10","userId":"anonymous"},"timestamp":"2026-02-23T14:18:27.454Z"}
{"level":"info","message":"[AdminGuard - b20e4689-1a07-4af6-8ce3-e3021c3041ba] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["permission-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T14:18:27.455Z"}
{"level":"info","message":"<-- GET /api/admin/permissions?limit=10 200 5.365ms","metadata":{"contentLength":"265","correlationId":"b20e4689-1a07-4af6-8ce3-e3021c3041ba","durationMs":5.365,"eventType":"finish","requestId":"b20e4689-1a07-4af6-8ce3-e3021c3041ba","statusCode":200,"userId":"anonymous"},"timestamp":"2026-02-23T14:18:27.459Z"}
{"level":"info","message":"--> GET /api/admin/permissions","metadata":{"correlationId":"68df6f77-7ea9-4596-8c58-f0712b2342d1","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"68df6f77-7ea9-4596-8c58-f0712b2342d1","url":"/api/admin/permissions","userId":"anonymous"},"timestamp":"2026-02-23T14:18:27.485Z"}
{"level":"warn","message":"Authentication: Missing or invalid Authorization header.","metadata":{},"timestamp":"2026-02-23T14:18:27.485Z"}
{"level":"warn","message":"Client error processing request: Authorization header missing or invalid.","metadata":{"correlationId":"68df6f77-7ea9-4596-8c58-f0712b2342d1","errorMessage":"Authorization header missing or invalid.","errorName":"AuthenticationError","isOperational":true,"method":"GET","path":"/api/admin/permissions","requestId":"68df6f77-7ea9-4596-8c58-f0712b2342d1","stack":"AuthenticationError: Authorization header missing or invalid.\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:32:25\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:27:70\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestLogger.middleware.ts:84:9\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:32\n    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)\n    at middleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:13)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at addRequestId (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestId.middleware.ts:33:5)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at urlencodedParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\urlencoded.js:68:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at jsonParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\json.js:100:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at requestMetricsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestMetrics.middleware.ts:26:3)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at cors (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:188:7)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:224:17\n    at originCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:214:15)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:531:6)\n    at xXssProtectionMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:311:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPoweredByMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:304:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPermittedCrossDomainPoliciesMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:297:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xFrameOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:281:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDownloadOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:261:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDnsPrefetchControlMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:254:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xContentTypeOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:246:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at strictTransportSecurityMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:239:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at referrerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:207:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at originAgentClusterMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:182:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginResourcePolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:175:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginOpenerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:159:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at contentSecurityPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:124:4)","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T14:18:27.490Z"}
{"level":"warn","message":"<-- GET /api/admin/permissions 401 11.388ms","metadata":{"contentLength":"151","correlationId":"68df6f77-7ea9-4596-8c58-f0712b2342d1","durationMs":11.388,"eventType":"finish","requestId":"68df6f77-7ea9-4596-8c58-f0712b2342d1","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T14:18:27.496Z"}
{"level":"info","message":"--> PUT /api/admin/permissions/perm:update","metadata":{"correlationId":"292fdfae-44ca-4c58-b2cf-f2c7a29bb722","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"PUT","requestId":"292fdfae-44ca-4c58-b2cf-f2c7a29bb722","url":"/api/admin/permissions/perm:update","userId":"anonymous"},"timestamp":"2026-02-23T14:18:27.517Z"}
{"level":"info","message":"[AdminGuard - 292fdfae-44ca-4c58-b2cf-f2c7a29bb722] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["permission-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T14:18:27.518Z"}
{"level":"info","message":"<-- PUT /api/admin/permissions/perm:update 200 6.531ms","metadata":{"contentLength":"171","correlationId":"292fdfae-44ca-4c58-b2cf-f2c7a29bb722","durationMs":6.531,"eventType":"finish","requestId":"292fdfae-44ca-4c58-b2cf-f2c7a29bb722","statusCode":200,"userId":"anonymous"},"timestamp":"2026-02-23T14:18:27.524Z"}
{"level":"info","message":"--> PUT /api/admin/permissions/not-found-perm","metadata":{"correlationId":"e8e8aedc-7c37-4ec5-ad5c-f5d2f7e2aaa1","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"PUT","requestId":"e8e8aedc-7c37-4ec5-ad5c-f5d2f7e2aaa1","url":"/api/admin/permissions/not-found-perm","userId":"anonymous"},"timestamp":"2026-02-23T14:18:27.545Z"}
{"level":"info","message":"[AdminGuard - e8e8aedc-7c37-4ec5-ad5c-f5d2f7e2aaa1] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["permission-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T14:18:27.546Z"}
{"level":"warn","message":"<-- PUT /api/admin/permissions/not-found-perm 404 4.294ms","metadata":{"contentLength":"63","correlationId":"e8e8aedc-7c37-4ec5-ad5c-f5d2f7e2aaa1","durationMs":4.294,"eventType":"finish","requestId":"e8e8aedc-7c37-4ec5-ad5c-f5d2f7e2aaa1","statusCode":404,"userId":"anonymous"},"timestamp":"2026-02-23T14:18:27.550Z"}
{"level":"info","message":"--> PUT /api/admin/permissions/perm:update","metadata":{"correlationId":"f7d2cc44-74d7-4489-ae81-c19ebe5dfffb","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"PUT","requestId":"f7d2cc44-74d7-4489-ae81-c19ebe5dfffb","url":"/api/admin/permissions/perm:update","userId":"anonymous"},"timestamp":"2026-02-23T14:18:27.571Z"}
{"level":"info","message":"[AdminGuard - f7d2cc44-74d7-4489-ae81-c19ebe5dfffb] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["permission-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T14:18:27.572Z"}
{"level":"warn","message":"Request validation failed [f7d2cc44-74d7-4489-ae81-c19ebe5dfffb]:","metadata":{"errors":{"":"No update data provided"}},"timestamp":"2026-02-23T14:18:27.575Z"}
{"level":"warn","message":"Client error processing request: Input validation failed","metadata":{"correlationId":"f7d2cc44-74d7-4489-ae81-c19ebe5dfffb","details":{"":"No update data provided"},"errorMessage":"Input validation failed","errorName":"ValidationError","isOperational":true,"method":"PUT","path":"/api/admin/permissions/perm:update","requestId":"f7d2cc44-74d7-4489-ae81-c19ebe5dfffb","stack":"ValidationError: Input validation failed\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:51:41\n    at Generator.throw (<anonymous>)\n    at rejected (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:6:65)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":400,"userId":"anonymous"},"timestamp":"2026-02-23T14:18:27.576Z"}
{"level":"warn","message":"<-- PUT /api/admin/permissions/perm:update 400 8.088ms","metadata":{"contentLength":"171","correlationId":"f7d2cc44-74d7-4489-ae81-c19ebe5dfffb","durationMs":8.088,"eventType":"finish","requestId":"f7d2cc44-74d7-4489-ae81-c19ebe5dfffb","statusCode":400,"userId":"anonymous"},"timestamp":"2026-02-23T14:18:27.579Z"}
{"level":"info","message":"--> PUT /api/admin/permissions/perm:update","metadata":{"correlationId":"e36ffa2b-cbfc-46d1-9f66-caf8995c431c","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"PUT","requestId":"e36ffa2b-cbfc-46d1-9f66-caf8995c431c","url":"/api/admin/permissions/perm:update","userId":"anonymous"},"timestamp":"2026-02-23T14:18:27.598Z"}
{"level":"warn","message":"Authentication: Missing or invalid Authorization header.","metadata":{},"timestamp":"2026-02-23T14:18:27.598Z"}
{"level":"warn","message":"Client error processing request: Authorization header missing or invalid.","metadata":{"correlationId":"e36ffa2b-cbfc-46d1-9f66-caf8995c431c","errorMessage":"Authorization header missing or invalid.","errorName":"AuthenticationError","isOperational":true,"method":"PUT","path":"/api/admin/permissions/perm:update","requestId":"e36ffa2b-cbfc-46d1-9f66-caf8995c431c","stack":"AuthenticationError: Authorization header missing or invalid.\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:32:25\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:27:70\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestLogger.middleware.ts:84:9\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:32\n    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)\n    at middleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:13)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at addRequestId (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestId.middleware.ts:33:5)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at urlencodedParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\urlencoded.js:57:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\read.js:132:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:214:14)\n    at invokeCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\raw-body@3.0.0\\node_modules\\raw-body\\index.js:238:16)\n    at done (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\raw-body@3.0.0\\node_modules\\raw-body\\index.js:227:7)\n    at IncomingMessage.onEnd (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\raw-body@3.0.0\\node_modules\\raw-body\\index.js:287:7)\n    at IncomingMessage.emit (node:events:519:28)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at processTicksAndRejections (node:internal/process/task_queues:90:21)","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T14:18:27.601Z"}
{"level":"warn","message":"<-- PUT /api/admin/permissions/perm:update 401 5.551ms","metadata":{"contentLength":"151","correlationId":"e36ffa2b-cbfc-46d1-9f66-caf8995c431c","durationMs":5.551,"eventType":"finish","requestId":"e36ffa2b-cbfc-46d1-9f66-caf8995c431c","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T14:18:27.603Z"}
{"level":"info","message":"--> DELETE /api/admin/permissions/perm:delete","metadata":{"correlationId":"72e87d8a-09f5-4d84-a4c6-7ca4de2139d1","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"DELETE","requestId":"72e87d8a-09f5-4d84-a4c6-7ca4de2139d1","url":"/api/admin/permissions/perm:delete","userId":"anonymous"},"timestamp":"2026-02-23T14:18:27.621Z"}
{"level":"info","message":"[AdminGuard - 72e87d8a-09f5-4d84-a4c6-7ca4de2139d1] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["permission-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T14:18:27.622Z"}
{"level":"info","message":"<-- DELETE /api/admin/permissions/perm:delete 204 4.699ms","metadata":{"correlationId":"72e87d8a-09f5-4d84-a4c6-7ca4de2139d1","durationMs":4.699,"eventType":"finish","requestId":"72e87d8a-09f5-4d84-a4c6-7ca4de2139d1","statusCode":204,"userId":"anonymous"},"timestamp":"2026-02-23T14:18:27.626Z"}
{"level":"info","message":"--> DELETE /api/admin/permissions/perm:delete","metadata":{"correlationId":"b721e9c0-9b86-437b-9933-06f5f5a50825","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"DELETE","requestId":"b721e9c0-9b86-437b-9933-06f5f5a50825","url":"/api/admin/permissions/perm:delete","userId":"anonymous"},"timestamp":"2026-02-23T14:18:27.643Z"}
{"level":"info","message":"[AdminGuard - b721e9c0-9b86-437b-9933-06f5f5a50825] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["permission-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T14:18:27.644Z"}
{"level":"error","message":"[PermAdminCtrl] Failed to delete permission perm:delete","metadata":{"error":{"adminUserId":"test-admin-id-123","error":{"isOperational":true,"name":"PermissionNotFoundError","statusCode":404}}},"timestamp":"2026-02-23T14:18:27.645Z"}
{"level":"warn","message":"Client error processing request: Permission 'perm:delete' not found.","metadata":{"correlationId":"b721e9c0-9b86-437b-9933-06f5f5a50825","errorMessage":"Permission 'perm:delete' not found.","errorName":"PermissionNotFoundError","isOperational":true,"method":"DELETE","path":"/api/admin/permissions/perm:delete","requestId":"b721e9c0-9b86-437b-9933-06f5f5a50825","stack":"PermissionNotFoundError: Permission 'perm:delete' not found.\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\permission.admin.routes.integration.spec.ts:286:27\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\permission.admin.routes.integration.spec.ts:9:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\permission.admin.routes.integration.spec.ts:5:12)\n    at Object.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\permission.admin.routes.integration.spec.ts:284:81)\n    at Promise.then.completed (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)","statusCode":404,"userId":"anonymous"},"timestamp":"2026-02-23T14:18:27.647Z"}
{"level":"warn","message":"<-- DELETE /api/admin/permissions/perm:delete 404 6.350ms","metadata":{"contentLength":"150","correlationId":"b721e9c0-9b86-437b-9933-06f5f5a50825","durationMs":6.35,"eventType":"finish","requestId":"b721e9c0-9b86-437b-9933-06f5f5a50825","statusCode":404,"userId":"anonymous"},"timestamp":"2026-02-23T14:18:27.650Z"}
{"level":"info","message":"--> DELETE /api/admin/permissions/perm:delete","metadata":{"correlationId":"fb035926-3c0e-4702-aec3-da9e07a65ee4","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"DELETE","requestId":"fb035926-3c0e-4702-aec3-da9e07a65ee4","url":"/api/admin/permissions/perm:delete","userId":"anonymous"},"timestamp":"2026-02-23T14:18:27.668Z"}
{"level":"warn","message":"Authentication: Missing or invalid Authorization header.","metadata":{},"timestamp":"2026-02-23T14:18:27.668Z"}
{"level":"warn","message":"Client error processing request: Authorization header missing or invalid.","metadata":{"correlationId":"fb035926-3c0e-4702-aec3-da9e07a65ee4","errorMessage":"Authorization header missing or invalid.","errorName":"AuthenticationError","isOperational":true,"method":"DELETE","path":"/api/admin/permissions/perm:delete","requestId":"fb035926-3c0e-4702-aec3-da9e07a65ee4","stack":"AuthenticationError: Authorization header missing or invalid.\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:32:25\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:27:70\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestLogger.middleware.ts:84:9\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:32\n    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)\n    at middleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:13)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at addRequestId (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestId.middleware.ts:33:5)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at urlencodedParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\urlencoded.js:68:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at jsonParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\json.js:100:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at requestMetricsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestMetrics.middleware.ts:26:3)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at cors (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:188:7)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:224:17\n    at originCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:214:15)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:531:6)\n    at xXssProtectionMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:311:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPoweredByMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:304:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPermittedCrossDomainPoliciesMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:297:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xFrameOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:281:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDownloadOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:261:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDnsPrefetchControlMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:254:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xContentTypeOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:246:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at strictTransportSecurityMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:239:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at referrerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:207:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at originAgentClusterMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:182:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginResourcePolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:175:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginOpenerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:159:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at contentSecurityPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:124:4)","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T14:18:27.674Z"}
{"level":"warn","message":"<-- DELETE /api/admin/permissions/perm:delete 401 8.825ms","metadata":{"contentLength":"151","correlationId":"fb035926-3c0e-4702-aec3-da9e07a65ee4","durationMs":8.825,"eventType":"finish","requestId":"fb035926-3c0e-4702-aec3-da9e07a65ee4","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T14:18:27.677Z"}
{"level":"info","message":"--> GET /api/admin/permissions/perm:with:roles/roles","metadata":{"correlationId":"2a2fcdaf-8569-45d2-a3dd-49961418cd66","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"2a2fcdaf-8569-45d2-a3dd-49961418cd66","url":"/api/admin/permissions/perm:with:roles/roles","userId":"anonymous"},"timestamp":"2026-02-23T14:18:27.700Z"}
{"level":"info","message":"[AdminGuard - 2a2fcdaf-8569-45d2-a3dd-49961418cd66] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["permission-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T14:18:27.701Z"}
{"level":"info","message":"<-- GET /api/admin/permissions/perm:with:roles/roles 200 5.307ms","metadata":{"contentLength":"29","correlationId":"2a2fcdaf-8569-45d2-a3dd-49961418cd66","durationMs":5.307,"eventType":"finish","requestId":"2a2fcdaf-8569-45d2-a3dd-49961418cd66","statusCode":200,"userId":"anonymous"},"timestamp":"2026-02-23T14:18:27.706Z"}
{"level":"info","message":"--> GET /api/admin/permissions/perm:with:roles/roles","metadata":{"correlationId":"72305c3e-5fa3-40d5-909f-6d99f0e9a663","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"72305c3e-5fa3-40d5-909f-6d99f0e9a663","url":"/api/admin/permissions/perm:with:roles/roles","userId":"anonymous"},"timestamp":"2026-02-23T14:18:27.726Z"}
{"level":"info","message":"[AdminGuard - 72305c3e-5fa3-40d5-909f-6d99f0e9a663] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["permission-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T14:18:27.727Z"}
{"level":"error","message":"[PermAdminCtrl] Failed to list roles for permission perm:with:roles","metadata":{"error":{"adminUserId":"test-admin-id-123","error":{"isOperational":true,"name":"PermissionNotFoundError","statusCode":404}}},"timestamp":"2026-02-23T14:18:27.728Z"}
{"level":"warn","message":"Client error processing request: Permission 'perm:with:roles' not found.","metadata":{"correlationId":"72305c3e-5fa3-40d5-909f-6d99f0e9a663","errorMessage":"Permission 'perm:with:roles' not found.","errorName":"PermissionNotFoundError","isOperational":true,"method":"GET","path":"/api/admin/permissions/perm:with:roles/roles","requestId":"72305c3e-5fa3-40d5-909f-6d99f0e9a663","stack":"PermissionNotFoundError: Permission 'perm:with:roles' not found.\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\permission.admin.routes.integration.spec.ts:321:27\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\permission.admin.routes.integration.spec.ts:9:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\permission.admin.routes.integration.spec.ts:5:12)\n    at Object.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\permission.admin.routes.integration.spec.ts:319:71)\n    at Promise.then.completed (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)","statusCode":404,"userId":"anonymous"},"timestamp":"2026-02-23T14:18:27.729Z"}
{"level":"warn","message":"<-- GET /api/admin/permissions/perm:with:roles/roles 404 5.338ms","metadata":{"contentLength":"154","correlationId":"72305c3e-5fa3-40d5-909f-6d99f0e9a663","durationMs":5.338,"eventType":"finish","requestId":"72305c3e-5fa3-40d5-909f-6d99f0e9a663","statusCode":404,"userId":"anonymous"},"timestamp":"2026-02-23T14:18:27.731Z"}
{"level":"info","message":"--> GET /api/admin/permissions/perm:with:roles/roles","metadata":{"correlationId":"9cc06ae1-85e5-4c60-b43f-60a4bdb3ceeb","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"9cc06ae1-85e5-4c60-b43f-60a4bdb3ceeb","url":"/api/admin/permissions/perm:with:roles/roles","userId":"anonymous"},"timestamp":"2026-02-23T14:18:27.747Z"}
{"level":"warn","message":"Authentication: Missing or invalid Authorization header.","metadata":{},"timestamp":"2026-02-23T14:18:27.747Z"}
{"level":"warn","message":"Client error processing request: Authorization header missing or invalid.","metadata":{"correlationId":"9cc06ae1-85e5-4c60-b43f-60a4bdb3ceeb","errorMessage":"Authorization header missing or invalid.","errorName":"AuthenticationError","isOperational":true,"method":"GET","path":"/api/admin/permissions/perm:with:roles/roles","requestId":"9cc06ae1-85e5-4c60-b43f-60a4bdb3ceeb","stack":"AuthenticationError: Authorization header missing or invalid.\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:32:25\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:27:70\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestLogger.middleware.ts:84:9\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:32\n    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)\n    at middleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:13)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at addRequestId (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestId.middleware.ts:33:5)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at urlencodedParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\urlencoded.js:68:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at jsonParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\json.js:100:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at requestMetricsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestMetrics.middleware.ts:26:3)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at cors (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:188:7)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:224:17\n    at originCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:214:15)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:531:6)\n    at xXssProtectionMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:311:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPoweredByMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:304:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPermittedCrossDomainPoliciesMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:297:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xFrameOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:281:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDownloadOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:261:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDnsPrefetchControlMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:254:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xContentTypeOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:246:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at strictTransportSecurityMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:239:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at referrerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:207:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at originAgentClusterMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:182:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginResourcePolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:175:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginOpenerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:159:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at contentSecurityPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:124:4)","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T14:18:27.751Z"}
{"level":"warn","message":"<-- GET /api/admin/permissions/perm:with:roles/roles 401 7.601ms","metadata":{"contentLength":"151","correlationId":"9cc06ae1-85e5-4c60-b43f-60a4bdb3ceeb","durationMs":7.601,"eventType":"finish","requestId":"9cc06ae1-85e5-4c60-b43f-60a4bdb3ceeb","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T14:18:27.755Z"}
PASS tests/integration/routes/permission.admin.routes.integration.spec.ts (15.049 s)
  Integration Tests: Permission Admin Routes (/api/admin/permissions)
    POST /api/admin/permissions
      ΓêÜ should return 201 Created when payload is valid and service succeeds (109 ms)
      ΓêÜ should return 400 on validation error (e.g., missing permissionName) (30 ms)
      ΓêÜ should return 409 if permission already exists (30 ms)
      ΓêÜ should return 401 if token is invalid/missing (48 ms)
    GET /api/admin/permissions/:permissionName
      ΓêÜ should return 200 and the permission if found (33 ms)
      ΓêÜ should return 404 if permission not found (43 ms)
      ΓêÜ should return 401 if token is invalid/missing (37 ms)
    GET /api/admin/permissions
      ΓêÜ should return 200 and list of permissions (27 ms)
      ΓêÜ should return 401 if token is invalid/missing (34 ms)
    PUT /api/admin/permissions/:permissionName
      ΓêÜ should return 200 and updated permission on success (27 ms)
      ΓêÜ should return 404 if permission not found for update (24 ms)
      ΓêÜ should return 400 on validation error (e.g., empty body) (27 ms)
      ΓêÜ should return 401 if token is invalid/missing (24 ms)
    DELETE /api/admin/permissions/:permissionName
      ΓêÜ should return 204 on successful deletion (22 ms)
      ΓêÜ should return 404 if permission not found for deletion (24 ms)
      ΓêÜ should return 401 if token is invalid/missing (32 ms)
    GET /api/admin/permissions/:permissionName/roles
      ΓêÜ should return 200 and list of role names (22 ms)
      ΓêÜ should return 404 if permission is not found (24 ms)
      ΓêÜ should return 401 if token is invalid/missing (24 ms)

Test Suites: 1 passed, 1 total
Tests:       19 passed, 19 total
Snapshots:   0 total
Time:        15.17 s
Ran all test suites matching /tests\\integration\\routes\\permission.admin.routes.integration.spec.ts/i.
Table TestPolicies deleted successfully. Waiting for it to be deleted...
Table TestAssignments deleted successfully. Waiting for it to be deleted...
Table TestPermissions deleted successfully. Waiting for it to be deleted...
Table TestUsers deleted successfully. Waiting for it to be deleted...
Table TestRoles deleted successfully. Waiting for it to be deleted...
