{"numFailedTestSuites":15,"numFailedTests":100,"numPassedTestSuites":23,"numPassedTests":417,"numPendingTestSuites":0,"numPendingTests":0,"numRuntimeErrorTestSuites":1,"numTodoTests":0,"numTotalTestSuites":38,"numTotalTests":517,"openHandles":[],"snapshot":{"added":0,"didUpdate":false,"failure":false,"filesAdded":0,"filesRemoved":0,"filesRemovedList":[],"filesUnmatched":0,"filesUpdated":0,"matched":0,"total":0,"unchecked":0,"uncheckedKeysByFile":[],"unmatched":0,"updated":0},"startTime":1771844393939,"success":false,"testResults":[{"assertionResults":[{"ancestorTitles":["Integration Tests: User Admin Routes (/api/admin/users)","Authentication Guard"],"duration":330,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests: User Admin Routes (/api/admin/users) Authentication Guard should return 401 Unauthorized if no token is provided","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should return 401 Unauthorized if no token is provided"},{"ancestorTitles":["Integration Tests: User Admin Routes (/api/admin/users)","Authentication Guard"],"duration":64,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests: User Admin Routes (/api/admin/users) Authentication Guard should return 401 Unauthorized if an invalid/non-bypass token is provided","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"passed","title":"should return 401 Unauthorized if an invalid/non-bypass token is provided"},{"ancestorTitles":["Integration Tests: User Admin Routes (/api/admin/users)","Authentication Guard"],"duration":122,"failureDetails":[{}],"failureMessages":["Error: expected 200 \"OK\", got 500 \"Internal Server Error\"\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\user.admin.routes.integration.spec.ts:236:18\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\user.admin.routes.integration.spec.ts:9:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\user.admin.routes.integration.spec.ts:5:12)\n    at Object.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\user.admin.routes.integration.spec.ts:231:81)\n    at Promise.then.completed (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\testWorker.js:108:12)\n----\n    at Test._assertStatus (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:309:14)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:365:13\n    at Test._assertFunction (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:342:13)\n    at Test.assert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:195:23)\n    at localAssert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:138:14)\n    at Server.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:152:11)\n    at Object.onceWrapper (node:events:633:28)\n    at Server.emit (node:events:519:28)\n    at emitCloseNT (node:net:2419:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"fullName":"Integration Tests: User Admin Routes (/api/admin/users) Authentication Guard should allow access with the correct test bypass token","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should allow access with the correct test bypass token"},{"ancestorTitles":["Integration Tests: User Admin Routes (/api/admin/users)","POST /api/admin/users"],"duration":172,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests: User Admin Routes (/api/admin/users) POST /api/admin/users should return 201 Created when payload is valid and service succeeds","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should return 201 Created when payload is valid and service succeeds"},{"ancestorTitles":["Integration Tests: User Admin Routes (/api/admin/users)","POST /api/admin/users"],"duration":60,"failureDetails":[{}],"failureMessages":["Error: expected 400 \"Bad Request\", got 201 \"Created\"\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\user.admin.routes.integration.spec.ts:277:18\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\user.admin.routes.integration.spec.ts:9:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\user.admin.routes.integration.spec.ts:5:12)\n    at Object.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\user.admin.routes.integration.spec.ts:271:76)\n    at Promise.then.completed (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\testWorker.js:108:12)\n----\n    at Test._assertStatus (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:309:14)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:365:13\n    at Test._assertFunction (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:342:13)\n    at Test.assert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:195:23)\n    at localAssert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:138:14)\n    at Server.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:152:11)\n    at Object.onceWrapper (node:events:633:28)\n    at Server.emit (node:events:519:28)\n    at emitCloseNT (node:net:2419:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"fullName":"Integration Tests: User Admin Routes (/api/admin/users) POST /api/admin/users should return 400 Bad Request if validation fails","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 400 Bad Request if validation fails"},{"ancestorTitles":["Integration Tests: User Admin Routes (/api/admin/users)","POST /api/admin/users"],"duration":57,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests: User Admin Routes (/api/admin/users) POST /api/admin/users should return 409 Conflict if service throws UserExistsError","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 409 Conflict if service throws UserExistsError"},{"ancestorTitles":["Integration Tests: User Admin Routes (/api/admin/users)","POST /api/admin/users"],"duration":55,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests: User Admin Routes (/api/admin/users) POST /api/admin/users should return 500 Internal Server Error if service throws an unexpected error","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 500 Internal Server Error if service throws an unexpected error"},{"ancestorTitles":["Integration Tests: User Admin Routes (/api/admin/users)","GET /api/admin/users"],"duration":63,"failureDetails":[{}],"failureMessages":["Error: expected 200 \"OK\", got 500 \"Internal Server Error\"\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\user.admin.routes.integration.spec.ts:315:18\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\user.admin.routes.integration.spec.ts:9:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\user.admin.routes.integration.spec.ts:5:12)\n    at Object.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\user.admin.routes.integration.spec.ts:306:68)\n    at Promise.then.completed (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\testWorker.js:108:12)\n----\n    at Test._assertStatus (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:309:14)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:365:13\n    at Test._assertFunction (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:342:13)\n    at Test.assert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:195:23)\n    at localAssert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:138:14)\n    at Server.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:152:11)\n    at Object.onceWrapper (node:events:633:28)\n    at Server.emit (node:events:519:28)\n    at emitCloseNT (node:net:2419:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"fullName":"Integration Tests: User Admin Routes (/api/admin/users) GET /api/admin/users should return 200 OK with a list of users","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 200 OK with a list of users"},{"ancestorTitles":["Integration Tests: User Admin Routes (/api/admin/users)","GET /api/admin/users"],"duration":134,"failureDetails":[{}],"failureMessages":["Error: expected 200 \"OK\", got 500 \"Internal Server Error\"\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\user.admin.routes.integration.spec.ts:325:18\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\user.admin.routes.integration.spec.ts:9:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\user.admin.routes.integration.spec.ts:5:12)\n    at Object.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\user.admin.routes.integration.spec.ts:319:70)\n    at Promise.then.completed (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\testWorker.js:108:12)\n----\n    at Test._assertStatus (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:309:14)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:365:13\n    at Test._assertFunction (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:342:13)\n    at Test.assert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:195:23)\n    at localAssert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:138:14)\n    at Server.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:152:11)\n    at Object.onceWrapper (node:events:633:28)\n    at Server.emit (node:events:519:28)\n    at emitCloseNT (node:net:2419:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"fullName":"Integration Tests: User Admin Routes (/api/admin/users) GET /api/admin/users should pass query parameters to the service","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should pass query parameters to the service"},{"ancestorTitles":["Integration Tests: User Admin Routes (/api/admin/users)","GET /api/admin/users"],"duration":118,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledTimes\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected number of calls: \u001b[32m1\u001b[39m\nReceived number of calls: \u001b[31m0\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledTimes\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected number of calls: \u001b[32m1\u001b[39m\nReceived number of calls: \u001b[31m0\u001b[39m\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\user.admin.routes.integration.spec.ts:336:52\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\user.admin.routes.integration.spec.ts:6:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"Integration Tests: User Admin Routes (/api/admin/users) GET /api/admin/users should return 500 if the service fails unexpectedly","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 500 if the service fails unexpectedly"},{"ancestorTitles":["Integration Tests: User Admin Routes (/api/admin/users)","GET /api/admin/users/:username"],"duration":63,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests: User Admin Routes (/api/admin/users) GET /api/admin/users/:username should return 200 OK with user data if user exists","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 200 OK with user data if user exists"},{"ancestorTitles":["Integration Tests: User Admin Routes (/api/admin/users)","GET /api/admin/users/:username"],"duration":79,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests: User Admin Routes (/api/admin/users) GET /api/admin/users/:username should return 404 Not Found if service returns null","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 404 Not Found if service returns null"},{"ancestorTitles":["Integration Tests: User Admin Routes (/api/admin/users)","GET /api/admin/users/:username"],"duration":76,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests: User Admin Routes (/api/admin/users) GET /api/admin/users/:username should return 404 Not Found if service throws UserNotFoundError","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 404 Not Found if service throws UserNotFoundError"},{"ancestorTitles":["Integration Tests: User Admin Routes (/api/admin/users)","GET /api/admin/users/:username"],"duration":80,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests: User Admin Routes (/api/admin/users) GET /api/admin/users/:username should return 500 if the service fails unexpectedly","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 500 if the service fails unexpectedly"},{"ancestorTitles":["Integration Tests: User Admin Routes (/api/admin/users)","PUT /api/admin/users/:username/attributes"],"duration":74,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests: User Admin Routes (/api/admin/users) PUT /api/admin/users/:username/attributes should return 204 No Content if service succeeds","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should return 204 No Content if service succeeds"},{"ancestorTitles":["Integration Tests: User Admin Routes (/api/admin/users)","PUT /api/admin/users/:username/attributes"],"duration":65,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests: User Admin Routes (/api/admin/users) PUT /api/admin/users/:username/attributes should return 400 Bad Request if update payload is invalid","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 400 Bad Request if update payload is invalid"},{"ancestorTitles":["Integration Tests: User Admin Routes (/api/admin/users)","PUT /api/admin/users/:username/attributes"],"duration":68,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests: User Admin Routes (/api/admin/users) PUT /api/admin/users/:username/attributes should return 404 Not Found if service throws UserNotFoundError","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 404 Not Found if service throws UserNotFoundError"},{"ancestorTitles":["Integration Tests: User Admin Routes (/api/admin/users)","PUT /api/admin/users/:username/attributes"],"duration":42,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests: User Admin Routes (/api/admin/users) PUT /api/admin/users/:username/attributes should return 500 if service fails unexpectedly","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 500 if service fails unexpectedly"},{"ancestorTitles":["Integration Tests: User Admin Routes (/api/admin/users)","DELETE /api/admin/users/:username (Permanent Delete)"],"duration":60,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests: User Admin Routes (/api/admin/users) DELETE /api/admin/users/:username (Permanent Delete) should return 204 No Content if service succeeds","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 204 No Content if service succeeds"},{"ancestorTitles":["Integration Tests: User Admin Routes (/api/admin/users)","DELETE /api/admin/users/:username (Permanent Delete)"],"duration":46,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests: User Admin Routes (/api/admin/users) DELETE /api/admin/users/:username (Permanent Delete) should return 404 Not Found if service throws UserNotFoundError","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 404 Not Found if service throws UserNotFoundError"},{"ancestorTitles":["Integration Tests: User Admin Routes (/api/admin/users)","DELETE /api/admin/users/:username (Permanent Delete)"],"duration":29,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests: User Admin Routes (/api/admin/users) DELETE /api/admin/users/:username (Permanent Delete) should return 500 if service fails unexpectedly","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 500 if service fails unexpectedly"},{"ancestorTitles":["Integration Tests: User Admin Routes (/api/admin/users)","PUT /api/admin/users/:username/reactivate (Enable)"],"duration":32,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests: User Admin Routes (/api/admin/users) PUT /api/admin/users/:username/reactivate (Enable) should return 200 OK on successful enable","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 200 OK on successful enable"},{"ancestorTitles":["Integration Tests: User Admin Routes (/api/admin/users)","PUT /api/admin/users/:username/reactivate (Enable)"],"duration":38,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests: User Admin Routes (/api/admin/users) PUT /api/admin/users/:username/reactivate (Enable) should return 404 Not Found if service throws UserNotFoundError","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 404 Not Found if service throws UserNotFoundError"},{"ancestorTitles":["Integration Tests: User Admin Routes (/api/admin/users)","PUT /api/admin/users/:username/reactivate (Enable)"],"duration":38,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests: User Admin Routes (/api/admin/users) PUT /api/admin/users/:username/reactivate (Enable) should return 500 if service fails unexpectedly","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 500 if service fails unexpectedly"},{"ancestorTitles":["Integration Tests: User Admin Routes (/api/admin/users)","POST /api/admin/users/:username/initiate-password-reset"],"duration":34,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests: User Admin Routes (/api/admin/users) POST /api/admin/users/:username/initiate-password-reset should return 200 OK on successful initiation","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 200 OK on successful initiation"},{"ancestorTitles":["Integration Tests: User Admin Routes (/api/admin/users)","POST /api/admin/users/:username/initiate-password-reset"],"duration":41,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests: User Admin Routes (/api/admin/users) POST /api/admin/users/:username/initiate-password-reset should return 404 Not Found if service throws UserNotFoundError","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 404 Not Found if service throws UserNotFoundError"},{"ancestorTitles":["Integration Tests: User Admin Routes (/api/admin/users)","POST /api/admin/users/:username/initiate-password-reset"],"duration":63,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests: User Admin Routes (/api/admin/users) POST /api/admin/users/:username/initiate-password-reset should return 500 if service fails unexpectedly","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 500 if service fails unexpectedly"},{"ancestorTitles":["Integration Tests: User Admin Routes (/api/admin/users)","POST /api/admin/users/:username/set-password"],"duration":53,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests: User Admin Routes (/api/admin/users) POST /api/admin/users/:username/set-password should return 200 OK on successful password set","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 200 OK on successful password set"},{"ancestorTitles":["Integration Tests: User Admin Routes (/api/admin/users)","POST /api/admin/users/:username/set-password"],"duration":53,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests: User Admin Routes (/api/admin/users) POST /api/admin/users/:username/set-password should return 400 Bad Request if password missing in body","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 400 Bad Request if password missing in body"},{"ancestorTitles":["Integration Tests: User Admin Routes (/api/admin/users)","POST /api/admin/users/:username/set-password"],"duration":53,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests: User Admin Routes (/api/admin/users) POST /api/admin/users/:username/set-password should return 404 Not Found if service throws UserNotFoundError","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 404 Not Found if service throws UserNotFoundError"},{"ancestorTitles":["Integration Tests: User Admin Routes (/api/admin/users)","POST /api/admin/users/:username/set-password"],"duration":51,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests: User Admin Routes (/api/admin/users) POST /api/admin/users/:username/set-password should return 500 if service fails unexpectedly","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 500 if service fails unexpectedly"},{"ancestorTitles":["Integration Tests: User Admin Routes (/api/admin/users)","User Group Management","POST /api/admin/users/:username/groups"],"duration":47,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests: User Admin Routes (/api/admin/users) User Group Management POST /api/admin/users/:username/groups should return 200 OK when adding user to group succeeds","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 200 OK when adding user to group succeeds"},{"ancestorTitles":["Integration Tests: User Admin Routes (/api/admin/users)","User Group Management","POST /api/admin/users/:username/groups"],"duration":64,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests: User Admin Routes (/api/admin/users) User Group Management POST /api/admin/users/:username/groups should return 400 Bad Request if groupName missing","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 400 Bad Request if groupName missing"},{"ancestorTitles":["Integration Tests: User Admin Routes (/api/admin/users)","User Group Management","POST /api/admin/users/:username/groups"],"duration":51,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests: User Admin Routes (/api/admin/users) User Group Management POST /api/admin/users/:username/groups should return 404 Not Found if user/group not found (via service error)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 404 Not Found if user/group not found (via service error)"},{"ancestorTitles":["Integration Tests: User Admin Routes (/api/admin/users)","User Group Management","GET /api/admin/users/:username/groups"],"duration":39,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests: User Admin Routes (/api/admin/users) User Group Management GET /api/admin/users/:username/groups should return 200 OK and list groups for user","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 200 OK and list groups for user"},{"ancestorTitles":["Integration Tests: User Admin Routes (/api/admin/users)","User Group Management","GET /api/admin/users/:username/groups"],"duration":39,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests: User Admin Routes (/api/admin/users) User Group Management GET /api/admin/users/:username/groups should return 404 if user not found (via service error)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 404 if user not found (via service error)"},{"ancestorTitles":["Integration Tests: User Admin Routes (/api/admin/users)","User Group Management","DELETE /api/admin/users/:username/groups/:groupName"],"duration":43,"failureDetails":[{}],"failureMessages":["Error: expected 204 \"No Content\", got 500 \"Internal Server Error\"\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\user.admin.routes.integration.spec.ts:660:22\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\user.admin.routes.integration.spec.ts:9:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\user.admin.routes.integration.spec.ts:5:12)\n    at Object.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\user.admin.routes.integration.spec.ts:655:89)\n    at Promise.then.completed (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\testWorker.js:108:12)\n----\n    at Test._assertStatus (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:309:14)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:365:13\n    at Test._assertFunction (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:342:13)\n    at Test.assert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:195:23)\n    at localAssert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:138:14)\n    at Server.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:152:11)\n    at Object.onceWrapper (node:events:633:28)\n    at Server.emit (node:events:519:28)\n    at emitCloseNT (node:net:2419:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"fullName":"Integration Tests: User Admin Routes (/api/admin/users) User Group Management DELETE /api/admin/users/:username/groups/:groupName should return 204 No Content when removing user from group","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 204 No Content when removing user from group"},{"ancestorTitles":["Integration Tests: User Admin Routes (/api/admin/users)","User Group Management","DELETE /api/admin/users/:username/groups/:groupName"],"duration":41,"failureDetails":[{}],"failureMessages":["Error: expected 404 \"Not Found\", got 500 \"Internal Server Error\"\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\user.admin.routes.integration.spec.ts:670:22\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\user.admin.routes.integration.spec.ts:9:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\user.admin.routes.integration.spec.ts:5:12)\n    at Object.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\user.admin.routes.integration.spec.ts:664:92)\n    at Promise.then.completed (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\testWorker.js:108:12)\n----\n    at Test._assertStatus (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:309:14)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:365:13\n    at Test._assertFunction (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:342:13)\n    at Test.assert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:195:23)\n    at localAssert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:138:14)\n    at Server.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:152:11)\n    at Object.onceWrapper (node:events:633:28)\n    at Server.emit (node:events:519:28)\n    at emitCloseNT (node:net:2419:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"fullName":"Integration Tests: User Admin Routes (/api/admin/users) User Group Management DELETE /api/admin/users/:username/groups/:groupName should return 404 if user/group not found (via service error)","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 404 if user/group not found (via service error)"},{"ancestorTitles":["Integration Tests: User Admin Routes (/api/admin/users)","User Group Management","DELETE /api/admin/users/:username"],"duration":37,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests: User Admin Routes (/api/admin/users) User Group Management DELETE /api/admin/users/:username should return 204 No Content if service succeeds","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 204 No Content if service succeeds"},{"ancestorTitles":["Integration Tests: User Admin Routes (/api/admin/users)","User Group Management","DELETE /api/admin/users/:username"],"duration":44,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests: User Admin Routes (/api/admin/users) User Group Management DELETE /api/admin/users/:username should return 404 Not Found if service throws UserNotFoundError","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 404 Not Found if service throws UserNotFoundError"},{"ancestorTitles":["Integration Tests: User Admin Routes (/api/admin/users)","User Group Management","DELETE /api/admin/users/:username"],"duration":53,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests: User Admin Routes (/api/admin/users) User Group Management DELETE /api/admin/users/:username should return 500 if service fails unexpectedly","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 500 if service fails unexpectedly"}],"endTime":1771844450705,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mIntegration Tests: User Admin Routes (/api/admin/users) › Authentication Guard › should allow access with the correct test bypass token\u001b[39m\u001b[22m\n\n    expected 200 \"OK\", got 500 \"Internal Server Error\"\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 234 |\u001b[39m                 \u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[32m'/api/admin/users'\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m 235 |\u001b[39m                 \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[33mTEST_ADMIN_TOKEN\u001b[39m)\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 236 |\u001b[39m                 \u001b[33m.\u001b[39mexpect(\u001b[33mHttpStatusCode\u001b[39m\u001b[33m.\u001b[39m\u001b[33mOK\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// 200\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                  \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 237 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 238 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 239 |\u001b[39m     \u001b[90m// --- POST Create User ---\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/user.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:236:18\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/user.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:9:71\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous>.__awaiter (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/user.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:5:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/user.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:231:81)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      ----\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertStatus (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:309:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:365:13\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertFunction (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:342:13)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.assert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:195:23)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat localAssert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:138:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Server.<anonymous> (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:152:11)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mIntegration Tests: User Admin Routes (/api/admin/users) › POST /api/admin/users › should return 400 Bad Request if validation fails\u001b[39m\u001b[22m\n\n    expected 400 \"Bad Request\", got 201 \"Created\"\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 275 |\u001b[39m                 \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[33mMOCK_AUTH_HEADER\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m 276 |\u001b[39m                 \u001b[33m.\u001b[39msend(invalidPayload)\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 277 |\u001b[39m                 \u001b[33m.\u001b[39mexpect(\u001b[33mHttpStatusCode\u001b[39m\u001b[33m.\u001b[39m\u001b[33mBAD_REQUEST\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// 400\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                  \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 278 |\u001b[39m             expect(mockUserAdminService\u001b[33m.\u001b[39mcreateUser)\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 279 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 280 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/user.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:277:18\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/user.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:9:71\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous>.__awaiter (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/user.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:5:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/user.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:271:76)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      ----\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertStatus (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:309:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:365:13\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertFunction (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:342:13)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.assert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:195:23)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat localAssert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:138:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Server.<anonymous> (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:152:11)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mIntegration Tests: User Admin Routes (/api/admin/users) › GET /api/admin/users › should return 200 OK with a list of users\u001b[39m\u001b[22m\n\n    expected 200 \"OK\", got 500 \"Internal Server Error\"\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 313 |\u001b[39m                 \u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[32m'/api/admin/users'\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m 314 |\u001b[39m                 \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[33mMOCK_AUTH_HEADER\u001b[39m)\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 315 |\u001b[39m                 \u001b[33m.\u001b[39mexpect(\u001b[33mHttpStatusCode\u001b[39m\u001b[33m.\u001b[39m\u001b[33mOK\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// 200\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                  \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 316 |\u001b[39m             expect(mockUserAdminService\u001b[33m.\u001b[39mlistUsers)\u001b[33m.\u001b[39mtoHaveBeenCalledTimes(\u001b[35m1\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 317 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 318 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/user.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:315:18\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/user.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:9:71\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous>.__awaiter (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/user.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:5:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/user.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:306:68)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      ----\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertStatus (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:309:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:365:13\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertFunction (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:342:13)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.assert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:195:23)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat localAssert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:138:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Server.<anonymous> (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:152:11)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mIntegration Tests: User Admin Routes (/api/admin/users) › GET /api/admin/users › should pass query parameters to the service\u001b[39m\u001b[22m\n\n    expected 200 \"OK\", got 500 \"Internal Server Error\"\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 323 |\u001b[39m                 \u001b[33m.\u001b[39mquery({ limit\u001b[33m:\u001b[39m \u001b[35m5\u001b[39m\u001b[33m,\u001b[39m filter\u001b[33m:\u001b[39m \u001b[32m'status=\"Enabled\"'\u001b[39m\u001b[33m,\u001b[39m paginationToken\u001b[33m:\u001b[39m \u001b[32m'prev'\u001b[39m })\u001b[22m\n\u001b[2m     \u001b[90m 324 |\u001b[39m                 \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[33mMOCK_AUTH_HEADER\u001b[39m)\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 325 |\u001b[39m                 \u001b[33m.\u001b[39mexpect(\u001b[33mHttpStatusCode\u001b[39m\u001b[33m.\u001b[39m\u001b[33mOK\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                  \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 326 |\u001b[39m             expect(mockUserAdminService\u001b[33m.\u001b[39mlistUsers)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(expect\u001b[33m.\u001b[39manything()\u001b[33m,\u001b[39m { limit\u001b[33m:\u001b[39m \u001b[35m5\u001b[39m\u001b[33m,\u001b[39m filter\u001b[33m:\u001b[39m \u001b[32m'status=\"Enabled\"'\u001b[39m\u001b[33m,\u001b[39m paginationToken\u001b[33m:\u001b[39m \u001b[32m'prev'\u001b[39m })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 327 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 328 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/user.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:325:18\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/user.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:9:71\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous>.__awaiter (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/user.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:5:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/user.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:319:70)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      ----\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertStatus (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:309:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:365:13\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertFunction (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:342:13)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.assert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:195:23)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat localAssert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:138:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Server.<anonymous> (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:152:11)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mIntegration Tests: User Admin Routes (/api/admin/users) › GET /api/admin/users › should return 500 if the service fails unexpectedly\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledTimes\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected number of calls: \u001b[32m1\u001b[39m\n    Received number of calls: \u001b[31m0\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 334 |\u001b[39m                 \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[33mMOCK_AUTH_HEADER\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m 335 |\u001b[39m                 \u001b[33m.\u001b[39mexpect(\u001b[33mHttpStatusCode\u001b[39m\u001b[33m.\u001b[39m\u001b[33mINTERNAL_SERVER_ERROR\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// 500\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 336 |\u001b[39m             expect(mockUserAdminService\u001b[33m.\u001b[39mlistUsers)\u001b[33m.\u001b[39mtoHaveBeenCalledTimes(\u001b[35m1\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                                    \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 337 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 338 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 339 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/user.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:336:52\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat fulfilled (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/user.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:6:58)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mIntegration Tests: User Admin Routes (/api/admin/users) › User Group Management › DELETE /api/admin/users/:username/groups/:groupName › should return 204 No Content when removing user from group\u001b[39m\u001b[22m\n\n    expected 204 \"No Content\", got 500 \"Internal Server Error\"\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 658 |\u001b[39m                     \u001b[33m.\u001b[39m\u001b[36mdelete\u001b[39m(\u001b[32m`/api/admin/users/${targetUsername}/groups/${testGroupName}`\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m 659 |\u001b[39m                     \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[33mMOCK_AUTH_HEADER\u001b[39m)\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 660 |\u001b[39m                     \u001b[33m.\u001b[39mexpect(\u001b[33mHttpStatusCode\u001b[39m\u001b[33m.\u001b[39m\u001b[33mNO_CONTENT\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// 204\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 661 |\u001b[39m                 expect(mockUserAdminService\u001b[33m.\u001b[39mremoveUserFromGroup)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(expect\u001b[33m.\u001b[39manything()\u001b[33m,\u001b[39m targetUsername\u001b[33m,\u001b[39m testGroupName)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 662 |\u001b[39m             })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 663 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/user.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:660:22\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/user.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:9:71\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous>.__awaiter (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/user.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:5:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/user.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:655:89)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      ----\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertStatus (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:309:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:365:13\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertFunction (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:342:13)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.assert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:195:23)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat localAssert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:138:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Server.<anonymous> (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:152:11)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mIntegration Tests: User Admin Routes (/api/admin/users) › User Group Management › DELETE /api/admin/users/:username/groups/:groupName › should return 404 if user/group not found (via service error)\u001b[39m\u001b[22m\n\n    expected 404 \"Not Found\", got 500 \"Internal Server Error\"\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 668 |\u001b[39m                     \u001b[33m.\u001b[39m\u001b[36mdelete\u001b[39m(\u001b[32m`/api/admin/users/${targetUsername}/groups/${testGroupName}`\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m 669 |\u001b[39m                     \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[33mMOCK_AUTH_HEADER\u001b[39m)\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 670 |\u001b[39m                     \u001b[33m.\u001b[39mexpect(\u001b[33mHttpStatusCode\u001b[39m\u001b[33m.\u001b[39m\u001b[33mNOT_FOUND\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// 404\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 671 |\u001b[39m                 expect(mockUserAdminService\u001b[33m.\u001b[39mremoveUserFromGroup)\u001b[33m.\u001b[39mtoHaveBeenCalledTimes(\u001b[35m1\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 672 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 673 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/user.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:670:22\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/user.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:9:71\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous>.__awaiter (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/user.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:5:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/user.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:664:92)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      ----\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertStatus (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:309:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:365:13\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertFunction (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:342:13)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.assert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:195:23)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat localAssert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:138:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Server.<anonymous> (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:152:11)\u001b[22m\u001b[2m\u001b[22m\n","name":"E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\user.admin.routes.integration.spec.ts","startTime":1771844397935,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["User Admin E2E"],"duration":459,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32mAny<String>\u001b[39m, \u001b[32m{\"temporaryPassword\": \"Password123!\", \"userAttributes\": {\"email\": \"test-user-1771844448911@example.com\", \"name\": \"Test User\"}, \"username\": \"test-user-1771844448911\"}\u001b[39m\nReceived: \u001b[31m{\"body\": {\"temporaryPassword\": \"Password123!\", \"userAttributes\": {\"email\": \"test-user-1771844448911@example.com\", \"name\": \"Test User\"}, \"username\": \"test-user-1771844448911\"}}\u001b[39m\n\nNumber of calls: \u001b[31m1\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32mAny<String>\u001b[39m, \u001b[32m{\"temporaryPassword\": \"Password123!\", \"userAttributes\": {\"email\": \"test-user-1771844448911@example.com\", \"name\": \"Test User\"}, \"username\": \"test-user-1771844448911\"}\u001b[39m\nReceived: \u001b[31m{\"body\": {\"temporaryPassword\": \"Password123!\", \"userAttributes\": {\"email\": \"test-user-1771844448911@example.com\", \"name\": \"Test User\"}, \"username\": \"test-user-1771844448911\"}}\u001b[39m\n\nNumber of calls: \u001b[31m1\u001b[39m\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\e2e\\user.admin.e2e.spec.ts:55:53\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\e2e\\user.admin.e2e.spec.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"User Admin E2E should create a new user","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"failed","title":"should create a new user"},{"ancestorTitles":["User Admin E2E"],"duration":90,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32mAny<String>\u001b[39m, \u001b[32m\"test-user-1771844448911\"\u001b[39m\nReceived: \u001b[2m\"test-user-1771844448911\"\u001b[22m\n\nNumber of calls: \u001b[31m1\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32mAny<String>\u001b[39m, \u001b[32m\"test-user-1771844448911\"\u001b[39m\nReceived: \u001b[2m\"test-user-1771844448911\"\u001b[22m\n\nNumber of calls: \u001b[31m1\u001b[39m\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\e2e\\user.admin.e2e.spec.ts:68:50\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\e2e\\user.admin.e2e.spec.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"User Admin E2E should get the created user","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"failed","title":"should get the created user"},{"ancestorTitles":["User Admin E2E"],"duration":69,"failureDetails":[{}],"failureMessages":["Error: expected 204 \"No Content\", got 404 \"Not Found\"\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\e2e\\user.admin.e2e.spec.ts:83:14\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\e2e\\user.admin.e2e.spec.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\e2e\\user.admin.e2e.spec.ts:4:12)\n    at Object.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\e2e\\user.admin.e2e.spec.ts:71:56)\n    at Promise.then.completed (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\testWorker.js:108:12)\n----\n    at Test._assertStatus (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:309:14)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:365:13\n    at Test._assertFunction (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:342:13)\n    at Test.assert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:195:23)\n    at localAssert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:138:14)\n    at Server.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:152:11)\n    at Object.onceWrapper (node:events:633:28)\n    at Server.emit (node:events:519:28)\n    at emitCloseNT (node:net:2419:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"fullName":"User Admin E2E should update the user attributes","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should update the user attributes"},{"ancestorTitles":["User Admin E2E"],"duration":67,"failureDetails":[{}],"failureMessages":["Error: expected 204 \"No Content\", got 200 \"OK\"\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\e2e\\user.admin.e2e.spec.ts:98:14\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\e2e\\user.admin.e2e.spec.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\e2e\\user.admin.e2e.spec.ts:4:12)\n    at Object.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\e2e\\user.admin.e2e.spec.ts:91:51)\n    at Promise.then.completed (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\testWorker.js:108:12)\n----\n    at Test._assertStatus (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:309:14)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:365:13\n    at Test._assertFunction (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:342:13)\n    at Test.assert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:195:23)\n    at localAssert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:138:14)\n    at Server.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:152:11)\n    at Object.onceWrapper (node:events:633:28)\n    at Server.emit (node:events:519:28)\n    at emitCloseNT (node:net:2419:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"fullName":"User Admin E2E should add a user to a group","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should add a user to a group"},{"ancestorTitles":["User Admin E2E"],"duration":51,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32mAny<String>\u001b[39m, \u001b[32m\"test-user-1771844448911\"\u001b[39m, \u001b[32mundefined\u001b[39m, \u001b[32mundefined\u001b[39m\nReceived: \u001b[2m\"test-user-1771844448911\"\u001b[22m, \u001b[31mundefined\u001b[39m, \u001b[2mundefined\u001b[22m\n\nNumber of calls: \u001b[31m1\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32mAny<String>\u001b[39m, \u001b[32m\"test-user-1771844448911\"\u001b[39m, \u001b[32mundefined\u001b[39m, \u001b[32mundefined\u001b[39m\nReceived: \u001b[2m\"test-user-1771844448911\"\u001b[22m, \u001b[31mundefined\u001b[39m, \u001b[2mundefined\u001b[22m\n\nNumber of calls: \u001b[31m1\u001b[39m\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\e2e\\user.admin.e2e.spec.ts:113:60\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\e2e\\user.admin.e2e.spec.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"User Admin E2E should list the user's groups","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"failed","title":"should list the user's groups"},{"ancestorTitles":["User Admin E2E"],"duration":60,"failureDetails":[{}],"failureMessages":["Error: expected 204 \"No Content\", got 500 \"Internal Server Error\"\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\e2e\\user.admin.e2e.spec.ts:122:14\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\e2e\\user.admin.e2e.spec.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\e2e\\user.admin.e2e.spec.ts:4:12)\n    at Object.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\e2e\\user.admin.e2e.spec.ts:116:60)\n    at Promise.then.completed (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\testWorker.js:108:12)\n----\n    at Test._assertStatus (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:309:14)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:365:13\n    at Test._assertFunction (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:342:13)\n    at Test.assert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:195:23)\n    at localAssert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:138:14)\n    at Server.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:152:11)\n    at Object.onceWrapper (node:events:633:28)\n    at Server.emit (node:events:519:28)\n    at emitCloseNT (node:net:2419:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"fullName":"User Admin E2E should remove the user from the group","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should remove the user from the group"},{"ancestorTitles":["User Admin E2E"],"duration":40,"failureDetails":[{}],"failureMessages":["Error: expected 204 \"No Content\", got 404 \"Not Found\"\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\e2e\\user.admin.e2e.spec.ts:133:14\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\e2e\\user.admin.e2e.spec.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\e2e\\user.admin.e2e.spec.ts:4:12)\n    at Object.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\e2e\\user.admin.e2e.spec.ts:127:46)\n    at Promise.then.completed (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\testWorker.js:108:12)\n----\n    at Test._assertStatus (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:309:14)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:365:13\n    at Test._assertFunction (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:342:13)\n    at Test.assert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:195:23)\n    at localAssert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:138:14)\n    at Server.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:152:11)\n    at Object.onceWrapper (node:events:633:28)\n    at Server.emit (node:events:519:28)\n    at emitCloseNT (node:net:2419:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"fullName":"User Admin E2E should disable the user","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should disable the user"},{"ancestorTitles":["User Admin E2E"],"duration":51,"failureDetails":[{}],"failureMessages":["Error: expected 204 \"No Content\", got 404 \"Not Found\"\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\e2e\\user.admin.e2e.spec.ts:144:14\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\e2e\\user.admin.e2e.spec.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\e2e\\user.admin.e2e.spec.ts:4:12)\n    at Object.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\e2e\\user.admin.e2e.spec.ts:138:45)\n    at Promise.then.completed (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\testWorker.js:108:12)\n----\n    at Test._assertStatus (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:309:14)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:365:13\n    at Test._assertFunction (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:342:13)\n    at Test.assert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:195:23)\n    at localAssert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:138:14)\n    at Server.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:152:11)\n    at Object.onceWrapper (node:events:633:28)\n    at Server.emit (node:events:519:28)\n    at emitCloseNT (node:net:2419:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"fullName":"User Admin E2E should enable the user","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should enable the user"},{"ancestorTitles":["User Admin E2E"],"duration":57,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32mAny<String>\u001b[39m, \u001b[32m\"test-user-1771844448911\"\u001b[39m\nReceived: \u001b[2m\"test-user-1771844448911\"\u001b[22m\n\nNumber of calls: \u001b[31m1\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32mAny<String>\u001b[39m, \u001b[32m\"test-user-1771844448911\"\u001b[39m\nReceived: \u001b[2m\"test-user-1771844448911\"\u001b[22m\n\nNumber of calls: \u001b[31m1\u001b[39m\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\e2e\\user.admin.e2e.spec.ts:157:53\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\e2e\\user.admin.e2e.spec.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"User Admin E2E should delete the user","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should delete the user"}],"endTime":1771844451263,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mUser Admin E2E › should create a new user\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: \u001b[32mAny<String>\u001b[39m, \u001b[32m{\"temporaryPassword\": \"Password123!\", \"userAttributes\": {\"email\": \"test-user-1771844448911@example.com\", \"name\": \"Test User\"}, \"username\": \"test-user-1771844448911\"}\u001b[39m\n    Received: \u001b[31m{\"body\": {\"temporaryPassword\": \"Password123!\", \"userAttributes\": {\"email\": \"test-user-1771844448911@example.com\", \"name\": \"Test User\"}, \"username\": \"test-user-1771844448911\"}}\u001b[39m\n\n    Number of calls: \u001b[31m1\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 53 |\u001b[39m         expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m201\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// Added explicit status check\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 54 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39musername)\u001b[33m.\u001b[39mtoBe(username)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 55 |\u001b[39m         expect(userMgmtAdapterMock\u001b[33m.\u001b[39madminCreateUser)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(expect\u001b[33m.\u001b[39many(\u001b[33mString\u001b[39m)\u001b[33m,\u001b[39m userDetails)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 56 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 57 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 58 |\u001b[39m     it(\u001b[32m'should get the created user'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/e2e/user.admin.e2e.spec.ts\u001b[39m\u001b[0m\u001b[2m:55:53\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat fulfilled (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/e2e/user.admin.e2e.spec.ts\u001b[39m\u001b[0m\u001b[2m:5:58)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mUser Admin E2E › should get the created user\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: \u001b[32mAny<String>\u001b[39m, \u001b[32m\"test-user-1771844448911\"\u001b[39m\n    Received: \u001b[2m\"test-user-1771844448911\"\u001b[22m\n\n    Number of calls: \u001b[31m1\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 66 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 67 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39musername)\u001b[33m.\u001b[39mtoBe(username)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 68 |\u001b[39m         expect(userMgmtAdapterMock\u001b[33m.\u001b[39madminGetUser)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(expect\u001b[33m.\u001b[39many(\u001b[33mString\u001b[39m)\u001b[33m,\u001b[39m username)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 69 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 70 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 71 |\u001b[39m     it(\u001b[32m'should update the user attributes'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/e2e/user.admin.e2e.spec.ts\u001b[39m\u001b[0m\u001b[2m:68:50\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat fulfilled (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/e2e/user.admin.e2e.spec.ts\u001b[39m\u001b[0m\u001b[2m:5:58)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mUser Admin E2E › should update the user attributes\u001b[39m\u001b[22m\n\n    expected 204 \"No Content\", got 404 \"Not Found\"\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 81 |\u001b[39m             \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer ${adminToken}`\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m 82 |\u001b[39m             \u001b[33m.\u001b[39msend(attributesToUpdate)\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 83 |\u001b[39m             \u001b[33m.\u001b[39mexpect(\u001b[35m204\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m              \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 84 |\u001b[39m         \u001b[22m\n\u001b[2m     \u001b[90m 85 |\u001b[39m         expect(userMgmtAdapterMock\u001b[33m.\u001b[39madminUpdateUserAttributes)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(expect\u001b[33m.\u001b[39many(\u001b[33mString\u001b[39m)\u001b[33m,\u001b[39m { username\u001b[33m,\u001b[39m \u001b[33m...\u001b[39mattributesToUpdate })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 86 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/e2e/user.admin.e2e.spec.ts\u001b[39m\u001b[0m\u001b[2m:83:14\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/e2e/user.admin.e2e.spec.ts\u001b[39m\u001b[0m\u001b[2m:8:71\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous>.__awaiter (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/e2e/user.admin.e2e.spec.ts\u001b[39m\u001b[0m\u001b[2m:4:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/e2e/user.admin.e2e.spec.ts\u001b[39m\u001b[0m\u001b[2m:71:56)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      ----\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertStatus (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:309:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:365:13\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertFunction (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:342:13)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.assert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:195:23)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat localAssert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:138:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Server.<anonymous> (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:152:11)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mUser Admin E2E › should add a user to a group\u001b[39m\u001b[22m\n\n    expected 204 \"No Content\", got 200 \"OK\"\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m  96 |\u001b[39m             \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer ${adminToken}`\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m  97 |\u001b[39m             \u001b[33m.\u001b[39msend({ groupName })\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m  98 |\u001b[39m             \u001b[33m.\u001b[39mexpect(\u001b[35m204\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m              \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m  99 |\u001b[39m         \u001b[22m\n\u001b[2m     \u001b[90m 100 |\u001b[39m         expect(userMgmtAdapterMock\u001b[33m.\u001b[39madminAddUserToGroup)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(expect\u001b[33m.\u001b[39many(\u001b[33mString\u001b[39m)\u001b[33m,\u001b[39m username\u001b[33m,\u001b[39m groupName)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 101 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/e2e/user.admin.e2e.spec.ts\u001b[39m\u001b[0m\u001b[2m:98:14\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/e2e/user.admin.e2e.spec.ts\u001b[39m\u001b[0m\u001b[2m:8:71\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous>.__awaiter (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/e2e/user.admin.e2e.spec.ts\u001b[39m\u001b[0m\u001b[2m:4:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/e2e/user.admin.e2e.spec.ts\u001b[39m\u001b[0m\u001b[2m:91:51)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      ----\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertStatus (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:309:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:365:13\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertFunction (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:342:13)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.assert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:195:23)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat localAssert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:138:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Server.<anonymous> (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:152:11)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mUser Admin E2E › should list the user's groups\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: \u001b[32mAny<String>\u001b[39m, \u001b[32m\"test-user-1771844448911\"\u001b[39m, \u001b[32mundefined\u001b[39m, \u001b[32mundefined\u001b[39m\n    Received: \u001b[2m\"test-user-1771844448911\"\u001b[22m, \u001b[31mundefined\u001b[39m, \u001b[2mundefined\u001b[22m\n\n    Number of calls: \u001b[31m1\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 111 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 112 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mgroups[\u001b[35m0\u001b[39m]\u001b[33m.\u001b[39mgroupName)\u001b[33m.\u001b[39mtoBe(groupName)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 113 |\u001b[39m         expect(userMgmtAdapterMock\u001b[33m.\u001b[39madminListGroupsForUser)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(expect\u001b[33m.\u001b[39many(\u001b[33mString\u001b[39m)\u001b[33m,\u001b[39m username\u001b[33m,\u001b[39m undefined\u001b[33m,\u001b[39m undefined)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                                            \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 114 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 115 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 116 |\u001b[39m     it(\u001b[32m'should remove the user from the group'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/e2e/user.admin.e2e.spec.ts\u001b[39m\u001b[0m\u001b[2m:113:60\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat fulfilled (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/e2e/user.admin.e2e.spec.ts\u001b[39m\u001b[0m\u001b[2m:5:58)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mUser Admin E2E › should remove the user from the group\u001b[39m\u001b[22m\n\n    expected 204 \"No Content\", got 500 \"Internal Server Error\"\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 120 |\u001b[39m             \u001b[33m.\u001b[39m\u001b[36mdelete\u001b[39m(\u001b[32m`${BASE_API_PATH}/${username}/groups/${groupName}`\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m 121 |\u001b[39m             \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer ${adminToken}`\u001b[39m)\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 122 |\u001b[39m             \u001b[33m.\u001b[39mexpect(\u001b[35m204\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m              \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 123 |\u001b[39m         \u001b[22m\n\u001b[2m     \u001b[90m 124 |\u001b[39m         expect(userMgmtAdapterMock\u001b[33m.\u001b[39madminRemoveUserFromGroup)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(expect\u001b[33m.\u001b[39many(\u001b[33mString\u001b[39m)\u001b[33m,\u001b[39m username\u001b[33m,\u001b[39m groupName)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 125 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/e2e/user.admin.e2e.spec.ts\u001b[39m\u001b[0m\u001b[2m:122:14\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/e2e/user.admin.e2e.spec.ts\u001b[39m\u001b[0m\u001b[2m:8:71\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous>.__awaiter (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/e2e/user.admin.e2e.spec.ts\u001b[39m\u001b[0m\u001b[2m:4:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/e2e/user.admin.e2e.spec.ts\u001b[39m\u001b[0m\u001b[2m:116:60)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      ----\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertStatus (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:309:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:365:13\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertFunction (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:342:13)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.assert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:195:23)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat localAssert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:138:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Server.<anonymous> (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:152:11)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mUser Admin E2E › should disable the user\u001b[39m\u001b[22m\n\n    expected 204 \"No Content\", got 404 \"Not Found\"\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 131 |\u001b[39m             \u001b[33m.\u001b[39mpost(\u001b[32m`${BASE_API_PATH}/${username}/disable`\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m 132 |\u001b[39m             \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer ${adminToken}`\u001b[39m)\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 133 |\u001b[39m             \u001b[33m.\u001b[39mexpect(\u001b[35m204\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m              \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 134 |\u001b[39m         \u001b[22m\n\u001b[2m     \u001b[90m 135 |\u001b[39m         expect(userMgmtAdapterMock\u001b[33m.\u001b[39madminDisableUser)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(expect\u001b[33m.\u001b[39many(\u001b[33mString\u001b[39m)\u001b[33m,\u001b[39m username)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 136 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/e2e/user.admin.e2e.spec.ts\u001b[39m\u001b[0m\u001b[2m:133:14\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/e2e/user.admin.e2e.spec.ts\u001b[39m\u001b[0m\u001b[2m:8:71\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous>.__awaiter (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/e2e/user.admin.e2e.spec.ts\u001b[39m\u001b[0m\u001b[2m:4:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/e2e/user.admin.e2e.spec.ts\u001b[39m\u001b[0m\u001b[2m:127:46)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      ----\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertStatus (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:309:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:365:13\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertFunction (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:342:13)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.assert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:195:23)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat localAssert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:138:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Server.<anonymous> (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:152:11)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mUser Admin E2E › should enable the user\u001b[39m\u001b[22m\n\n    expected 204 \"No Content\", got 404 \"Not Found\"\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 142 |\u001b[39m             \u001b[33m.\u001b[39mpost(\u001b[32m`${BASE_API_PATH}/${username}/enable`\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m 143 |\u001b[39m             \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer ${adminToken}`\u001b[39m)\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 144 |\u001b[39m             \u001b[33m.\u001b[39mexpect(\u001b[35m204\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m              \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 145 |\u001b[39m         \u001b[22m\n\u001b[2m     \u001b[90m 146 |\u001b[39m         expect(userMgmtAdapterMock\u001b[33m.\u001b[39madminEnableUser)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(expect\u001b[33m.\u001b[39many(\u001b[33mString\u001b[39m)\u001b[33m,\u001b[39m username)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 147 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/e2e/user.admin.e2e.spec.ts\u001b[39m\u001b[0m\u001b[2m:144:14\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/e2e/user.admin.e2e.spec.ts\u001b[39m\u001b[0m\u001b[2m:8:71\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous>.__awaiter (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/e2e/user.admin.e2e.spec.ts\u001b[39m\u001b[0m\u001b[2m:4:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/e2e/user.admin.e2e.spec.ts\u001b[39m\u001b[0m\u001b[2m:138:45)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      ----\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertStatus (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:309:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:365:13\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertFunction (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:342:13)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.assert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:195:23)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat localAssert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:138:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Server.<anonymous> (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:152:11)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mUser Admin E2E › should delete the user\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: \u001b[32mAny<String>\u001b[39m, \u001b[32m\"test-user-1771844448911\"\u001b[39m\n    Received: \u001b[2m\"test-user-1771844448911\"\u001b[22m\n\n    Number of calls: \u001b[31m1\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 155 |\u001b[39m             \u001b[33m.\u001b[39mexpect(\u001b[35m204\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 156 |\u001b[39m         \u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 157 |\u001b[39m         expect(userMgmtAdapterMock\u001b[33m.\u001b[39madminDeleteUser)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(expect\u001b[33m.\u001b[39many(\u001b[33mString\u001b[39m)\u001b[33m,\u001b[39m username)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 158 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 159 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/e2e/user.admin.e2e.spec.ts\u001b[39m\u001b[0m\u001b[2m:157:53\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat fulfilled (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/e2e/user.admin.e2e.spec.ts\u001b[39m\u001b[0m\u001b[2m:5:58)\u001b[22m\u001b[2m\u001b[22m\n","name":"E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\e2e\\user.admin.e2e.spec.ts","startTime":1771844397843,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Group Admin E2E"],"duration":603,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32mAny<String>\u001b[39m, \u001b[32m{\"description\": \"A test group for e2e tests\", \"groupName\": \"test-group-1771844449092\"}\u001b[39m\nReceived: \u001b[31m{\"description\": \"A test group for e2e tests\", \"groupName\": \"test-group-1771844449092\"}\u001b[39m\n\nNumber of calls: \u001b[31m1\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32mAny<String>\u001b[39m, \u001b[32m{\"description\": \"A test group for e2e tests\", \"groupName\": \"test-group-1771844449092\"}\u001b[39m\nReceived: \u001b[31m{\"description\": \"A test group for e2e tests\", \"groupName\": \"test-group-1771844449092\"}\u001b[39m\n\nNumber of calls: \u001b[31m1\u001b[39m\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\e2e\\group.admin.e2e.spec.ts:47:54\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\e2e\\group.admin.e2e.spec.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"Group Admin E2E should create a new group","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"failed","title":"should create a new group"},{"ancestorTitles":["Group Admin E2E"],"duration":82,"failureDetails":[{}],"failureMessages":["Error: expected 200 \"OK\", got 500 \"Internal Server Error\"\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\e2e\\group.admin.e2e.spec.ts:56:14\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\e2e\\group.admin.e2e.spec.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\e2e\\group.admin.e2e.spec.ts:4:12)\n    at Object.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\e2e\\group.admin.e2e.spec.ts:50:51)\n    at Promise.then.completed (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\testWorker.js:108:12)\n----\n    at Test._assertStatus (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:309:14)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:365:13\n    at Test._assertFunction (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:342:13)\n    at Test.assert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:195:23)\n    at localAssert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:138:14)\n    at Server.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:152:11)\n    at Object.onceWrapper (node:events:633:28)\n    at Server.emit (node:events:519:28)\n    at emitCloseNT (node:net:2419:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"fullName":"Group Admin E2E should get the created group","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should get the created group"},{"ancestorTitles":["Group Admin E2E"],"duration":55,"failureDetails":[],"failureMessages":[],"fullName":"Group Admin E2E should assign a role to the group","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should assign a role to the group"},{"ancestorTitles":["Group Admin E2E"],"duration":67,"failureDetails":[{}],"failureMessages":["Error: expected 200 \"OK\", got 500 \"Internal Server Error\"\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\e2e\\group.admin.e2e.spec.ts:83:14\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\e2e\\group.admin.e2e.spec.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\e2e\\group.admin.e2e.spec.ts:4:12)\n    at Object.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\e2e\\group.admin.e2e.spec.ts:76:58)\n    at Promise.then.completed (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\testWorker.js:108:12)\n----\n    at Test._assertStatus (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:309:14)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:365:13\n    at Test._assertFunction (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:342:13)\n    at Test.assert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:195:23)\n    at localAssert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:138:14)\n    at Server.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:152:11)\n    at Object.onceWrapper (node:events:633:28)\n    at Server.emit (node:events:519:28)\n    at emitCloseNT (node:net:2419:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"fullName":"Group Admin E2E should list the roles for the group","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should list the roles for the group"},{"ancestorTitles":["Group Admin E2E"],"duration":52,"failureDetails":[{}],"failureMessages":["Error: expected 204 \"No Content\", got 500 \"Internal Server Error\"\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\e2e\\group.admin.e2e.spec.ts:95:14\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\e2e\\group.admin.e2e.spec.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\e2e\\group.admin.e2e.spec.ts:4:12)\n    at Object.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\e2e\\group.admin.e2e.spec.ts:89:60)\n    at Promise.then.completed (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\testWorker.js:108:12)\n----\n    at Test._assertStatus (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:309:14)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:365:13\n    at Test._assertFunction (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:342:13)\n    at Test.assert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:195:23)\n    at localAssert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:138:14)\n    at Server.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:152:11)\n    at Object.onceWrapper (node:events:633:28)\n    at Server.emit (node:events:519:28)\n    at emitCloseNT (node:net:2419:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"fullName":"Group Admin E2E should remove the role from the group","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should remove the role from the group"},{"ancestorTitles":["Group Admin E2E"],"duration":49,"failureDetails":[{}],"failureMessages":["Error: expected 204 \"No Content\", got 500 \"Internal Server Error\"\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\e2e\\group.admin.e2e.spec.ts:106:14\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\e2e\\group.admin.e2e.spec.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\e2e\\group.admin.e2e.spec.ts:4:12)\n    at Object.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\e2e\\group.admin.e2e.spec.ts:100:46)\n    at Promise.then.completed (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\testWorker.js:108:12)\n----\n    at Test._assertStatus (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:309:14)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:365:13\n    at Test._assertFunction (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:342:13)\n    at Test.assert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:195:23)\n    at localAssert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:138:14)\n    at Server.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:152:11)\n    at Object.onceWrapper (node:events:633:28)\n    at Server.emit (node:events:519:28)\n    at emitCloseNT (node:net:2419:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"fullName":"Group Admin E2E should delete the group","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should delete the group"}],"endTime":1771844451276,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mGroup Admin E2E › should create a new group\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: \u001b[32mAny<String>\u001b[39m, \u001b[32m{\"description\": \"A test group for e2e tests\", \"groupName\": \"test-group-1771844449092\"}\u001b[39m\n    Received: \u001b[31m{\"description\": \"A test group for e2e tests\", \"groupName\": \"test-group-1771844449092\"}\u001b[39m\n\n    Number of calls: \u001b[31m1\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 45 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 46 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mgroupName)\u001b[33m.\u001b[39mtoBe(groupName)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 47 |\u001b[39m         expect(userMgmtAdapterMock\u001b[33m.\u001b[39madminCreateGroup)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(expect\u001b[33m.\u001b[39many(\u001b[33mString\u001b[39m)\u001b[33m,\u001b[39m groupDetails)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 48 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 49 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 50 |\u001b[39m     it(\u001b[32m'should get the created group'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/e2e/group.admin.e2e.spec.ts\u001b[39m\u001b[0m\u001b[2m:47:54\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat fulfilled (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/e2e/group.admin.e2e.spec.ts\u001b[39m\u001b[0m\u001b[2m:5:58)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mGroup Admin E2E › should get the created group\u001b[39m\u001b[22m\n\n    expected 200 \"OK\", got 500 \"Internal Server Error\"\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 54 |\u001b[39m             \u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[32m`${BASE_API_PATH}/${groupName}`\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m 55 |\u001b[39m             \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer ${adminToken}`\u001b[39m)\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 56 |\u001b[39m             \u001b[33m.\u001b[39mexpect(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m              \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 57 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 58 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mgroupName)\u001b[33m.\u001b[39mtoBe(groupName)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 59 |\u001b[39m         expect(userMgmtAdapterMock\u001b[33m.\u001b[39madminGetGroup)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(expect\u001b[33m.\u001b[39many(\u001b[33mString\u001b[39m)\u001b[33m,\u001b[39m groupName)\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/e2e/group.admin.e2e.spec.ts\u001b[39m\u001b[0m\u001b[2m:56:14\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/e2e/group.admin.e2e.spec.ts\u001b[39m\u001b[0m\u001b[2m:8:71\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous>.__awaiter (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/e2e/group.admin.e2e.spec.ts\u001b[39m\u001b[0m\u001b[2m:4:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/e2e/group.admin.e2e.spec.ts\u001b[39m\u001b[0m\u001b[2m:50:51)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      ----\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertStatus (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:309:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:365:13\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertFunction (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:342:13)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.assert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:195:23)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat localAssert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:138:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Server.<anonymous> (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:152:11)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mGroup Admin E2E › should list the roles for the group\u001b[39m\u001b[22m\n\n    expected 200 \"OK\", got 500 \"Internal Server Error\"\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 81 |\u001b[39m             \u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[32m`${BASE_API_PATH}/${groupName}/roles`\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m 82 |\u001b[39m             \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer ${adminToken}`\u001b[39m)\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 83 |\u001b[39m             \u001b[33m.\u001b[39mexpect(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m              \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 84 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 85 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mroles)\u001b[33m.\u001b[39mtoContain(roleName)\u001b[33m;\u001b[39m \u001b[90m// Changed to response.body.roles\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 86 |\u001b[39m         expect(assignmentRepositoryMock\u001b[33m.\u001b[39mfindRolesByGroupName)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(expect\u001b[33m.\u001b[39many(\u001b[33mString\u001b[39m)\u001b[33m,\u001b[39m groupName)\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/e2e/group.admin.e2e.spec.ts\u001b[39m\u001b[0m\u001b[2m:83:14\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/e2e/group.admin.e2e.spec.ts\u001b[39m\u001b[0m\u001b[2m:8:71\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous>.__awaiter (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/e2e/group.admin.e2e.spec.ts\u001b[39m\u001b[0m\u001b[2m:4:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/e2e/group.admin.e2e.spec.ts\u001b[39m\u001b[0m\u001b[2m:76:58)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      ----\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertStatus (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:309:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:365:13\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertFunction (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:342:13)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.assert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:195:23)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat localAssert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:138:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Server.<anonymous> (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:152:11)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mGroup Admin E2E › should remove the role from the group\u001b[39m\u001b[22m\n\n    expected 204 \"No Content\", got 500 \"Internal Server Error\"\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 93 |\u001b[39m             \u001b[33m.\u001b[39m\u001b[36mdelete\u001b[39m(\u001b[32m`${BASE_API_PATH}/${groupName}/roles/${roleName}`\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m 94 |\u001b[39m             \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer ${adminToken}`\u001b[39m)\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 95 |\u001b[39m             \u001b[33m.\u001b[39mexpect(\u001b[35m204\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m              \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 96 |\u001b[39m         \u001b[22m\n\u001b[2m     \u001b[90m 97 |\u001b[39m         expect(assignmentRepositoryMock\u001b[33m.\u001b[39mremoveRoleFromGroup)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(expect\u001b[33m.\u001b[39many(\u001b[33mString\u001b[39m)\u001b[33m,\u001b[39m groupName\u001b[33m,\u001b[39m roleName)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 98 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/e2e/group.admin.e2e.spec.ts\u001b[39m\u001b[0m\u001b[2m:95:14\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/e2e/group.admin.e2e.spec.ts\u001b[39m\u001b[0m\u001b[2m:8:71\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous>.__awaiter (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/e2e/group.admin.e2e.spec.ts\u001b[39m\u001b[0m\u001b[2m:4:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/e2e/group.admin.e2e.spec.ts\u001b[39m\u001b[0m\u001b[2m:89:60)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      ----\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertStatus (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:309:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:365:13\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertFunction (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:342:13)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.assert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:195:23)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat localAssert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:138:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Server.<anonymous> (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:152:11)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mGroup Admin E2E › should delete the group\u001b[39m\u001b[22m\n\n    expected 204 \"No Content\", got 500 \"Internal Server Error\"\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 104 |\u001b[39m             \u001b[33m.\u001b[39m\u001b[36mdelete\u001b[39m(\u001b[32m`${BASE_API_PATH}/${groupName}`\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m 105 |\u001b[39m             \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer ${adminToken}`\u001b[39m)\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 106 |\u001b[39m             \u001b[33m.\u001b[39mexpect(\u001b[35m204\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m              \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 107 |\u001b[39m         \u001b[22m\n\u001b[2m     \u001b[90m 108 |\u001b[39m         expect(userMgmtAdapterMock\u001b[33m.\u001b[39madminDeleteGroup)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(expect\u001b[33m.\u001b[39many(\u001b[33mString\u001b[39m)\u001b[33m,\u001b[39m groupName)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 109 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/e2e/group.admin.e2e.spec.ts\u001b[39m\u001b[0m\u001b[2m:106:14\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/e2e/group.admin.e2e.spec.ts\u001b[39m\u001b[0m\u001b[2m:8:71\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous>.__awaiter (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/e2e/group.admin.e2e.spec.ts\u001b[39m\u001b[0m\u001b[2m:4:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/e2e/group.admin.e2e.spec.ts\u001b[39m\u001b[0m\u001b[2m:100:46)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      ----\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertStatus (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:309:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:365:13\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertFunction (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:342:13)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.assert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:195:23)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat localAssert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:138:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Server.<anonymous> (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:152:11)\u001b[22m\u001b[2m\u001b[22m\n","name":"E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\e2e\\group.admin.e2e.spec.ts","startTime":1771844398124,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["RoleAdminService","createRole"],"duration":30,"failureDetails":[],"failureMessages":[],"fullName":"RoleAdminService createRole should create a role successfully","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should create a role successfully"},{"ancestorTitles":["RoleAdminService","createRole"],"duration":94,"failureDetails":[],"failureMessages":[],"fullName":"RoleAdminService createRole should throw RoleExistsError if role already exists","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should throw RoleExistsError if role already exists"},{"ancestorTitles":["RoleAdminService","getRole"],"duration":20,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32m\"test-role\"\u001b[39m\nReceived: \u001b[31m\"test-tenant\"\u001b[39m, \u001b[31m\"test-role\"\u001b[39m\n\nNumber of calls: \u001b[31m1\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32m\"test-role\"\u001b[39m\nReceived: \u001b[31m\"test-tenant\"\u001b[39m, \u001b[31m\"test-role\"\u001b[39m\n\nNumber of calls: \u001b[31m1\u001b[39m\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\unit\\application\\services\\role.admin.service.spec.ts:98:45\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\unit\\application\\services\\role.admin.service.spec.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"RoleAdminService getRole should return a role if found","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return a role if found"},{"ancestorTitles":["RoleAdminService","getRole"],"duration":14,"failureDetails":[],"failureMessages":[],"fullName":"RoleAdminService getRole should return null if role not found","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return null if role not found"},{"ancestorTitles":["RoleAdminService","listRoles"],"duration":11,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32m{}\u001b[39m\nReceived: \u001b[31m\"test-tenant\"\u001b[39m, \u001b[31m{}\u001b[39m\n\nNumber of calls: \u001b[31m1\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32m{}\u001b[39m\nReceived: \u001b[31m\"test-tenant\"\u001b[39m, \u001b[31m{}\u001b[39m\n\nNumber of calls: \u001b[31m1\u001b[39m\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\unit\\application\\services\\role.admin.service.spec.ts:118:39\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\unit\\application\\services\\role.admin.service.spec.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"RoleAdminService listRoles should list roles","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should list roles"},{"ancestorTitles":["RoleAdminService","updateRole"],"duration":24,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32m\"test-role\"\u001b[39m, \u001b[32m{\"description\": \"Updated description\"}\u001b[39m\nReceived: \u001b[31m\"test-tenant\"\u001b[39m, \u001b[31m\"test-role\"\u001b[39m, \u001b[31m{\"description\": \"Updated description\"}\u001b[39m\n\nNumber of calls: \u001b[31m1\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32m\"test-role\"\u001b[39m, \u001b[32m{\"description\": \"Updated description\"}\u001b[39m\nReceived: \u001b[31m\"test-tenant\"\u001b[39m, \u001b[31m\"test-role\"\u001b[39m, \u001b[31m{\"description\": \"Updated description\"}\u001b[39m\n\nNumber of calls: \u001b[31m1\u001b[39m\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\unit\\application\\services\\role.admin.service.spec.ts:131:41\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\unit\\application\\services\\role.admin.service.spec.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"RoleAdminService updateRole should update a role successfully","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should update a role successfully"},{"ancestorTitles":["RoleAdminService","deleteRole"],"duration":10,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32m\"test-role\"\u001b[39m\nReceived: \u001b[31m\"test-tenant\"\u001b[39m, \u001b[31m\"test-role\"\u001b[39m\n\nNumber of calls: \u001b[31m1\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32m\"test-role\"\u001b[39m\nReceived: \u001b[31m\"test-tenant\"\u001b[39m, \u001b[31m\"test-role\"\u001b[39m\n\nNumber of calls: \u001b[31m1\u001b[39m\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\unit\\application\\services\\role.admin.service.spec.ts:143:41\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\unit\\application\\services\\role.admin.service.spec.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"RoleAdminService deleteRole should delete a role and its assignments successfully","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should delete a role and its assignments successfully"},{"ancestorTitles":["RoleAdminService","deleteRole"],"duration":61,"failureDetails":[],"failureMessages":[],"fullName":"RoleAdminService deleteRole should throw RoleNotFoundError if role does not exist","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should throw RoleNotFoundError if role does not exist"},{"ancestorTitles":["RoleAdminService","deleteRole"],"duration":18,"failureDetails":[],"failureMessages":[],"fullName":"RoleAdminService deleteRole should throw CleanupFailedError if assignment cleanup fails","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should throw CleanupFailedError if assignment cleanup fails"},{"ancestorTitles":["RoleAdminService","assignPermissionToRole"],"duration":14,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32m\"test-role\"\u001b[39m, \u001b[32m\"test-permission\"\u001b[39m\nReceived: \u001b[31m\"test-tenant\"\u001b[39m, \u001b[31m\"test-role\"\u001b[39m, \u001b[31m\"test-permission\"\u001b[39m\n\nNumber of calls: \u001b[31m1\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32m\"test-role\"\u001b[39m, \u001b[32m\"test-permission\"\u001b[39m\nReceived: \u001b[31m\"test-tenant\"\u001b[39m, \u001b[31m\"test-role\"\u001b[39m, \u001b[31m\"test-permission\"\u001b[39m\n\nNumber of calls: \u001b[31m1\u001b[39m\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\unit\\application\\services\\role.admin.service.spec.ts:174:63\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\unit\\application\\services\\role.admin.service.spec.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"RoleAdminService assignPermissionToRole should assign a permission to a role successfully","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should assign a permission to a role successfully"},{"ancestorTitles":["RoleAdminService","assignPermissionToRole"],"duration":13,"failureDetails":[],"failureMessages":[],"fullName":"RoleAdminService assignPermissionToRole should throw RoleNotFoundError if role does not exist","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should throw RoleNotFoundError if role does not exist"},{"ancestorTitles":["RoleAdminService","assignPermissionToRole"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"RoleAdminService assignPermissionToRole should throw PermissionNotFoundError if permission does not exist","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should throw PermissionNotFoundError if permission does not exist"},{"ancestorTitles":["RoleAdminService","removePermissionFromRole"],"duration":11,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32m\"test-role\"\u001b[39m, \u001b[32m\"test-permission\"\u001b[39m\nReceived: \u001b[31m\"test-tenant\"\u001b[39m, \u001b[31m\"test-role\"\u001b[39m, \u001b[31m\"test-permission\"\u001b[39m\n\nNumber of calls: \u001b[31m1\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32m\"test-role\"\u001b[39m, \u001b[32m\"test-permission\"\u001b[39m\nReceived: \u001b[31m\"test-tenant\"\u001b[39m, \u001b[31m\"test-role\"\u001b[39m, \u001b[31m\"test-permission\"\u001b[39m\n\nNumber of calls: \u001b[31m1\u001b[39m\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\unit\\application\\services\\role.admin.service.spec.ts:199:65\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\unit\\application\\services\\role.admin.service.spec.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"RoleAdminService removePermissionFromRole should remove a permission from a role successfully","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should remove a permission from a role successfully"},{"ancestorTitles":["RoleAdminService","removePermissionFromRole"],"duration":6,"failureDetails":[],"failureMessages":[],"fullName":"RoleAdminService removePermissionFromRole should throw AssignmentError on failure","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should throw AssignmentError on failure"},{"ancestorTitles":["RoleAdminService","listPermissionsForRole"],"duration":25,"failureDetails":[],"failureMessages":[],"fullName":"RoleAdminService listPermissionsForRole should list permissions for a role","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should list permissions for a role"},{"ancestorTitles":["RoleAdminService","listPermissionsForRole"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"RoleAdminService listPermissionsForRole should throw RoleNotFoundError if role does not exist","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should throw RoleNotFoundError if role does not exist"},{"ancestorTitles":["RoleAdminService","Permissions"],"duration":12,"failureDetails":[],"failureMessages":[],"fullName":"RoleAdminService Permissions should throw ForbiddenError if admin user does not have required role","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should throw ForbiddenError if admin user does not have required role"}],"endTime":1771844452744,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mRoleAdminService › getRole › should return a role if found\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: \u001b[32m\"test-role\"\u001b[39m\n    Received: \u001b[31m\"test-tenant\"\u001b[39m, \u001b[31m\"test-role\"\u001b[39m\n\n    Number of calls: \u001b[31m1\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m  96 |\u001b[39m             \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m service\u001b[33m.\u001b[39mgetRole(adminUser\u001b[33m,\u001b[39m roleName)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m  97 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m  98 |\u001b[39m             expect(roleRepoMock\u001b[33m.\u001b[39mfindByName)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(roleName)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                             \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m  99 |\u001b[39m             expect(result)\u001b[33m.\u001b[39mtoEqual(roleEntity)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 100 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 101 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/application/services/role.admin.service.spec.ts\u001b[39m\u001b[0m\u001b[2m:98:45\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat fulfilled (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/application/services/role.admin.service.spec.ts\u001b[39m\u001b[0m\u001b[2m:5:58)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mRoleAdminService › listRoles › should list roles\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: \u001b[32m{}\u001b[39m\n    Received: \u001b[31m\"test-tenant\"\u001b[39m, \u001b[31m{}\u001b[39m\n\n    Number of calls: \u001b[31m1\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 116 |\u001b[39m             \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m service\u001b[33m.\u001b[39mlistRoles(adminUser\u001b[33m,\u001b[39m {})\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 117 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 118 |\u001b[39m             expect(roleRepoMock\u001b[33m.\u001b[39mlist)\u001b[33m.\u001b[39mtoHaveBeenCalledWith({})\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 119 |\u001b[39m             expect(result)\u001b[33m.\u001b[39mtoEqual(roles)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 120 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 121 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/application/services/role.admin.service.spec.ts\u001b[39m\u001b[0m\u001b[2m:118:39\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat fulfilled (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/application/services/role.admin.service.spec.ts\u001b[39m\u001b[0m\u001b[2m:5:58)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mRoleAdminService › updateRole › should update a role successfully\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: \u001b[32m\"test-role\"\u001b[39m, \u001b[32m{\"description\": \"Updated description\"}\u001b[39m\n    Received: \u001b[31m\"test-tenant\"\u001b[39m, \u001b[31m\"test-role\"\u001b[39m, \u001b[31m{\"description\": \"Updated description\"}\u001b[39m\n\n    Number of calls: \u001b[31m1\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 129 |\u001b[39m             \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m service\u001b[33m.\u001b[39mupdateRole(adminUser\u001b[33m,\u001b[39m roleName\u001b[33m,\u001b[39m updates)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 130 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 131 |\u001b[39m             expect(roleRepoMock\u001b[33m.\u001b[39mupdate)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(roleName\u001b[33m,\u001b[39m updates)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 132 |\u001b[39m             expect(result)\u001b[33m.\u001b[39mtoEqual(updatedRole)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 133 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 134 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/application/services/role.admin.service.spec.ts\u001b[39m\u001b[0m\u001b[2m:131:41\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat fulfilled (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/application/services/role.admin.service.spec.ts\u001b[39m\u001b[0m\u001b[2m:5:58)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mRoleAdminService › deleteRole › should delete a role and its assignments successfully\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: \u001b[32m\"test-role\"\u001b[39m\n    Received: \u001b[31m\"test-tenant\"\u001b[39m, \u001b[31m\"test-role\"\u001b[39m\n\n    Number of calls: \u001b[31m1\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 141 |\u001b[39m             \u001b[36mawait\u001b[39m service\u001b[33m.\u001b[39mdeleteRole(adminUser\u001b[33m,\u001b[39m roleName)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 142 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 143 |\u001b[39m             expect(roleRepoMock\u001b[33m.\u001b[39m\u001b[36mdelete\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(roleName)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 144 |\u001b[39m             expect(assignmentRepoMock\u001b[33m.\u001b[39mremoveAllAssignmentsForRole)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(roleName)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 145 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 146 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/application/services/role.admin.service.spec.ts\u001b[39m\u001b[0m\u001b[2m:143:41\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat fulfilled (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/application/services/role.admin.service.spec.ts\u001b[39m\u001b[0m\u001b[2m:5:58)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mRoleAdminService › assignPermissionToRole › should assign a permission to a role successfully\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: \u001b[32m\"test-role\"\u001b[39m, \u001b[32m\"test-permission\"\u001b[39m\n    Received: \u001b[31m\"test-tenant\"\u001b[39m, \u001b[31m\"test-role\"\u001b[39m, \u001b[31m\"test-permission\"\u001b[39m\n\n    Number of calls: \u001b[31m1\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 172 |\u001b[39m             \u001b[36mawait\u001b[39m service\u001b[33m.\u001b[39massignPermissionToRole(adminUser\u001b[33m,\u001b[39m roleName\u001b[33m,\u001b[39m permissionName)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 173 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 174 |\u001b[39m             expect(assignmentRepoMock\u001b[33m.\u001b[39massignPermissionToRole)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(roleName\u001b[33m,\u001b[39m permissionName)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                                               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 175 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 176 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 177 |\u001b[39m         it(\u001b[32m'should throw RoleNotFoundError if role does not exist'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/application/services/role.admin.service.spec.ts\u001b[39m\u001b[0m\u001b[2m:174:63\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat fulfilled (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/application/services/role.admin.service.spec.ts\u001b[39m\u001b[0m\u001b[2m:5:58)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mRoleAdminService › removePermissionFromRole › should remove a permission from a role successfully\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: \u001b[32m\"test-role\"\u001b[39m, \u001b[32m\"test-permission\"\u001b[39m\n    Received: \u001b[31m\"test-tenant\"\u001b[39m, \u001b[31m\"test-role\"\u001b[39m, \u001b[31m\"test-permission\"\u001b[39m\n\n    Number of calls: \u001b[31m1\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 197 |\u001b[39m             \u001b[36mawait\u001b[39m service\u001b[33m.\u001b[39mremovePermissionFromRole(adminUser\u001b[33m,\u001b[39m roleName\u001b[33m,\u001b[39m permissionName)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 198 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 199 |\u001b[39m             expect(assignmentRepoMock\u001b[33m.\u001b[39mremovePermissionFromRole)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(roleName\u001b[33m,\u001b[39m permissionName)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 200 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 201 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 202 |\u001b[39m         it(\u001b[32m'should throw AssignmentError on failure'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/application/services/role.admin.service.spec.ts\u001b[39m\u001b[0m\u001b[2m:199:65\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat fulfilled (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/application/services/role.admin.service.spec.ts\u001b[39m\u001b[0m\u001b[2m:5:58)\u001b[22m\u001b[2m\u001b[22m\n","name":"E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\unit\\application\\services\\role.admin.service.spec.ts","startTime":1771844451482,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Integration Tests: Group Admin Routes (/api/admin/groups)","POST /api/admin/groups"],"duration":476,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests: Group Admin Routes (/api/admin/groups) POST /api/admin/groups should return 201 Created when payload is valid and service succeeds","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should return 201 Created when payload is valid and service succeeds"},{"ancestorTitles":["Integration Tests: Group Admin Routes (/api/admin/groups)","POST /api/admin/groups"],"duration":102,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests: Group Admin Routes (/api/admin/groups) POST /api/admin/groups should return 400 Bad Request if validation fails (e.g., missing groupName)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 400 Bad Request if validation fails (e.g., missing groupName)"},{"ancestorTitles":["Integration Tests: Group Admin Routes (/api/admin/groups)","POST /api/admin/groups"],"duration":101,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests: Group Admin Routes (/api/admin/groups) POST /api/admin/groups should return 409 Conflict if service throws GroupExistsError","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 409 Conflict if service throws GroupExistsError"},{"ancestorTitles":["Integration Tests: Group Admin Routes (/api/admin/groups)","POST /api/admin/groups"],"duration":102,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests: Group Admin Routes (/api/admin/groups) POST /api/admin/groups should return 500 Internal Server Error if service throws an unexpected error","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 500 Internal Server Error if service throws an unexpected error"},{"ancestorTitles":["Integration Tests: Group Admin Routes (/api/admin/groups)","POST /api/admin/groups"],"duration":154,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests: Group Admin Routes (/api/admin/groups) POST /api/admin/groups should return 401 Unauthorized if token is missing","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 401 Unauthorized if token is missing"},{"ancestorTitles":["Integration Tests: Group Admin Routes (/api/admin/groups)","GET /api/admin/groups/:groupName"],"duration":118,"failureDetails":[{}],"failureMessages":["Error: expected 200 \"OK\", got 500 \"Internal Server Error\"\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\group.admin.routes.integration.spec.ts:212:18\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\group.admin.routes.integration.spec.ts:9:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\group.admin.routes.integration.spec.ts:5:12)\n    at Object.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\group.admin.routes.integration.spec.ts:207:79)\n    at Promise.then.completed (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\testWorker.js:108:12)\n----\n    at Test._assertStatus (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:309:14)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:365:13\n    at Test._assertFunction (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:342:13)\n    at Test.assert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:195:23)\n    at localAssert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:138:14)\n    at Server.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:152:11)\n    at Object.onceWrapper (node:events:633:28)\n    at Server.emit (node:events:519:28)\n    at emitCloseNT (node:net:2419:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"fullName":"Integration Tests: Group Admin Routes (/api/admin/groups) GET /api/admin/groups/:groupName should return 200 OK with group data if group exists","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 200 OK with group data if group exists"},{"ancestorTitles":["Integration Tests: Group Admin Routes (/api/admin/groups)","GET /api/admin/groups/:groupName"],"duration":93,"failureDetails":[{}],"failureMessages":["Error: expected 404 \"Not Found\", got 500 \"Internal Server Error\"\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\group.admin.routes.integration.spec.ts:221:18\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\group.admin.routes.integration.spec.ts:9:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\group.admin.routes.integration.spec.ts:5:12)\n    at Object.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\group.admin.routes.integration.spec.ts:216:78)\n    at Promise.then.completed (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\testWorker.js:108:12)\n----\n    at Test._assertStatus (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:309:14)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:365:13\n    at Test._assertFunction (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:342:13)\n    at Test.assert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:195:23)\n    at localAssert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:138:14)\n    at Server.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:152:11)\n    at Object.onceWrapper (node:events:633:28)\n    at Server.emit (node:events:519:28)\n    at emitCloseNT (node:net:2419:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"fullName":"Integration Tests: Group Admin Routes (/api/admin/groups) GET /api/admin/groups/:groupName should return 404 Not Found if service returns null","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 404 Not Found if service returns null"},{"ancestorTitles":["Integration Tests: Group Admin Routes (/api/admin/groups)","GET /api/admin/groups/:groupName"],"duration":91,"failureDetails":[{}],"failureMessages":["Error: expected 404 \"Not Found\", got 500 \"Internal Server Error\"\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\group.admin.routes.integration.spec.ts:232:18\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\group.admin.routes.integration.spec.ts:9:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\group.admin.routes.integration.spec.ts:5:12)\n    at Object.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\group.admin.routes.integration.spec.ts:225:86)\n    at Promise.then.completed (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\testWorker.js:108:12)\n----\n    at Test._assertStatus (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:309:14)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:365:13\n    at Test._assertFunction (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:342:13)\n    at Test.assert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:195:23)\n    at localAssert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:138:14)\n    at Server.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:152:11)\n    at Object.onceWrapper (node:events:633:28)\n    at Server.emit (node:events:519:28)\n    at emitCloseNT (node:net:2419:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"fullName":"Integration Tests: Group Admin Routes (/api/admin/groups) GET /api/admin/groups/:groupName should return 404 Not Found if service throws NotFoundError","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 404 Not Found if service throws NotFoundError"},{"ancestorTitles":["Integration Tests: Group Admin Routes (/api/admin/groups)","GET /api/admin/groups/:groupName"],"duration":82,"failureDetails":[{}],"failureMessages":["Error: expected 400 \"Bad Request\", got 500 \"Internal Server Error\"\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\group.admin.routes.integration.spec.ts:241:18\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\group.admin.routes.integration.spec.ts:9:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\group.admin.routes.integration.spec.ts:5:12)\n    at Object.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\group.admin.routes.integration.spec.ts:236:86)\n    at Promise.then.completed (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\testWorker.js:108:12)\n----\n    at Test._assertStatus (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:309:14)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:365:13\n    at Test._assertFunction (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:342:13)\n    at Test.assert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:195:23)\n    at localAssert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:138:14)\n    at Server.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:152:11)\n    at Object.onceWrapper (node:events:633:28)\n    at Server.emit (node:events:519:28)\n    at emitCloseNT (node:net:2419:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"fullName":"Integration Tests: Group Admin Routes (/api/admin/groups) GET /api/admin/groups/:groupName should return 400 Bad Request if groupName param is invalid","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 400 Bad Request if groupName param is invalid"},{"ancestorTitles":["Integration Tests: Group Admin Routes (/api/admin/groups)","GET /api/admin/groups/:groupName"],"duration":93,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32mAnything\u001b[39m, \u001b[32m\"Get-Group-Test\"\u001b[39m\n\nNumber of calls: \u001b[31m0\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32mAnything\u001b[39m, \u001b[32m\"Get-Group-Test\"\u001b[39m\n\nNumber of calls: \u001b[31m0\u001b[39m\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\group.admin.routes.integration.spec.ts:252:52\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\group.admin.routes.integration.spec.ts:6:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"Integration Tests: Group Admin Routes (/api/admin/groups) GET /api/admin/groups/:groupName should return 500 if the service fails unexpectedly","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 500 if the service fails unexpectedly"},{"ancestorTitles":["Integration Tests: Group Admin Routes (/api/admin/groups)","GET /api/admin/groups/:groupName"],"duration":137,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests: Group Admin Routes (/api/admin/groups) GET /api/admin/groups/:groupName should return 401 Unauthorized if token is missing","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 401 Unauthorized if token is missing"},{"ancestorTitles":["Integration Tests: Group Admin Routes (/api/admin/groups)","DELETE /api/admin/groups/:groupName"],"duration":102,"failureDetails":[{}],"failureMessages":["Error: expected 204 \"No Content\", got 500 \"Internal Server Error\"\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\group.admin.routes.integration.spec.ts:271:18\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\group.admin.routes.integration.spec.ts:9:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\group.admin.routes.integration.spec.ts:5:12)\n    at Object.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\group.admin.routes.integration.spec.ts:266:75)\n    at Promise.then.completed (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\testWorker.js:108:12)\n----\n    at Test._assertStatus (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:309:14)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:365:13\n    at Test._assertFunction (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:342:13)\n    at Test.assert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:195:23)\n    at localAssert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:138:14)\n    at Server.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:152:11)\n    at Object.onceWrapper (node:events:633:28)\n    at Server.emit (node:events:519:28)\n    at emitCloseNT (node:net:2419:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"fullName":"Integration Tests: Group Admin Routes (/api/admin/groups) DELETE /api/admin/groups/:groupName should return 204 No Content if service succeeds","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 204 No Content if service succeeds"},{"ancestorTitles":["Integration Tests: Group Admin Routes (/api/admin/groups)","DELETE /api/admin/groups/:groupName"],"duration":73,"failureDetails":[{}],"failureMessages":["Error: expected 404 \"Not Found\", got 500 \"Internal Server Error\"\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\group.admin.routes.integration.spec.ts:282:18\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\group.admin.routes.integration.spec.ts:9:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\group.admin.routes.integration.spec.ts:5:12)\n    at Object.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\group.admin.routes.integration.spec.ts:275:86)\n    at Promise.then.completed (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\testWorker.js:108:12)\n----\n    at Test._assertStatus (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:309:14)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:365:13\n    at Test._assertFunction (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:342:13)\n    at Test.assert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:195:23)\n    at localAssert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:138:14)\n    at Server.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:152:11)\n    at Object.onceWrapper (node:events:633:28)\n    at Server.emit (node:events:519:28)\n    at emitCloseNT (node:net:2419:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"fullName":"Integration Tests: Group Admin Routes (/api/admin/groups) DELETE /api/admin/groups/:groupName should return 404 Not Found if service throws NotFoundError","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 404 Not Found if service throws NotFoundError"},{"ancestorTitles":["Integration Tests: Group Admin Routes (/api/admin/groups)","DELETE /api/admin/groups/:groupName"],"duration":101,"failureDetails":[{}],"failureMessages":["Error: expected 400 \"Bad Request\", got 500 \"Internal Server Error\"\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\group.admin.routes.integration.spec.ts:291:18\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\group.admin.routes.integration.spec.ts:9:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\group.admin.routes.integration.spec.ts:5:12)\n    at Object.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\group.admin.routes.integration.spec.ts:286:86)\n    at Promise.then.completed (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\testWorker.js:108:12)\n----\n    at Test._assertStatus (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:309:14)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:365:13\n    at Test._assertFunction (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:342:13)\n    at Test.assert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:195:23)\n    at localAssert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:138:14)\n    at Server.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:152:11)\n    at Object.onceWrapper (node:events:633:28)\n    at Server.emit (node:events:519:28)\n    at emitCloseNT (node:net:2419:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"fullName":"Integration Tests: Group Admin Routes (/api/admin/groups) DELETE /api/admin/groups/:groupName should return 400 Bad Request if groupName param is invalid","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 400 Bad Request if groupName param is invalid"},{"ancestorTitles":["Integration Tests: Group Admin Routes (/api/admin/groups)","DELETE /api/admin/groups/:groupName"],"duration":88,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32mAnything\u001b[39m, \u001b[32m\"Delete-Group-Test\"\u001b[39m\n\nNumber of calls: \u001b[31m0\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32mAnything\u001b[39m, \u001b[32m\"Delete-Group-Test\"\u001b[39m\n\nNumber of calls: \u001b[31m0\u001b[39m\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\group.admin.routes.integration.spec.ts:302:55\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\group.admin.routes.integration.spec.ts:6:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"Integration Tests: Group Admin Routes (/api/admin/groups) DELETE /api/admin/groups/:groupName should return 500 if service fails unexpectedly","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 500 if service fails unexpectedly"},{"ancestorTitles":["Integration Tests: Group Admin Routes (/api/admin/groups)","DELETE /api/admin/groups/:groupName"],"duration":101,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests: Group Admin Routes (/api/admin/groups) DELETE /api/admin/groups/:groupName should return 401 Unauthorized if token is missing","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 401 Unauthorized if token is missing"}],"endTime":1771844452966,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mIntegration Tests: Group Admin Routes (/api/admin/groups) › GET /api/admin/groups/:groupName › should return 200 OK with group data if group exists\u001b[39m\u001b[22m\n\n    expected 200 \"OK\", got 500 \"Internal Server Error\"\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 210 |\u001b[39m                 \u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[32m`${BASE_API_PATH}/${targetgroupName}`\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m 211 |\u001b[39m                 \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[33mMOCK_AUTH_HEADER\u001b[39m)\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 212 |\u001b[39m                 \u001b[33m.\u001b[39mexpect(\u001b[33mHttpStatusCode\u001b[39m\u001b[33m.\u001b[39m\u001b[33mOK\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// 200\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                  \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 213 |\u001b[39m             expect(mockGroupAdminService\u001b[33m.\u001b[39mgetGroup)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(expect\u001b[33m.\u001b[39manything()\u001b[33m,\u001b[39m targetgroupName)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 214 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 215 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/group.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:212:18\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/group.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:9:71\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous>.__awaiter (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/group.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:5:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/group.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:207:79)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      ----\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertStatus (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:309:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:365:13\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertFunction (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:342:13)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.assert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:195:23)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat localAssert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:138:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Server.<anonymous> (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:152:11)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mIntegration Tests: Group Admin Routes (/api/admin/groups) › GET /api/admin/groups/:groupName › should return 404 Not Found if service returns null\u001b[39m\u001b[22m\n\n    expected 404 \"Not Found\", got 500 \"Internal Server Error\"\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 219 |\u001b[39m                 \u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[32m`${BASE_API_PATH}/${targetgroupName}`\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m 220 |\u001b[39m                 \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[33mMOCK_AUTH_HEADER\u001b[39m)\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 221 |\u001b[39m                 \u001b[33m.\u001b[39mexpect(\u001b[33mHttpStatusCode\u001b[39m\u001b[33m.\u001b[39m\u001b[33mNOT_FOUND\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// 404 (Handled by controller)\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                  \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 222 |\u001b[39m             expect(mockGroupAdminService\u001b[33m.\u001b[39mgetGroup)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(expect\u001b[33m.\u001b[39manything()\u001b[33m,\u001b[39m targetgroupName)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 223 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 224 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/group.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:221:18\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/group.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:9:71\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous>.__awaiter (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/group.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:5:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/group.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:216:78)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      ----\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertStatus (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:309:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:365:13\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertFunction (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:342:13)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.assert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:195:23)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat localAssert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:138:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Server.<anonymous> (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:152:11)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mIntegration Tests: Group Admin Routes (/api/admin/groups) › GET /api/admin/groups/:groupName › should return 404 Not Found if service throws NotFoundError\u001b[39m\u001b[22m\n\n    expected 404 \"Not Found\", got 500 \"Internal Server Error\"\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 230 |\u001b[39m                 \u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[32m`${BASE_API_PATH}/${targetgroupName}`\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m 231 |\u001b[39m                 \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[33mMOCK_AUTH_HEADER\u001b[39m)\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 232 |\u001b[39m                 \u001b[33m.\u001b[39mexpect(\u001b[33mHttpStatusCode\u001b[39m\u001b[33m.\u001b[39m\u001b[33mNOT_FOUND\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// 404 (Handled by error middleware)\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                  \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 233 |\u001b[39m             expect(mockGroupAdminService\u001b[33m.\u001b[39mgetGroup)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(expect\u001b[33m.\u001b[39manything()\u001b[33m,\u001b[39m targetgroupName)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 234 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 235 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/group.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:232:18\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/group.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:9:71\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous>.__awaiter (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/group.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:5:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/group.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:225:86)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      ----\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertStatus (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:309:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:365:13\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertFunction (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:342:13)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.assert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:195:23)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat localAssert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:138:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Server.<anonymous> (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:152:11)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mIntegration Tests: Group Admin Routes (/api/admin/groups) › GET /api/admin/groups/:groupName › should return 400 Bad Request if groupName param is invalid\u001b[39m\u001b[22m\n\n    expected 400 \"Bad Request\", got 500 \"Internal Server Error\"\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 239 |\u001b[39m                 \u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[32m`${BASE_API_PATH}/${encodeURIComponent(invalidgroupName)}`\u001b[39m) \u001b[90m// URL encode it\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 240 |\u001b[39m                 \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[33mMOCK_AUTH_HEADER\u001b[39m)\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 241 |\u001b[39m                 \u001b[33m.\u001b[39mexpect(\u001b[33mHttpStatusCode\u001b[39m\u001b[33m.\u001b[39m\u001b[33mBAD_REQUEST\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// 400 (Handled by validation middleware)\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                  \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 242 |\u001b[39m             expect(mockGroupAdminService\u001b[33m.\u001b[39mgetGroup)\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 243 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 244 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/group.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:241:18\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/group.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:9:71\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous>.__awaiter (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/group.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:5:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/group.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:236:86)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      ----\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertStatus (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:309:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:365:13\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertFunction (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:342:13)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.assert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:195:23)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat localAssert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:138:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Server.<anonymous> (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:152:11)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mIntegration Tests: Group Admin Routes (/api/admin/groups) › GET /api/admin/groups/:groupName › should return 500 if the service fails unexpectedly\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: \u001b[32mAnything\u001b[39m, \u001b[32m\"Get-Group-Test\"\u001b[39m\n\n    Number of calls: \u001b[31m0\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 250 |\u001b[39m                 \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[33mMOCK_AUTH_HEADER\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m 251 |\u001b[39m                 \u001b[33m.\u001b[39mexpect(\u001b[33mHttpStatusCode\u001b[39m\u001b[33m.\u001b[39m\u001b[33mINTERNAL_SERVER_ERROR\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// 500\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 252 |\u001b[39m             expect(mockGroupAdminService\u001b[33m.\u001b[39mgetGroup)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(expect\u001b[33m.\u001b[39manything()\u001b[33m,\u001b[39m targetgroupName)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                                    \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 253 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 254 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 255 |\u001b[39m         it(\u001b[32m'should return 401 Unauthorized if token is missing'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/group.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:252:52\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat fulfilled (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/group.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:6:58)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mIntegration Tests: Group Admin Routes (/api/admin/groups) › DELETE /api/admin/groups/:groupName › should return 204 No Content if service succeeds\u001b[39m\u001b[22m\n\n    expected 204 \"No Content\", got 500 \"Internal Server Error\"\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 269 |\u001b[39m                 \u001b[33m.\u001b[39m\u001b[36mdelete\u001b[39m(\u001b[32m`${BASE_API_PATH}/${targetgroupName}`\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m 270 |\u001b[39m                 \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[33mMOCK_AUTH_HEADER\u001b[39m)\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 271 |\u001b[39m                 \u001b[33m.\u001b[39mexpect(\u001b[33mHttpStatusCode\u001b[39m\u001b[33m.\u001b[39m\u001b[33mNO_CONTENT\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// 204\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                  \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 272 |\u001b[39m             expect(mockGroupAdminService\u001b[33m.\u001b[39mdeleteGroup)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(expect\u001b[33m.\u001b[39manything()\u001b[33m,\u001b[39m targetgroupName)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 273 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 274 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/group.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:271:18\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/group.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:9:71\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous>.__awaiter (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/group.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:5:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/group.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:266:75)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      ----\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertStatus (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:309:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:365:13\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertFunction (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:342:13)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.assert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:195:23)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat localAssert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:138:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Server.<anonymous> (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:152:11)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mIntegration Tests: Group Admin Routes (/api/admin/groups) › DELETE /api/admin/groups/:groupName › should return 404 Not Found if service throws NotFoundError\u001b[39m\u001b[22m\n\n    expected 404 \"Not Found\", got 500 \"Internal Server Error\"\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 280 |\u001b[39m                 \u001b[33m.\u001b[39m\u001b[36mdelete\u001b[39m(\u001b[32m`${BASE_API_PATH}/${targetgroupName}`\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m 281 |\u001b[39m                 \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[33mMOCK_AUTH_HEADER\u001b[39m)\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 282 |\u001b[39m                 \u001b[33m.\u001b[39mexpect(\u001b[33mHttpStatusCode\u001b[39m\u001b[33m.\u001b[39m\u001b[33mNOT_FOUND\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// 404\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                  \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 283 |\u001b[39m             expect(mockGroupAdminService\u001b[33m.\u001b[39mdeleteGroup)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(expect\u001b[33m.\u001b[39manything()\u001b[33m,\u001b[39m targetgroupName)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 284 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 285 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/group.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:282:18\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/group.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:9:71\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous>.__awaiter (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/group.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:5:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/group.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:275:86)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      ----\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertStatus (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:309:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:365:13\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertFunction (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:342:13)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.assert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:195:23)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat localAssert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:138:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Server.<anonymous> (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:152:11)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mIntegration Tests: Group Admin Routes (/api/admin/groups) › DELETE /api/admin/groups/:groupName › should return 400 Bad Request if groupName param is invalid\u001b[39m\u001b[22m\n\n    expected 400 \"Bad Request\", got 500 \"Internal Server Error\"\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 289 |\u001b[39m                 \u001b[33m.\u001b[39m\u001b[36mdelete\u001b[39m(\u001b[32m`${BASE_API_PATH}/${encodeURIComponent(invalidgroupName)}`\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m 290 |\u001b[39m                 \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[33mMOCK_AUTH_HEADER\u001b[39m)\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 291 |\u001b[39m                 \u001b[33m.\u001b[39mexpect(\u001b[33mHttpStatusCode\u001b[39m\u001b[33m.\u001b[39m\u001b[33mBAD_REQUEST\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// 400\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                  \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 292 |\u001b[39m             expect(mockGroupAdminService\u001b[33m.\u001b[39mdeleteGroup)\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 293 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 294 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/group.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:291:18\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/group.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:9:71\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous>.__awaiter (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/group.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:5:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/group.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:286:86)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      ----\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertStatus (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:309:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:365:13\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertFunction (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:342:13)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.assert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:195:23)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat localAssert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:138:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Server.<anonymous> (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:152:11)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mIntegration Tests: Group Admin Routes (/api/admin/groups) › DELETE /api/admin/groups/:groupName › should return 500 if service fails unexpectedly\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: \u001b[32mAnything\u001b[39m, \u001b[32m\"Delete-Group-Test\"\u001b[39m\n\n    Number of calls: \u001b[31m0\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 300 |\u001b[39m                 \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[33mMOCK_AUTH_HEADER\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m 301 |\u001b[39m                 \u001b[33m.\u001b[39mexpect(\u001b[33mHttpStatusCode\u001b[39m\u001b[33m.\u001b[39m\u001b[33mINTERNAL_SERVER_ERROR\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// 500\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 302 |\u001b[39m             expect(mockGroupAdminService\u001b[33m.\u001b[39mdeleteGroup)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(expect\u001b[33m.\u001b[39manything()\u001b[33m,\u001b[39m targetgroupName)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 303 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 304 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 305 |\u001b[39m         it(\u001b[32m'should return 401 Unauthorized if token is missing'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/group.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:302:55\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat fulfilled (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/group.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:6:58)\u001b[22m\u001b[2m\u001b[22m\n","name":"E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\group.admin.routes.integration.spec.ts","startTime":1771844397937,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["DynamoDB Table Creation Debug Test"],"duration":9,"failureDetails":[],"failureMessages":[],"fullName":"DynamoDB Table Creation Debug Test should successfully create and delete the test table","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should successfully create and delete the test table"},{"ancestorTitles":["DynamoDB Table Creation Debug Test"],"duration":143,"failureDetails":[],"failureMessages":[],"fullName":"DynamoDB Table Creation Debug Test should resolve DynamoDBProvider and list tables","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should resolve DynamoDBProvider and list tables"},{"ancestorTitles":["DynamoDB Table Creation Debug Test"],"duration":145,"failureDetails":[{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mresolves\u001b[2m.\u001b[22mnot\u001b[2m.\u001b[22mtoThrow\u001b[2m()\u001b[22m\n\nReceived promise rejected instead of resolved\nRejected to value: \u001b[31m[DatabaseError: Failed to create role: User: arn:aws:iam::410844822442:user/PBAC-Admin is not authorized to perform: dynamodb:PutItem on resource: arn:aws:dynamodb:ap-south-1:410844822442:table/TestAuthzTable because no identity-based policy allows the dynamodb:PutItem action]\u001b[39m"}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mresolves\u001b[2m.\u001b[22mnot\u001b[2m.\u001b[22mtoThrow\u001b[2m()\u001b[22m\n\nReceived promise rejected instead of resolved\nRejected to value: \u001b[31m[DatabaseError: Failed to create role: User: arn:aws:iam::410844822442:user/PBAC-Admin is not authorized to perform: dynamodb:PutItem on resource: arn:aws:dynamodb:ap-south-1:410844822442:table/TestAuthzTable because no identity-based policy allows the dynamodb:PutItem action]\u001b[39m\n    at expect (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\expect@29.7.0\\node_modules\\expect\\build\\index.js:113:15)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\debug\\dynamodb.debug.spec.ts:55:15\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\debug\\dynamodb.debug.spec.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\debug\\dynamodb.debug.spec.ts:4:12)\n    at Object.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\debug\\dynamodb.debug.spec.ts:52:70)\n    at Promise.then.completed (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\testWorker.js:108:12)"],"fullName":"DynamoDB Table Creation Debug Test should create a role using DynamoRoleRepository","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should create a role using DynamoRoleRepository"}],"coverage":{},"endTime":1771844499577,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mDynamoDB Table Creation Debug Test › should create a role using DynamoRoleRepository\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mresolves\u001b[2m.\u001b[22mnot\u001b[2m.\u001b[22mtoThrow\u001b[2m()\u001b[22m\n\n    Received promise rejected instead of resolved\n    Rejected to value: \u001b[31m[DatabaseError: Failed to create role: User: arn:aws:iam::410844822442:user/PBAC-Admin is not authorized to perform: dynamodb:PutItem on resource: arn:aws:dynamodb:ap-south-1:410844822442:table/TestAuthzTable because no identity-based policy allows the dynamodb:PutItem action]\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 53 |\u001b[39m         \u001b[36mconst\u001b[39m roleRepository \u001b[33m=\u001b[39m persistenceContainer\u001b[33m.\u001b[39mresolve\u001b[33m<\u001b[39m\u001b[33mIRoleRepository\u001b[39m\u001b[33m>\u001b[39m(\u001b[33mTYPES\u001b[39m\u001b[33m.\u001b[39m\u001b[33mRoleRepository\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 54 |\u001b[39m         \u001b[36mconst\u001b[39m testRole \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mRole\u001b[39m(\u001b[32m'test-tenant'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'debug-role'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'Debug Role Description'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 55 |\u001b[39m         \u001b[36mawait\u001b[39m expect(roleRepository\u001b[33m.\u001b[39mcreate(testRole))\u001b[33m.\u001b[39mresolves\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoThrow()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 56 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 57 |\u001b[39m         \u001b[90m// Verify by fetching\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 58 |\u001b[39m         \u001b[36mconst\u001b[39m found \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m roleRepository\u001b[33m.\u001b[39mfindByName(\u001b[32m'test-tenant'\u001b[39m\u001b[33m,\u001b[39m testRole\u001b[33m.\u001b[39mroleName)\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat expect (\u001b[22m\u001b[2mnode_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js\u001b[2m:113:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/debug/dynamodb.debug.spec.ts\u001b[39m\u001b[0m\u001b[2m:55:15\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/debug/dynamodb.debug.spec.ts\u001b[39m\u001b[0m\u001b[2m:8:71\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous>.__awaiter (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/debug/dynamodb.debug.spec.ts\u001b[39m\u001b[0m\u001b[2m:4:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/debug/dynamodb.debug.spec.ts\u001b[39m\u001b[0m\u001b[2m:52:70)\u001b[22m\u001b[2m\u001b[22m\n\n\n  \u001b[1m● \u001b[22mTest suite failed to run\n\n    ResourceInUseException: Attempt to change a resource which is still in use: Table is being created: TestAuthzTable\n\n      \u001b[2mat de_ResourceInUseExceptionRes (\u001b[22mnode_modules/.pnpm/@aws-sdk+client-dynamodb@3.879.0/node_modules/@aws-sdk/client-dynamodb/dist-cjs/index.js\u001b[2m:2603:21)\u001b[22m\n      \u001b[2mat de_CommandError (\u001b[22mnode_modules/.pnpm/@aws-sdk+client-dynamodb@3.879.0/node_modules/@aws-sdk/client-dynamodb/dist-cjs/index.js\u001b[2m:2296:19)\u001b[22m\n      \u001b[2mat \u001b[22mnode_modules/.pnpm/@smithy+middleware-serde@4.0.9/node_modules/@smithy/middleware-serde/dist-cjs/index.js\u001b[2m:36:20\u001b[22m\n      \u001b[2mat \u001b[22mnode_modules/.pnpm/@smithy+core@3.9.0/node_modules/@smithy/core/dist-cjs/index.js\u001b[2m:193:18\u001b[22m\n      \u001b[2mat \u001b[22mnode_modules/.pnpm/@smithy+middleware-retry@4.1.20/node_modules/@smithy/middleware-retry/dist-cjs/index.js\u001b[2m:320:38\u001b[22m\n      \u001b[2mat \u001b[22mnode_modules/.pnpm/@aws-sdk+middleware-logger@3.876.0/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js\u001b[2m:33:22\u001b[22m\n","name":"E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\debug\\dynamodb.debug.spec.ts","startTime":1771844499577,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Integration Tests: Permission Admin Routes (/api/admin/permissions)","POST /api/admin/permissions"],"duration":530,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests: Permission Admin Routes (/api/admin/permissions) POST /api/admin/permissions should return 201 Created when payload is valid and service succeeds","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should return 201 Created when payload is valid and service succeeds"},{"ancestorTitles":["Integration Tests: Permission Admin Routes (/api/admin/permissions)","POST /api/admin/permissions"],"duration":169,"failureDetails":[{"matcherResult":{"actual":{"permissionName":"Permission name is required"},"expected":{"body.permissionName":"Permission name is required"},"message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoEqual\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // deep equality\u001b[22m\n\n\u001b[32m- Expected  - 1\u001b[39m\n\u001b[31m+ Received  + 1\u001b[39m\n\n\u001b[2m  Object {\u001b[22m\n\u001b[32m-   \"body.permissionName\": \"Permission name is required\",\u001b[39m\n\u001b[31m+   \"permissionName\": \"Permission name is required\",\u001b[39m\n\u001b[2m  }\u001b[22m","name":"toEqual","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoEqual\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // deep equality\u001b[22m\n\n\u001b[32m- Expected  - 1\u001b[39m\n\u001b[31m+ Received  + 1\u001b[39m\n\n\u001b[2m  Object {\u001b[22m\n\u001b[32m-   \"body.permissionName\": \"Permission name is required\",\u001b[39m\n\u001b[31m+   \"permissionName\": \"Permission name is required\",\u001b[39m\n\u001b[2m  }\u001b[22m\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\permission.admin.routes.integration.spec.ts:130:44\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\permission.admin.routes.integration.spec.ts:6:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"Integration Tests: Permission Admin Routes (/api/admin/permissions) POST /api/admin/permissions should return 400 on validation error (e.g., missing permissionName)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"failed","title":"should return 400 on validation error (e.g., missing permissionName)"},{"ancestorTitles":["Integration Tests: Permission Admin Routes (/api/admin/permissions)","POST /api/admin/permissions"],"duration":119,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests: Permission Admin Routes (/api/admin/permissions) POST /api/admin/permissions should return 409 if permission already exists","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should return 409 if permission already exists"},{"ancestorTitles":["Integration Tests: Permission Admin Routes (/api/admin/permissions)","POST /api/admin/permissions"],"duration":135,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests: Permission Admin Routes (/api/admin/permissions) POST /api/admin/permissions should return 401 if token is invalid/missing","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 401 if token is invalid/missing"},{"ancestorTitles":["Integration Tests: Permission Admin Routes (/api/admin/permissions)","GET /api/admin/permissions/:permissionName"],"duration":105,"failureDetails":[{"matcherResult":{"actual":500,"expected":200,"message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m200\u001b[39m\nReceived: \u001b[31m500\u001b[39m","name":"toBe","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m200\u001b[39m\nReceived: \u001b[31m500\u001b[39m\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\permission.admin.routes.integration.spec.ts:168:38\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\permission.admin.routes.integration.spec.ts:6:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"Integration Tests: Permission Admin Routes (/api/admin/permissions) GET /api/admin/permissions/:permissionName should return 200 and the permission if found","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 200 and the permission if found"},{"ancestorTitles":["Integration Tests: Permission Admin Routes (/api/admin/permissions)","GET /api/admin/permissions/:permissionName"],"duration":106,"failureDetails":[{"matcherResult":{"actual":500,"expected":404,"message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m404\u001b[39m\nReceived: \u001b[31m500\u001b[39m","name":"toBe","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m404\u001b[39m\nReceived: \u001b[31m500\u001b[39m\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\permission.admin.routes.integration.spec.ts:182:38\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\permission.admin.routes.integration.spec.ts:6:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"Integration Tests: Permission Admin Routes (/api/admin/permissions) GET /api/admin/permissions/:permissionName should return 404 if permission not found","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 404 if permission not found"},{"ancestorTitles":["Integration Tests: Permission Admin Routes (/api/admin/permissions)","GET /api/admin/permissions/:permissionName"],"duration":149,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests: Permission Admin Routes (/api/admin/permissions) GET /api/admin/permissions/:permissionName should return 401 if token is invalid/missing","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 401 if token is invalid/missing"},{"ancestorTitles":["Integration Tests: Permission Admin Routes (/api/admin/permissions)","GET /api/admin/permissions"],"duration":89,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests: Permission Admin Routes (/api/admin/permissions) GET /api/admin/permissions should return 200 and list of permissions","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should return 200 and list of permissions"},{"ancestorTitles":["Integration Tests: Permission Admin Routes (/api/admin/permissions)","GET /api/admin/permissions"],"duration":101,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests: Permission Admin Routes (/api/admin/permissions) GET /api/admin/permissions should return 401 if token is invalid/missing","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 401 if token is invalid/missing"},{"ancestorTitles":["Integration Tests: Permission Admin Routes (/api/admin/permissions)","PUT /api/admin/permissions/:permissionName"],"duration":98,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests: Permission Admin Routes (/api/admin/permissions) PUT /api/admin/permissions/:permissionName should return 200 and updated permission on success","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should return 200 and updated permission on success"},{"ancestorTitles":["Integration Tests: Permission Admin Routes (/api/admin/permissions)","PUT /api/admin/permissions/:permissionName"],"duration":100,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests: Permission Admin Routes (/api/admin/permissions) PUT /api/admin/permissions/:permissionName should return 404 if permission not found for update","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 404 if permission not found for update"},{"ancestorTitles":["Integration Tests: Permission Admin Routes (/api/admin/permissions)","PUT /api/admin/permissions/:permissionName"],"duration":81,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests: Permission Admin Routes (/api/admin/permissions) PUT /api/admin/permissions/:permissionName should return 400 on validation error (e.g., empty body)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should return 400 on validation error (e.g., empty body)"},{"ancestorTitles":["Integration Tests: Permission Admin Routes (/api/admin/permissions)","PUT /api/admin/permissions/:permissionName"],"duration":115,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests: Permission Admin Routes (/api/admin/permissions) PUT /api/admin/permissions/:permissionName should return 401 if token is invalid/missing","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 401 if token is invalid/missing"},{"ancestorTitles":["Integration Tests: Permission Admin Routes (/api/admin/permissions)","DELETE /api/admin/permissions/:permissionName"],"duration":102,"failureDetails":[{"matcherResult":{"actual":500,"expected":204,"message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m204\u001b[39m\nReceived: \u001b[31m500\u001b[39m","name":"toBe","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m204\u001b[39m\nReceived: \u001b[31m500\u001b[39m\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\permission.admin.routes.integration.spec.ts:277:38\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\permission.admin.routes.integration.spec.ts:6:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"Integration Tests: Permission Admin Routes (/api/admin/permissions) DELETE /api/admin/permissions/:permissionName should return 204 on successful deletion","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 204 on successful deletion"},{"ancestorTitles":["Integration Tests: Permission Admin Routes (/api/admin/permissions)","DELETE /api/admin/permissions/:permissionName"],"duration":87,"failureDetails":[{"matcherResult":{"actual":500,"expected":404,"message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m404\u001b[39m\nReceived: \u001b[31m500\u001b[39m","name":"toBe","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m404\u001b[39m\nReceived: \u001b[31m500\u001b[39m\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\permission.admin.routes.integration.spec.ts:291:38\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\permission.admin.routes.integration.spec.ts:6:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"Integration Tests: Permission Admin Routes (/api/admin/permissions) DELETE /api/admin/permissions/:permissionName should return 404 if permission not found for deletion","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 404 if permission not found for deletion"},{"ancestorTitles":["Integration Tests: Permission Admin Routes (/api/admin/permissions)","DELETE /api/admin/permissions/:permissionName"],"duration":86,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests: Permission Admin Routes (/api/admin/permissions) DELETE /api/admin/permissions/:permissionName should return 401 if token is invalid/missing","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 401 if token is invalid/missing"},{"ancestorTitles":["Integration Tests: Permission Admin Routes (/api/admin/permissions)","GET /api/admin/permissions/:permissionName/roles"],"duration":62,"failureDetails":[{"matcherResult":{"actual":500,"expected":200,"message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m200\u001b[39m\nReceived: \u001b[31m500\u001b[39m","name":"toBe","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m200\u001b[39m\nReceived: \u001b[31m500\u001b[39m\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\permission.admin.routes.integration.spec.ts:311:38\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\permission.admin.routes.integration.spec.ts:6:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"Integration Tests: Permission Admin Routes (/api/admin/permissions) GET /api/admin/permissions/:permissionName/roles should return 200 and list of role names","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 200 and list of role names"},{"ancestorTitles":["Integration Tests: Permission Admin Routes (/api/admin/permissions)","GET /api/admin/permissions/:permissionName/roles"],"duration":70,"failureDetails":[{"matcherResult":{"actual":500,"expected":404,"message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m404\u001b[39m\nReceived: \u001b[31m500\u001b[39m","name":"toBe","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m404\u001b[39m\nReceived: \u001b[31m500\u001b[39m\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\permission.admin.routes.integration.spec.ts:326:38\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\permission.admin.routes.integration.spec.ts:6:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"Integration Tests: Permission Admin Routes (/api/admin/permissions) GET /api/admin/permissions/:permissionName/roles should return 404 if permission is not found","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 404 if permission is not found"},{"ancestorTitles":["Integration Tests: Permission Admin Routes (/api/admin/permissions)","GET /api/admin/permissions/:permissionName/roles"],"duration":89,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests: Permission Admin Routes (/api/admin/permissions) GET /api/admin/permissions/:permissionName/roles should return 401 if token is invalid/missing","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 401 if token is invalid/missing"}],"endTime":1771844453519,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mIntegration Tests: Permission Admin Routes (/api/admin/permissions) › POST /api/admin/permissions › should return 400 on validation error (e.g., missing permissionName)\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoEqual\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // deep equality\u001b[22m\n\n    \u001b[32m- Expected  - 1\u001b[39m\n    \u001b[31m+ Received  + 1\u001b[39m\n\n    \u001b[2m  Object {\u001b[22m\n    \u001b[32m-   \"body.permissionName\": \"Permission name is required\",\u001b[39m\n    \u001b[31m+   \"permissionName\": \"Permission name is required\",\u001b[39m\n    \u001b[2m  }\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 128 |\u001b[39m              expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m400\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 129 |\u001b[39m              expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mname)\u001b[33m.\u001b[39mtoBe(\u001b[32m'ValidationError'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 130 |\u001b[39m              expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mdetails)\u001b[33m.\u001b[39mtoEqual({\u001b[32m'body.permissionName'\u001b[39m\u001b[33m:\u001b[39m \u001b[32m'Permission name is required'\u001b[39m})\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                            \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 131 |\u001b[39m              expect(mockPermissionAdminService\u001b[33m.\u001b[39mcreatePermission)\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 132 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 133 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/permission.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:130:44\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat fulfilled (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/permission.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:6:58)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mIntegration Tests: Permission Admin Routes (/api/admin/permissions) › GET /api/admin/permissions/:permissionName › should return 200 and the permission if found\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\n    Expected: \u001b[32m200\u001b[39m\n    Received: \u001b[31m500\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 166 |\u001b[39m                  \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[33mTEST_ADMIN_TOKEN\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 167 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 168 |\u001b[39m              expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 169 |\u001b[39m              expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mpermissionName)\u001b[33m.\u001b[39mtoBe(permName)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 170 |\u001b[39m              expect(mockPermissionAdminService\u001b[33m.\u001b[39mgetPermission)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[22m\n\u001b[2m     \u001b[90m 171 |\u001b[39m                  expect\u001b[33m.\u001b[39mobjectContaining({ id\u001b[33m:\u001b[39m \u001b[32m'test-admin-id-123'\u001b[39m })\u001b[33m,\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/permission.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:168:38\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat fulfilled (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/permission.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:6:58)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mIntegration Tests: Permission Admin Routes (/api/admin/permissions) › GET /api/admin/permissions/:permissionName › should return 404 if permission not found\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\n    Expected: \u001b[32m404\u001b[39m\n    Received: \u001b[31m500\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 180 |\u001b[39m                  \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[33mTEST_ADMIN_TOKEN\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 181 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 182 |\u001b[39m              expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m404\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 183 |\u001b[39m              \u001b[90m// Check based on controller's response or NotFoundError handling in middleware\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 184 |\u001b[39m              expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mmessage)\u001b[33m.\u001b[39mtoContain(\u001b[32m'not found'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 185 |\u001b[39m          })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/permission.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:182:38\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat fulfilled (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/permission.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:6:58)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mIntegration Tests: Permission Admin Routes (/api/admin/permissions) › DELETE /api/admin/permissions/:permissionName › should return 204 on successful deletion\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\n    Expected: \u001b[32m204\u001b[39m\n    Received: \u001b[31m500\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 275 |\u001b[39m                  \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[33mTEST_ADMIN_TOKEN\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 276 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 277 |\u001b[39m              expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m204\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 278 |\u001b[39m              expect(mockPermissionAdminService\u001b[33m.\u001b[39mdeletePermission)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[22m\n\u001b[2m     \u001b[90m 279 |\u001b[39m                  expect\u001b[33m.\u001b[39mobjectContaining({ id\u001b[33m:\u001b[39m \u001b[32m'test-admin-id-123'\u001b[39m })\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 280 |\u001b[39m                  permName\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/permission.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:277:38\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat fulfilled (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/permission.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:6:58)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mIntegration Tests: Permission Admin Routes (/api/admin/permissions) › DELETE /api/admin/permissions/:permissionName › should return 404 if permission not found for deletion\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\n    Expected: \u001b[32m404\u001b[39m\n    Received: \u001b[31m500\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 289 |\u001b[39m                  \u001b[33m.\u001b[39m\u001b[36mdelete\u001b[39m(\u001b[32m`${BASE_API_PATH}/${permName}`\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m 290 |\u001b[39m                  \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[33mTEST_ADMIN_TOKEN\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 291 |\u001b[39m              expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m404\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 292 |\u001b[39m          })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 293 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 294 |\u001b[39m          it(\u001b[32m'should return 401 if token is invalid/missing'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/permission.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:291:38\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat fulfilled (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/permission.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:6:58)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mIntegration Tests: Permission Admin Routes (/api/admin/permissions) › GET /api/admin/permissions/:permissionName/roles › should return 200 and list of role names\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\n    Expected: \u001b[32m200\u001b[39m\n    Received: \u001b[31m500\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 309 |\u001b[39m                  \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[33mTEST_ADMIN_TOKEN\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 310 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 311 |\u001b[39m              expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 312 |\u001b[39m              expect(response\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoEqual({ roles })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 313 |\u001b[39m              expect(mockPermissionAdminService\u001b[33m.\u001b[39mlistRolesForPermission)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[22m\n\u001b[2m     \u001b[90m 314 |\u001b[39m                  expect\u001b[33m.\u001b[39mobjectContaining({ id\u001b[33m:\u001b[39m \u001b[32m'test-admin-id-123'\u001b[39m })\u001b[33m,\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/permission.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:311:38\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat fulfilled (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/permission.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:6:58)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mIntegration Tests: Permission Admin Routes (/api/admin/permissions) › GET /api/admin/permissions/:permissionName/roles › should return 404 if permission is not found\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\n    Expected: \u001b[32m404\u001b[39m\n    Received: \u001b[31m500\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 324 |\u001b[39m                  \u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[32m`${BASE_API_PATH}/${permName}/roles`\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m 325 |\u001b[39m                  \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[33mTEST_ADMIN_TOKEN\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 326 |\u001b[39m              expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m404\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 327 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 328 |\u001b[39m          it(\u001b[32m'should return 401 if token is invalid/missing'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m 329 |\u001b[39m              \u001b[36mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[32m`${BASE_API_PATH}/${permName}/roles`\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/permission.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:326:38\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat fulfilled (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/permission.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:6:58)\u001b[22m\u001b[2m\u001b[22m\n","name":"E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\permission.admin.routes.integration.spec.ts","startTime":1771844397911,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Integration Tests: Role Admin Routes (/api/admin/roles)","POST /api/admin/roles"],"duration":550,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests: Role Admin Routes (/api/admin/roles) POST /api/admin/roles should return 201 Created when payload is valid and service succeeds","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should return 201 Created when payload is valid and service succeeds"},{"ancestorTitles":["Integration Tests: Role Admin Routes (/api/admin/roles)","GET /api/admin/roles"],"duration":146,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests: Role Admin Routes (/api/admin/roles) GET /api/admin/roles should return 200 OK with a list of roles","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should return 200 OK with a list of roles"},{"ancestorTitles":["Integration Tests: Role Admin Routes (/api/admin/roles)","GET /api/admin/roles/:roleName"],"duration":166,"failureDetails":[{}],"failureMessages":["Error: expected 200 \"OK\", got 500 \"Internal Server Error\"\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\role.admin.routes.integration.spec.ts:144:18\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\role.admin.routes.integration.spec.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\role.admin.routes.integration.spec.ts:4:12)\n    at Object.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\role.admin.routes.integration.spec.ts:139:77)\n    at Promise.then.completed (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\testWorker.js:108:12)\n----\n    at Test._assertStatus (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:309:14)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:365:13\n    at Test._assertFunction (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:342:13)\n    at Test.assert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:195:23)\n    at localAssert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:138:14)\n    at Server.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:152:11)\n    at Object.onceWrapper (node:events:633:28)\n    at Server.emit (node:events:519:28)\n    at emitCloseNT (node:net:2419:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"fullName":"Integration Tests: Role Admin Routes (/api/admin/roles) GET /api/admin/roles/:roleName should return 200 OK with role data if role exists","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 200 OK with role data if role exists"},{"ancestorTitles":["Integration Tests: Role Admin Routes (/api/admin/roles)","GET /api/admin/roles/:roleName"],"duration":95,"failureDetails":[{}],"failureMessages":["Error: expected 404 \"Not Found\", got 500 \"Internal Server Error\"\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\role.admin.routes.integration.spec.ts:157:18\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\role.admin.routes.integration.spec.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\role.admin.routes.integration.spec.ts:4:12)\n    at Object.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\role.admin.routes.integration.spec.ts:152:78)\n    at Promise.then.completed (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\testWorker.js:108:12)\n----\n    at Test._assertStatus (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:309:14)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:365:13\n    at Test._assertFunction (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:342:13)\n    at Test.assert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:195:23)\n    at localAssert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:138:14)\n    at Server.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:152:11)\n    at Object.onceWrapper (node:events:633:28)\n    at Server.emit (node:events:519:28)\n    at emitCloseNT (node:net:2419:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"fullName":"Integration Tests: Role Admin Routes (/api/admin/roles) GET /api/admin/roles/:roleName should return 404 Not Found if service returns null","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 404 Not Found if service returns null"},{"ancestorTitles":["Integration Tests: Role Admin Routes (/api/admin/roles)","GET /api/admin/roles/:roleName"],"duration":173,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests: Role Admin Routes (/api/admin/roles) GET /api/admin/roles/:roleName should return 401 Unauthorized if token is missing","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 401 Unauthorized if token is missing"},{"ancestorTitles":["Integration Tests: Role Admin Routes (/api/admin/roles)","PUT /api/admin/roles/:roleName"],"duration":104,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests: Role Admin Routes (/api/admin/roles) PUT /api/admin/roles/:roleName should return 200 OK with updated role data if service succeeds","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should return 200 OK with updated role data if service succeeds"},{"ancestorTitles":["Integration Tests: Role Admin Routes (/api/admin/roles)","PUT /api/admin/roles/:roleName"],"duration":115,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests: Role Admin Routes (/api/admin/roles) PUT /api/admin/roles/:roleName should return 404 Not Found if service returns null","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 404 Not Found if service returns null"},{"ancestorTitles":["Integration Tests: Role Admin Routes (/api/admin/roles)","PUT /api/admin/roles/:roleName"],"duration":107,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests: Role Admin Routes (/api/admin/roles) PUT /api/admin/roles/:roleName should return 401 Unauthorized if token is missing","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 401 Unauthorized if token is missing"},{"ancestorTitles":["Integration Tests: Role Admin Routes (/api/admin/roles)","DELETE /api/admin/roles/:roleName"],"duration":108,"failureDetails":[{}],"failureMessages":["Error: expected 204 \"No Content\", got 500 \"Internal Server Error\"\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\role.admin.routes.integration.spec.ts:217:18\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\role.admin.routes.integration.spec.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\role.admin.routes.integration.spec.ts:4:12)\n    at Object.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\role.admin.routes.integration.spec.ts:212:75)\n    at Promise.then.completed (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\testWorker.js:108:12)\n----\n    at Test._assertStatus (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:309:14)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:365:13\n    at Test._assertFunction (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:342:13)\n    at Test.assert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:195:23)\n    at localAssert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:138:14)\n    at Server.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:152:11)\n    at Object.onceWrapper (node:events:633:28)\n    at Server.emit (node:events:519:28)\n    at emitCloseNT (node:net:2419:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"fullName":"Integration Tests: Role Admin Routes (/api/admin/roles) DELETE /api/admin/roles/:roleName should return 204 No Content if service succeeds","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 204 No Content if service succeeds"},{"ancestorTitles":["Integration Tests: Role Admin Routes (/api/admin/roles)","DELETE /api/admin/roles/:roleName"],"duration":80,"failureDetails":[{}],"failureMessages":["Error: expected 404 \"Not Found\", got 500 \"Internal Server Error\"\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\role.admin.routes.integration.spec.ts:228:18\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\role.admin.routes.integration.spec.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\role.admin.routes.integration.spec.ts:4:12)\n    at Object.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\role.admin.routes.integration.spec.ts:221:90)\n    at Promise.then.completed (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\testWorker.js:108:12)\n----\n    at Test._assertStatus (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:309:14)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:365:13\n    at Test._assertFunction (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:342:13)\n    at Test.assert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:195:23)\n    at localAssert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:138:14)\n    at Server.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:152:11)\n    at Object.onceWrapper (node:events:633:28)\n    at Server.emit (node:events:519:28)\n    at emitCloseNT (node:net:2419:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"fullName":"Integration Tests: Role Admin Routes (/api/admin/roles) DELETE /api/admin/roles/:roleName should return 404 Not Found if service throws RoleNotFoundError","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 404 Not Found if service throws RoleNotFoundError"},{"ancestorTitles":["Integration Tests: Role Admin Routes (/api/admin/roles)","DELETE /api/admin/roles/:roleName"],"duration":114,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests: Role Admin Routes (/api/admin/roles) DELETE /api/admin/roles/:roleName should return 401 Unauthorized if token is missing","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 401 Unauthorized if token is missing"},{"ancestorTitles":["Integration Tests: Role Admin Routes (/api/admin/roles)","Permissions Management (/api/admin/roles/:roleName/permissions)","POST /:roleName/permissions"],"duration":72,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests: Role Admin Routes (/api/admin/roles) Permissions Management (/api/admin/roles/:roleName/permissions) POST /:roleName/permissions should return 204 No Content on successful assignment","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 204 No Content on successful assignment"},{"ancestorTitles":["Integration Tests: Role Admin Routes (/api/admin/roles)","Permissions Management (/api/admin/roles/:roleName/permissions)","DELETE /:roleName/permissions/:permissionName"],"duration":52,"failureDetails":[{}],"failureMessages":["Error: expected 204 \"No Content\", got 500 \"Internal Server Error\"\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\role.admin.routes.integration.spec.ts:262:22\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\role.admin.routes.integration.spec.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\role.admin.routes.integration.spec.ts:4:12)\n    at Object.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\role.admin.routes.integration.spec.ts:257:81)\n    at Promise.then.completed (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\testWorker.js:108:12)\n----\n    at Test._assertStatus (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:309:14)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:365:13\n    at Test._assertFunction (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:342:13)\n    at Test.assert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:195:23)\n    at localAssert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:138:14)\n    at Server.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:152:11)\n    at Object.onceWrapper (node:events:633:28)\n    at Server.emit (node:events:519:28)\n    at emitCloseNT (node:net:2419:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"fullName":"Integration Tests: Role Admin Routes (/api/admin/roles) Permissions Management (/api/admin/roles/:roleName/permissions) DELETE /:roleName/permissions/:permissionName should return 204 No Content on successful removal","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 204 No Content on successful removal"},{"ancestorTitles":["Integration Tests: Role Admin Routes (/api/admin/roles)","Permissions Management (/api/admin/roles/:roleName/permissions)","GET /:roleName/permissions"],"duration":76,"failureDetails":[{}],"failureMessages":["Error: expected 200 \"OK\", got 500 \"Internal Server Error\"\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\role.admin.routes.integration.spec.ts:274:22\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\role.admin.routes.integration.spec.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\role.admin.routes.integration.spec.ts:4:12)\n    at Object.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\role.admin.routes.integration.spec.ts:268:83)\n    at Promise.then.completed (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\testWorker.js:108:12)\n----\n    at Test._assertStatus (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:309:14)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:365:13\n    at Test._assertFunction (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:342:13)\n    at Test.assert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:195:23)\n    at localAssert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:138:14)\n    at Server.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:152:11)\n    at Object.onceWrapper (node:events:633:28)\n    at Server.emit (node:events:519:28)\n    at emitCloseNT (node:net:2419:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"fullName":"Integration Tests: Role Admin Routes (/api/admin/roles) Permissions Management (/api/admin/roles/:roleName/permissions) GET /:roleName/permissions should return 200 OK with a list of permission names","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 200 OK with a list of permission names"}],"endTime":1771844453642,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mIntegration Tests: Role Admin Routes (/api/admin/roles) › GET /api/admin/roles/:roleName › should return 200 OK with role data if role exists\u001b[39m\u001b[22m\n\n    expected 200 \"OK\", got 500 \"Internal Server Error\"\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 142 |\u001b[39m                 \u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[32m`${BASE_API_PATH}/${targetRoleName}`\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m 143 |\u001b[39m                 \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[33mMOCK_AUTH_HEADER\u001b[39m)\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 144 |\u001b[39m                 \u001b[33m.\u001b[39mexpect(\u001b[33mHttpStatusCode\u001b[39m\u001b[33m.\u001b[39m\u001b[33mOK\u001b[39m) \u001b[90m// 200\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                  \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 145 |\u001b[39m                 \u001b[33m.\u001b[39mexpect(res \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m 146 |\u001b[39m                     expect(res\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mroleName)\u001b[33m.\u001b[39mtoBe(targetRoleName)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 147 |\u001b[39m                     expect(res\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mdescription)\u001b[33m.\u001b[39mtoBe(\u001b[32m'get role'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/role.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:144:18\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/role.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:8:71\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous>.__awaiter (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/role.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:4:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/role.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:139:77)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      ----\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertStatus (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:309:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:365:13\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertFunction (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:342:13)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.assert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:195:23)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat localAssert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:138:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Server.<anonymous> (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:152:11)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mIntegration Tests: Role Admin Routes (/api/admin/roles) › GET /api/admin/roles/:roleName › should return 404 Not Found if service returns null\u001b[39m\u001b[22m\n\n    expected 404 \"Not Found\", got 500 \"Internal Server Error\"\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 155 |\u001b[39m                 \u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[32m`${BASE_API_PATH}/${targetRoleName}`\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m 156 |\u001b[39m                 \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[33mMOCK_AUTH_HEADER\u001b[39m)\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 157 |\u001b[39m                 \u001b[33m.\u001b[39mexpect(\u001b[33mHttpStatusCode\u001b[39m\u001b[33m.\u001b[39m\u001b[33mNOT_FOUND\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// 404\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                  \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 158 |\u001b[39m             expect(mockRoleAdminService\u001b[33m.\u001b[39mgetRole)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(expect\u001b[33m.\u001b[39manything()\u001b[33m,\u001b[39m targetRoleName)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 159 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 160 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/role.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:157:18\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/role.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:8:71\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous>.__awaiter (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/role.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:4:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/role.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:152:78)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      ----\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertStatus (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:309:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:365:13\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertFunction (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:342:13)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.assert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:195:23)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat localAssert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:138:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Server.<anonymous> (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:152:11)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mIntegration Tests: Role Admin Routes (/api/admin/roles) › DELETE /api/admin/roles/:roleName › should return 204 No Content if service succeeds\u001b[39m\u001b[22m\n\n    expected 204 \"No Content\", got 500 \"Internal Server Error\"\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 215 |\u001b[39m                 \u001b[33m.\u001b[39m\u001b[36mdelete\u001b[39m(\u001b[32m`${BASE_API_PATH}/${targetRoleName}`\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m 216 |\u001b[39m                 \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[33mMOCK_AUTH_HEADER\u001b[39m)\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 217 |\u001b[39m                 \u001b[33m.\u001b[39mexpect(\u001b[33mHttpStatusCode\u001b[39m\u001b[33m.\u001b[39m\u001b[33mNO_CONTENT\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// 204\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                  \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 218 |\u001b[39m             expect(mockRoleAdminService\u001b[33m.\u001b[39mdeleteRole)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(expect\u001b[33m.\u001b[39manything()\u001b[33m,\u001b[39m targetRoleName)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 219 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 220 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/role.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:217:18\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/role.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:8:71\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous>.__awaiter (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/role.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:4:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/role.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:212:75)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      ----\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertStatus (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:309:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:365:13\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertFunction (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:342:13)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.assert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:195:23)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat localAssert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:138:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Server.<anonymous> (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:152:11)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mIntegration Tests: Role Admin Routes (/api/admin/roles) › DELETE /api/admin/roles/:roleName › should return 404 Not Found if service throws RoleNotFoundError\u001b[39m\u001b[22m\n\n    expected 404 \"Not Found\", got 500 \"Internal Server Error\"\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 226 |\u001b[39m                 \u001b[33m.\u001b[39m\u001b[36mdelete\u001b[39m(\u001b[32m`${BASE_API_PATH}/${targetRoleName}`\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m 227 |\u001b[39m                 \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[33mMOCK_AUTH_HEADER\u001b[39m)\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 228 |\u001b[39m                 \u001b[33m.\u001b[39mexpect(\u001b[33mHttpStatusCode\u001b[39m\u001b[33m.\u001b[39m\u001b[33mNOT_FOUND\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// 404\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                  \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 229 |\u001b[39m             expect(mockRoleAdminService\u001b[33m.\u001b[39mdeleteRole)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(expect\u001b[33m.\u001b[39manything()\u001b[33m,\u001b[39m targetRoleName)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 230 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 231 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/role.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:228:18\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/role.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:8:71\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous>.__awaiter (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/role.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:4:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/role.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:221:90)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      ----\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertStatus (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:309:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:365:13\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertFunction (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:342:13)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.assert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:195:23)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat localAssert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:138:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Server.<anonymous> (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:152:11)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mIntegration Tests: Role Admin Routes (/api/admin/roles) › Permissions Management (/api/admin/roles/:roleName/permissions) › DELETE /:roleName/permissions/:permissionName › should return 204 No Content on successful removal\u001b[39m\u001b[22m\n\n    expected 204 \"No Content\", got 500 \"Internal Server Error\"\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 260 |\u001b[39m                     \u001b[33m.\u001b[39m\u001b[36mdelete\u001b[39m(\u001b[32m`${BASE_API_PATH}/${targetRoleName}/permissions/${targetPermissionName}`\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m 261 |\u001b[39m                     \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[33mMOCK_AUTH_HEADER\u001b[39m)\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 262 |\u001b[39m                     \u001b[33m.\u001b[39mexpect(\u001b[33mHttpStatusCode\u001b[39m\u001b[33m.\u001b[39m\u001b[33mNO_CONTENT\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// 204\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 263 |\u001b[39m                 expect(mockRoleAdminService\u001b[33m.\u001b[39mremovePermissionFromRole)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(expect\u001b[33m.\u001b[39manything()\u001b[33m,\u001b[39m targetRoleName\u001b[33m,\u001b[39m targetPermissionName)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 264 |\u001b[39m             })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 265 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/role.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:262:22\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/role.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:8:71\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous>.__awaiter (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/role.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:4:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/role.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:257:81)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      ----\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertStatus (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:309:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:365:13\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertFunction (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:342:13)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.assert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:195:23)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat localAssert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:138:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Server.<anonymous> (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:152:11)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mIntegration Tests: Role Admin Routes (/api/admin/roles) › Permissions Management (/api/admin/roles/:roleName/permissions) › GET /:roleName/permissions › should return 200 OK with a list of permission names\u001b[39m\u001b[22m\n\n    expected 200 \"OK\", got 500 \"Internal Server Error\"\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 272 |\u001b[39m                     \u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[32m`${BASE_API_PATH}/${targetRoleName}/permissions`\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m 273 |\u001b[39m                     \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[33mMOCK_AUTH_HEADER\u001b[39m)\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 274 |\u001b[39m                     \u001b[33m.\u001b[39mexpect(\u001b[33mHttpStatusCode\u001b[39m\u001b[33m.\u001b[39m\u001b[33mOK\u001b[39m) \u001b[90m// 200\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 275 |\u001b[39m                     \u001b[33m.\u001b[39mexpect(res \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m 276 |\u001b[39m                         expect(res\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mpermissions)\u001b[33m.\u001b[39mtoEqual(mockPermissions)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 277 |\u001b[39m                     })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/role.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:274:22\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/role.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:8:71\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous>.__awaiter (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/role.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:4:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/role.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:268:83)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      ----\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertStatus (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:309:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:365:13\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertFunction (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:342:13)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.assert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:195:23)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat localAssert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:138:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Server.<anonymous> (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:152:11)\u001b[22m\u001b[2m\u001b[22m\n","name":"E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\role.admin.routes.integration.spec.ts","startTime":1771844397922,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["DynamoUserProfileRepository Integration Tests"],"duration":609,"failureDetails":[],"failureMessages":[],"fullName":"DynamoUserProfileRepository Integration Tests should save a new user profile","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"should save a new user profile"},{"ancestorTitles":["DynamoUserProfileRepository Integration Tests"],"duration":95,"failureDetails":[{"name":"ValidationException","$fault":"client","$metadata":{"httpStatusCode":400,"requestId":"EBE3C0HMSGN706CMPPNF4O662JVV4KQNSO5AEMVJF66Q9ASUAAJG","attempts":1,"totalRetryDelay":0},"__type":"com.amazon.coral.validate#ValidationException","message":"The provided key element does not match the schema"}],"failureMessages":["ValidationException: The provided key element does not match the schema\n    at throwDefaultError (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+smithy-client@4.5.0\\node_modules\\@smithy\\smithy-client\\dist-cjs\\index.js:425:20)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+smithy-client@4.5.0\\node_modules\\@smithy\\smithy-client\\dist-cjs\\index.js:434:5\n    at de_CommandError (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@aws-sdk+client-dynamodb@3.879.0\\node_modules\\@aws-sdk\\client-dynamodb\\dist-cjs\\index.js:2359:14)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+middleware-serde@4.0.9\\node_modules\\@smithy\\middleware-serde\\dist-cjs\\index.js:36:20\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@aws-sdk+lib-dynamodb@3.879_ee4568148364d683af0669b014af13ba\\node_modules\\@aws-sdk\\lib-dynamodb\\dist-cjs\\index.js:173:30\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+core@3.9.0\\node_modules\\@smithy\\core\\dist-cjs\\index.js:193:18\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+middleware-retry@4.1.20\\node_modules\\@smithy\\middleware-retry\\dist-cjs\\index.js:320:38\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@aws-sdk+middleware-logger@3.876.0\\node_modules\\@aws-sdk\\middleware-logger\\dist-cjs\\index.js:33:22"],"fullName":"DynamoUserProfileRepository Integration Tests should throw error when saving duplicate user profile (implement check in repo)","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should throw error when saving duplicate user profile (implement check in repo)"},{"ancestorTitles":["DynamoUserProfileRepository Integration Tests"],"duration":72,"failureDetails":[{"name":"ValidationException","$fault":"client","$metadata":{"httpStatusCode":400,"requestId":"U0A7NQJHSTBG2NMIECHO06EC9BVV4KQNSO5AEMVJF66Q9ASUAAJG","attempts":1,"totalRetryDelay":0},"__type":"com.amazon.coral.validate#ValidationException","message":"The provided key element does not match the schema"}],"failureMessages":["ValidationException: The provided key element does not match the schema\n    at throwDefaultError (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+smithy-client@4.5.0\\node_modules\\@smithy\\smithy-client\\dist-cjs\\index.js:425:20)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+smithy-client@4.5.0\\node_modules\\@smithy\\smithy-client\\dist-cjs\\index.js:434:5\n    at de_CommandError (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@aws-sdk+client-dynamodb@3.879.0\\node_modules\\@aws-sdk\\client-dynamodb\\dist-cjs\\index.js:2359:14)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+middleware-serde@4.0.9\\node_modules\\@smithy\\middleware-serde\\dist-cjs\\index.js:36:20\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@aws-sdk+lib-dynamodb@3.879_ee4568148364d683af0669b014af13ba\\node_modules\\@aws-sdk\\lib-dynamodb\\dist-cjs\\index.js:173:30\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+core@3.9.0\\node_modules\\@smithy\\core\\dist-cjs\\index.js:193:18\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+middleware-retry@4.1.20\\node_modules\\@smithy\\middleware-retry\\dist-cjs\\index.js:320:38\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@aws-sdk+middleware-logger@3.876.0\\node_modules\\@aws-sdk\\middleware-logger\\dist-cjs\\index.js:33:22"],"fullName":"DynamoUserProfileRepository Integration Tests should find an existing profile by ID","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should find an existing profile by ID"},{"ancestorTitles":["DynamoUserProfileRepository Integration Tests"],"duration":91,"failureDetails":[{"name":"ValidationException","$fault":"client","$metadata":{"httpStatusCode":400,"requestId":"89MR7UA5MNG98QCOCDKO0MPB8JVV4KQNSO5AEMVJF66Q9ASUAAJG","attempts":1,"totalRetryDelay":0},"__type":"com.amazon.coral.validate#ValidationException","message":"The provided key element does not match the schema"}],"failureMessages":["ValidationException: The provided key element does not match the schema\n    at throwDefaultError (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+smithy-client@4.5.0\\node_modules\\@smithy\\smithy-client\\dist-cjs\\index.js:425:20)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+smithy-client@4.5.0\\node_modules\\@smithy\\smithy-client\\dist-cjs\\index.js:434:5\n    at de_CommandError (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@aws-sdk+client-dynamodb@3.879.0\\node_modules\\@aws-sdk\\client-dynamodb\\dist-cjs\\index.js:2359:14)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+middleware-serde@4.0.9\\node_modules\\@smithy\\middleware-serde\\dist-cjs\\index.js:36:20\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@aws-sdk+lib-dynamodb@3.879_ee4568148364d683af0669b014af13ba\\node_modules\\@aws-sdk\\lib-dynamodb\\dist-cjs\\index.js:173:30\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+core@3.9.0\\node_modules\\@smithy\\core\\dist-cjs\\index.js:193:18\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+middleware-retry@4.1.20\\node_modules\\@smithy\\middleware-retry\\dist-cjs\\index.js:320:38\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@aws-sdk+middleware-logger@3.876.0\\node_modules\\@aws-sdk\\middleware-logger\\dist-cjs\\index.js:33:22"],"fullName":"DynamoUserProfileRepository Integration Tests should return null when finding non-existent profile by ID","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return null when finding non-existent profile by ID"},{"ancestorTitles":["DynamoUserProfileRepository Integration Tests"],"duration":65,"failureDetails":[{"name":"ValidationException","$fault":"client","$metadata":{"httpStatusCode":400,"requestId":"RM12M9RK51B2MIUFVAG7ESLRKFVV4KQNSO5AEMVJF66Q9ASUAAJG","attempts":1,"totalRetryDelay":0},"__type":"com.amazon.coral.validate#ValidationException","message":"The provided key element does not match the schema"}],"failureMessages":["ValidationException: The provided key element does not match the schema\n    at throwDefaultError (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+smithy-client@4.5.0\\node_modules\\@smithy\\smithy-client\\dist-cjs\\index.js:425:20)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+smithy-client@4.5.0\\node_modules\\@smithy\\smithy-client\\dist-cjs\\index.js:434:5\n    at de_CommandError (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@aws-sdk+client-dynamodb@3.879.0\\node_modules\\@aws-sdk\\client-dynamodb\\dist-cjs\\index.js:2359:14)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+middleware-serde@4.0.9\\node_modules\\@smithy\\middleware-serde\\dist-cjs\\index.js:36:20\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@aws-sdk+lib-dynamodb@3.879_ee4568148364d683af0669b014af13ba\\node_modules\\@aws-sdk\\lib-dynamodb\\dist-cjs\\index.js:173:30\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+core@3.9.0\\node_modules\\@smithy\\core\\dist-cjs\\index.js:193:18\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+middleware-retry@4.1.20\\node_modules\\@smithy\\middleware-retry\\dist-cjs\\index.js:320:38\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@aws-sdk+middleware-logger@3.876.0\\node_modules\\@aws-sdk\\middleware-logger\\dist-cjs\\index.js:33:22"],"fullName":"DynamoUserProfileRepository Integration Tests should find an existing profile by Email (assuming index exists)","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should find an existing profile by Email (assuming index exists)"},{"ancestorTitles":["DynamoUserProfileRepository Integration Tests"],"duration":58,"failureDetails":[{"name":"ValidationException","$fault":"client","$metadata":{"httpStatusCode":400,"requestId":"HVRF8A5PK8OP3H2070NQ79LU53VV4KQNSO5AEMVJF66Q9ASUAAJG","attempts":1,"totalRetryDelay":0},"__type":"com.amazon.coral.validate#ValidationException","message":"The provided key element does not match the schema"}],"failureMessages":["ValidationException: The provided key element does not match the schema\n    at throwDefaultError (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+smithy-client@4.5.0\\node_modules\\@smithy\\smithy-client\\dist-cjs\\index.js:425:20)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+smithy-client@4.5.0\\node_modules\\@smithy\\smithy-client\\dist-cjs\\index.js:434:5\n    at de_CommandError (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@aws-sdk+client-dynamodb@3.879.0\\node_modules\\@aws-sdk\\client-dynamodb\\dist-cjs\\index.js:2359:14)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+middleware-serde@4.0.9\\node_modules\\@smithy\\middleware-serde\\dist-cjs\\index.js:36:20\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@aws-sdk+lib-dynamodb@3.879_ee4568148364d683af0669b014af13ba\\node_modules\\@aws-sdk\\lib-dynamodb\\dist-cjs\\index.js:173:30\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+core@3.9.0\\node_modules\\@smithy\\core\\dist-cjs\\index.js:193:18\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+middleware-retry@4.1.20\\node_modules\\@smithy\\middleware-retry\\dist-cjs\\index.js:320:38\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@aws-sdk+middleware-logger@3.876.0\\node_modules\\@aws-sdk\\middleware-logger\\dist-cjs\\index.js:33:22"],"fullName":"DynamoUserProfileRepository Integration Tests should return null when finding non-existent profile by Email","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return null when finding non-existent profile by Email"},{"ancestorTitles":["DynamoUserProfileRepository Integration Tests"],"duration":66,"failureDetails":[{"name":"ValidationException","$fault":"client","$metadata":{"httpStatusCode":400,"requestId":"N6RNQIMF5MP1DLN7S3085TDBM3VV4KQNSO5AEMVJF66Q9ASUAAJG","attempts":1,"totalRetryDelay":0},"__type":"com.amazon.coral.validate#ValidationException","message":"The provided key element does not match the schema"}],"failureMessages":["ValidationException: The provided key element does not match the schema\n    at throwDefaultError (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+smithy-client@4.5.0\\node_modules\\@smithy\\smithy-client\\dist-cjs\\index.js:425:20)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+smithy-client@4.5.0\\node_modules\\@smithy\\smithy-client\\dist-cjs\\index.js:434:5\n    at de_CommandError (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@aws-sdk+client-dynamodb@3.879.0\\node_modules\\@aws-sdk\\client-dynamodb\\dist-cjs\\index.js:2359:14)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+middleware-serde@4.0.9\\node_modules\\@smithy\\middleware-serde\\dist-cjs\\index.js:36:20\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@aws-sdk+lib-dynamodb@3.879_ee4568148364d683af0669b014af13ba\\node_modules\\@aws-sdk\\lib-dynamodb\\dist-cjs\\index.js:173:30\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+core@3.9.0\\node_modules\\@smithy\\core\\dist-cjs\\index.js:193:18\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+middleware-retry@4.1.20\\node_modules\\@smithy\\middleware-retry\\dist-cjs\\index.js:320:38\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@aws-sdk+middleware-logger@3.876.0\\node_modules\\@aws-sdk\\middleware-logger\\dist-cjs\\index.js:33:22"],"fullName":"DynamoUserProfileRepository Integration Tests should update an existing profile","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should update an existing profile"},{"ancestorTitles":["DynamoUserProfileRepository Integration Tests"],"duration":61,"failureDetails":[{"name":"ValidationException","$fault":"client","$metadata":{"httpStatusCode":400,"requestId":"FENAHGSFAKM0S3E2IUE5UCNR7JVV4KQNSO5AEMVJF66Q9ASUAAJG","attempts":1,"totalRetryDelay":0},"__type":"com.amazon.coral.validate#ValidationException","message":"The provided key element does not match the schema"}],"failureMessages":["ValidationException: The provided key element does not match the schema\n    at throwDefaultError (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+smithy-client@4.5.0\\node_modules\\@smithy\\smithy-client\\dist-cjs\\index.js:425:20)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+smithy-client@4.5.0\\node_modules\\@smithy\\smithy-client\\dist-cjs\\index.js:434:5\n    at de_CommandError (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@aws-sdk+client-dynamodb@3.879.0\\node_modules\\@aws-sdk\\client-dynamodb\\dist-cjs\\index.js:2359:14)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+middleware-serde@4.0.9\\node_modules\\@smithy\\middleware-serde\\dist-cjs\\index.js:36:20\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@aws-sdk+lib-dynamodb@3.879_ee4568148364d683af0669b014af13ba\\node_modules\\@aws-sdk\\lib-dynamodb\\dist-cjs\\index.js:173:30\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+core@3.9.0\\node_modules\\@smithy\\core\\dist-cjs\\index.js:193:18\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+middleware-retry@4.1.20\\node_modules\\@smithy\\middleware-retry\\dist-cjs\\index.js:320:38\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@aws-sdk+middleware-logger@3.876.0\\node_modules\\@aws-sdk\\middleware-logger\\dist-cjs\\index.js:33:22"],"fullName":"DynamoUserProfileRepository Integration Tests should throw error when updating non-existent profile (implement check)","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should throw error when updating non-existent profile (implement check)"},{"ancestorTitles":["DynamoUserProfileRepository Integration Tests"],"duration":49,"failureDetails":[{"name":"ValidationException","$fault":"client","$metadata":{"httpStatusCode":400,"requestId":"PMP6QD99VH8PK2REO9P7MNDPSBVV4KQNSO5AEMVJF66Q9ASUAAJG","attempts":1,"totalRetryDelay":0},"__type":"com.amazon.coral.validate#ValidationException","message":"The provided key element does not match the schema"}],"failureMessages":["ValidationException: The provided key element does not match the schema\n    at throwDefaultError (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+smithy-client@4.5.0\\node_modules\\@smithy\\smithy-client\\dist-cjs\\index.js:425:20)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+smithy-client@4.5.0\\node_modules\\@smithy\\smithy-client\\dist-cjs\\index.js:434:5\n    at de_CommandError (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@aws-sdk+client-dynamodb@3.879.0\\node_modules\\@aws-sdk\\client-dynamodb\\dist-cjs\\index.js:2359:14)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+middleware-serde@4.0.9\\node_modules\\@smithy\\middleware-serde\\dist-cjs\\index.js:36:20\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@aws-sdk+lib-dynamodb@3.879_ee4568148364d683af0669b014af13ba\\node_modules\\@aws-sdk\\lib-dynamodb\\dist-cjs\\index.js:173:30\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+core@3.9.0\\node_modules\\@smithy\\core\\dist-cjs\\index.js:193:18\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+middleware-retry@4.1.20\\node_modules\\@smithy\\middleware-retry\\dist-cjs\\index.js:320:38\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@aws-sdk+middleware-logger@3.876.0\\node_modules\\@aws-sdk\\middleware-logger\\dist-cjs\\index.js:33:22"],"fullName":"DynamoUserProfileRepository Integration Tests should delete an existing profile","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should delete an existing profile"},{"ancestorTitles":["DynamoUserProfileRepository Integration Tests"],"duration":50,"failureDetails":[{"name":"ValidationException","$fault":"client","$metadata":{"httpStatusCode":400,"requestId":"4U6RP7PIEL9S2LSJGBJISILUPJVV4KQNSO5AEMVJF66Q9ASUAAJG","attempts":1,"totalRetryDelay":0},"__type":"com.amazon.coral.validate#ValidationException","message":"The provided key element does not match the schema"}],"failureMessages":["ValidationException: The provided key element does not match the schema\n    at throwDefaultError (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+smithy-client@4.5.0\\node_modules\\@smithy\\smithy-client\\dist-cjs\\index.js:425:20)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+smithy-client@4.5.0\\node_modules\\@smithy\\smithy-client\\dist-cjs\\index.js:434:5\n    at de_CommandError (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@aws-sdk+client-dynamodb@3.879.0\\node_modules\\@aws-sdk\\client-dynamodb\\dist-cjs\\index.js:2359:14)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+middleware-serde@4.0.9\\node_modules\\@smithy\\middleware-serde\\dist-cjs\\index.js:36:20\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@aws-sdk+lib-dynamodb@3.879_ee4568148364d683af0669b014af13ba\\node_modules\\@aws-sdk\\lib-dynamodb\\dist-cjs\\index.js:173:30\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+core@3.9.0\\node_modules\\@smithy\\core\\dist-cjs\\index.js:193:18\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@smithy+middleware-retry@4.1.20\\node_modules\\@smithy\\middleware-retry\\dist-cjs\\index.js:320:38\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\@aws-sdk+middleware-logger@3.876.0\\node_modules\\@aws-sdk\\middleware-logger\\dist-cjs\\index.js:33:22"],"fullName":"DynamoUserProfileRepository Integration Tests should not throw when deleting non-existent profile (idempotent)","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should not throw when deleting non-existent profile (idempotent)"}],"endTime":1771844453707,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mDynamoUserProfileRepository Integration Tests › should throw error when saving duplicate user profile (implement check in repo)\u001b[39m\u001b[22m\n\n    ValidationException: The provided key element does not match the schema\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat throwDefaultError (\u001b[22m\u001b[2mnode_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js\u001b[2m:425:20)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js\u001b[2m:434:5\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat de_CommandError (\u001b[22m\u001b[2mnode_modules/.pnpm/@aws-sdk+client-dynamodb@3.879.0/node_modules/@aws-sdk/client-dynamodb/dist-cjs/index.js\u001b[2m:2359:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/@smithy+middleware-serde@4.0.9/node_modules/@smithy/middleware-serde/dist-cjs/index.js\u001b[2m:36:20\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/@aws-sdk+lib-dynamodb@3.879_ee4568148364d683af0669b014af13ba/node_modules/@aws-sdk/lib-dynamodb/dist-cjs/index.js\u001b[2m:173:30\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/@smithy+core@3.9.0/node_modules/@smithy/core/dist-cjs/index.js\u001b[2m:193:18\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/@smithy+middleware-retry@4.1.20/node_modules/@smithy/middleware-retry/dist-cjs/index.js\u001b[2m:320:38\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/@aws-sdk+middleware-logger@3.876.0/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js\u001b[2m:33:22\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mDynamoUserProfileRepository Integration Tests › should find an existing profile by ID\u001b[39m\u001b[22m\n\n    ValidationException: The provided key element does not match the schema\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat throwDefaultError (\u001b[22m\u001b[2mnode_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js\u001b[2m:425:20)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js\u001b[2m:434:5\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat de_CommandError (\u001b[22m\u001b[2mnode_modules/.pnpm/@aws-sdk+client-dynamodb@3.879.0/node_modules/@aws-sdk/client-dynamodb/dist-cjs/index.js\u001b[2m:2359:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/@smithy+middleware-serde@4.0.9/node_modules/@smithy/middleware-serde/dist-cjs/index.js\u001b[2m:36:20\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/@aws-sdk+lib-dynamodb@3.879_ee4568148364d683af0669b014af13ba/node_modules/@aws-sdk/lib-dynamodb/dist-cjs/index.js\u001b[2m:173:30\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/@smithy+core@3.9.0/node_modules/@smithy/core/dist-cjs/index.js\u001b[2m:193:18\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/@smithy+middleware-retry@4.1.20/node_modules/@smithy/middleware-retry/dist-cjs/index.js\u001b[2m:320:38\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/@aws-sdk+middleware-logger@3.876.0/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js\u001b[2m:33:22\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mDynamoUserProfileRepository Integration Tests › should return null when finding non-existent profile by ID\u001b[39m\u001b[22m\n\n    ValidationException: The provided key element does not match the schema\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat throwDefaultError (\u001b[22m\u001b[2mnode_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js\u001b[2m:425:20)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js\u001b[2m:434:5\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat de_CommandError (\u001b[22m\u001b[2mnode_modules/.pnpm/@aws-sdk+client-dynamodb@3.879.0/node_modules/@aws-sdk/client-dynamodb/dist-cjs/index.js\u001b[2m:2359:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/@smithy+middleware-serde@4.0.9/node_modules/@smithy/middleware-serde/dist-cjs/index.js\u001b[2m:36:20\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/@aws-sdk+lib-dynamodb@3.879_ee4568148364d683af0669b014af13ba/node_modules/@aws-sdk/lib-dynamodb/dist-cjs/index.js\u001b[2m:173:30\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/@smithy+core@3.9.0/node_modules/@smithy/core/dist-cjs/index.js\u001b[2m:193:18\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/@smithy+middleware-retry@4.1.20/node_modules/@smithy/middleware-retry/dist-cjs/index.js\u001b[2m:320:38\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/@aws-sdk+middleware-logger@3.876.0/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js\u001b[2m:33:22\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mDynamoUserProfileRepository Integration Tests › should find an existing profile by Email (assuming index exists)\u001b[39m\u001b[22m\n\n    ValidationException: The provided key element does not match the schema\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat throwDefaultError (\u001b[22m\u001b[2mnode_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js\u001b[2m:425:20)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js\u001b[2m:434:5\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat de_CommandError (\u001b[22m\u001b[2mnode_modules/.pnpm/@aws-sdk+client-dynamodb@3.879.0/node_modules/@aws-sdk/client-dynamodb/dist-cjs/index.js\u001b[2m:2359:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/@smithy+middleware-serde@4.0.9/node_modules/@smithy/middleware-serde/dist-cjs/index.js\u001b[2m:36:20\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/@aws-sdk+lib-dynamodb@3.879_ee4568148364d683af0669b014af13ba/node_modules/@aws-sdk/lib-dynamodb/dist-cjs/index.js\u001b[2m:173:30\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/@smithy+core@3.9.0/node_modules/@smithy/core/dist-cjs/index.js\u001b[2m:193:18\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/@smithy+middleware-retry@4.1.20/node_modules/@smithy/middleware-retry/dist-cjs/index.js\u001b[2m:320:38\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/@aws-sdk+middleware-logger@3.876.0/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js\u001b[2m:33:22\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mDynamoUserProfileRepository Integration Tests › should return null when finding non-existent profile by Email\u001b[39m\u001b[22m\n\n    ValidationException: The provided key element does not match the schema\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat throwDefaultError (\u001b[22m\u001b[2mnode_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js\u001b[2m:425:20)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js\u001b[2m:434:5\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat de_CommandError (\u001b[22m\u001b[2mnode_modules/.pnpm/@aws-sdk+client-dynamodb@3.879.0/node_modules/@aws-sdk/client-dynamodb/dist-cjs/index.js\u001b[2m:2359:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/@smithy+middleware-serde@4.0.9/node_modules/@smithy/middleware-serde/dist-cjs/index.js\u001b[2m:36:20\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/@aws-sdk+lib-dynamodb@3.879_ee4568148364d683af0669b014af13ba/node_modules/@aws-sdk/lib-dynamodb/dist-cjs/index.js\u001b[2m:173:30\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/@smithy+core@3.9.0/node_modules/@smithy/core/dist-cjs/index.js\u001b[2m:193:18\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/@smithy+middleware-retry@4.1.20/node_modules/@smithy/middleware-retry/dist-cjs/index.js\u001b[2m:320:38\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/@aws-sdk+middleware-logger@3.876.0/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js\u001b[2m:33:22\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mDynamoUserProfileRepository Integration Tests › should update an existing profile\u001b[39m\u001b[22m\n\n    ValidationException: The provided key element does not match the schema\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat throwDefaultError (\u001b[22m\u001b[2mnode_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js\u001b[2m:425:20)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js\u001b[2m:434:5\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat de_CommandError (\u001b[22m\u001b[2mnode_modules/.pnpm/@aws-sdk+client-dynamodb@3.879.0/node_modules/@aws-sdk/client-dynamodb/dist-cjs/index.js\u001b[2m:2359:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/@smithy+middleware-serde@4.0.9/node_modules/@smithy/middleware-serde/dist-cjs/index.js\u001b[2m:36:20\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/@aws-sdk+lib-dynamodb@3.879_ee4568148364d683af0669b014af13ba/node_modules/@aws-sdk/lib-dynamodb/dist-cjs/index.js\u001b[2m:173:30\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/@smithy+core@3.9.0/node_modules/@smithy/core/dist-cjs/index.js\u001b[2m:193:18\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/@smithy+middleware-retry@4.1.20/node_modules/@smithy/middleware-retry/dist-cjs/index.js\u001b[2m:320:38\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/@aws-sdk+middleware-logger@3.876.0/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js\u001b[2m:33:22\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mDynamoUserProfileRepository Integration Tests › should throw error when updating non-existent profile (implement check)\u001b[39m\u001b[22m\n\n    ValidationException: The provided key element does not match the schema\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat throwDefaultError (\u001b[22m\u001b[2mnode_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js\u001b[2m:425:20)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js\u001b[2m:434:5\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat de_CommandError (\u001b[22m\u001b[2mnode_modules/.pnpm/@aws-sdk+client-dynamodb@3.879.0/node_modules/@aws-sdk/client-dynamodb/dist-cjs/index.js\u001b[2m:2359:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/@smithy+middleware-serde@4.0.9/node_modules/@smithy/middleware-serde/dist-cjs/index.js\u001b[2m:36:20\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/@aws-sdk+lib-dynamodb@3.879_ee4568148364d683af0669b014af13ba/node_modules/@aws-sdk/lib-dynamodb/dist-cjs/index.js\u001b[2m:173:30\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/@smithy+core@3.9.0/node_modules/@smithy/core/dist-cjs/index.js\u001b[2m:193:18\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/@smithy+middleware-retry@4.1.20/node_modules/@smithy/middleware-retry/dist-cjs/index.js\u001b[2m:320:38\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/@aws-sdk+middleware-logger@3.876.0/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js\u001b[2m:33:22\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mDynamoUserProfileRepository Integration Tests › should delete an existing profile\u001b[39m\u001b[22m\n\n    ValidationException: The provided key element does not match the schema\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat throwDefaultError (\u001b[22m\u001b[2mnode_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js\u001b[2m:425:20)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js\u001b[2m:434:5\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat de_CommandError (\u001b[22m\u001b[2mnode_modules/.pnpm/@aws-sdk+client-dynamodb@3.879.0/node_modules/@aws-sdk/client-dynamodb/dist-cjs/index.js\u001b[2m:2359:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/@smithy+middleware-serde@4.0.9/node_modules/@smithy/middleware-serde/dist-cjs/index.js\u001b[2m:36:20\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/@aws-sdk+lib-dynamodb@3.879_ee4568148364d683af0669b014af13ba/node_modules/@aws-sdk/lib-dynamodb/dist-cjs/index.js\u001b[2m:173:30\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/@smithy+core@3.9.0/node_modules/@smithy/core/dist-cjs/index.js\u001b[2m:193:18\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/@smithy+middleware-retry@4.1.20/node_modules/@smithy/middleware-retry/dist-cjs/index.js\u001b[2m:320:38\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/@aws-sdk+middleware-logger@3.876.0/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js\u001b[2m:33:22\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mDynamoUserProfileRepository Integration Tests › should not throw when deleting non-existent profile (idempotent)\u001b[39m\u001b[22m\n\n    ValidationException: The provided key element does not match the schema\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat throwDefaultError (\u001b[22m\u001b[2mnode_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js\u001b[2m:425:20)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/@smithy+smithy-client@4.5.0/node_modules/@smithy/smithy-client/dist-cjs/index.js\u001b[2m:434:5\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat de_CommandError (\u001b[22m\u001b[2mnode_modules/.pnpm/@aws-sdk+client-dynamodb@3.879.0/node_modules/@aws-sdk/client-dynamodb/dist-cjs/index.js\u001b[2m:2359:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/@smithy+middleware-serde@4.0.9/node_modules/@smithy/middleware-serde/dist-cjs/index.js\u001b[2m:36:20\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/@aws-sdk+lib-dynamodb@3.879_ee4568148364d683af0669b014af13ba/node_modules/@aws-sdk/lib-dynamodb/dist-cjs/index.js\u001b[2m:173:30\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/@smithy+core@3.9.0/node_modules/@smithy/core/dist-cjs/index.js\u001b[2m:193:18\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/@smithy+middleware-retry@4.1.20/node_modules/@smithy/middleware-retry/dist-cjs/index.js\u001b[2m:320:38\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/@aws-sdk+middleware-logger@3.876.0/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js\u001b[2m:33:22\u001b[22m\u001b[2m\u001b[22m\n","name":"E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\Persistence\\DynamoUserProfileRepository.integration.spec.ts","startTime":1771844451358,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["PermissionAdminService","createPermission"],"duration":21,"failureDetails":[],"failureMessages":[],"fullName":"PermissionAdminService createPermission should create a permission successfully","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should create a permission successfully"},{"ancestorTitles":["PermissionAdminService","createPermission"],"duration":50,"failureDetails":[],"failureMessages":[],"fullName":"PermissionAdminService createPermission should throw PermissionExistsError if permission already exists","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should throw PermissionExistsError if permission already exists"},{"ancestorTitles":["PermissionAdminService","getPermission"],"duration":11,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32m\"test-permission\"\u001b[39m\nReceived: \u001b[31m\"test-tenant\"\u001b[39m, \u001b[31m\"test-permission\"\u001b[39m\n\nNumber of calls: \u001b[31m1\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32m\"test-permission\"\u001b[39m\nReceived: \u001b[31m\"test-tenant\"\u001b[39m, \u001b[31m\"test-permission\"\u001b[39m\n\nNumber of calls: \u001b[31m1\u001b[39m\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\unit\\application\\services\\permission.admin.service.spec.ts:88:51\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\unit\\application\\services\\permission.admin.service.spec.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"PermissionAdminService getPermission should return a permission if found","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return a permission if found"},{"ancestorTitles":["PermissionAdminService","getPermission"],"duration":7,"failureDetails":[],"failureMessages":[],"fullName":"PermissionAdminService getPermission should return null if permission not found","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return null if permission not found"},{"ancestorTitles":["PermissionAdminService","listPermissions"],"duration":16,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32m{}\u001b[39m\nReceived: \u001b[31m\"test-tenant\"\u001b[39m, \u001b[31m{}\u001b[39m\n\nNumber of calls: \u001b[31m1\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32m{}\u001b[39m\nReceived: \u001b[31m\"test-tenant\"\u001b[39m, \u001b[31m{}\u001b[39m\n\nNumber of calls: \u001b[31m1\u001b[39m\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\unit\\application\\services\\permission.admin.service.spec.ts:108:45\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\unit\\application\\services\\permission.admin.service.spec.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"PermissionAdminService listPermissions should list permissions","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should list permissions"},{"ancestorTitles":["PermissionAdminService","updatePermission"],"duration":9,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32m\"test-permission\"\u001b[39m, \u001b[32m{\"description\": \"Updated description\"}\u001b[39m\nReceived: \u001b[31m\"test-tenant\"\u001b[39m, \u001b[31m\"test-permission\"\u001b[39m, \u001b[31m{\"description\": \"Updated description\"}\u001b[39m\n\nNumber of calls: \u001b[31m1\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32m\"test-permission\"\u001b[39m, \u001b[32m{\"description\": \"Updated description\"}\u001b[39m\nReceived: \u001b[31m\"test-tenant\"\u001b[39m, \u001b[31m\"test-permission\"\u001b[39m, \u001b[31m{\"description\": \"Updated description\"}\u001b[39m\n\nNumber of calls: \u001b[31m1\u001b[39m\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\unit\\application\\services\\permission.admin.service.spec.ts:121:47\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\unit\\application\\services\\permission.admin.service.spec.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"PermissionAdminService updatePermission should update a permission successfully","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should update a permission successfully"},{"ancestorTitles":["PermissionAdminService","deletePermission"],"duration":5,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32m\"test-permission\"\u001b[39m\nReceived: \u001b[31m\"test-tenant\"\u001b[39m, \u001b[31m\"test-permission\"\u001b[39m\n\nNumber of calls: \u001b[31m1\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32m\"test-permission\"\u001b[39m\nReceived: \u001b[31m\"test-tenant\"\u001b[39m, \u001b[31m\"test-permission\"\u001b[39m\n\nNumber of calls: \u001b[31m1\u001b[39m\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\unit\\application\\services\\permission.admin.service.spec.ts:133:47\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\unit\\application\\services\\permission.admin.service.spec.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"PermissionAdminService deletePermission should delete a permission and its assignments successfully","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should delete a permission and its assignments successfully"},{"ancestorTitles":["PermissionAdminService","deletePermission"],"duration":31,"failureDetails":[],"failureMessages":[],"fullName":"PermissionAdminService deletePermission should throw PermissionNotFoundError if permission does not exist","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should throw PermissionNotFoundError if permission does not exist"},{"ancestorTitles":["PermissionAdminService","deletePermission"],"duration":12,"failureDetails":[],"failureMessages":[],"fullName":"PermissionAdminService deletePermission should throw CleanupFailedError if assignment cleanup fails","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should throw CleanupFailedError if assignment cleanup fails"},{"ancestorTitles":["PermissionAdminService","listRolesForPermission"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"PermissionAdminService listRolesForPermission should list roles for a permission","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should list roles for a permission"},{"ancestorTitles":["PermissionAdminService","listRolesForPermission"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"PermissionAdminService listRolesForPermission should throw PermissionNotFoundError if permission does not exist","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should throw PermissionNotFoundError if permission does not exist"},{"ancestorTitles":["PermissionAdminService","Permissions"],"duration":7,"failureDetails":[],"failureMessages":[],"fullName":"PermissionAdminService Permissions should throw ForbiddenError if admin user does not have required role","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should throw ForbiddenError if admin user does not have required role"}],"endTime":1771844453561,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mPermissionAdminService › getPermission › should return a permission if found\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: \u001b[32m\"test-permission\"\u001b[39m\n    Received: \u001b[31m\"test-tenant\"\u001b[39m, \u001b[31m\"test-permission\"\u001b[39m\n\n    Number of calls: \u001b[31m1\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 86 |\u001b[39m             \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m service\u001b[33m.\u001b[39mgetPermission(adminUser\u001b[33m,\u001b[39m permissionName)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 87 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 88 |\u001b[39m             expect(permissionRepoMock\u001b[33m.\u001b[39mfindByName)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(permissionName)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                                                   \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 89 |\u001b[39m             expect(result)\u001b[33m.\u001b[39mtoEqual(permissionEntity)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 90 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 91 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/application/services/permission.admin.service.spec.ts\u001b[39m\u001b[0m\u001b[2m:88:51\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat fulfilled (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/application/services/permission.admin.service.spec.ts\u001b[39m\u001b[0m\u001b[2m:5:58)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mPermissionAdminService › listPermissions › should list permissions\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: \u001b[32m{}\u001b[39m\n    Received: \u001b[31m\"test-tenant\"\u001b[39m, \u001b[31m{}\u001b[39m\n\n    Number of calls: \u001b[31m1\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 106 |\u001b[39m             \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m service\u001b[33m.\u001b[39mlistPermissions(adminUser\u001b[33m,\u001b[39m {})\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 107 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 108 |\u001b[39m             expect(permissionRepoMock\u001b[33m.\u001b[39mlist)\u001b[33m.\u001b[39mtoHaveBeenCalledWith({})\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                             \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 109 |\u001b[39m             expect(result)\u001b[33m.\u001b[39mtoEqual(permissions)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 110 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 111 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/application/services/permission.admin.service.spec.ts\u001b[39m\u001b[0m\u001b[2m:108:45\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat fulfilled (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/application/services/permission.admin.service.spec.ts\u001b[39m\u001b[0m\u001b[2m:5:58)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mPermissionAdminService › updatePermission › should update a permission successfully\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: \u001b[32m\"test-permission\"\u001b[39m, \u001b[32m{\"description\": \"Updated description\"}\u001b[39m\n    Received: \u001b[31m\"test-tenant\"\u001b[39m, \u001b[31m\"test-permission\"\u001b[39m, \u001b[31m{\"description\": \"Updated description\"}\u001b[39m\n\n    Number of calls: \u001b[31m1\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 119 |\u001b[39m             \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m service\u001b[33m.\u001b[39mupdatePermission(adminUser\u001b[33m,\u001b[39m permissionName\u001b[33m,\u001b[39m updates)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 120 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 121 |\u001b[39m             expect(permissionRepoMock\u001b[33m.\u001b[39mupdate)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(permissionName\u001b[33m,\u001b[39m updates)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 122 |\u001b[39m             expect(result)\u001b[33m.\u001b[39mtoEqual(updatedPermission)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 123 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 124 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/application/services/permission.admin.service.spec.ts\u001b[39m\u001b[0m\u001b[2m:121:47\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat fulfilled (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/application/services/permission.admin.service.spec.ts\u001b[39m\u001b[0m\u001b[2m:5:58)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mPermissionAdminService › deletePermission › should delete a permission and its assignments successfully\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: \u001b[32m\"test-permission\"\u001b[39m\n    Received: \u001b[31m\"test-tenant\"\u001b[39m, \u001b[31m\"test-permission\"\u001b[39m\n\n    Number of calls: \u001b[31m1\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 131 |\u001b[39m             \u001b[36mawait\u001b[39m service\u001b[33m.\u001b[39mdeletePermission(adminUser\u001b[33m,\u001b[39m permissionName)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 132 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 133 |\u001b[39m             expect(permissionRepoMock\u001b[33m.\u001b[39m\u001b[36mdelete\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(permissionName)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 134 |\u001b[39m             expect(assignmentRepoMock\u001b[33m.\u001b[39mremoveAllAssignmentsForPermission)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(permissionName)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 135 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 136 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/application/services/permission.admin.service.spec.ts\u001b[39m\u001b[0m\u001b[2m:133:47\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat fulfilled (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/application/services/permission.admin.service.spec.ts\u001b[39m\u001b[0m\u001b[2m:5:58)\u001b[22m\u001b[2m\u001b[22m\n","name":"E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\unit\\application\\services\\permission.admin.service.spec.ts","startTime":1771844452811,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["PolicyAdminService","createPolicy"],"duration":14,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32mAny<String>\u001b[39m, \u001b[32mAny<Policy>\u001b[39m\nReceived: \u001b[31m{\"createdAt\": 2026-02-23T11:00:54.238Z, \"description\": undefined, \"id\": \"policy-id-123\", \"isActive\": true, \"metadata\": undefined, \"policyDefinition\": \"def\", \"policyLanguage\": \"rego\", \"policyName\": \"New Policy\", \"tenantId\": \"test-tenant\", \"updatedAt\": 2026-02-23T11:00:54.238Z, \"version\": 1}\u001b[39m\n\nNumber of calls: \u001b[31m1\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32mAny<String>\u001b[39m, \u001b[32mAny<Policy>\u001b[39m\nReceived: \u001b[31m{\"createdAt\": 2026-02-23T11:00:54.238Z, \"description\": undefined, \"id\": \"policy-id-123\", \"isActive\": true, \"metadata\": undefined, \"policyDefinition\": \"def\", \"policyLanguage\": \"rego\", \"policyName\": \"New Policy\", \"tenantId\": \"test-tenant\", \"updatedAt\": 2026-02-23T11:00:54.238Z, \"version\": 1}\u001b[39m\n\nNumber of calls: \u001b[31m1\u001b[39m\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\unit\\application\\services\\policy.admin.service.spec.ts:40:47\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\unit\\application\\services\\policy.admin.service.spec.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"PolicyAdminService createPolicy should create a policy successfully","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should create a policy successfully"},{"ancestorTitles":["PolicyAdminService","getPolicy"],"duration":8,"failureDetails":[],"failureMessages":[],"fullName":"PolicyAdminService getPolicy should return a policy if found","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should return a policy if found"},{"ancestorTitles":["PolicyAdminService","getPolicy"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"PolicyAdminService getPolicy should return null if policy not found","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return null if policy not found"},{"ancestorTitles":["PolicyAdminService","updatePolicy"],"duration":16,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32mAny<String>\u001b[39m, \u001b[32mObjectContaining {\"policyName\": \"Updated Policy\", \"version\": 2}\u001b[39m\nReceived: \u001b[31m{\"createdAt\": 2026-02-23T11:00:54.223Z, \"description\": \"A test policy\", \"id\": \"policy-id-123\", \"isActive\": true, \"metadata\": {}, \"policyDefinition\": \"def\", \"policyLanguage\": \"rego\", \"policyName\": \"Updated Policy\", \"tenantId\": \"test-tenant\", \"updatedAt\": 2026-02-23T11:00:54.281Z, \"version\": 2}\u001b[39m\n\nNumber of calls: \u001b[31m1\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32mAny<String>\u001b[39m, \u001b[32mObjectContaining {\"policyName\": \"Updated Policy\", \"version\": 2}\u001b[39m\nReceived: \u001b[31m{\"createdAt\": 2026-02-23T11:00:54.223Z, \"description\": \"A test policy\", \"id\": \"policy-id-123\", \"isActive\": true, \"metadata\": {}, \"policyDefinition\": \"def\", \"policyLanguage\": \"rego\", \"policyName\": \"Updated Policy\", \"tenantId\": \"test-tenant\", \"updatedAt\": 2026-02-23T11:00:54.281Z, \"version\": 2}\u001b[39m\n\nNumber of calls: \u001b[31m1\u001b[39m\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\unit\\application\\services\\policy.admin.service.spec.ts:76:47\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\unit\\application\\services\\policy.admin.service.spec.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"PolicyAdminService updatePolicy should update a policy successfully, incrementing the version","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"failed","title":"should update a policy successfully, incrementing the version"},{"ancestorTitles":["PolicyAdminService","updatePolicy"],"duration":31,"failureDetails":[],"failureMessages":[],"fullName":"PolicyAdminService updatePolicy should throw PolicyNotFoundError if policy does not exist","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should throw PolicyNotFoundError if policy does not exist"},{"ancestorTitles":["PolicyAdminService","deletePolicy"],"duration":7,"failureDetails":[],"failureMessages":[],"fullName":"PolicyAdminService deletePolicy should delete a policy successfully","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should delete a policy successfully"},{"ancestorTitles":["PolicyAdminService","listPolicies"],"duration":11,"failureDetails":[],"failureMessages":[],"fullName":"PolicyAdminService listPolicies should list policies","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should list policies"},{"ancestorTitles":["PolicyAdminService","getPolicyVersion"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"PolicyAdminService getPolicyVersion should retrieve a specific version of a policy","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should retrieve a specific version of a policy"},{"ancestorTitles":["PolicyAdminService","getPolicyVersion"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"PolicyAdminService getPolicyVersion should return null if policy version not found","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return null if policy version not found"},{"ancestorTitles":["PolicyAdminService","listPolicyVersions"],"duration":9,"failureDetails":[],"failureMessages":[],"fullName":"PolicyAdminService listPolicyVersions should list all policy versions","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should list all policy versions"},{"ancestorTitles":["PolicyAdminService","rollbackPolicy"],"duration":13,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32mAny<String>\u001b[39m, \u001b[32mObjectContaining {\"id\": \"new-policy-id\", \"version\": 1}\u001b[39m\nReceived: \u001b[31m{\"createdAt\": 2026-02-23T11:00:54.370Z, \"description\": \"A test policy\", \"id\": \"new-policy-id\", \"isActive\": true, \"metadata\": {}, \"policyDefinition\": \"old def\", \"policyLanguage\": \"rego\", \"policyName\": \"Test Policy\", \"tenantId\": \"test-tenant\", \"updatedAt\": 2026-02-23T11:00:54.370Z, \"version\": 1}\u001b[39m\n\nNumber of calls: \u001b[31m1\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32mAny<String>\u001b[39m, \u001b[32mObjectContaining {\"id\": \"new-policy-id\", \"version\": 1}\u001b[39m\nReceived: \u001b[31m{\"createdAt\": 2026-02-23T11:00:54.370Z, \"description\": \"A test policy\", \"id\": \"new-policy-id\", \"isActive\": true, \"metadata\": {}, \"policyDefinition\": \"old def\", \"policyLanguage\": \"rego\", \"policyName\": \"Test Policy\", \"tenantId\": \"test-tenant\", \"updatedAt\": 2026-02-23T11:00:54.370Z, \"version\": 1}\u001b[39m\n\nNumber of calls: \u001b[31m1\u001b[39m\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\unit\\application\\services\\policy.admin.service.spec.ts:155:47\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\unit\\application\\services\\policy.admin.service.spec.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"PolicyAdminService rollbackPolicy should rollback a policy to a specific version","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"failed","title":"should rollback a policy to a specific version"},{"ancestorTitles":["PolicyAdminService","rollbackPolicy"],"duration":16,"failureDetails":[],"failureMessages":[],"fullName":"PolicyAdminService rollbackPolicy should throw PolicyNotFoundError if the version to rollback to does not exist","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should throw PolicyNotFoundError if the version to rollback to does not exist"},{"ancestorTitles":["PolicyAdminService","Permissions"],"duration":16,"failureDetails":[],"failureMessages":[],"fullName":"PolicyAdminService Permissions should throw ForbiddenError if admin user does not have required role","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should throw ForbiddenError if admin user does not have required role"}],"endTime":1771844454492,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mPolicyAdminService › createPolicy › should create a policy successfully\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: \u001b[32mAny<String>\u001b[39m, \u001b[32mAny<Policy>\u001b[39m\n    Received: \u001b[31m{\"createdAt\": 2026-02-23T11:00:54.238Z, \"description\": undefined, \"id\": \"policy-id-123\", \"isActive\": true, \"metadata\": undefined, \"policyDefinition\": \"def\", \"policyLanguage\": \"rego\", \"policyName\": \"New Policy\", \"tenantId\": \"test-tenant\", \"updatedAt\": 2026-02-23T11:00:54.238Z, \"version\": 1}\u001b[39m\n\n    Number of calls: \u001b[31m1\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 38 |\u001b[39m             \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m service\u001b[33m.\u001b[39mcreatePolicy(adminUser\u001b[33m,\u001b[39m details)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 39 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 40 |\u001b[39m             expect(policyRepositoryMock\u001b[33m.\u001b[39msave)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(expect\u001b[33m.\u001b[39many(\u001b[33mString\u001b[39m)\u001b[33m,\u001b[39m expect\u001b[33m.\u001b[39many(\u001b[33mPolicy\u001b[39m))\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                                               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 41 |\u001b[39m             expect(result)\u001b[33m.\u001b[39mtoBeInstanceOf(\u001b[33mPolicy\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 42 |\u001b[39m             expect(result\u001b[33m.\u001b[39mpolicyName)\u001b[33m.\u001b[39mtoBe(\u001b[32m'New Policy'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 43 |\u001b[39m             expect(result\u001b[33m.\u001b[39mversion)\u001b[33m.\u001b[39mtoBe(\u001b[35m1\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/application/services/policy.admin.service.spec.ts\u001b[39m\u001b[0m\u001b[2m:40:47\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat fulfilled (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/application/services/policy.admin.service.spec.ts\u001b[39m\u001b[0m\u001b[2m:5:58)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mPolicyAdminService › updatePolicy › should update a policy successfully, incrementing the version\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: \u001b[32mAny<String>\u001b[39m, \u001b[32mObjectContaining {\"policyName\": \"Updated Policy\", \"version\": 2}\u001b[39m\n    Received: \u001b[31m{\"createdAt\": 2026-02-23T11:00:54.223Z, \"description\": \"A test policy\", \"id\": \"policy-id-123\", \"isActive\": true, \"metadata\": {}, \"policyDefinition\": \"def\", \"policyLanguage\": \"rego\", \"policyName\": \"Updated Policy\", \"tenantId\": \"test-tenant\", \"updatedAt\": 2026-02-23T11:00:54.281Z, \"version\": 2}\u001b[39m\n\n    Number of calls: \u001b[31m1\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 74 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 75 |\u001b[39m             expect(policyRepositoryMock\u001b[33m.\u001b[39mfindById)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(expect\u001b[33m.\u001b[39many(\u001b[33mString\u001b[39m)\u001b[33m,\u001b[39m policyId)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 76 |\u001b[39m             expect(policyRepositoryMock\u001b[33m.\u001b[39msave)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(expect\u001b[33m.\u001b[39many(\u001b[33mString\u001b[39m)\u001b[33m,\u001b[39m expect\u001b[33m.\u001b[39mobjectContaining({\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                                               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 77 |\u001b[39m                 version\u001b[33m:\u001b[39m policyEntity\u001b[33m.\u001b[39mversion \u001b[33m+\u001b[39m \u001b[35m1\u001b[39m\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 78 |\u001b[39m                 policyName\u001b[33m:\u001b[39m \u001b[32m'Updated Policy'\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 79 |\u001b[39m             }))\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/application/services/policy.admin.service.spec.ts\u001b[39m\u001b[0m\u001b[2m:76:47\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat fulfilled (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/application/services/policy.admin.service.spec.ts\u001b[39m\u001b[0m\u001b[2m:5:58)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mPolicyAdminService › rollbackPolicy › should rollback a policy to a specific version\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: \u001b[32mAny<String>\u001b[39m, \u001b[32mObjectContaining {\"id\": \"new-policy-id\", \"version\": 1}\u001b[39m\n    Received: \u001b[31m{\"createdAt\": 2026-02-23T11:00:54.370Z, \"description\": \"A test policy\", \"id\": \"new-policy-id\", \"isActive\": true, \"metadata\": {}, \"policyDefinition\": \"old def\", \"policyLanguage\": \"rego\", \"policyName\": \"Test Policy\", \"tenantId\": \"test-tenant\", \"updatedAt\": 2026-02-23T11:00:54.370Z, \"version\": 1}\u001b[39m\n\n    Number of calls: \u001b[31m1\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 153 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 154 |\u001b[39m             expect(policyRepositoryMock\u001b[33m.\u001b[39mgetPolicyVersion)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(expect\u001b[33m.\u001b[39many(\u001b[33mString\u001b[39m)\u001b[33m,\u001b[39m policyId\u001b[33m,\u001b[39m \u001b[35m1\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 155 |\u001b[39m             expect(policyRepositoryMock\u001b[33m.\u001b[39msave)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(expect\u001b[33m.\u001b[39many(\u001b[33mString\u001b[39m)\u001b[33m,\u001b[39m expect\u001b[33m.\u001b[39mobjectContaining({\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 156 |\u001b[39m                 id\u001b[33m:\u001b[39m \u001b[32m'new-policy-id'\u001b[39m\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 157 |\u001b[39m                 version\u001b[33m:\u001b[39m \u001b[35m1\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 158 |\u001b[39m             }))\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/application/services/policy.admin.service.spec.ts\u001b[39m\u001b[0m\u001b[2m:155:47\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat fulfilled (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/application/services/policy.admin.service.spec.ts\u001b[39m\u001b[0m\u001b[2m:5:58)\u001b[22m\u001b[2m\u001b[22m\n","name":"E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\unit\\application\\services\\policy.admin.service.spec.ts","startTime":1771844453809,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["DynamoDbPolicyEngineAdapter","publishPolicy"],"duration":32,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32mAny<String>\u001b[39m, \u001b[32m{\"createdAt\": 2026-02-23T11:00:55.252Z, \"description\": \"\", \"id\": \"policy-id\", \"isActive\": true, \"metadata\": {}, \"policyDefinition\": \"rule { true }\", \"policyLanguage\": \"rego\", \"policyName\": \"test-policy\", \"tenantId\": \"test-tenant\", \"updatedAt\": 2026-02-23T11:00:55.252Z, \"version\": 1}\u001b[39m\nReceived: \u001b[31m{\"createdAt\": 2026-02-23T11:00:55.252Z, \"description\": \"\", \"id\": \"policy-id\", \"isActive\": true, \"metadata\": {}, \"policyDefinition\": \"rule { true }\", \"policyLanguage\": \"rego\", \"policyName\": \"test-policy\", \"tenantId\": \"test-tenant\", \"updatedAt\": 2026-02-23T11:00:55.252Z, \"version\": 1}\u001b[39m\n\nNumber of calls: \u001b[31m1\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32mAny<String>\u001b[39m, \u001b[32m{\"createdAt\": 2026-02-23T11:00:55.252Z, \"description\": \"\", \"id\": \"policy-id\", \"isActive\": true, \"metadata\": {}, \"policyDefinition\": \"rule { true }\", \"policyLanguage\": \"rego\", \"policyName\": \"test-policy\", \"tenantId\": \"test-tenant\", \"updatedAt\": 2026-02-23T11:00:55.252Z, \"version\": 1}\u001b[39m\nReceived: \u001b[31m{\"createdAt\": 2026-02-23T11:00:55.252Z, \"description\": \"\", \"id\": \"policy-id\", \"isActive\": true, \"metadata\": {}, \"policyDefinition\": \"rule { true }\", \"policyLanguage\": \"rego\", \"policyName\": \"test-policy\", \"tenantId\": \"test-tenant\", \"updatedAt\": 2026-02-23T11:00:55.252Z, \"version\": 1}\u001b[39m\n\nNumber of calls: \u001b[31m1\u001b[39m\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\unit\\infrastructure\\adapters\\policy-engine\\DynamoDbPolicyEngineAdapter.spec.ts:43:47\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\unit\\infrastructure\\adapters\\policy-engine\\DynamoDbPolicyEngineAdapter.spec.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"DynamoDbPolicyEngineAdapter publishPolicy should validate syntax, save policy, and log success","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"failed","title":"should validate syntax, save policy, and log success"},{"ancestorTitles":["DynamoDbPolicyEngineAdapter","publishPolicy"],"duration":12,"failureDetails":[],"failureMessages":[],"fullName":"DynamoDbPolicyEngineAdapter publishPolicy should re-throw InvalidPolicySyntaxError if validation fails","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should re-throw InvalidPolicySyntaxError if validation fails"},{"ancestorTitles":["DynamoDbPolicyEngineAdapter","publishPolicy"],"duration":13,"failureDetails":[],"failureMessages":[],"fullName":"DynamoDbPolicyEngineAdapter publishPolicy should throw PolicyEngineAdapterError if repository save fails","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should throw PolicyEngineAdapterError if repository save fails"},{"ancestorTitles":["DynamoDbPolicyEngineAdapter","getPolicyDefinition"],"duration":9,"failureDetails":[],"failureMessages":[],"fullName":"DynamoDbPolicyEngineAdapter getPolicyDefinition should return policy definition if found","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should return policy definition if found"},{"ancestorTitles":["DynamoDbPolicyEngineAdapter","getPolicyDefinition"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"DynamoDbPolicyEngineAdapter getPolicyDefinition should return null if policy not found","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should return null if policy not found"},{"ancestorTitles":["DynamoDbPolicyEngineAdapter","getPolicyDefinition"],"duration":8,"failureDetails":[],"failureMessages":[],"fullName":"DynamoDbPolicyEngineAdapter getPolicyDefinition should throw PolicyEngineAdapterError if repository find fails","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should throw PolicyEngineAdapterError if repository find fails"},{"ancestorTitles":["DynamoDbPolicyEngineAdapter","deletePolicyDefinition"],"duration":11,"failureDetails":[],"failureMessages":[],"fullName":"DynamoDbPolicyEngineAdapter deletePolicyDefinition should delete policy and log success","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should delete policy and log success"},{"ancestorTitles":["DynamoDbPolicyEngineAdapter","deletePolicyDefinition"],"duration":13,"failureDetails":[],"failureMessages":[],"fullName":"DynamoDbPolicyEngineAdapter deletePolicyDefinition should throw PolicyNotFoundError if policy not found by repository","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should throw PolicyNotFoundError if policy not found by repository"},{"ancestorTitles":["DynamoDbPolicyEngineAdapter","deletePolicyDefinition"],"duration":19,"failureDetails":[],"failureMessages":[],"fullName":"DynamoDbPolicyEngineAdapter deletePolicyDefinition should throw PolicyEngineAdapterError if repository delete fails","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should throw PolicyEngineAdapterError if repository delete fails"},{"ancestorTitles":["DynamoDbPolicyEngineAdapter","validatePolicySyntax"],"duration":16,"failureDetails":[],"failureMessages":[],"fullName":"DynamoDbPolicyEngineAdapter validatePolicySyntax should log warning and resolve for Rego (placeholder)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should log warning and resolve for Rego (placeholder)"},{"ancestorTitles":["DynamoDbPolicyEngineAdapter","validatePolicySyntax"],"duration":18,"failureDetails":[],"failureMessages":[],"fullName":"DynamoDbPolicyEngineAdapter validatePolicySyntax should log warning and resolve for Cedar (not implemented)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should log warning and resolve for Cedar (not implemented)"},{"ancestorTitles":["DynamoDbPolicyEngineAdapter","validatePolicySyntax"],"duration":49,"failureDetails":[],"failureMessages":[],"fullName":"DynamoDbPolicyEngineAdapter validatePolicySyntax should log warning and resolve for unsupported language","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should log warning and resolve for unsupported language"}],"endTime":1771844455631,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mDynamoDbPolicyEngineAdapter › publishPolicy › should validate syntax, save policy, and log success\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: \u001b[32mAny<String>\u001b[39m, \u001b[32m{\"createdAt\": 2026-02-23T11:00:55.252Z, \"description\": \"\", \"id\": \"policy-id\", \"isActive\": true, \"metadata\": {}, \"policyDefinition\": \"rule { true }\", \"policyLanguage\": \"rego\", \"policyName\": \"test-policy\", \"tenantId\": \"test-tenant\", \"updatedAt\": 2026-02-23T11:00:55.252Z, \"version\": 1}\u001b[39m\n    Received: \u001b[31m{\"createdAt\": 2026-02-23T11:00:55.252Z, \"description\": \"\", \"id\": \"policy-id\", \"isActive\": true, \"metadata\": {}, \"policyDefinition\": \"rule { true }\", \"policyLanguage\": \"rego\", \"policyName\": \"test-policy\", \"tenantId\": \"test-tenant\", \"updatedAt\": 2026-02-23T11:00:55.252Z, \"version\": 1}\u001b[39m\n\n    Number of calls: \u001b[31m1\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 41 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 42 |\u001b[39m             expect(validatePolicySyntaxSpy)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(mockPolicy\u001b[33m.\u001b[39mpolicyDefinition\u001b[33m,\u001b[39m mockPolicy\u001b[33m.\u001b[39mpolicyLanguage)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 43 |\u001b[39m             expect(policyRepositoryMock\u001b[33m.\u001b[39msave)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(expect\u001b[33m.\u001b[39many(\u001b[33mString\u001b[39m)\u001b[33m,\u001b[39m mockPolicy)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                                               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 44 |\u001b[39m             expect(loggerMock\u001b[33m.\u001b[39minfo)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(expect\u001b[33m.\u001b[39mstringContaining(\u001b[32m'Successfully published policy'\u001b[39m))\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 45 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 46 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/infrastructure/adapters/policy-engine/DynamoDbPolicyEngineAdapter.spec.ts\u001b[39m\u001b[0m\u001b[2m:43:47\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat fulfilled (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/infrastructure/adapters/policy-engine/DynamoDbPolicyEngineAdapter.spec.ts\u001b[39m\u001b[0m\u001b[2m:5:58)\u001b[22m\u001b[2m\u001b[22m\n","name":"E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\unit\\infrastructure\\adapters\\policy-engine\\DynamoDbPolicyEngineAdapter.spec.ts","startTime":1771844454563,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["GroupAdminService","createGroup"],"duration":19,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32mAny<String>\u001b[39m, \u001b[32m{\"description\": \"A new group\", \"groupName\": \"new-group\"}\u001b[39m\nReceived: \u001b[31m{\"description\": \"A new group\", \"groupName\": \"new-group\"}\u001b[39m\n\nNumber of calls: \u001b[31m1\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32mAny<String>\u001b[39m, \u001b[32m{\"description\": \"A new group\", \"groupName\": \"new-group\"}\u001b[39m\nReceived: \u001b[31m{\"description\": \"A new group\", \"groupName\": \"new-group\"}\u001b[39m\n\nNumber of calls: \u001b[31m1\u001b[39m\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\unit\\application\\services\\group.admin.service.spec.ts:36:58\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\unit\\application\\services\\group.admin.service.spec.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"GroupAdminService createGroup should create a group successfully","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should create a group successfully"},{"ancestorTitles":["GroupAdminService","getGroup"],"duration":6,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32mAny<String>\u001b[39m, \u001b[32m\"test-group\"\u001b[39m\nReceived: \u001b[2m\"test-group\"\u001b[22m\n\nNumber of calls: \u001b[31m1\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32mAny<String>\u001b[39m, \u001b[32m\"test-group\"\u001b[39m\nReceived: \u001b[2m\"test-group\"\u001b[22m\n\nNumber of calls: \u001b[31m1\u001b[39m\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\unit\\application\\services\\group.admin.service.spec.ts:51:55\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\unit\\application\\services\\group.admin.service.spec.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"GroupAdminService getGroup should return a group if found","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return a group if found"},{"ancestorTitles":["GroupAdminService","getGroup"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"GroupAdminService getGroup should return null if group not found","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return null if group not found"},{"ancestorTitles":["GroupAdminService","listGroups"],"duration":13,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32mAny<String>\u001b[39m, \u001b[32mundefined\u001b[39m, \u001b[32mundefined\u001b[39m, \u001b[32mundefined\u001b[39m\nReceived: \u001b[31mundefined\u001b[39m, \u001b[2mundefined\u001b[22m, \u001b[2mundefined\u001b[22m\n\nNumber of calls: \u001b[31m1\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32mAny<String>\u001b[39m, \u001b[32mundefined\u001b[39m, \u001b[32mundefined\u001b[39m, \u001b[32mundefined\u001b[39m\nReceived: \u001b[31mundefined\u001b[39m, \u001b[2mundefined\u001b[22m, \u001b[2mundefined\u001b[22m\n\nNumber of calls: \u001b[31m1\u001b[39m\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\unit\\application\\services\\group.admin.service.spec.ts:79:57\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\unit\\application\\services\\group.admin.service.spec.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"GroupAdminService listGroups should list active groups by default","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should list active groups by default"},{"ancestorTitles":["GroupAdminService","listGroups"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"GroupAdminService listGroups should include inactive groups when specified","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should include inactive groups when specified"},{"ancestorTitles":["GroupAdminService","deleteGroup"],"duration":7,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32mAny<String>\u001b[39m, \u001b[32m\"test-group\"\u001b[39m\nReceived: \u001b[2m\"test-group\"\u001b[22m\n\nNumber of calls: \u001b[31m1\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32mAny<String>\u001b[39m, \u001b[32m\"test-group\"\u001b[39m\nReceived: \u001b[2m\"test-group\"\u001b[22m\n\nNumber of calls: \u001b[31m1\u001b[39m\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\unit\\application\\services\\group.admin.service.spec.ts:107:58\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\unit\\application\\services\\group.admin.service.spec.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"GroupAdminService deleteGroup should delete a group successfully","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should delete a group successfully"},{"ancestorTitles":["GroupAdminService","reactivateGroup"],"duration":5,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32mAny<String>\u001b[39m, \u001b[32m\"test-group\"\u001b[39m\nReceived: \u001b[2m\"test-group\"\u001b[22m\n\nNumber of calls: \u001b[31m1\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32mAny<String>\u001b[39m, \u001b[32m\"test-group\"\u001b[39m\nReceived: \u001b[2m\"test-group\"\u001b[22m\n\nNumber of calls: \u001b[31m1\u001b[39m\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\unit\\application\\services\\group.admin.service.spec.ts:119:62\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\unit\\application\\services\\group.admin.service.spec.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"GroupAdminService reactivateGroup should reactivate a group successfully","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should reactivate a group successfully"},{"ancestorTitles":["GroupAdminService","assignRoleToGroup"],"duration":18,"failureDetails":[],"failureMessages":[],"fullName":"GroupAdminService assignRoleToGroup should assign a role to a group successfully","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should assign a role to a group successfully"},{"ancestorTitles":["GroupAdminService","assignRoleToGroup"],"duration":20,"failureDetails":[],"failureMessages":[],"fullName":"GroupAdminService assignRoleToGroup should throw GroupNotFoundError if group does not exist","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should throw GroupNotFoundError if group does not exist"},{"ancestorTitles":["GroupAdminService","assignRoleToGroup"],"duration":11,"failureDetails":[],"failureMessages":[],"fullName":"GroupAdminService assignRoleToGroup should throw RoleNotFoundError if role does not exist","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should throw RoleNotFoundError if role does not exist"},{"ancestorTitles":["GroupAdminService","removeRoleFromGroup"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"GroupAdminService removeRoleFromGroup should remove a role from a group successfully","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should remove a role from a group successfully"},{"ancestorTitles":["GroupAdminService","removeRoleFromGroup"],"duration":8,"failureDetails":[],"failureMessages":[],"fullName":"GroupAdminService removeRoleFromGroup should throw AssignmentError on failure","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should throw AssignmentError on failure"},{"ancestorTitles":["GroupAdminService","listRolesForGroup"],"duration":9,"failureDetails":[],"failureMessages":[],"fullName":"GroupAdminService listRolesForGroup should list roles for a group","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should list roles for a group"},{"ancestorTitles":["GroupAdminService","listRolesForGroup"],"duration":9,"failureDetails":[],"failureMessages":[],"fullName":"GroupAdminService listRolesForGroup should throw GroupNotFoundError if group does not exist","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should throw GroupNotFoundError if group does not exist"},{"ancestorTitles":["GroupAdminService","Permissions"],"duration":31,"failureDetails":[],"failureMessages":[],"fullName":"GroupAdminService Permissions should throw ForbiddenError if admin user does not have required role","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should throw ForbiddenError if admin user does not have required role"}],"endTime":1771844454464,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mGroupAdminService › createGroup › should create a group successfully\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: \u001b[32mAny<String>\u001b[39m, \u001b[32m{\"description\": \"A new group\", \"groupName\": \"new-group\"}\u001b[39m\n    Received: \u001b[31m{\"description\": \"A new group\", \"groupName\": \"new-group\"}\u001b[39m\n\n    Number of calls: \u001b[31m1\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 34 |\u001b[39m             \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m service\u001b[33m.\u001b[39mcreateGroup(adminUser\u001b[33m,\u001b[39m groupDetails)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 35 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 36 |\u001b[39m             expect(userMgmtAdapterMock\u001b[33m.\u001b[39madminCreateGroup)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(expect\u001b[33m.\u001b[39many(\u001b[33mString\u001b[39m)\u001b[33m,\u001b[39m groupDetails)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 37 |\u001b[39m             expect(result)\u001b[33m.\u001b[39mtoBeInstanceOf(\u001b[33mGroup\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 38 |\u001b[39m             expect(result\u001b[33m.\u001b[39mgroupName)\u001b[33m.\u001b[39mtoBe(\u001b[32m'new-group'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 39 |\u001b[39m             expect(loggerMock\u001b[33m.\u001b[39minfo)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(expect\u001b[33m.\u001b[39mstringContaining(\u001b[32m'CREATE_GROUP'\u001b[39m)\u001b[33m,\u001b[39m expect\u001b[33m.\u001b[39many(\u001b[33mObject\u001b[39m))\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/application/services/group.admin.service.spec.ts\u001b[39m\u001b[0m\u001b[2m:36:58\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat fulfilled (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/application/services/group.admin.service.spec.ts\u001b[39m\u001b[0m\u001b[2m:5:58)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mGroupAdminService › getGroup › should return a group if found\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: \u001b[32mAny<String>\u001b[39m, \u001b[32m\"test-group\"\u001b[39m\n    Received: \u001b[2m\"test-group\"\u001b[22m\n\n    Number of calls: \u001b[31m1\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 49 |\u001b[39m             \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m service\u001b[33m.\u001b[39mgetGroup(adminUser\u001b[33m,\u001b[39m groupName)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 50 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 51 |\u001b[39m             expect(userMgmtAdapterMock\u001b[33m.\u001b[39madminGetGroup)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(expect\u001b[33m.\u001b[39many(\u001b[33mString\u001b[39m)\u001b[33m,\u001b[39m groupName)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 52 |\u001b[39m             expect(result)\u001b[33m.\u001b[39mtoBeInstanceOf(\u001b[33mGroup\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 53 |\u001b[39m             expect(result\u001b[33m?\u001b[39m\u001b[33m.\u001b[39mgroupName)\u001b[33m.\u001b[39mtoBe(groupName)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 54 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/application/services/group.admin.service.spec.ts\u001b[39m\u001b[0m\u001b[2m:51:55\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat fulfilled (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/application/services/group.admin.service.spec.ts\u001b[39m\u001b[0m\u001b[2m:5:58)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mGroupAdminService › listGroups › should list active groups by default\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: \u001b[32mAny<String>\u001b[39m, \u001b[32mundefined\u001b[39m, \u001b[32mundefined\u001b[39m, \u001b[32mundefined\u001b[39m\n    Received: \u001b[31mundefined\u001b[39m, \u001b[2mundefined\u001b[22m, \u001b[2mundefined\u001b[22m\n\n    Number of calls: \u001b[31m1\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 77 |\u001b[39m             \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m service\u001b[33m.\u001b[39mlistGroups(adminUser)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 78 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 79 |\u001b[39m             expect(userMgmtAdapterMock\u001b[33m.\u001b[39madminListGroups)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(expect\u001b[33m.\u001b[39many(\u001b[33mString\u001b[39m)\u001b[33m,\u001b[39m undefined\u001b[33m,\u001b[39m undefined\u001b[33m,\u001b[39m undefined)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 80 |\u001b[39m             expect(result\u001b[33m.\u001b[39mgroups\u001b[33m.\u001b[39mlength)\u001b[33m.\u001b[39mtoBe(\u001b[35m1\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 81 |\u001b[39m             expect(result\u001b[33m.\u001b[39mgroups[\u001b[35m0\u001b[39m]\u001b[33m.\u001b[39mgroupName)\u001b[33m.\u001b[39mtoBe(\u001b[32m'active-group'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 82 |\u001b[39m             expect(result\u001b[33m.\u001b[39mnextToken)\u001b[33m.\u001b[39mtoBe(\u001b[32m'token'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/application/services/group.admin.service.spec.ts\u001b[39m\u001b[0m\u001b[2m:79:57\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat fulfilled (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/application/services/group.admin.service.spec.ts\u001b[39m\u001b[0m\u001b[2m:5:58)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mGroupAdminService › deleteGroup › should delete a group successfully\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: \u001b[32mAny<String>\u001b[39m, \u001b[32m\"test-group\"\u001b[39m\n    Received: \u001b[2m\"test-group\"\u001b[22m\n\n    Number of calls: \u001b[31m1\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 105 |\u001b[39m             \u001b[36mawait\u001b[39m service\u001b[33m.\u001b[39mdeleteGroup(adminUser\u001b[33m,\u001b[39m groupName)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 106 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 107 |\u001b[39m             expect(userMgmtAdapterMock\u001b[33m.\u001b[39madminDeleteGroup)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(expect\u001b[33m.\u001b[39many(\u001b[33mString\u001b[39m)\u001b[33m,\u001b[39m groupName)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 108 |\u001b[39m             expect(loggerMock\u001b[33m.\u001b[39minfo)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(expect\u001b[33m.\u001b[39mstringContaining(\u001b[32m'DEACTIVATE_GROUP'\u001b[39m)\u001b[33m,\u001b[39m expect\u001b[33m.\u001b[39many(\u001b[33mObject\u001b[39m))\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 109 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 110 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/application/services/group.admin.service.spec.ts\u001b[39m\u001b[0m\u001b[2m:107:58\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat fulfilled (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/application/services/group.admin.service.spec.ts\u001b[39m\u001b[0m\u001b[2m:5:58)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mGroupAdminService › reactivateGroup › should reactivate a group successfully\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: \u001b[32mAny<String>\u001b[39m, \u001b[32m\"test-group\"\u001b[39m\n    Received: \u001b[2m\"test-group\"\u001b[22m\n\n    Number of calls: \u001b[31m1\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 117 |\u001b[39m             \u001b[36mawait\u001b[39m service\u001b[33m.\u001b[39mreactivateGroup(adminUser\u001b[33m,\u001b[39m groupName)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 118 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 119 |\u001b[39m             expect(userMgmtAdapterMock\u001b[33m.\u001b[39madminReactivateGroup)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(expect\u001b[33m.\u001b[39many(\u001b[33mString\u001b[39m)\u001b[33m,\u001b[39m groupName)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                                              \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 120 |\u001b[39m             expect(loggerMock\u001b[33m.\u001b[39minfo)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(expect\u001b[33m.\u001b[39mstringContaining(\u001b[32m'REACTIVATE_GROUP'\u001b[39m)\u001b[33m,\u001b[39m expect\u001b[33m.\u001b[39many(\u001b[33mObject\u001b[39m))\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 121 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 122 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/application/services/group.admin.service.spec.ts\u001b[39m\u001b[0m\u001b[2m:119:62\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat fulfilled (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/application/services/group.admin.service.spec.ts\u001b[39m\u001b[0m\u001b[2m:5:58)\u001b[22m\u001b[2m\u001b[22m\n","name":"E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\unit\\application\\services\\group.admin.service.spec.ts","startTime":1771844453843,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Integration Tests: Policy Admin Routes (/api/admin/policies)","POST /api/admin/policies"],"duration":614,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests: Policy Admin Routes (/api/admin/policies) POST /api/admin/policies should return 201 Created when payload is valid and service succeeds","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should return 201 Created when payload is valid and service succeeds"},{"ancestorTitles":["Integration Tests: Policy Admin Routes (/api/admin/policies)","GET /api/admin/policies/:policyId"],"duration":221,"failureDetails":[{}],"failureMessages":["Error: expected 200 \"OK\", got 500 \"Internal Server Error\"\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:136:18\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:4:12)\n    at Object.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:131:81)\n    at Promise.then.completed (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\testWorker.js:108:12)\n----\n    at Test._assertStatus (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:309:14)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:365:13\n    at Test._assertFunction (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:342:13)\n    at Test.assert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:195:23)\n    at localAssert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:138:14)\n    at Server.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:152:11)\n    at Object.onceWrapper (node:events:633:28)\n    at Server.emit (node:events:519:28)\n    at emitCloseNT (node:net:2419:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"fullName":"Integration Tests: Policy Admin Routes (/api/admin/policies) GET /api/admin/policies/:policyId should return 200 OK with policy data if policy exists","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 200 OK with policy data if policy exists"},{"ancestorTitles":["Integration Tests: Policy Admin Routes (/api/admin/policies)","GET /api/admin/policies/:policyId"],"duration":91,"failureDetails":[{}],"failureMessages":["Error: expected 404 \"Not Found\", got 500 \"Internal Server Error\"\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:149:18\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:4:12)\n    at Object.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:144:78)\n    at Promise.then.completed (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\testWorker.js:108:12)\n----\n    at Test._assertStatus (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:309:14)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:365:13\n    at Test._assertFunction (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:342:13)\n    at Test.assert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:195:23)\n    at localAssert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:138:14)\n    at Server.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:152:11)\n    at Object.onceWrapper (node:events:633:28)\n    at Server.emit (node:events:519:28)\n    at emitCloseNT (node:net:2419:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"fullName":"Integration Tests: Policy Admin Routes (/api/admin/policies) GET /api/admin/policies/:policyId should return 404 Not Found if service returns null","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 404 Not Found if service returns null"},{"ancestorTitles":["Integration Tests: Policy Admin Routes (/api/admin/policies)","GET /api/admin/policies/:policyId"],"duration":118,"failureDetails":[{}],"failureMessages":["Error: expected 404 \"Not Found\", got 500 \"Internal Server Error\"\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:160:18\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:4:12)\n    at Object.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:153:92)\n    at Promise.then.completed (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\testWorker.js:108:12)\n----\n    at Test._assertStatus (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:309:14)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:365:13\n    at Test._assertFunction (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:342:13)\n    at Test.assert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:195:23)\n    at localAssert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:138:14)\n    at Server.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:152:11)\n    at Object.onceWrapper (node:events:633:28)\n    at Server.emit (node:events:519:28)\n    at emitCloseNT (node:net:2419:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"fullName":"Integration Tests: Policy Admin Routes (/api/admin/policies) GET /api/admin/policies/:policyId should return 404 Not Found if service throws PolicyNotFoundError","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 404 Not Found if service throws PolicyNotFoundError"},{"ancestorTitles":["Integration Tests: Policy Admin Routes (/api/admin/policies)","GET /api/admin/policies/:policyId"],"duration":111,"failureDetails":[{}],"failureMessages":["Error: expected 400 \"Bad Request\", got 500 \"Internal Server Error\"\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:169:18\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:4:12)\n    at Object.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:164:94)\n    at Promise.then.completed (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\testWorker.js:108:12)\n----\n    at Test._assertStatus (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:309:14)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:365:13\n    at Test._assertFunction (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:342:13)\n    at Test.assert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:195:23)\n    at localAssert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:138:14)\n    at Server.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:152:11)\n    at Object.onceWrapper (node:events:633:28)\n    at Server.emit (node:events:519:28)\n    at emitCloseNT (node:net:2419:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"fullName":"Integration Tests: Policy Admin Routes (/api/admin/policies) GET /api/admin/policies/:policyId should return 400 Bad Request if policyId param is not a valid UUID","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 400 Bad Request if policyId param is not a valid UUID"},{"ancestorTitles":["Integration Tests: Policy Admin Routes (/api/admin/policies)","GET /api/admin/policies/:policyId"],"duration":81,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32mAnything\u001b[39m, \u001b[32m\"a1b2c3d4-e5f6-7890-1234-567890abcdef\"\u001b[39m\n\nNumber of calls: \u001b[31m0\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32mAnything\u001b[39m, \u001b[32m\"a1b2c3d4-e5f6-7890-1234-567890abcdef\"\u001b[39m\n\nNumber of calls: \u001b[31m0\u001b[39m\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:180:54\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"Integration Tests: Policy Admin Routes (/api/admin/policies) GET /api/admin/policies/:policyId should return 500 if the service fails unexpectedly","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 500 if the service fails unexpectedly"},{"ancestorTitles":["Integration Tests: Policy Admin Routes (/api/admin/policies)","GET /api/admin/policies/:policyId"],"duration":187,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests: Policy Admin Routes (/api/admin/policies) GET /api/admin/policies/:policyId should return 401 Unauthorized if token is missing","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 401 Unauthorized if token is missing"},{"ancestorTitles":["Integration Tests: Policy Admin Routes (/api/admin/policies)","GET /api/admin/policies"],"duration":82,"failureDetails":[{}],"failureMessages":["Error: expected 200 \"OK\", got 500 \"Internal Server Error\"\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:198:19\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:4:12)\n    at Object.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:192:72)\n    at Promise.then.completed (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\testWorker.js:108:12)\n----\n    at Test._assertStatus (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:309:14)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:365:13\n    at Test._assertFunction (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:342:13)\n    at Test.assert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:195:23)\n    at localAssert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:138:14)\n    at Server.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:152:11)\n    at Object.onceWrapper (node:events:633:28)\n    at Server.emit (node:events:519:28)\n    at emitCloseNT (node:net:2419:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"fullName":"Integration Tests: Policy Admin Routes (/api/admin/policies) GET /api/admin/policies should return 200 OK with a list of policies","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 200 OK with a list of policies"},{"ancestorTitles":["Integration Tests: Policy Admin Routes (/api/admin/policies)","GET /api/admin/policies"],"duration":112,"failureDetails":[{}],"failureMessages":["Error: expected 200 \"OK\", got 500 \"Internal Server Error\"\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:209:19\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:4:12)\n    at Object.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:203:88)\n    at Promise.then.completed (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\testWorker.js:108:12)\n----\n    at Test._assertStatus (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:309:14)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:365:13\n    at Test._assertFunction (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:342:13)\n    at Test.assert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:195:23)\n    at localAssert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:138:14)\n    at Server.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:152:11)\n    at Object.onceWrapper (node:events:633:28)\n    at Server.emit (node:events:519:28)\n    at emitCloseNT (node:net:2419:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"fullName":"Integration Tests: Policy Admin Routes (/api/admin/policies) GET /api/admin/policies should pass pagination and filter parameters to the service","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should pass pagination and filter parameters to the service"},{"ancestorTitles":["Integration Tests: Policy Admin Routes (/api/admin/policies)","GET /api/admin/policies"],"duration":105,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledTimes\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected number of calls: \u001b[32m1\u001b[39m\nReceived number of calls: \u001b[31m0\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledTimes\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected number of calls: \u001b[32m1\u001b[39m\nReceived number of calls: \u001b[31m0\u001b[39m\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:221:58\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"Integration Tests: Policy Admin Routes (/api/admin/policies) GET /api/admin/policies should return 500 if the service fails unexpectedly","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 500 if the service fails unexpectedly"},{"ancestorTitles":["Integration Tests: Policy Admin Routes (/api/admin/policies)","GET /api/admin/policies"],"duration":95,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests: Policy Admin Routes (/api/admin/policies) GET /api/admin/policies should return 401 Unauthorized if token is missing","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 401 Unauthorized if token is missing"},{"ancestorTitles":["Integration Tests: Policy Admin Routes (/api/admin/policies)","PUT /api/admin/policies/:policyId"],"duration":80,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n  \u001b[2m{\"attributes\": {\"cognito:groups\": [\"policy-admin\", \"user\"], \"cognito:username\": \"test-admin\", \"sub\": \"test-admin-id-123\"}, \"id\": \"test-admin-id-123\", \"roles\": [\"policy-admin\", \"user\"], \"tenantId\": \"unknown-tenant\", \"username\": \"test-admin\"}\u001b[22m,\n  \u001b[2m\"a1b2c3d4-e5f6-7890-1234-567890abcdef\"\u001b[22m,\n\u001b[2m  Object {\u001b[22m\n\u001b[2m    \"description\": \"Updated Integration Description\",\u001b[22m\n\u001b[32m-   \"version\": 2,\u001b[39m\n\u001b[2m  }\u001b[22m,\n\nNumber of calls: \u001b[31m1\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n\u001b[32m- Expected\u001b[39m\n\u001b[31m+ Received\u001b[39m\n\n  \u001b[2m{\"attributes\": {\"cognito:groups\": [\"policy-admin\", \"user\"], \"cognito:username\": \"test-admin\", \"sub\": \"test-admin-id-123\"}, \"id\": \"test-admin-id-123\", \"roles\": [\"policy-admin\", \"user\"], \"tenantId\": \"unknown-tenant\", \"username\": \"test-admin\"}\u001b[22m,\n  \u001b[2m\"a1b2c3d4-e5f6-7890-1234-567890abcdef\"\u001b[22m,\n\u001b[2m  Object {\u001b[22m\n\u001b[2m    \"description\": \"Updated Integration Description\",\u001b[22m\n\u001b[32m-   \"version\": 2,\u001b[39m\n\u001b[2m  }\u001b[22m,\n\nNumber of calls: \u001b[31m1\u001b[39m\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:252:57\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"Integration Tests: Policy Admin Routes (/api/admin/policies) PUT /api/admin/policies/:policyId should return 200 OK with updated policy data if service succeeds","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"failed","title":"should return 200 OK with updated policy data if service succeeds"},{"ancestorTitles":["Integration Tests: Policy Admin Routes (/api/admin/policies)","PUT /api/admin/policies/:policyId"],"duration":70,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests: Policy Admin Routes (/api/admin/policies) PUT /api/admin/policies/:policyId should return 404 Not Found if service throws PolicyNotFoundError","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 404 Not Found if service throws PolicyNotFoundError"},{"ancestorTitles":["Integration Tests: Policy Admin Routes (/api/admin/policies)","PUT /api/admin/policies/:policyId"],"duration":69,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests: Policy Admin Routes (/api/admin/policies) PUT /api/admin/policies/:policyId should return 400 Bad Request if policyId param is invalid","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 400 Bad Request if policyId param is invalid"},{"ancestorTitles":["Integration Tests: Policy Admin Routes (/api/admin/policies)","PUT /api/admin/policies/:policyId"],"duration":47,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests: Policy Admin Routes (/api/admin/policies) PUT /api/admin/policies/:policyId should return 400 Bad Request if payload is invalid (e.g., empty)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 400 Bad Request if payload is invalid (e.g., empty)"},{"ancestorTitles":["Integration Tests: Policy Admin Routes (/api/admin/policies)","PUT /api/admin/policies/:policyId"],"duration":53,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests: Policy Admin Routes (/api/admin/policies) PUT /api/admin/policies/:policyId should return 500 if service fails unexpectedly","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 500 if service fails unexpectedly"},{"ancestorTitles":["Integration Tests: Policy Admin Routes (/api/admin/policies)","PUT /api/admin/policies/:policyId"],"duration":50,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests: Policy Admin Routes (/api/admin/policies) PUT /api/admin/policies/:policyId should return 401 Unauthorized if token is missing","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 401 Unauthorized if token is missing"},{"ancestorTitles":["Integration Tests: Policy Admin Routes (/api/admin/policies)","DELETE /api/admin/policies/:policyId"],"duration":44,"failureDetails":[{}],"failureMessages":["Error: expected 204 \"No Content\", got 500 \"Internal Server Error\"\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:313:18\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:4:12)\n    at Object.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:308:75)\n    at Promise.then.completed (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\testWorker.js:108:12)\n----\n    at Test._assertStatus (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:309:14)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:365:13\n    at Test._assertFunction (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:342:13)\n    at Test.assert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:195:23)\n    at localAssert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:138:14)\n    at Server.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:152:11)\n    at Object.onceWrapper (node:events:633:28)\n    at Server.emit (node:events:519:28)\n    at emitCloseNT (node:net:2419:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"fullName":"Integration Tests: Policy Admin Routes (/api/admin/policies) DELETE /api/admin/policies/:policyId should return 204 No Content if service succeeds","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 204 No Content if service succeeds"},{"ancestorTitles":["Integration Tests: Policy Admin Routes (/api/admin/policies)","DELETE /api/admin/policies/:policyId"],"duration":37,"failureDetails":[{}],"failureMessages":["Error: expected 404 \"Not Found\", got 500 \"Internal Server Error\"\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:324:18\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:4:12)\n    at Object.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:317:92)\n    at Promise.then.completed (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\testWorker.js:108:12)\n----\n    at Test._assertStatus (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:309:14)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:365:13\n    at Test._assertFunction (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:342:13)\n    at Test.assert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:195:23)\n    at localAssert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:138:14)\n    at Server.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:152:11)\n    at Object.onceWrapper (node:events:633:28)\n    at Server.emit (node:events:519:28)\n    at emitCloseNT (node:net:2419:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"fullName":"Integration Tests: Policy Admin Routes (/api/admin/policies) DELETE /api/admin/policies/:policyId should return 404 Not Found if service throws PolicyNotFoundError","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 404 Not Found if service throws PolicyNotFoundError"},{"ancestorTitles":["Integration Tests: Policy Admin Routes (/api/admin/policies)","DELETE /api/admin/policies/:policyId"],"duration":50,"failureDetails":[{}],"failureMessages":["Error: expected 400 \"Bad Request\", got 500 \"Internal Server Error\"\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:332:18\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:4:12)\n    at Object.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:328:86)\n    at Promise.then.completed (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\testWorker.js:108:12)\n----\n    at Test._assertStatus (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:309:14)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:365:13\n    at Test._assertFunction (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:342:13)\n    at Test.assert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:195:23)\n    at localAssert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:138:14)\n    at Server.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:152:11)\n    at Object.onceWrapper (node:events:633:28)\n    at Server.emit (node:events:519:28)\n    at emitCloseNT (node:net:2419:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"fullName":"Integration Tests: Policy Admin Routes (/api/admin/policies) DELETE /api/admin/policies/:policyId should return 400 Bad Request if policyId param is invalid","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 400 Bad Request if policyId param is invalid"},{"ancestorTitles":["Integration Tests: Policy Admin Routes (/api/admin/policies)","DELETE /api/admin/policies/:policyId"],"duration":61,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32mAnything\u001b[39m, \u001b[32m\"b1c2d3e4-f5a6-7890-1234-567890abcdef\"\u001b[39m\n\nNumber of calls: \u001b[31m0\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32mAnything\u001b[39m, \u001b[32m\"b1c2d3e4-f5a6-7890-1234-567890abcdef\"\u001b[39m\n\nNumber of calls: \u001b[31m0\u001b[39m\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:343:57\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"Integration Tests: Policy Admin Routes (/api/admin/policies) DELETE /api/admin/policies/:policyId should return 500 if service fails unexpectedly","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 500 if service fails unexpectedly"},{"ancestorTitles":["Integration Tests: Policy Admin Routes (/api/admin/policies)","DELETE /api/admin/policies/:policyId"],"duration":43,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests: Policy Admin Routes (/api/admin/policies) DELETE /api/admin/policies/:policyId should return 401 Unauthorized if token is missing","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 401 Unauthorized if token is missing"},{"ancestorTitles":["Integration Tests: Policy Admin Routes (/api/admin/policies)","GET /api/admin/policies/:policyId/versions/:version"],"duration":61,"failureDetails":[{}],"failureMessages":["Error: expected 200 \"OK\", got 500 \"Internal Server Error\"\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:364:18\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:4:12)\n    at Object.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:359:81)\n    at Promise.then.completed (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\testWorker.js:108:12)\n----\n    at Test._assertStatus (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:309:14)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:365:13\n    at Test._assertFunction (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:342:13)\n    at Test.assert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:195:23)\n    at localAssert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:138:14)\n    at Server.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:152:11)\n    at Object.onceWrapper (node:events:633:28)\n    at Server.emit (node:events:519:28)\n    at emitCloseNT (node:net:2419:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"fullName":"Integration Tests: Policy Admin Routes (/api/admin/policies) GET /api/admin/policies/:policyId/versions/:version should return 200 OK with policy version data if found","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 200 OK with policy version data if found"},{"ancestorTitles":["Integration Tests: Policy Admin Routes (/api/admin/policies)","GET /api/admin/policies/:policyId/versions/:version"],"duration":49,"failureDetails":[{}],"failureMessages":["Error: expected 404 \"Not Found\", got 500 \"Internal Server Error\"\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:377:18\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:4:12)\n    at Object.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:372:82)\n    at Promise.then.completed (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\testWorker.js:108:12)\n----\n    at Test._assertStatus (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:309:14)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:365:13\n    at Test._assertFunction (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:342:13)\n    at Test.assert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:195:23)\n    at localAssert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:138:14)\n    at Server.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:152:11)\n    at Object.onceWrapper (node:events:633:28)\n    at Server.emit (node:events:519:28)\n    at emitCloseNT (node:net:2419:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"fullName":"Integration Tests: Policy Admin Routes (/api/admin/policies) GET /api/admin/policies/:policyId/versions/:version should return 404 Not Found if policy version not found","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 404 Not Found if policy version not found"},{"ancestorTitles":["Integration Tests: Policy Admin Routes (/api/admin/policies)","GET /api/admin/policies/:policyId/versions/:version"],"duration":46,"failureDetails":[{}],"failureMessages":["Error: expected 400 \"Bad Request\", got 500 \"Internal Server Error\"\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:385:18\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:4:12)\n    at Object.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:381:79)\n    at Promise.then.completed (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\testWorker.js:108:12)\n----\n    at Test._assertStatus (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:309:14)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:365:13\n    at Test._assertFunction (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:342:13)\n    at Test.assert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:195:23)\n    at localAssert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:138:14)\n    at Server.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:152:11)\n    at Object.onceWrapper (node:events:633:28)\n    at Server.emit (node:events:519:28)\n    at emitCloseNT (node:net:2419:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"fullName":"Integration Tests: Policy Admin Routes (/api/admin/policies) GET /api/admin/policies/:policyId/versions/:version should return 400 Bad Request if policyId is invalid","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 400 Bad Request if policyId is invalid"},{"ancestorTitles":["Integration Tests: Policy Admin Routes (/api/admin/policies)","GET /api/admin/policies/:policyId/versions/:version"],"duration":50,"failureDetails":[{}],"failureMessages":["Error: expected 400 \"Bad Request\", got 500 \"Internal Server Error\"\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:393:18\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:4:12)\n    at Object.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:389:78)\n    at Promise.then.completed (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\testWorker.js:108:12)\n----\n    at Test._assertStatus (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:309:14)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:365:13\n    at Test._assertFunction (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:342:13)\n    at Test.assert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:195:23)\n    at localAssert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:138:14)\n    at Server.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:152:11)\n    at Object.onceWrapper (node:events:633:28)\n    at Server.emit (node:events:519:28)\n    at emitCloseNT (node:net:2419:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"fullName":"Integration Tests: Policy Admin Routes (/api/admin/policies) GET /api/admin/policies/:policyId/versions/:version should return 400 Bad Request if version is invalid","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 400 Bad Request if version is invalid"},{"ancestorTitles":["Integration Tests: Policy Admin Routes (/api/admin/policies)","GET /api/admin/policies/:policyId/versions/:version"],"duration":63,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32mAnything\u001b[39m, \u001b[32m\"c1d2e3f4-a5b6-7890-1234-567890abcdef\"\u001b[39m, \u001b[32m1\u001b[39m\n\nNumber of calls: \u001b[31m0\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32mAnything\u001b[39m, \u001b[32m\"c1d2e3f4-a5b6-7890-1234-567890abcdef\"\u001b[39m, \u001b[32m1\u001b[39m\n\nNumber of calls: \u001b[31m0\u001b[39m\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:404:61\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"Integration Tests: Policy Admin Routes (/api/admin/policies) GET /api/admin/policies/:policyId/versions/:version should return 500 Internal Server Error if service fails unexpectedly","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 500 Internal Server Error if service fails unexpectedly"},{"ancestorTitles":["Integration Tests: Policy Admin Routes (/api/admin/policies)","GET /api/admin/policies/:policyId/versions/:version"],"duration":42,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests: Policy Admin Routes (/api/admin/policies) GET /api/admin/policies/:policyId/versions/:version should return 401 Unauthorized if token is missing","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 401 Unauthorized if token is missing"},{"ancestorTitles":["Integration Tests: Policy Admin Routes (/api/admin/policies)","GET /api/admin/policies/:policyId/versions"],"duration":54,"failureDetails":[{}],"failureMessages":["Error: expected 200 \"OK\", got 500 \"Internal Server Error\"\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:427:18\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:4:12)\n    at Object.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:422:78)\n    at Promise.then.completed (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\testWorker.js:108:12)\n----\n    at Test._assertStatus (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:309:14)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:365:13\n    at Test._assertFunction (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:342:13)\n    at Test.assert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:195:23)\n    at localAssert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:138:14)\n    at Server.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:152:11)\n    at Object.onceWrapper (node:events:633:28)\n    at Server.emit (node:events:519:28)\n    at emitCloseNT (node:net:2419:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"fullName":"Integration Tests: Policy Admin Routes (/api/admin/policies) GET /api/admin/policies/:policyId/versions should return 200 OK with a list of policy versions","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 200 OK with a list of policy versions"},{"ancestorTitles":["Integration Tests: Policy Admin Routes (/api/admin/policies)","GET /api/admin/policies/:policyId/versions"],"duration":40,"failureDetails":[{}],"failureMessages":["Error: expected 404 \"Not Found\", got 500 \"Internal Server Error\"\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:443:18\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:4:12)\n    at Object.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:436:79)\n    at Promise.then.completed (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\testWorker.js:108:12)\n----\n    at Test._assertStatus (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:309:14)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:365:13\n    at Test._assertFunction (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:342:13)\n    at Test.assert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:195:23)\n    at localAssert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:138:14)\n    at Server.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:152:11)\n    at Object.onceWrapper (node:events:633:28)\n    at Server.emit (node:events:519:28)\n    at emitCloseNT (node:net:2419:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"fullName":"Integration Tests: Policy Admin Routes (/api/admin/policies) GET /api/admin/policies/:policyId/versions should return 404 Not Found if policy does not exist","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 404 Not Found if policy does not exist"},{"ancestorTitles":["Integration Tests: Policy Admin Routes (/api/admin/policies)","GET /api/admin/policies/:policyId/versions"],"duration":64,"failureDetails":[{}],"failureMessages":["Error: expected 400 \"Bad Request\", got 500 \"Internal Server Error\"\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:451:18\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:4:12)\n    at Object.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:447:79)\n    at Promise.then.completed (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\testWorker.js:108:12)\n----\n    at Test._assertStatus (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:309:14)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:365:13\n    at Test._assertFunction (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:342:13)\n    at Test.assert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:195:23)\n    at localAssert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:138:14)\n    at Server.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:152:11)\n    at Object.onceWrapper (node:events:633:28)\n    at Server.emit (node:events:519:28)\n    at emitCloseNT (node:net:2419:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"fullName":"Integration Tests: Policy Admin Routes (/api/admin/policies) GET /api/admin/policies/:policyId/versions should return 400 Bad Request if policyId is invalid","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 400 Bad Request if policyId is invalid"},{"ancestorTitles":["Integration Tests: Policy Admin Routes (/api/admin/policies)","GET /api/admin/policies/:policyId/versions"],"duration":60,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32mAnything\u001b[39m, \u001b[32m\"d1e2f3a4-b5c6-7890-1234-567890abcdef\"\u001b[39m\n\nNumber of calls: \u001b[31m0\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32mAnything\u001b[39m, \u001b[32m\"d1e2f3a4-b5c6-7890-1234-567890abcdef\"\u001b[39m\n\nNumber of calls: \u001b[31m0\u001b[39m\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:462:63\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"Integration Tests: Policy Admin Routes (/api/admin/policies) GET /api/admin/policies/:policyId/versions should return 500 Internal Server Error if service fails unexpectedly","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 500 Internal Server Error if service fails unexpectedly"},{"ancestorTitles":["Integration Tests: Policy Admin Routes (/api/admin/policies)","GET /api/admin/policies/:policyId/versions"],"duration":42,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests: Policy Admin Routes (/api/admin/policies) GET /api/admin/policies/:policyId/versions should return 401 Unauthorized if token is missing","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 401 Unauthorized if token is missing"},{"ancestorTitles":["Integration Tests: Policy Admin Routes (/api/admin/policies)","POST /api/admin/policies/:policyId/rollback"],"duration":74,"failureDetails":[{}],"failureMessages":["Error: expected 200 \"OK\", got 500 \"Internal Server Error\"\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:483:18\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:4:12)\n    at Object.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:478:87)\n    at Promise.then.completed (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\testWorker.js:108:12)\n----\n    at Test._assertStatus (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:309:14)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:365:13\n    at Test._assertFunction (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:342:13)\n    at Test.assert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:195:23)\n    at localAssert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:138:14)\n    at Server.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:152:11)\n    at Object.onceWrapper (node:events:633:28)\n    at Server.emit (node:events:519:28)\n    at emitCloseNT (node:net:2419:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"fullName":"Integration Tests: Policy Admin Routes (/api/admin/policies) POST /api/admin/policies/:policyId/rollback should return 200 OK with rolled back policy data on success","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 200 OK with rolled back policy data on success"},{"ancestorTitles":["Integration Tests: Policy Admin Routes (/api/admin/policies)","POST /api/admin/policies/:policyId/rollback"],"duration":47,"failureDetails":[{}],"failureMessages":["Error: expected 404 \"Not Found\", got 500 \"Internal Server Error\"\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:498:18\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:4:12)\n    at Object.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:491:85)\n    at Promise.then.completed (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\testWorker.js:108:12)\n----\n    at Test._assertStatus (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:309:14)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:365:13\n    at Test._assertFunction (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:342:13)\n    at Test.assert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:195:23)\n    at localAssert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:138:14)\n    at Server.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:152:11)\n    at Object.onceWrapper (node:events:633:28)\n    at Server.emit (node:events:519:28)\n    at emitCloseNT (node:net:2419:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"fullName":"Integration Tests: Policy Admin Routes (/api/admin/policies) POST /api/admin/policies/:policyId/rollback should return 404 Not Found if policy or version not found","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 404 Not Found if policy or version not found"},{"ancestorTitles":["Integration Tests: Policy Admin Routes (/api/admin/policies)","POST /api/admin/policies/:policyId/rollback"],"duration":44,"failureDetails":[{}],"failureMessages":["Error: expected 400 \"Bad Request\", got 500 \"Internal Server Error\"\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:506:18\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:4:12)\n    at Object.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:502:79)\n    at Promise.then.completed (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\testWorker.js:108:12)\n----\n    at Test._assertStatus (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:309:14)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:365:13\n    at Test._assertFunction (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:342:13)\n    at Test.assert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:195:23)\n    at localAssert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:138:14)\n    at Server.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:152:11)\n    at Object.onceWrapper (node:events:633:28)\n    at Server.emit (node:events:519:28)\n    at emitCloseNT (node:net:2419:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"fullName":"Integration Tests: Policy Admin Routes (/api/admin/policies) POST /api/admin/policies/:policyId/rollback should return 400 Bad Request if policyId is invalid","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 400 Bad Request if policyId is invalid"},{"ancestorTitles":["Integration Tests: Policy Admin Routes (/api/admin/policies)","POST /api/admin/policies/:policyId/rollback"],"duration":53,"failureDetails":[{}],"failureMessages":["Error: expected 400 \"Bad Request\", got 500 \"Internal Server Error\"\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:514:18\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:4:12)\n    at Object.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:510:89)\n    at Promise.then.completed (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)\n    at Object.worker (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\testWorker.js:108:12)\n----\n    at Test._assertStatus (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:309:14)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:365:13\n    at Test._assertFunction (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:342:13)\n    at Test.assert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:195:23)\n    at localAssert (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:138:14)\n    at Server.<anonymous> (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\supertest@7.1.4\\node_modules\\supertest\\lib\\test.js:152:11)\n    at Object.onceWrapper (node:events:633:28)\n    at Server.emit (node:events:519:28)\n    at emitCloseNT (node:net:2419:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"fullName":"Integration Tests: Policy Admin Routes (/api/admin/policies) POST /api/admin/policies/:policyId/rollback should return 400 Bad Request if version is invalid or missing","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 400 Bad Request if version is invalid or missing"},{"ancestorTitles":["Integration Tests: Policy Admin Routes (/api/admin/policies)","POST /api/admin/policies/:policyId/rollback"],"duration":75,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32mAnything\u001b[39m, \u001b[32m\"e1f2a3b4-c5d6-7890-1234-567890abcdef\"\u001b[39m, \u001b[32m1\u001b[39m\n\nNumber of calls: \u001b[31m0\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32mAnything\u001b[39m, \u001b[32m\"e1f2a3b4-c5d6-7890-1234-567890abcdef\"\u001b[39m, \u001b[32m1\u001b[39m\n\nNumber of calls: \u001b[31m0\u001b[39m\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:525:59\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"Integration Tests: Policy Admin Routes (/api/admin/policies) POST /api/admin/policies/:policyId/rollback should return 500 Internal Server Error if service fails unexpectedly","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"should return 500 Internal Server Error if service fails unexpectedly"},{"ancestorTitles":["Integration Tests: Policy Admin Routes (/api/admin/policies)","POST /api/admin/policies/:policyId/rollback"],"duration":100,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests: Policy Admin Routes (/api/admin/policies) POST /api/admin/policies/:policyId/rollback should return 401 Unauthorized if token is missing","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 401 Unauthorized if token is missing"}],"endTime":1771844455846,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mIntegration Tests: Policy Admin Routes (/api/admin/policies) › GET /api/admin/policies/:policyId › should return 200 OK with policy data if policy exists\u001b[39m\u001b[22m\n\n    expected 200 \"OK\", got 500 \"Internal Server Error\"\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 134 |\u001b[39m                 \u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[32m`${BASE_API_PATH}/${targetPolicyId}`\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m 135 |\u001b[39m                 \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[33mMOCK_AUTH_HEADER\u001b[39m)\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 136 |\u001b[39m                 \u001b[33m.\u001b[39mexpect(\u001b[33mHttpStatusCode\u001b[39m\u001b[33m.\u001b[39m\u001b[33mOK\u001b[39m) \u001b[90m// 200\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                  \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 137 |\u001b[39m                 \u001b[33m.\u001b[39mexpect(res \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m 138 |\u001b[39m                     expect(res\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mid)\u001b[33m.\u001b[39mtoBe(targetPolicyId)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 139 |\u001b[39m                     expect(res\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mpolicyName)\u001b[33m.\u001b[39mtoBe(\u001b[32m'get.policy'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:136:18\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:8:71\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous>.__awaiter (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:4:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:131:81)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      ----\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertStatus (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:309:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:365:13\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertFunction (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:342:13)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.assert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:195:23)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat localAssert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:138:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Server.<anonymous> (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:152:11)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mIntegration Tests: Policy Admin Routes (/api/admin/policies) › GET /api/admin/policies/:policyId › should return 404 Not Found if service returns null\u001b[39m\u001b[22m\n\n    expected 404 \"Not Found\", got 500 \"Internal Server Error\"\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 147 |\u001b[39m                 \u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[32m`${BASE_API_PATH}/${targetPolicyId}`\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m 148 |\u001b[39m                 \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[33mMOCK_AUTH_HEADER\u001b[39m)\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 149 |\u001b[39m                 \u001b[33m.\u001b[39mexpect(\u001b[33mHttpStatusCode\u001b[39m\u001b[33m.\u001b[39m\u001b[33mNOT_FOUND\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// 404\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                  \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 150 |\u001b[39m             expect(mockPolicyAdminService\u001b[33m.\u001b[39mgetPolicy)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(expect\u001b[33m.\u001b[39manything()\u001b[33m,\u001b[39m targetPolicyId)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 151 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 152 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:149:18\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:8:71\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous>.__awaiter (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:4:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:144:78)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      ----\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertStatus (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:309:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:365:13\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertFunction (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:342:13)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.assert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:195:23)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat localAssert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:138:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Server.<anonymous> (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:152:11)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mIntegration Tests: Policy Admin Routes (/api/admin/policies) › GET /api/admin/policies/:policyId › should return 404 Not Found if service throws PolicyNotFoundError\u001b[39m\u001b[22m\n\n    expected 404 \"Not Found\", got 500 \"Internal Server Error\"\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 158 |\u001b[39m                 \u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[32m`${BASE_API_PATH}/${targetPolicyId}`\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m 159 |\u001b[39m                 \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[33mMOCK_AUTH_HEADER\u001b[39m)\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 160 |\u001b[39m                 \u001b[33m.\u001b[39mexpect(\u001b[33mHttpStatusCode\u001b[39m\u001b[33m.\u001b[39m\u001b[33mNOT_FOUND\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// 404\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                  \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 161 |\u001b[39m             expect(mockPolicyAdminService\u001b[33m.\u001b[39mgetPolicy)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(expect\u001b[33m.\u001b[39manything()\u001b[33m,\u001b[39m targetPolicyId)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 162 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 163 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:160:18\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:8:71\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous>.__awaiter (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:4:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:153:92)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      ----\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertStatus (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:309:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:365:13\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertFunction (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:342:13)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.assert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:195:23)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat localAssert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:138:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Server.<anonymous> (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:152:11)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mIntegration Tests: Policy Admin Routes (/api/admin/policies) › GET /api/admin/policies/:policyId › should return 400 Bad Request if policyId param is not a valid UUID\u001b[39m\u001b[22m\n\n    expected 400 \"Bad Request\", got 500 \"Internal Server Error\"\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 167 |\u001b[39m                 \u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[32m`${BASE_API_PATH}/${invalidId}`\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m 168 |\u001b[39m                 \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[33mMOCK_AUTH_HEADER\u001b[39m)\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 169 |\u001b[39m                 \u001b[33m.\u001b[39mexpect(\u001b[33mHttpStatusCode\u001b[39m\u001b[33m.\u001b[39m\u001b[33mBAD_REQUEST\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// 400 (Handled by validation middleware)\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                  \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 170 |\u001b[39m             expect(mockPolicyAdminService\u001b[33m.\u001b[39mgetPolicy)\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 171 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 172 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:169:18\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:8:71\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous>.__awaiter (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:4:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:164:94)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      ----\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertStatus (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:309:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:365:13\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertFunction (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:342:13)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.assert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:195:23)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat localAssert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:138:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Server.<anonymous> (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:152:11)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mIntegration Tests: Policy Admin Routes (/api/admin/policies) › GET /api/admin/policies/:policyId › should return 500 if the service fails unexpectedly\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: \u001b[32mAnything\u001b[39m, \u001b[32m\"a1b2c3d4-e5f6-7890-1234-567890abcdef\"\u001b[39m\n\n    Number of calls: \u001b[31m0\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 178 |\u001b[39m                 \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[33mMOCK_AUTH_HEADER\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m 179 |\u001b[39m                 \u001b[33m.\u001b[39mexpect(\u001b[33mHttpStatusCode\u001b[39m\u001b[33m.\u001b[39m\u001b[33mINTERNAL_SERVER_ERROR\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// 500\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 180 |\u001b[39m             expect(mockPolicyAdminService\u001b[33m.\u001b[39mgetPolicy)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(expect\u001b[33m.\u001b[39manything()\u001b[33m,\u001b[39m targetPolicyId)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 181 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 182 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 183 |\u001b[39m         it(\u001b[32m'should return 401 Unauthorized if token is missing'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:180:54\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat fulfilled (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:5:58)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mIntegration Tests: Policy Admin Routes (/api/admin/policies) › GET /api/admin/policies › should return 200 OK with a list of policies\u001b[39m\u001b[22m\n\n    expected 200 \"OK\", got 500 \"Internal Server Error\"\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 196 |\u001b[39m                  \u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[33mBASE_API_PATH\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m 197 |\u001b[39m                  \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[33mMOCK_AUTH_HEADER\u001b[39m)\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 198 |\u001b[39m                  \u001b[33m.\u001b[39mexpect(\u001b[33mHttpStatusCode\u001b[39m\u001b[33m.\u001b[39m\u001b[33mOK\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// 200\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 199 |\u001b[39m              expect(mockPolicyAdminService\u001b[33m.\u001b[39mlistPolicies)\u001b[33m.\u001b[39mtoHaveBeenCalledTimes(\u001b[35m1\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 200 |\u001b[39m              expect(mockPolicyAdminService\u001b[33m.\u001b[39mlistPolicies)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(expect\u001b[33m.\u001b[39manything()\u001b[33m,\u001b[39m { limit\u001b[33m:\u001b[39m undefined\u001b[33m,\u001b[39m language\u001b[33m:\u001b[39m undefined\u001b[33m,\u001b[39m startKey\u001b[33m:\u001b[39m undefined })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 201 |\u001b[39m          })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:198:19\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:8:71\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous>.__awaiter (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:4:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:192:72)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      ----\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertStatus (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:309:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:365:13\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertFunction (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:342:13)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.assert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:195:23)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat localAssert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:138:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Server.<anonymous> (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:152:11)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mIntegration Tests: Policy Admin Routes (/api/admin/policies) › GET /api/admin/policies › should pass pagination and filter parameters to the service\u001b[39m\u001b[22m\n\n    expected 200 \"OK\", got 500 \"Internal Server Error\"\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 207 |\u001b[39m                  \u001b[33m.\u001b[39mquery({ limit\u001b[33m:\u001b[39m \u001b[35m15\u001b[39m\u001b[33m,\u001b[39m language\u001b[33m:\u001b[39m \u001b[32m'rego'\u001b[39m\u001b[33m,\u001b[39m startKey\u001b[33m:\u001b[39m \u001b[32m'opaqueStartKey'\u001b[39m })\u001b[22m\n\u001b[2m     \u001b[90m 208 |\u001b[39m                  \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[33mMOCK_AUTH_HEADER\u001b[39m)\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 209 |\u001b[39m                  \u001b[33m.\u001b[39mexpect(\u001b[33mHttpStatusCode\u001b[39m\u001b[33m.\u001b[39m\u001b[33mOK\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// 200\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 210 |\u001b[39m              expect(mockPolicyAdminService\u001b[33m.\u001b[39mlistPolicies)\u001b[33m.\u001b[39mtoHaveBeenCalledTimes(\u001b[35m1\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 211 |\u001b[39m              expect(mockPolicyAdminService\u001b[33m.\u001b[39mlistPolicies)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(expect\u001b[33m.\u001b[39manything()\u001b[33m,\u001b[39m { limit\u001b[33m:\u001b[39m \u001b[32m'15'\u001b[39m\u001b[33m,\u001b[39m language\u001b[33m:\u001b[39m \u001b[32m'rego'\u001b[39m\u001b[33m,\u001b[39m startKey\u001b[33m:\u001b[39m \u001b[32m'opaqueStartKey'\u001b[39m })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 212 |\u001b[39m          })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:209:19\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:8:71\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous>.__awaiter (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:4:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:203:88)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      ----\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertStatus (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:309:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:365:13\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertFunction (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:342:13)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.assert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:195:23)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat localAssert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:138:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Server.<anonymous> (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:152:11)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mIntegration Tests: Policy Admin Routes (/api/admin/policies) › GET /api/admin/policies › should return 500 if the service fails unexpectedly\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledTimes\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected number of calls: \u001b[32m1\u001b[39m\n    Received number of calls: \u001b[31m0\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 219 |\u001b[39m                  \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[33mMOCK_AUTH_HEADER\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m 220 |\u001b[39m                  \u001b[33m.\u001b[39mexpect(\u001b[33mHttpStatusCode\u001b[39m\u001b[33m.\u001b[39m\u001b[33mINTERNAL_SERVER_ERROR\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// 500\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 221 |\u001b[39m              expect(mockPolicyAdminService\u001b[33m.\u001b[39mlistPolicies)\u001b[33m.\u001b[39mtoHaveBeenCalledTimes(\u001b[35m1\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 222 |\u001b[39m          })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 223 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 224 |\u001b[39m          it(\u001b[32m'should return 401 Unauthorized if token is missing'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:221:58\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat fulfilled (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:5:58)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mIntegration Tests: Policy Admin Routes (/api/admin/policies) › PUT /api/admin/policies/:policyId › should return 200 OK with updated policy data if service succeeds\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    \u001b[32m- Expected\u001b[39m\n    \u001b[31m+ Received\u001b[39m\n\n      \u001b[2m{\"attributes\": {\"cognito:groups\": [\"policy-admin\", \"user\"], \"cognito:username\": \"test-admin\", \"sub\": \"test-admin-id-123\"}, \"id\": \"test-admin-id-123\", \"roles\": [\"policy-admin\", \"user\"], \"tenantId\": \"unknown-tenant\", \"username\": \"test-admin\"}\u001b[22m,\n      \u001b[2m\"a1b2c3d4-e5f6-7890-1234-567890abcdef\"\u001b[22m,\n    \u001b[2m  Object {\u001b[22m\n    \u001b[2m    \"description\": \"Updated Integration Description\",\u001b[22m\n    \u001b[32m-   \"version\": 2,\u001b[39m\n    \u001b[2m  }\u001b[22m,\n\n    Number of calls: \u001b[31m1\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 250 |\u001b[39m                     expect(res\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mversion)\u001b[33m.\u001b[39mtoBe(\u001b[33mMOCK_VALID_UPDATE_POLICY_PAYLOAD\u001b[39m\u001b[33m.\u001b[39mversion)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 251 |\u001b[39m                 })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 252 |\u001b[39m             expect(mockPolicyAdminService\u001b[33m.\u001b[39mupdatePolicy)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(expect\u001b[33m.\u001b[39manything()\u001b[33m,\u001b[39m targetPolicyId\u001b[33m,\u001b[39m \u001b[33mMOCK_VALID_UPDATE_POLICY_PAYLOAD\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 253 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 254 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 255 |\u001b[39m          it(\u001b[32m'should return 404 Not Found if service throws PolicyNotFoundError'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:252:57\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat fulfilled (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:5:58)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mIntegration Tests: Policy Admin Routes (/api/admin/policies) › DELETE /api/admin/policies/:policyId › should return 204 No Content if service succeeds\u001b[39m\u001b[22m\n\n    expected 204 \"No Content\", got 500 \"Internal Server Error\"\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 311 |\u001b[39m                 \u001b[33m.\u001b[39m\u001b[36mdelete\u001b[39m(\u001b[32m`${BASE_API_PATH}/${targetPolicyId}`\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m 312 |\u001b[39m                 \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[33mMOCK_AUTH_HEADER\u001b[39m)\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 313 |\u001b[39m                 \u001b[33m.\u001b[39mexpect(\u001b[33mHttpStatusCode\u001b[39m\u001b[33m.\u001b[39m\u001b[33mNO_CONTENT\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// 204\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                  \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 314 |\u001b[39m             expect(mockPolicyAdminService\u001b[33m.\u001b[39mdeletePolicy)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(expect\u001b[33m.\u001b[39manything()\u001b[33m,\u001b[39m targetPolicyId)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 315 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 316 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:313:18\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:8:71\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous>.__awaiter (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:4:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:308:75)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      ----\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertStatus (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:309:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:365:13\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertFunction (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:342:13)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.assert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:195:23)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat localAssert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:138:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Server.<anonymous> (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:152:11)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mIntegration Tests: Policy Admin Routes (/api/admin/policies) › DELETE /api/admin/policies/:policyId › should return 404 Not Found if service throws PolicyNotFoundError\u001b[39m\u001b[22m\n\n    expected 404 \"Not Found\", got 500 \"Internal Server Error\"\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 322 |\u001b[39m                 \u001b[33m.\u001b[39m\u001b[36mdelete\u001b[39m(\u001b[32m`${BASE_API_PATH}/${targetPolicyId}`\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m 323 |\u001b[39m                 \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[33mMOCK_AUTH_HEADER\u001b[39m)\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 324 |\u001b[39m                 \u001b[33m.\u001b[39mexpect(\u001b[33mHttpStatusCode\u001b[39m\u001b[33m.\u001b[39m\u001b[33mNOT_FOUND\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// 404\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                  \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 325 |\u001b[39m             expect(mockPolicyAdminService\u001b[33m.\u001b[39mdeletePolicy)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(expect\u001b[33m.\u001b[39manything()\u001b[33m,\u001b[39m targetPolicyId)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 326 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 327 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:324:18\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:8:71\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous>.__awaiter (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:4:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:317:92)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      ----\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertStatus (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:309:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:365:13\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertFunction (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:342:13)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.assert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:195:23)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat localAssert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:138:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Server.<anonymous> (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:152:11)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mIntegration Tests: Policy Admin Routes (/api/admin/policies) › DELETE /api/admin/policies/:policyId › should return 400 Bad Request if policyId param is invalid\u001b[39m\u001b[22m\n\n    expected 400 \"Bad Request\", got 500 \"Internal Server Error\"\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 330 |\u001b[39m                 \u001b[33m.\u001b[39m\u001b[36mdelete\u001b[39m(\u001b[32m`${BASE_API_PATH}/invalid-uuid`\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m 331 |\u001b[39m                 \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[33mMOCK_AUTH_HEADER\u001b[39m)\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 332 |\u001b[39m                 \u001b[33m.\u001b[39mexpect(\u001b[33mHttpStatusCode\u001b[39m\u001b[33m.\u001b[39m\u001b[33mBAD_REQUEST\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// 400\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                  \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 333 |\u001b[39m             expect(mockPolicyAdminService\u001b[33m.\u001b[39mdeletePolicy)\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 334 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 335 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:332:18\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:8:71\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous>.__awaiter (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:4:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:328:86)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      ----\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertStatus (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:309:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:365:13\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertFunction (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:342:13)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.assert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:195:23)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat localAssert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:138:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Server.<anonymous> (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:152:11)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mIntegration Tests: Policy Admin Routes (/api/admin/policies) › DELETE /api/admin/policies/:policyId › should return 500 if service fails unexpectedly\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: \u001b[32mAnything\u001b[39m, \u001b[32m\"b1c2d3e4-f5a6-7890-1234-567890abcdef\"\u001b[39m\n\n    Number of calls: \u001b[31m0\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 341 |\u001b[39m                 \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[33mMOCK_AUTH_HEADER\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m 342 |\u001b[39m                 \u001b[33m.\u001b[39mexpect(\u001b[33mHttpStatusCode\u001b[39m\u001b[33m.\u001b[39m\u001b[33mINTERNAL_SERVER_ERROR\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// 500\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 343 |\u001b[39m             expect(mockPolicyAdminService\u001b[33m.\u001b[39mdeletePolicy)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(expect\u001b[33m.\u001b[39manything()\u001b[33m,\u001b[39m targetPolicyId)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 344 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 345 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 346 |\u001b[39m         it(\u001b[32m'should return 401 Unauthorized if token is missing'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:343:57\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat fulfilled (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:5:58)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mIntegration Tests: Policy Admin Routes (/api/admin/policies) › GET /api/admin/policies/:policyId/versions/:version › should return 200 OK with policy version data if found\u001b[39m\u001b[22m\n\n    expected 200 \"OK\", got 500 \"Internal Server Error\"\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 362 |\u001b[39m                 \u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[32m`${BASE_API_PATH}/${policyId}/versions/${version}`\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m 363 |\u001b[39m                 \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[33mMOCK_AUTH_HEADER\u001b[39m)\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 364 |\u001b[39m                 \u001b[33m.\u001b[39mexpect(\u001b[33mHttpStatusCode\u001b[39m\u001b[33m.\u001b[39m\u001b[33mOK\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                  \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 365 |\u001b[39m                 \u001b[33m.\u001b[39mexpect(res \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m 366 |\u001b[39m                     expect(res\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mid)\u001b[33m.\u001b[39mtoBe(policyId)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 367 |\u001b[39m                     expect(res\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mversion)\u001b[33m.\u001b[39mtoBe(version)\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:364:18\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:8:71\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous>.__awaiter (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:4:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:359:81)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      ----\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertStatus (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:309:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:365:13\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertFunction (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:342:13)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.assert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:195:23)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat localAssert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:138:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Server.<anonymous> (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:152:11)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mIntegration Tests: Policy Admin Routes (/api/admin/policies) › GET /api/admin/policies/:policyId/versions/:version › should return 404 Not Found if policy version not found\u001b[39m\u001b[22m\n\n    expected 404 \"Not Found\", got 500 \"Internal Server Error\"\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 375 |\u001b[39m                 \u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[32m`${BASE_API_PATH}/${policyId}/versions/${version}`\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m 376 |\u001b[39m                 \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[33mMOCK_AUTH_HEADER\u001b[39m)\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 377 |\u001b[39m                 \u001b[33m.\u001b[39mexpect(\u001b[33mHttpStatusCode\u001b[39m\u001b[33m.\u001b[39m\u001b[33mNOT_FOUND\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                  \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 378 |\u001b[39m             expect(mockPolicyAdminService\u001b[33m.\u001b[39mgetPolicyVersion)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(expect\u001b[33m.\u001b[39manything()\u001b[33m,\u001b[39m policyId\u001b[33m,\u001b[39m version)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 379 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 380 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:377:18\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:8:71\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous>.__awaiter (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:4:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:372:82)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      ----\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertStatus (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:309:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:365:13\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertFunction (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:342:13)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.assert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:195:23)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat localAssert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:138:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Server.<anonymous> (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:152:11)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mIntegration Tests: Policy Admin Routes (/api/admin/policies) › GET /api/admin/policies/:policyId/versions/:version › should return 400 Bad Request if policyId is invalid\u001b[39m\u001b[22m\n\n    expected 400 \"Bad Request\", got 500 \"Internal Server Error\"\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 383 |\u001b[39m                 \u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[32m`${BASE_API_PATH}/invalid-uuid/versions/${version}`\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m 384 |\u001b[39m                 \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[33mMOCK_AUTH_HEADER\u001b[39m)\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 385 |\u001b[39m                 \u001b[33m.\u001b[39mexpect(\u001b[33mHttpStatusCode\u001b[39m\u001b[33m.\u001b[39m\u001b[33mBAD_REQUEST\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                  \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 386 |\u001b[39m             expect(mockPolicyAdminService\u001b[33m.\u001b[39mgetPolicyVersion)\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 387 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 388 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:385:18\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:8:71\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous>.__awaiter (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:4:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:381:79)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      ----\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertStatus (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:309:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:365:13\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertFunction (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:342:13)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.assert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:195:23)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat localAssert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:138:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Server.<anonymous> (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:152:11)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mIntegration Tests: Policy Admin Routes (/api/admin/policies) › GET /api/admin/policies/:policyId/versions/:version › should return 400 Bad Request if version is invalid\u001b[39m\u001b[22m\n\n    expected 400 \"Bad Request\", got 500 \"Internal Server Error\"\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 391 |\u001b[39m                 \u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[32m`${BASE_API_PATH}/${policyId}/versions/invalid-version`\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m 392 |\u001b[39m                 \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[33mMOCK_AUTH_HEADER\u001b[39m)\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 393 |\u001b[39m                 \u001b[33m.\u001b[39mexpect(\u001b[33mHttpStatusCode\u001b[39m\u001b[33m.\u001b[39m\u001b[33mBAD_REQUEST\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                  \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 394 |\u001b[39m             expect(mockPolicyAdminService\u001b[33m.\u001b[39mgetPolicyVersion)\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 395 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 396 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:393:18\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:8:71\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous>.__awaiter (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:4:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:389:78)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      ----\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertStatus (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:309:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:365:13\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertFunction (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:342:13)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.assert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:195:23)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat localAssert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:138:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Server.<anonymous> (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:152:11)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mIntegration Tests: Policy Admin Routes (/api/admin/policies) › GET /api/admin/policies/:policyId/versions/:version › should return 500 Internal Server Error if service fails unexpectedly\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: \u001b[32mAnything\u001b[39m, \u001b[32m\"c1d2e3f4-a5b6-7890-1234-567890abcdef\"\u001b[39m, \u001b[32m1\u001b[39m\n\n    Number of calls: \u001b[31m0\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 402 |\u001b[39m                 \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[33mMOCK_AUTH_HEADER\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m 403 |\u001b[39m                 \u001b[33m.\u001b[39mexpect(\u001b[33mHttpStatusCode\u001b[39m\u001b[33m.\u001b[39m\u001b[33mINTERNAL_SERVER_ERROR\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 404 |\u001b[39m             expect(mockPolicyAdminService\u001b[33m.\u001b[39mgetPolicyVersion)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(expect\u001b[33m.\u001b[39manything()\u001b[33m,\u001b[39m policyId\u001b[33m,\u001b[39m version)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                                             \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 405 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 406 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 407 |\u001b[39m         it(\u001b[32m'should return 401 Unauthorized if token is missing'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:404:61\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat fulfilled (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:5:58)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mIntegration Tests: Policy Admin Routes (/api/admin/policies) › GET /api/admin/policies/:policyId/versions › should return 200 OK with a list of policy versions\u001b[39m\u001b[22m\n\n    expected 200 \"OK\", got 500 \"Internal Server Error\"\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 425 |\u001b[39m                 \u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[32m`${BASE_API_PATH}/${policyId}/versions`\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m 426 |\u001b[39m                 \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[33mMOCK_AUTH_HEADER\u001b[39m)\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 427 |\u001b[39m                 \u001b[33m.\u001b[39mexpect(\u001b[33mHttpStatusCode\u001b[39m\u001b[33m.\u001b[39m\u001b[33mOK\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                  \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 428 |\u001b[39m                 \u001b[33m.\u001b[39mexpect(res \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m 429 |\u001b[39m                     expect(res\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveLength(\u001b[35m2\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 430 |\u001b[39m                     expect(res\u001b[33m.\u001b[39mbody[\u001b[35m0\u001b[39m]\u001b[33m.\u001b[39mversion)\u001b[33m.\u001b[39mtoBe(\u001b[35m1\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:427:18\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:8:71\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous>.__awaiter (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:4:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:422:78)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      ----\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertStatus (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:309:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:365:13\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertFunction (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:342:13)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.assert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:195:23)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat localAssert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:138:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Server.<anonymous> (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:152:11)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mIntegration Tests: Policy Admin Routes (/api/admin/policies) › GET /api/admin/policies/:policyId/versions › should return 404 Not Found if policy does not exist\u001b[39m\u001b[22m\n\n    expected 404 \"Not Found\", got 500 \"Internal Server Error\"\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 441 |\u001b[39m                 \u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[32m`${BASE_API_PATH}/${policyId}/versions`\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m 442 |\u001b[39m                 \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[33mMOCK_AUTH_HEADER\u001b[39m)\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 443 |\u001b[39m                 \u001b[33m.\u001b[39mexpect(\u001b[33mHttpStatusCode\u001b[39m\u001b[33m.\u001b[39m\u001b[33mNOT_FOUND\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                  \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 444 |\u001b[39m             expect(mockPolicyAdminService\u001b[33m.\u001b[39mlistPolicyVersions)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(expect\u001b[33m.\u001b[39manything()\u001b[33m,\u001b[39m policyId)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 445 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 446 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:443:18\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:8:71\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous>.__awaiter (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:4:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:436:79)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      ----\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertStatus (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:309:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:365:13\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertFunction (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:342:13)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.assert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:195:23)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat localAssert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:138:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Server.<anonymous> (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:152:11)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mIntegration Tests: Policy Admin Routes (/api/admin/policies) › GET /api/admin/policies/:policyId/versions › should return 400 Bad Request if policyId is invalid\u001b[39m\u001b[22m\n\n    expected 400 \"Bad Request\", got 500 \"Internal Server Error\"\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 449 |\u001b[39m                 \u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[32m`${BASE_API_PATH}/invalid-uuid/versions`\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m 450 |\u001b[39m                 \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[33mMOCK_AUTH_HEADER\u001b[39m)\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 451 |\u001b[39m                 \u001b[33m.\u001b[39mexpect(\u001b[33mHttpStatusCode\u001b[39m\u001b[33m.\u001b[39m\u001b[33mBAD_REQUEST\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                  \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 452 |\u001b[39m             expect(mockPolicyAdminService\u001b[33m.\u001b[39mlistPolicyVersions)\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 453 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 454 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:451:18\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:8:71\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous>.__awaiter (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:4:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:447:79)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      ----\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertStatus (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:309:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:365:13\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertFunction (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:342:13)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.assert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:195:23)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat localAssert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:138:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Server.<anonymous> (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:152:11)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mIntegration Tests: Policy Admin Routes (/api/admin/policies) › GET /api/admin/policies/:policyId/versions › should return 500 Internal Server Error if service fails unexpectedly\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: \u001b[32mAnything\u001b[39m, \u001b[32m\"d1e2f3a4-b5c6-7890-1234-567890abcdef\"\u001b[39m\n\n    Number of calls: \u001b[31m0\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 460 |\u001b[39m                 \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[33mMOCK_AUTH_HEADER\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m 461 |\u001b[39m                 \u001b[33m.\u001b[39mexpect(\u001b[33mHttpStatusCode\u001b[39m\u001b[33m.\u001b[39m\u001b[33mINTERNAL_SERVER_ERROR\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 462 |\u001b[39m             expect(mockPolicyAdminService\u001b[33m.\u001b[39mlistPolicyVersions)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(expect\u001b[33m.\u001b[39manything()\u001b[33m,\u001b[39m policyId)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                                               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 463 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 464 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 465 |\u001b[39m         it(\u001b[32m'should return 401 Unauthorized if token is missing'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:462:63\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat fulfilled (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:5:58)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mIntegration Tests: Policy Admin Routes (/api/admin/policies) › POST /api/admin/policies/:policyId/rollback › should return 200 OK with rolled back policy data on success\u001b[39m\u001b[22m\n\n    expected 200 \"OK\", got 500 \"Internal Server Error\"\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 481 |\u001b[39m                 \u001b[33m.\u001b[39mpost(\u001b[32m`${BASE_API_PATH}/${policyId}/rollback/${version}`\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m 482 |\u001b[39m                 \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[33mMOCK_AUTH_HEADER\u001b[39m)\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 483 |\u001b[39m                 \u001b[33m.\u001b[39mexpect(\u001b[33mHttpStatusCode\u001b[39m\u001b[33m.\u001b[39m\u001b[33mOK\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                  \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 484 |\u001b[39m                 \u001b[33m.\u001b[39mexpect(res \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m 485 |\u001b[39m                     expect(res\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mid)\u001b[33m.\u001b[39mtoBe(policyId)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 486 |\u001b[39m                     expect(res\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mversion)\u001b[33m.\u001b[39mtoBe(version)\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:483:18\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:8:71\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous>.__awaiter (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:4:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:478:87)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      ----\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertStatus (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:309:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:365:13\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertFunction (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:342:13)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.assert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:195:23)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat localAssert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:138:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Server.<anonymous> (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:152:11)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mIntegration Tests: Policy Admin Routes (/api/admin/policies) › POST /api/admin/policies/:policyId/rollback › should return 404 Not Found if policy or version not found\u001b[39m\u001b[22m\n\n    expected 404 \"Not Found\", got 500 \"Internal Server Error\"\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 496 |\u001b[39m                 \u001b[33m.\u001b[39mpost(\u001b[32m`${BASE_API_PATH}/${policyId}/rollback/${version}`\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m 497 |\u001b[39m                 \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[33mMOCK_AUTH_HEADER\u001b[39m)\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 498 |\u001b[39m                 \u001b[33m.\u001b[39mexpect(\u001b[33mHttpStatusCode\u001b[39m\u001b[33m.\u001b[39m\u001b[33mNOT_FOUND\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                  \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 499 |\u001b[39m             expect(mockPolicyAdminService\u001b[33m.\u001b[39mrollbackPolicy)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(expect\u001b[33m.\u001b[39manything()\u001b[33m,\u001b[39m policyId\u001b[33m,\u001b[39m version)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 500 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 501 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:498:18\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:8:71\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous>.__awaiter (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:4:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:491:85)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      ----\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertStatus (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:309:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:365:13\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertFunction (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:342:13)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.assert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:195:23)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat localAssert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:138:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Server.<anonymous> (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:152:11)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mIntegration Tests: Policy Admin Routes (/api/admin/policies) › POST /api/admin/policies/:policyId/rollback › should return 400 Bad Request if policyId is invalid\u001b[39m\u001b[22m\n\n    expected 400 \"Bad Request\", got 500 \"Internal Server Error\"\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 504 |\u001b[39m                 \u001b[33m.\u001b[39mpost(\u001b[32m`${BASE_API_PATH}/invalid-uuid/rollback/${version}`\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m 505 |\u001b[39m                 \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[33mMOCK_AUTH_HEADER\u001b[39m)\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 506 |\u001b[39m                 \u001b[33m.\u001b[39mexpect(\u001b[33mHttpStatusCode\u001b[39m\u001b[33m.\u001b[39m\u001b[33mBAD_REQUEST\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                  \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 507 |\u001b[39m             expect(mockPolicyAdminService\u001b[33m.\u001b[39mrollbackPolicy)\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 508 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 509 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:506:18\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:8:71\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous>.__awaiter (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:4:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:502:79)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      ----\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertStatus (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:309:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:365:13\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertFunction (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:342:13)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.assert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:195:23)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat localAssert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:138:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Server.<anonymous> (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:152:11)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mIntegration Tests: Policy Admin Routes (/api/admin/policies) › POST /api/admin/policies/:policyId/rollback › should return 400 Bad Request if version is invalid or missing\u001b[39m\u001b[22m\n\n    expected 400 \"Bad Request\", got 500 \"Internal Server Error\"\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 512 |\u001b[39m                 \u001b[33m.\u001b[39mpost(\u001b[32m`${BASE_API_PATH}/${policyId}/rollback/invalid-version`\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m 513 |\u001b[39m                 \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[33mMOCK_AUTH_HEADER\u001b[39m)\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 514 |\u001b[39m                 \u001b[33m.\u001b[39mexpect(\u001b[33mHttpStatusCode\u001b[39m\u001b[33m.\u001b[39m\u001b[33mBAD_REQUEST\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                  \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 515 |\u001b[39m             expect(mockPolicyAdminService\u001b[33m.\u001b[39mrollbackPolicy)\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoHaveBeenCalled()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 516 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 517 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:514:18\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:8:71\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous>.__awaiter (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:4:12)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:510:89)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      ----\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertStatus (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:309:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:365:13\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test._assertFunction (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:342:13)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Test.assert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:195:23)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat localAssert (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:138:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Server.<anonymous> (\u001b[22m\u001b[2mnode_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js\u001b[2m:152:11)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mIntegration Tests: Policy Admin Routes (/api/admin/policies) › POST /api/admin/policies/:policyId/rollback › should return 500 Internal Server Error if service fails unexpectedly\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: \u001b[32mAnything\u001b[39m, \u001b[32m\"e1f2a3b4-c5d6-7890-1234-567890abcdef\"\u001b[39m, \u001b[32m1\u001b[39m\n\n    Number of calls: \u001b[31m0\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 523 |\u001b[39m                 \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[33mMOCK_AUTH_HEADER\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m 524 |\u001b[39m                 \u001b[33m.\u001b[39mexpect(\u001b[33mHttpStatusCode\u001b[39m\u001b[33m.\u001b[39m\u001b[33mINTERNAL_SERVER_ERROR\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 525 |\u001b[39m             expect(mockPolicyAdminService\u001b[33m.\u001b[39mrollbackPolicy)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(expect\u001b[33m.\u001b[39manything()\u001b[33m,\u001b[39m policyId\u001b[33m,\u001b[39m version)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                                           \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 526 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 527 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 528 |\u001b[39m         it(\u001b[32m'should return 401 Unauthorized if token is missing'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:525:59\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat fulfilled (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration/routes/policy.admin.routes.integration.spec.ts\u001b[39m\u001b[0m\u001b[2m:5:58)\u001b[22m\u001b[2m\u001b[22m\n","name":"E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\policy.admin.routes.integration.spec.ts","startTime":1771844398094,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["jwtAuthMiddleware"],"duration":38,"failureDetails":[],"failureMessages":[],"fullName":"jwtAuthMiddleware should call next with AuthenticationError if Authorization header is missing","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should call next with AuthenticationError if Authorization header is missing"},{"ancestorTitles":["jwtAuthMiddleware"],"duration":15,"failureDetails":[],"failureMessages":[],"fullName":"jwtAuthMiddleware should call next with AuthenticationError if Authorization header is invalid","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should call next with AuthenticationError if Authorization header is invalid"},{"ancestorTitles":["jwtAuthMiddleware"],"duration":62,"failureDetails":[{"matcherResult":{"actual":{"id":"user123","username":"testuser","roles":["users"],"attributes":{"sub":"user123","cognito:username":"testuser","cognito:groups":["users"],"email":"test@example.com"}},"expected":{"id":"user123","tenantId":"test-tenant","username":"testuser","roles":["users"],"attributes":{"sub":"user123","cognito:username":"testuser","cognito:groups":["users"],"email":"test@example.com"}},"message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoEqual\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // deep equality\u001b[22m\n\n\u001b[32m- Expected  - 1\u001b[39m\n\u001b[31m+ Received  + 0\u001b[39m\n\n\u001b[33m@@ -9,8 +9,7 @@\u001b[39m\n\u001b[2m    },\u001b[22m\n\u001b[2m    \"id\": \"user123\",\u001b[22m\n\u001b[2m    \"roles\": Array [\u001b[22m\n\u001b[2m      \"users\",\u001b[22m\n\u001b[2m    ],\u001b[22m\n\u001b[32m-   \"tenantId\": \"test-tenant\",\u001b[39m\n\u001b[2m    \"username\": \"testuser\",\u001b[22m\n\u001b[2m  }\u001b[22m","name":"toEqual","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoEqual\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // deep equality\u001b[22m\n\n\u001b[32m- Expected  - 1\u001b[39m\n\u001b[31m+ Received  + 0\u001b[39m\n\n\u001b[33m@@ -9,8 +9,7 @@\u001b[39m\n\u001b[2m    },\u001b[22m\n\u001b[2m    \"id\": \"user123\",\u001b[22m\n\u001b[2m    \"roles\": Array [\u001b[22m\n\u001b[2m      \"users\",\u001b[22m\n\u001b[2m    ],\u001b[22m\n\u001b[32m-   \"tenantId\": \"test-tenant\",\u001b[39m\n\u001b[2m    \"username\": \"testuser\",\u001b[22m\n\u001b[2m  }\u001b[22m\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\unit\\api\\middlewares\\jwtAuth.middleware.spec.ts:91:26\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\unit\\api\\middlewares\\jwtAuth.middleware.spec.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"jwtAuthMiddleware should populate req.user and req.accessToken and call next() on successful validation","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"failed","title":"should populate req.user and req.accessToken and call next() on successful validation"},{"ancestorTitles":["jwtAuthMiddleware"],"duration":10,"failureDetails":[],"failureMessages":[],"fullName":"jwtAuthMiddleware should call next with AuthenticationError on failed JWT validation","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"status":"passed","title":"should call next with AuthenticationError on failed JWT validation"}],"endTime":1771844456245,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mjwtAuthMiddleware › should populate req.user and req.accessToken and call next() on successful validation\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoEqual\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // deep equality\u001b[22m\n\n    \u001b[32m- Expected  - 1\u001b[39m\n    \u001b[31m+ Received  + 0\u001b[39m\n\n    \u001b[33m@@ -9,8 +9,7 @@\u001b[39m\n    \u001b[2m    },\u001b[22m\n    \u001b[2m    \"id\": \"user123\",\u001b[22m\n    \u001b[2m    \"roles\": Array [\u001b[22m\n    \u001b[2m      \"users\",\u001b[22m\n    \u001b[2m    ],\u001b[22m\n    \u001b[32m-   \"tenantId\": \"test-tenant\",\u001b[39m\n    \u001b[2m    \"username\": \"testuser\",\u001b[22m\n    \u001b[2m  }\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 89 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 90 |\u001b[39m         expect(jwtValidatorMock\u001b[33m.\u001b[39mvalidate)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(validToken\u001b[33m.\u001b[39msplit(\u001b[32m' '\u001b[39m)[\u001b[35m1\u001b[39m])\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 91 |\u001b[39m         expect(req\u001b[33m.\u001b[39muser)\u001b[33m.\u001b[39mtoEqual({\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                          \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 92 |\u001b[39m             id\u001b[33m:\u001b[39m \u001b[32m'user123'\u001b[39m\u001b[33m,\u001b[39m tenantId\u001b[33m:\u001b[39m \u001b[32m'test-tenant'\u001b[39m\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 93 |\u001b[39m             username\u001b[33m:\u001b[39m \u001b[32m'testuser'\u001b[39m\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 94 |\u001b[39m             roles\u001b[33m:\u001b[39m [\u001b[32m'users'\u001b[39m]\u001b[33m,\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/api/middlewares/jwtAuth.middleware.spec.ts\u001b[39m\u001b[0m\u001b[2m:91:26\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat fulfilled (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/api/middlewares/jwtAuth.middleware.spec.ts\u001b[39m\u001b[0m\u001b[2m:5:58)\u001b[22m\u001b[2m\u001b[22m\n","name":"E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\unit\\api\\middlewares\\jwtAuth.middleware.spec.ts","startTime":1771844455409,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["DynamoRoleRepository Integration Tests - Minimal"],"duration":498,"failureDetails":[],"failureMessages":[],"fullName":"DynamoRoleRepository Integration Tests - Minimal should create a new role","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should create a new role"},{"ancestorTitles":["DynamoRoleRepository Integration Tests - Minimal"],"duration":248,"failureDetails":[],"failureMessages":[],"fullName":"DynamoRoleRepository Integration Tests - Minimal should throw RoleExistsError when creating a duplicate role name","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should throw RoleExistsError when creating a duplicate role name"},{"ancestorTitles":["DynamoRoleRepository Integration Tests - Minimal"],"duration":144,"failureDetails":[],"failureMessages":[],"fullName":"DynamoRoleRepository Integration Tests - Minimal should find an existing role by name","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should find an existing role by name"},{"ancestorTitles":["DynamoRoleRepository Integration Tests - Minimal"],"duration":85,"failureDetails":[],"failureMessages":[],"fullName":"DynamoRoleRepository Integration Tests - Minimal should return null when finding a non-existent role","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return null when finding a non-existent role"},{"ancestorTitles":["DynamoRoleRepository Integration Tests - Minimal"],"duration":135,"failureDetails":[],"failureMessages":[],"fullName":"DynamoRoleRepository Integration Tests - Minimal should update an existing role","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"should update an existing role"},{"ancestorTitles":["DynamoRoleRepository Integration Tests - Minimal"],"duration":89,"failureDetails":[],"failureMessages":[],"fullName":"DynamoRoleRepository Integration Tests - Minimal should return null when updating a non-existent role","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return null when updating a non-existent role"},{"ancestorTitles":["DynamoRoleRepository Integration Tests - Minimal"],"duration":135,"failureDetails":[],"failureMessages":[],"fullName":"DynamoRoleRepository Integration Tests - Minimal should delete an existing role and return true","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should delete an existing role and return true"},{"ancestorTitles":["DynamoRoleRepository Integration Tests - Minimal"],"duration":63,"failureDetails":[],"failureMessages":[],"fullName":"DynamoRoleRepository Integration Tests - Minimal should return false when deleting a non-existent role","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return false when deleting a non-existent role"},{"ancestorTitles":["DynamoRoleRepository Integration Tests - Minimal"],"duration":131,"failureDetails":[],"failureMessages":[],"fullName":"DynamoRoleRepository Integration Tests - Minimal should list created roles (using Scan - may be partial)","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"should list created roles (using Scan - may be partial)"}],"endTime":1771844458428,"message":"","name":"E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\Persistence\\DynamoRoleRepository.integration.spec.ts","startTime":1771844455732,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["DynamoPolicyRepository Integration Tests","save (create)"],"duration":328,"failureDetails":[],"failureMessages":[],"fullName":"DynamoPolicyRepository Integration Tests save (create) should create a new policy successfully","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should create a new policy successfully"},{"ancestorTitles":["DynamoPolicyRepository Integration Tests","save (create)"],"duration":148,"failureDetails":[],"failureMessages":[],"fullName":"DynamoPolicyRepository Integration Tests save (create) should overwrite an existing policy with the same ID","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should overwrite an existing policy with the same ID"},{"ancestorTitles":["DynamoPolicyRepository Integration Tests","findById"],"duration":118,"failureDetails":[],"failureMessages":[],"fullName":"DynamoPolicyRepository Integration Tests findById should find an existing policy by ID","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should find an existing policy by ID"},{"ancestorTitles":["DynamoPolicyRepository Integration Tests","findById"],"duration":78,"failureDetails":[],"failureMessages":[],"fullName":"DynamoPolicyRepository Integration Tests findById should return null when finding a non-existent policy ID","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return null when finding a non-existent policy ID"},{"ancestorTitles":["DynamoPolicyRepository Integration Tests","findByName (using GSI)"],"duration":90,"failureDetails":[],"failureMessages":[],"fullName":"DynamoPolicyRepository Integration Tests findByName (using GSI) should find an existing policy by name using GSI","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should find an existing policy by name using GSI"},{"ancestorTitles":["DynamoPolicyRepository Integration Tests","findByName (using GSI)"],"duration":96,"failureDetails":[],"failureMessages":[],"fullName":"DynamoPolicyRepository Integration Tests findByName (using GSI) should return null when finding a non-existent policy name using GSI","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return null when finding a non-existent policy name using GSI"},{"ancestorTitles":["DynamoPolicyRepository Integration Tests","findByName (using GSI)"],"duration":137,"failureDetails":[],"failureMessages":[],"fullName":"DynamoPolicyRepository Integration Tests findByName (using GSI) should return only one policy if multiple have the same name (GSI behavior)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should return only one policy if multiple have the same name (GSI behavior)"},{"ancestorTitles":["DynamoPolicyRepository Integration Tests","list (using GSI)"],"duration":235,"failureDetails":[],"failureMessages":[],"fullName":"DynamoPolicyRepository Integration Tests list (using GSI) should list created policies","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should list created policies"},{"ancestorTitles":["DynamoPolicyRepository Integration Tests","list (using GSI)"],"duration":198,"failureDetails":[],"failureMessages":[],"fullName":"DynamoPolicyRepository Integration Tests list (using GSI) should list policies filtered by language","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should list policies filtered by language"},{"ancestorTitles":["DynamoPolicyRepository Integration Tests","list (using GSI)"],"duration":208,"failureDetails":[],"failureMessages":[],"fullName":"DynamoPolicyRepository Integration Tests list (using GSI) should handle pagination with GSI (limit and startKey)","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should handle pagination with GSI (limit and startKey)"},{"ancestorTitles":["DynamoPolicyRepository Integration Tests","delete"],"duration":156,"failureDetails":[],"failureMessages":[],"fullName":"DynamoPolicyRepository Integration Tests delete should delete an existing policy and return true","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should delete an existing policy and return true"},{"ancestorTitles":["DynamoPolicyRepository Integration Tests","delete"],"duration":58,"failureDetails":[],"failureMessages":[],"fullName":"DynamoPolicyRepository Integration Tests delete should return false when deleting a non-existent policy","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return false when deleting a non-existent policy"}],"endTime":1771844458456,"message":"","name":"E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\Persistence\\DynamoPolicyRepository.integration.spec.ts","startTime":1771844455795,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["EnvironmentConfigService","constructor"],"duration":109,"failureDetails":[],"failureMessages":[],"fullName":"EnvironmentConfigService constructor should throw an error if required environment variables are missing","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should throw an error if required environment variables are missing"},{"ancestorTitles":["EnvironmentConfigService","constructor"],"duration":6,"failureDetails":[],"failureMessages":[],"fullName":"EnvironmentConfigService constructor should initialize successfully if all required environment variables are present","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should initialize successfully if all required environment variables are present"},{"ancestorTitles":["EnvironmentConfigService","constructor"],"duration":11,"failureDetails":[],"failureMessages":[],"fullName":"EnvironmentConfigService constructor should log filtered config in debug mode","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should log filtered config in debug mode"},{"ancestorTitles":["EnvironmentConfigService","constructor"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"EnvironmentConfigService constructor should log keys only in non-debug mode","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should log keys only in non-debug mode"},{"ancestorTitles":["EnvironmentConfigService","get"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"EnvironmentConfigService get should return the value if the key exists","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return the value if the key exists"},{"ancestorTitles":["EnvironmentConfigService","get"],"duration":6,"failureDetails":[],"failureMessages":[],"fullName":"EnvironmentConfigService get should return undefined if the key is missing","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return undefined if the key is missing"},{"ancestorTitles":["EnvironmentConfigService","get"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"EnvironmentConfigService get should return the default value if the key is missing","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return the default value if the key is missing"},{"ancestorTitles":["EnvironmentConfigService","get"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"EnvironmentConfigService get should return the default value if the key is an empty string","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return the default value if the key is an empty string"},{"ancestorTitles":["EnvironmentConfigService","get"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"EnvironmentConfigService get should return undefined if the key is an empty string and no default is provided","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return undefined if the key is an empty string and no default is provided"},{"ancestorTitles":["EnvironmentConfigService","getOrThrow"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"EnvironmentConfigService getOrThrow should return the value if the key exists and is not empty","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return the value if the key exists and is not empty"},{"ancestorTitles":["EnvironmentConfigService","getOrThrow"],"duration":6,"failureDetails":[],"failureMessages":[],"fullName":"EnvironmentConfigService getOrThrow should throw an error if the key is missing","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should throw an error if the key is missing"},{"ancestorTitles":["EnvironmentConfigService","getOrThrow"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"EnvironmentConfigService getOrThrow should throw an error if the key is an empty string","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should throw an error if the key is an empty string"},{"ancestorTitles":["EnvironmentConfigService","getNumber"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"EnvironmentConfigService getNumber should return the number value if the key is a valid number string","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should return the number value if the key is a valid number string"},{"ancestorTitles":["EnvironmentConfigService","getNumber"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"EnvironmentConfigService getNumber should return the default value if the key is missing","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return the default value if the key is missing"},{"ancestorTitles":["EnvironmentConfigService","getNumber"],"duration":20,"failureDetails":[],"failureMessages":[],"fullName":"EnvironmentConfigService getNumber should return undefined if the key is missing and no default is provided","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return undefined if the key is missing and no default is provided"},{"ancestorTitles":["EnvironmentConfigService","getNumber"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"EnvironmentConfigService getNumber should return the default value if the key is an empty string","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return the default value if the key is an empty string"},{"ancestorTitles":["EnvironmentConfigService","getNumber"],"duration":8,"failureDetails":[],"failureMessages":[],"fullName":"EnvironmentConfigService getNumber should return undefined if the key is an empty string and no default is provided","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return undefined if the key is an empty string and no default is provided"},{"ancestorTitles":["EnvironmentConfigService","getNumber"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"EnvironmentConfigService getNumber should return the default value if the key is an invalid number string","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should return the default value if the key is an invalid number string"},{"ancestorTitles":["EnvironmentConfigService","getNumber"],"duration":16,"failureDetails":[],"failureMessages":[],"fullName":"EnvironmentConfigService getNumber should throw an error if the key is an invalid number string and no default is provided","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should throw an error if the key is an invalid number string and no default is provided"},{"ancestorTitles":["EnvironmentConfigService","getNumberOrThrow"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"EnvironmentConfigService getNumberOrThrow should return the number value if the key is a valid number string","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return the number value if the key is a valid number string"},{"ancestorTitles":["EnvironmentConfigService","getNumberOrThrow"],"duration":7,"failureDetails":[],"failureMessages":[],"fullName":"EnvironmentConfigService getNumberOrThrow should throw an error if the key is missing","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should throw an error if the key is missing"},{"ancestorTitles":["EnvironmentConfigService","getNumberOrThrow"],"duration":8,"failureDetails":[],"failureMessages":[],"fullName":"EnvironmentConfigService getNumberOrThrow should throw an error if the key is an empty string","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should throw an error if the key is an empty string"},{"ancestorTitles":["EnvironmentConfigService","getNumberOrThrow"],"duration":10,"failureDetails":[],"failureMessages":[],"fullName":"EnvironmentConfigService getNumberOrThrow should throw an error if the key is an invalid number string","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should throw an error if the key is an invalid number string"},{"ancestorTitles":["EnvironmentConfigService","getBoolean"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"EnvironmentConfigService getBoolean should return true for 'true' or '1' strings (case-insensitive)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should return true for 'true' or '1' strings (case-insensitive)"},{"ancestorTitles":["EnvironmentConfigService","getBoolean"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"EnvironmentConfigService getBoolean should return false for 'false' or '0' strings (case-insensitive)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should return false for 'false' or '0' strings (case-insensitive)"},{"ancestorTitles":["EnvironmentConfigService","getBoolean"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"EnvironmentConfigService getBoolean should return the default value if the key is missing","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return the default value if the key is missing"},{"ancestorTitles":["EnvironmentConfigService","getBoolean"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"EnvironmentConfigService getBoolean should return undefined if the key is missing and no default is provided","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return undefined if the key is missing and no default is provided"},{"ancestorTitles":["EnvironmentConfigService","getBoolean"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"EnvironmentConfigService getBoolean should return the default value if the key is an empty string","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return the default value if the key is an empty string"},{"ancestorTitles":["EnvironmentConfigService","getBoolean"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"EnvironmentConfigService getBoolean should return undefined if the key is an empty string and no default is provided","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return undefined if the key is an empty string and no default is provided"},{"ancestorTitles":["EnvironmentConfigService","getBoolean"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"EnvironmentConfigService getBoolean should return the default value if the key is an invalid boolean string","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should return the default value if the key is an invalid boolean string"},{"ancestorTitles":["EnvironmentConfigService","getBoolean"],"duration":11,"failureDetails":[],"failureMessages":[],"fullName":"EnvironmentConfigService getBoolean should throw an error if the key is an invalid boolean string and no default is provided","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should throw an error if the key is an invalid boolean string and no default is provided"},{"ancestorTitles":["EnvironmentConfigService","getBooleanOrThrow"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"EnvironmentConfigService getBooleanOrThrow should return true for 'true' or '1' strings","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return true for 'true' or '1' strings"},{"ancestorTitles":["EnvironmentConfigService","getBooleanOrThrow"],"duration":9,"failureDetails":[],"failureMessages":[],"fullName":"EnvironmentConfigService getBooleanOrThrow should throw an error if the key is missing","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should throw an error if the key is missing"},{"ancestorTitles":["EnvironmentConfigService","getBooleanOrThrow"],"duration":8,"failureDetails":[],"failureMessages":[],"fullName":"EnvironmentConfigService getBooleanOrThrow should throw an error if the key is an empty string","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should throw an error if the key is an empty string"},{"ancestorTitles":["EnvironmentConfigService","getBooleanOrThrow"],"duration":12,"failureDetails":[],"failureMessages":[],"fullName":"EnvironmentConfigService getBooleanOrThrow should throw an error if the key is an invalid boolean string","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should throw an error if the key is an invalid boolean string"},{"ancestorTitles":["EnvironmentConfigService","getAllConfig"],"duration":18,"failureDetails":[],"failureMessages":[],"fullName":"EnvironmentConfigService getAllConfig should return all config with sensitive keys masked","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"should return all config with sensitive keys masked"},{"ancestorTitles":["EnvironmentConfigService","getAllConfig"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"EnvironmentConfigService getAllConfig should ensure required sensitive keys are present but masked","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should ensure required sensitive keys are present but masked"},{"ancestorTitles":["EnvironmentConfigService","getAllConfig"],"duration":12,"failureDetails":[],"failureMessages":[],"fullName":"EnvironmentConfigService getAllConfig should return [MISSING REQUIRED KEY] for missing required keys in getAllConfig","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should return [MISSING REQUIRED KEY] for missing required keys in getAllConfig"},{"ancestorTitles":["EnvironmentConfigService","has"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"EnvironmentConfigService has should return true if the key exists and has a value","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return true if the key exists and has a value"},{"ancestorTitles":["EnvironmentConfigService","has"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"EnvironmentConfigService has should return false if the key exists but has an empty string value","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return false if the key exists but has an empty string value"},{"ancestorTitles":["EnvironmentConfigService","has"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"EnvironmentConfigService has should return false if the key is missing","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return false if the key is missing"},{"ancestorTitles":["EnvironmentConfigService","reloadConfig"],"duration":9,"failureDetails":[],"failureMessages":[],"fullName":"EnvironmentConfigService reloadConfig should re-read process.env and update config","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"status":"passed","title":"should re-read process.env and update config"},{"ancestorTitles":["EnvironmentConfigService","reloadConfig"],"duration":10,"failureDetails":[],"failureMessages":[],"fullName":"EnvironmentConfigService reloadConfig should throw an error if required keys are missing after reload","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should throw an error if required keys are missing after reload"},{"ancestorTitles":["EnvironmentConfigService","environment checks"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"EnvironmentConfigService environment checks isDevelopment should return true for development NODE_ENV","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"isDevelopment should return true for development NODE_ENV"},{"ancestorTitles":["EnvironmentConfigService","environment checks"],"duration":8,"failureDetails":[],"failureMessages":[],"fullName":"EnvironmentConfigService environment checks isProduction should return true for production NODE_ENV","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"isProduction should return true for production NODE_ENV"},{"ancestorTitles":["EnvironmentConfigService","environment checks"],"duration":15,"failureDetails":[],"failureMessages":[],"fullName":"EnvironmentConfigService environment checks isTest should return true for test NODE_ENV","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"isTest should return true for test NODE_ENV"},{"ancestorTitles":["EnvironmentConfigService","environment checks"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"EnvironmentConfigService environment checks should return false for all if NODE_ENV is unknown","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should return false for all if NODE_ENV is unknown"}],"endTime":1771844459385,"message":"","name":"E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\unit\\infrastructure\\config\\EnvironmentConfigService.spec.ts","startTime":1771844458492,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["DynamoPermissionRepository Integration Tests"],"duration":536,"failureDetails":[],"failureMessages":[],"fullName":"DynamoPermissionRepository Integration Tests should create a new permission","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should create a new permission"},{"ancestorTitles":["DynamoPermissionRepository Integration Tests"],"duration":232,"failureDetails":[],"failureMessages":[],"fullName":"DynamoPermissionRepository Integration Tests should throw PermissionExistsError when creating a duplicate permission name","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should throw PermissionExistsError when creating a duplicate permission name"},{"ancestorTitles":["DynamoPermissionRepository Integration Tests"],"duration":140,"failureDetails":[],"failureMessages":[],"fullName":"DynamoPermissionRepository Integration Tests should find an existing permission by name","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should find an existing permission by name"},{"ancestorTitles":["DynamoPermissionRepository Integration Tests"],"duration":109,"failureDetails":[],"failureMessages":[],"fullName":"DynamoPermissionRepository Integration Tests should return null when finding a non-existent permission","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return null when finding a non-existent permission"},{"ancestorTitles":["DynamoPermissionRepository Integration Tests"],"duration":133,"failureDetails":[],"failureMessages":[],"fullName":"DynamoPermissionRepository Integration Tests should update an existing permission","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should update an existing permission"},{"ancestorTitles":["DynamoPermissionRepository Integration Tests"],"duration":91,"failureDetails":[],"failureMessages":[],"fullName":"DynamoPermissionRepository Integration Tests should return null when updating a non-existent permission","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return null when updating a non-existent permission"},{"ancestorTitles":["DynamoPermissionRepository Integration Tests"],"duration":129,"failureDetails":[],"failureMessages":[],"fullName":"DynamoPermissionRepository Integration Tests should delete an existing permission and return true","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should delete an existing permission and return true"},{"ancestorTitles":["DynamoPermissionRepository Integration Tests"],"duration":76,"failureDetails":[],"failureMessages":[],"fullName":"DynamoPermissionRepository Integration Tests should return false when deleting a non-existent permission","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return false when deleting a non-existent permission"},{"ancestorTitles":["DynamoPermissionRepository Integration Tests"],"duration":168,"failureDetails":[],"failureMessages":[],"fullName":"DynamoPermissionRepository Integration Tests should list created permissions (using Scan)","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should list created permissions (using Scan)"}],"endTime":1771844459940,"message":"","name":"E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\Persistence\\DynamoPermissionRepository.integration.spec.ts","startTime":1771844457560,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["AdminAuthGuardMiddleware"],"duration":35,"failureDetails":[],"failureMessages":[],"fullName":"AdminAuthGuardMiddleware should call next() and populate req.adminUser if user has the required role","invocations":1,"location":null,"numPassingAsserts":8,"retryReasons":[],"status":"passed","title":"should call next() and populate req.adminUser if user has the required role"},{"ancestorTitles":["AdminAuthGuardMiddleware"],"duration":11,"failureDetails":[],"failureMessages":[],"fullName":"AdminAuthGuardMiddleware should throw AuthenticationError and call next(error) if req.user is not populated","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should throw AuthenticationError and call next(error) if req.user is not populated"},{"ancestorTitles":["AdminAuthGuardMiddleware"],"duration":16,"failureDetails":[],"failureMessages":[],"fullName":"AdminAuthGuardMiddleware should throw ForbiddenError and call next(error) if user lacks the required role","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should throw ForbiddenError and call next(error) if user lacks the required role"},{"ancestorTitles":["AdminAuthGuardMiddleware"],"duration":14,"failureDetails":[],"failureMessages":[],"fullName":"AdminAuthGuardMiddleware should catch and pass unexpected errors to next(error)","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should catch and pass unexpected errors to next(error)"}],"endTime":1771844460073,"message":"","name":"E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\unit\\api\\middlewares\\admin.auth.guard.middleware.spec.ts","startTime":1771844457523,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["validationMiddleware"],"duration":30,"failureDetails":[],"failureMessages":[],"fullName":"validationMiddleware should call next() if validation is successful","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should call next() if validation is successful"},{"ancestorTitles":["validationMiddleware"],"duration":24,"failureDetails":[],"failureMessages":[],"fullName":"validationMiddleware should call next(ValidationError) and log warning if body validation fails","invocations":1,"location":null,"numPassingAsserts":7,"retryReasons":[],"status":"passed","title":"should call next(ValidationError) and log warning if body validation fails"},{"ancestorTitles":["validationMiddleware"],"duration":32,"failureDetails":[],"failureMessages":[],"fullName":"validationMiddleware should call next(ValidationError) and log warning if params validation fails","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"should call next(ValidationError) and log warning if params validation fails"},{"ancestorTitles":["validationMiddleware"],"duration":20,"failureDetails":[],"failureMessages":[],"fullName":"validationMiddleware should call next(error) and log error for unexpected errors","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"status":"passed","title":"should call next(error) and log error for unexpected errors"}],"endTime":1771844460094,"message":"","name":"E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\unit\\api\\middlewares\\validation.middleware.spec.ts","startTime":1771844459423,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["CognitoUserMgmtAdapter","constructor"],"duration":15,"failureDetails":[],"failureMessages":[],"fullName":"CognitoUserMgmtAdapter constructor should initialize CognitoIdentityProviderClient with correct region and userPoolId","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should initialize CognitoIdentityProviderClient with correct region and userPoolId"},{"ancestorTitles":["CognitoUserMgmtAdapter","handleCognitoAdminError"],"duration":121,"failureDetails":[],"failureMessages":[],"fullName":"CognitoUserMgmtAdapter handleCognitoAdminError should map UserNotFoundException to UserNotFoundError","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should map UserNotFoundException to UserNotFoundError"},{"ancestorTitles":["CognitoUserMgmtAdapter","handleCognitoAdminError"],"duration":14,"failureDetails":[],"failureMessages":[],"fullName":"CognitoUserMgmtAdapter handleCognitoAdminError should map ResourceNotFoundException to NotFoundError","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should map ResourceNotFoundException to NotFoundError"},{"ancestorTitles":["CognitoUserMgmtAdapter","handleCognitoAdminError"],"duration":11,"failureDetails":[],"failureMessages":[],"fullName":"CognitoUserMgmtAdapter handleCognitoAdminError should map GroupExistsException to GroupExistsError","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should map GroupExistsException to GroupExistsError"},{"ancestorTitles":["CognitoUserMgmtAdapter","handleCognitoAdminError"],"duration":11,"failureDetails":[],"failureMessages":[],"fullName":"CognitoUserMgmtAdapter handleCognitoAdminError should map UsernameExistsException to ValidationError","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should map UsernameExistsException to ValidationError"},{"ancestorTitles":["CognitoUserMgmtAdapter","handleCognitoAdminError"],"duration":15,"failureDetails":[],"failureMessages":[],"fullName":"CognitoUserMgmtAdapter handleCognitoAdminError should map InvalidPasswordException to ValidationError","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should map InvalidPasswordException to ValidationError"},{"ancestorTitles":["CognitoUserMgmtAdapter","handleCognitoAdminError"],"duration":12,"failureDetails":[],"failureMessages":[],"fullName":"CognitoUserMgmtAdapter handleCognitoAdminError should map InvalidParameterException to ValidationError","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should map InvalidParameterException to ValidationError"},{"ancestorTitles":["CognitoUserMgmtAdapter","handleCognitoAdminError"],"duration":14,"failureDetails":[],"failureMessages":[],"fullName":"CognitoUserMgmtAdapter handleCognitoAdminError should map LimitExceededException to BaseError (RateLimitError)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should map LimitExceededException to BaseError (RateLimitError)"},{"ancestorTitles":["CognitoUserMgmtAdapter","handleCognitoAdminError"],"duration":6,"failureDetails":[],"failureMessages":[],"fullName":"CognitoUserMgmtAdapter handleCognitoAdminError should map TooManyRequestsException to BaseError (RateLimitError)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should map TooManyRequestsException to BaseError (RateLimitError)"},{"ancestorTitles":["CognitoUserMgmtAdapter","handleCognitoAdminError"],"duration":32,"failureDetails":[],"failureMessages":[],"fullName":"CognitoUserMgmtAdapter handleCognitoAdminError should map NotAuthorizedException to BaseError (AuthorizationError)","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should map NotAuthorizedException to BaseError (AuthorizationError)"},{"ancestorTitles":["CognitoUserMgmtAdapter","handleCognitoAdminError"],"duration":10,"failureDetails":[],"failureMessages":[],"fullName":"CognitoUserMgmtAdapter handleCognitoAdminError should map InternalErrorException to BaseError (IdPInternalError)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should map InternalErrorException to BaseError (IdPInternalError)"},{"ancestorTitles":["CognitoUserMgmtAdapter","handleCognitoAdminError"],"duration":18,"failureDetails":[],"failureMessages":[],"fullName":"CognitoUserMgmtAdapter handleCognitoAdminError should map OpenCircuitError to BaseError (ServiceUnavailableError)","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should map OpenCircuitError to BaseError (ServiceUnavailableError)"},{"ancestorTitles":["CognitoUserMgmtAdapter","handleCognitoAdminError"],"duration":8,"failureDetails":[],"failureMessages":[],"fullName":"CognitoUserMgmtAdapter handleCognitoAdminError should map unknown errors to generic CognitoAdminInteractionError","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should map unknown errors to generic CognitoAdminInteractionError"},{"ancestorTitles":["CognitoUserMgmtAdapter","handleCognitoAdminError"],"duration":10,"failureDetails":[],"failureMessages":[],"fullName":"CognitoUserMgmtAdapter handleCognitoAdminError should log the original error details","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should log the original error details"},{"ancestorTitles":["CognitoUserMgmtAdapter","adminCreateUser"],"duration":13,"failureDetails":[],"failureMessages":[],"fullName":"CognitoUserMgmtAdapter adminCreateUser should send AdminCreateUserCommand and return UserType","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"should send AdminCreateUserCommand and return UserType"},{"ancestorTitles":["CognitoUserMgmtAdapter","adminCreateUser"],"duration":8,"failureDetails":[],"failureMessages":[],"fullName":"CognitoUserMgmtAdapter adminCreateUser should throw mapped error on failure","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should throw mapped error on failure"},{"ancestorTitles":["CognitoUserMgmtAdapter","adminCreateUser"],"duration":10,"failureDetails":[],"failureMessages":[],"fullName":"CognitoUserMgmtAdapter adminCreateUser should apply circuit breaker","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should apply circuit breaker"},{"ancestorTitles":["CognitoUserMgmtAdapter","adminGetUser"],"duration":11,"failureDetails":[],"failureMessages":[],"fullName":"CognitoUserMgmtAdapter adminGetUser should send AdminGetUserCommand and return UserType","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"should send AdminGetUserCommand and return UserType"},{"ancestorTitles":["CognitoUserMgmtAdapter","adminGetUser"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"CognitoUserMgmtAdapter adminGetUser should return null if UserNotFoundException is thrown","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should return null if UserNotFoundException is thrown"},{"ancestorTitles":["CognitoUserMgmtAdapter","adminGetUser"],"duration":11,"failureDetails":[],"failureMessages":[],"fullName":"CognitoUserMgmtAdapter adminGetUser should throw mapped error on other failures","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should throw mapped error on other failures"},{"ancestorTitles":["CognitoUserMgmtAdapter","adminUpdateUserAttributes"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"CognitoUserMgmtAdapter adminUpdateUserAttributes should send AdminUpdateUserAttributesCommand","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should send AdminUpdateUserAttributesCommand"},{"ancestorTitles":["CognitoUserMgmtAdapter","adminUpdateUserAttributes"],"duration":12,"failureDetails":[],"failureMessages":[],"fullName":"CognitoUserMgmtAdapter adminUpdateUserAttributes should throw mapped error on failure","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should throw mapped error on failure"},{"ancestorTitles":["CognitoUserMgmtAdapter","adminDeleteUser"],"duration":10,"failureDetails":[],"failureMessages":[],"fullName":"CognitoUserMgmtAdapter adminDeleteUser should send AdminDeleteUserCommand","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should send AdminDeleteUserCommand"},{"ancestorTitles":["CognitoUserMgmtAdapter","adminDeleteUser"],"duration":29,"failureDetails":[],"failureMessages":[],"fullName":"CognitoUserMgmtAdapter adminDeleteUser should throw mapped error on failure","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should throw mapped error on failure"},{"ancestorTitles":["CognitoUserMgmtAdapter","adminDisableUser"],"duration":9,"failureDetails":[],"failureMessages":[],"fullName":"CognitoUserMgmtAdapter adminDisableUser should send AdminDisableUserCommand","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should send AdminDisableUserCommand"},{"ancestorTitles":["CognitoUserMgmtAdapter","adminDisableUser"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"CognitoUserMgmtAdapter adminDisableUser should throw mapped error on failure","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should throw mapped error on failure"},{"ancestorTitles":["CognitoUserMgmtAdapter","adminEnableUser"],"duration":19,"failureDetails":[],"failureMessages":[],"fullName":"CognitoUserMgmtAdapter adminEnableUser should send AdminEnableUserCommand","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should send AdminEnableUserCommand"},{"ancestorTitles":["CognitoUserMgmtAdapter","adminEnableUser"],"duration":8,"failureDetails":[],"failureMessages":[],"fullName":"CognitoUserMgmtAdapter adminEnableUser should throw mapped error on failure","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should throw mapped error on failure"},{"ancestorTitles":["CognitoUserMgmtAdapter","adminInitiatePasswordReset"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"CognitoUserMgmtAdapter adminInitiatePasswordReset should send AdminResetUserPasswordCommand","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should send AdminResetUserPasswordCommand"},{"ancestorTitles":["CognitoUserMgmtAdapter","adminInitiatePasswordReset"],"duration":9,"failureDetails":[],"failureMessages":[],"fullName":"CognitoUserMgmtAdapter adminInitiatePasswordReset should throw mapped error on failure","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should throw mapped error on failure"},{"ancestorTitles":["CognitoUserMgmtAdapter","adminSetUserPassword"],"duration":7,"failureDetails":[],"failureMessages":[],"fullName":"CognitoUserMgmtAdapter adminSetUserPassword should send AdminSetUserPasswordCommand","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should send AdminSetUserPasswordCommand"},{"ancestorTitles":["CognitoUserMgmtAdapter","adminSetUserPassword"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"CognitoUserMgmtAdapter adminSetUserPassword should throw mapped error on failure","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should throw mapped error on failure"},{"ancestorTitles":["CognitoUserMgmtAdapter","adminAddUserToGroup"],"duration":9,"failureDetails":[],"failureMessages":[],"fullName":"CognitoUserMgmtAdapter adminAddUserToGroup should send AdminAddUserToGroupCommand","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should send AdminAddUserToGroupCommand"},{"ancestorTitles":["CognitoUserMgmtAdapter","adminAddUserToGroup"],"duration":19,"failureDetails":[],"failureMessages":[],"fullName":"CognitoUserMgmtAdapter adminAddUserToGroup should throw mapped error on failure","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should throw mapped error on failure"},{"ancestorTitles":["CognitoUserMgmtAdapter","adminRemoveUserFromGroup"],"duration":14,"failureDetails":[],"failureMessages":[],"fullName":"CognitoUserMgmtAdapter adminRemoveUserFromGroup should send AdminRemoveUserFromGroupCommand","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should send AdminRemoveUserFromGroupCommand"},{"ancestorTitles":["CognitoUserMgmtAdapter","adminRemoveUserFromGroup"],"duration":6,"failureDetails":[],"failureMessages":[],"fullName":"CognitoUserMgmtAdapter adminRemoveUserFromGroup should throw mapped error on failure","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should throw mapped error on failure"},{"ancestorTitles":["CognitoUserMgmtAdapter","adminListGroupsForUser"],"duration":10,"failureDetails":[],"failureMessages":[],"fullName":"CognitoUserMgmtAdapter adminListGroupsForUser should send AdminListGroupsForUserCommand and return groups","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"status":"passed","title":"should send AdminListGroupsForUserCommand and return groups"},{"ancestorTitles":["CognitoUserMgmtAdapter","adminListGroupsForUser"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"CognitoUserMgmtAdapter adminListGroupsForUser should handle limit and nextToken","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle limit and nextToken"},{"ancestorTitles":["CognitoUserMgmtAdapter","adminListGroupsForUser"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"CognitoUserMgmtAdapter adminListGroupsForUser should return empty array if no groups","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return empty array if no groups"},{"ancestorTitles":["CognitoUserMgmtAdapter","adminListGroupsForUser"],"duration":7,"failureDetails":[],"failureMessages":[],"fullName":"CognitoUserMgmtAdapter adminListGroupsForUser should throw mapped error on failure","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should throw mapped error on failure"},{"ancestorTitles":["CognitoUserMgmtAdapter","adminListUsers"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"CognitoUserMgmtAdapter adminListUsers should send ListUsersCommand and return users","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"status":"passed","title":"should send ListUsersCommand and return users"},{"ancestorTitles":["CognitoUserMgmtAdapter","adminListUsers"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"CognitoUserMgmtAdapter adminListUsers should handle limit, paginationToken, and filter","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle limit, paginationToken, and filter"},{"ancestorTitles":["CognitoUserMgmtAdapter","adminListUsers"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"CognitoUserMgmtAdapter adminListUsers should filter users by status if provided","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should filter users by status if provided"},{"ancestorTitles":["CognitoUserMgmtAdapter","adminListUsers"],"duration":19,"failureDetails":[],"failureMessages":[],"fullName":"CognitoUserMgmtAdapter adminListUsers should throw mapped error on failure","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should throw mapped error on failure"},{"ancestorTitles":["CognitoUserMgmtAdapter","adminListUsersInGroup"],"duration":7,"failureDetails":[],"failureMessages":[],"fullName":"CognitoUserMgmtAdapter adminListUsersInGroup should send ListUsersInGroupCommand and return users","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"status":"passed","title":"should send ListUsersInGroupCommand and return users"},{"ancestorTitles":["CognitoUserMgmtAdapter","adminListUsersInGroup"],"duration":31,"failureDetails":[],"failureMessages":[],"fullName":"CognitoUserMgmtAdapter adminListUsersInGroup should handle limit and nextToken","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle limit and nextToken"},{"ancestorTitles":["CognitoUserMgmtAdapter","adminListUsersInGroup"],"duration":13,"failureDetails":[],"failureMessages":[],"fullName":"CognitoUserMgmtAdapter adminListUsersInGroup should throw mapped error on failure","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should throw mapped error on failure"},{"ancestorTitles":["CognitoUserMgmtAdapter","adminCreateGroup"],"duration":10,"failureDetails":[],"failureMessages":[],"fullName":"CognitoUserMgmtAdapter adminCreateGroup should send CreateGroupCommand and return GroupType","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"should send CreateGroupCommand and return GroupType"},{"ancestorTitles":["CognitoUserMgmtAdapter","adminCreateGroup"],"duration":19,"failureDetails":[],"failureMessages":[],"fullName":"CognitoUserMgmtAdapter adminCreateGroup should throw mapped error on failure","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should throw mapped error on failure"},{"ancestorTitles":["CognitoUserMgmtAdapter","adminDeleteGroup"],"duration":13,"failureDetails":[],"failureMessages":[],"fullName":"CognitoUserMgmtAdapter adminDeleteGroup should call adminUpdateGroupStatus to deactivate the group","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should call adminUpdateGroupStatus to deactivate the group"},{"ancestorTitles":["CognitoUserMgmtAdapter","adminDeleteGroup"],"duration":7,"failureDetails":[],"failureMessages":[],"fullName":"CognitoUserMgmtAdapter adminDeleteGroup should re-throw error from adminUpdateGroupStatus","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should re-throw error from adminUpdateGroupStatus"},{"ancestorTitles":["CognitoUserMgmtAdapter","adminReactivateGroup"],"duration":9,"failureDetails":[],"failureMessages":[],"fullName":"CognitoUserMgmtAdapter adminReactivateGroup should call adminUpdateGroupStatus to reactivate the group","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should call adminUpdateGroupStatus to reactivate the group"},{"ancestorTitles":["CognitoUserMgmtAdapter","adminReactivateGroup"],"duration":15,"failureDetails":[],"failureMessages":[],"fullName":"CognitoUserMgmtAdapter adminReactivateGroup should re-throw error from adminUpdateGroupStatus","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should re-throw error from adminUpdateGroupStatus"},{"ancestorTitles":["CognitoUserMgmtAdapter","adminUpdateGroupStatus (private)"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"CognitoUserMgmtAdapter adminUpdateGroupStatus (private) should update group status to INACTIVE","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should update group status to INACTIVE"},{"ancestorTitles":["CognitoUserMgmtAdapter","adminUpdateGroupStatus (private)"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"CognitoUserMgmtAdapter adminUpdateGroupStatus (private) should update group status to ACTIVE","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should update group status to ACTIVE"},{"ancestorTitles":["CognitoUserMgmtAdapter","adminUpdateGroupStatus (private)"],"duration":9,"failureDetails":[],"failureMessages":[],"fullName":"CognitoUserMgmtAdapter adminUpdateGroupStatus (private) should throw NotFoundError if group does not exist","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should throw NotFoundError if group does not exist"},{"ancestorTitles":["CognitoUserMgmtAdapter","adminUpdateGroupStatus (private)"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"CognitoUserMgmtAdapter adminUpdateGroupStatus (private) should handle non-JSON description gracefully","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle non-JSON description gracefully"},{"ancestorTitles":["CognitoUserMgmtAdapter","adminUpdateGroupStatus (private)"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"CognitoUserMgmtAdapter adminUpdateGroupStatus (private) should throw mapped error on failure","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should throw mapped error on failure"},{"ancestorTitles":["CognitoUserMgmtAdapter","adminGetGroup"],"duration":9,"failureDetails":[],"failureMessages":[],"fullName":"CognitoUserMgmtAdapter adminGetGroup should send GetGroupCommand and return GroupType","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should send GetGroupCommand and return GroupType"},{"ancestorTitles":["CognitoUserMgmtAdapter","adminGetGroup"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"CognitoUserMgmtAdapter adminGetGroup should return null if ResourceNotFoundException is thrown","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should return null if ResourceNotFoundException is thrown"},{"ancestorTitles":["CognitoUserMgmtAdapter","adminGetGroup"],"duration":9,"failureDetails":[],"failureMessages":[],"fullName":"CognitoUserMgmtAdapter adminGetGroup should throw mapped error on other failures","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should throw mapped error on other failures"},{"ancestorTitles":["CognitoUserMgmtAdapter","adminGetGroup"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"CognitoUserMgmtAdapter adminGetGroup should return null if Cognito returns success but no group object","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should return null if Cognito returns success but no group object"},{"ancestorTitles":["CognitoUserMgmtAdapter","adminListGroups"],"duration":16,"failureDetails":[],"failureMessages":[],"fullName":"CognitoUserMgmtAdapter adminListGroups should send ListGroupsCommand and return groups","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"should send ListGroupsCommand and return groups"},{"ancestorTitles":["CognitoUserMgmtAdapter","adminListGroups"],"duration":14,"failureDetails":[],"failureMessages":[],"fullName":"CognitoUserMgmtAdapter adminListGroups should handle limit and nextToken","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle limit and nextToken"},{"ancestorTitles":["CognitoUserMgmtAdapter","adminListGroups"],"duration":12,"failureDetails":[],"failureMessages":[],"fullName":"CognitoUserMgmtAdapter adminListGroups should filter groups by name or description if filter is provided","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should filter groups by name or description if filter is provided"},{"ancestorTitles":["CognitoUserMgmtAdapter","adminListGroups"],"duration":35,"failureDetails":[],"failureMessages":[],"fullName":"CognitoUserMgmtAdapter adminListGroups should return empty array if no groups","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return empty array if no groups"},{"ancestorTitles":["CognitoUserMgmtAdapter","adminListGroups"],"duration":15,"failureDetails":[],"failureMessages":[],"fullName":"CognitoUserMgmtAdapter adminListGroups should throw mapped error on failure","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should throw mapped error on failure"}],"endTime":1771844460103,"message":"","name":"E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\unit\\infrastructure\\adapters\\cognito\\CognitoUserMgmtAdapter.spec.ts","startTime":1771844458452,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Integration Tests: System Routes (/api/system)","GET /api/system/health"],"duration":92,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests: System Routes (/api/system) GET /api/system/health should return 200 OK with status UP","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should return 200 OK with status UP"},{"ancestorTitles":["Integration Tests: System Routes (/api/system)","GET /api/system/server-info"],"duration":86,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests: System Routes (/api/system) GET /api/system/server-info should return 200 OK with server info","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"should return 200 OK with server info"},{"ancestorTitles":["Integration Tests: System Routes (/api/system)","GET /api/system/metrics"],"duration":89,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests: System Routes (/api/system) GET /api/system/metrics should return 200 OK with prometheus metrics","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 200 OK with prometheus metrics"},{"ancestorTitles":["Integration Tests: System Routes (/api/system)","GET /api/non-existent-route"],"duration":73,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests: System Routes (/api/system) GET /api/non-existent-route should return 404 Not Found","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should return 404 Not Found"}],"endTime":1771844460244,"message":"","name":"E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\routes\\system.routes.integration.spec.ts","startTime":1771844455696,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["RequestLoggerMiddleware"],"duration":26,"failureDetails":[],"failureMessages":[],"fullName":"RequestLoggerMiddleware should log request arrival with correct metadata","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should log request arrival with correct metadata"},{"ancestorTitles":["RequestLoggerMiddleware"],"duration":11,"failureDetails":[],"failureMessages":[],"fullName":"RequestLoggerMiddleware should log response finish with 2xx status as info","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should log response finish with 2xx status as info"},{"ancestorTitles":["RequestLoggerMiddleware"],"duration":6,"failureDetails":[],"failureMessages":[],"fullName":"RequestLoggerMiddleware should log response finish with 4xx status as warn","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should log response finish with 4xx status as warn"},{"ancestorTitles":["RequestLoggerMiddleware"],"duration":12,"failureDetails":[],"failureMessages":[],"fullName":"RequestLoggerMiddleware should log response finish with 5xx status as error","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should log response finish with 5xx status as error"},{"ancestorTitles":["RequestLoggerMiddleware"],"duration":13,"failureDetails":[],"failureMessages":[],"fullName":"RequestLoggerMiddleware should log response close if it happens before finish","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should log response close if it happens before finish"},{"ancestorTitles":["RequestLoggerMiddleware"],"duration":6,"failureDetails":[],"failureMessages":[],"fullName":"RequestLoggerMiddleware should not log response close if finish already happened","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should not log response close if finish already happened"}],"endTime":1771844460463,"message":"","name":"E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\unit\\api\\middlewares\\requestLogger.middleware.spec.ts","startTime":1771844459964,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["requestMetricsMiddleware"],"duration":13,"failureDetails":[],"failureMessages":[],"fullName":"requestMetricsMiddleware should call startTimer and attach finish listener","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should call startTimer and attach finish listener"},{"ancestorTitles":["requestMetricsMiddleware"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"requestMetricsMiddleware should increment counter and observe duration on response finish with known route","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should increment counter and observe duration on response finish with known route"},{"ancestorTitles":["requestMetricsMiddleware"],"duration":7,"failureDetails":[],"failureMessages":[],"fullName":"requestMetricsMiddleware should increment counter and observe duration on response finish with unknown route","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should increment counter and observe duration on response finish with unknown route"},{"ancestorTitles":["requestMetricsMiddleware"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"requestMetricsMiddleware should handle different status codes","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should handle different status codes"}],"endTime":1771844460510,"message":"","name":"E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\unit\\api\\middlewares\\requestMetrics.middleware.spec.ts","startTime":1771844460111,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["GroupAdminController","createGroup"],"duration":13,"failureDetails":[],"failureMessages":[],"fullName":"GroupAdminController createGroup should create a group and return 201 status","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should create a group and return 201 status"},{"ancestorTitles":["GroupAdminController","createGroup"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"GroupAdminController createGroup should call next with error if service throws","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should call next with error if service throws"},{"ancestorTitles":["GroupAdminController","getGroup"],"duration":12,"failureDetails":[],"failureMessages":[],"fullName":"GroupAdminController getGroup should get a group and return 200 status","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should get a group and return 200 status"},{"ancestorTitles":["GroupAdminController","getGroup"],"duration":7,"failureDetails":[],"failureMessages":[],"fullName":"GroupAdminController getGroup should call next with a NotFoundError if group not found","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should call next with a NotFoundError if group not found"},{"ancestorTitles":["GroupAdminController","listGroups"],"duration":14,"failureDetails":[],"failureMessages":[],"fullName":"GroupAdminController listGroups should list groups and return 200 status","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should list groups and return 200 status"},{"ancestorTitles":["GroupAdminController","deleteGroup"],"duration":10,"failureDetails":[],"failureMessages":[],"fullName":"GroupAdminController deleteGroup should delete a group and return 204 status","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should delete a group and return 204 status"},{"ancestorTitles":["GroupAdminController","assignRoleToGroup"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"GroupAdminController assignRoleToGroup should assign a role to a group and return 200 status","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should assign a role to a group and return 200 status"},{"ancestorTitles":["GroupAdminController","removeRoleFromGroup"],"duration":27,"failureDetails":[],"failureMessages":[],"fullName":"GroupAdminController removeRoleFromGroup should remove a role from a group and return 204 status","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should remove a role from a group and return 204 status"},{"ancestorTitles":["GroupAdminController","listRolesForGroup"],"duration":6,"failureDetails":[],"failureMessages":[],"fullName":"GroupAdminController listRolesForGroup should list roles for a group and return 200 status","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should list roles for a group and return 200 status"}],"endTime":1771844460647,"message":"","name":"E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\unit\\api\\controllers\\group.admin.controller.spec.ts","startTime":1771844460170,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["addRequestId Middleware"],"duration":16,"failureDetails":[],"failureMessages":[],"fullName":"addRequestId Middleware should generate a unique ID, attach it to req, set response header, and call next","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"status":"passed","title":"should generate a unique ID, attach it to req, set response header, and call next"}],"endTime":1771844460807,"message":"","name":"E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\unit\\api\\middlewares\\requestId.middleware.spec.ts","startTime":1771844460345,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["UserAdminService","createUser"],"duration":38,"failureDetails":[],"failureMessages":[],"fullName":"UserAdminService createUser should create a user successfully","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should create a user successfully"},{"ancestorTitles":["UserAdminService","createUser"],"duration":94,"failureDetails":[],"failureMessages":[],"fullName":"UserAdminService createUser should throw an error if user creation fails","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should throw an error if user creation fails"},{"ancestorTitles":["UserAdminService","getUser"],"duration":7,"failureDetails":[],"failureMessages":[],"fullName":"UserAdminService getUser should return a user view with groups if user is found","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"should return a user view with groups if user is found"},{"ancestorTitles":["UserAdminService","getUser"],"duration":12,"failureDetails":[],"failureMessages":[],"fullName":"UserAdminService getUser should return null if user is not found","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return null if user is not found"},{"ancestorTitles":["UserAdminService","listUsers"],"duration":16,"failureDetails":[],"failureMessages":[],"fullName":"UserAdminService listUsers should list users with default status CONFIRMED","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should list users with default status CONFIRMED"},{"ancestorTitles":["UserAdminService","listUsers"],"duration":11,"failureDetails":[],"failureMessages":[],"fullName":"UserAdminService listUsers should allow listing users with any status if status is null","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should allow listing users with any status if status is null"},{"ancestorTitles":["UserAdminService","updateUserAttributes"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"UserAdminService updateUserAttributes should update user attributes successfully","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should update user attributes successfully"},{"ancestorTitles":["UserAdminService","deleteUser"],"duration":7,"failureDetails":[],"failureMessages":[],"fullName":"UserAdminService deleteUser should delete a user successfully","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should delete a user successfully"},{"ancestorTitles":["UserAdminService","deleteUser"],"duration":27,"failureDetails":[],"failureMessages":[],"fullName":"UserAdminService deleteUser should throw a validation error when trying to delete own account","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should throw a validation error when trying to delete own account"},{"ancestorTitles":["UserAdminService","disableUser"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"UserAdminService disableUser should disable a user successfully","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should disable a user successfully"},{"ancestorTitles":["UserAdminService","disableUser"],"duration":6,"failureDetails":[],"failureMessages":[],"fullName":"UserAdminService disableUser should throw a validation error when trying to disable own account","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should throw a validation error when trying to disable own account"},{"ancestorTitles":["UserAdminService","enableUser"],"duration":10,"failureDetails":[],"failureMessages":[],"fullName":"UserAdminService enableUser should enable a user successfully","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should enable a user successfully"},{"ancestorTitles":["UserAdminService","initiatePasswordReset"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"UserAdminService initiatePasswordReset should initiate password reset successfully","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should initiate password reset successfully"},{"ancestorTitles":["UserAdminService","setUserPassword"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"UserAdminService setUserPassword should set user password successfully","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should set user password successfully"},{"ancestorTitles":["UserAdminService","addUserToGroup"],"duration":10,"failureDetails":[],"failureMessages":[],"fullName":"UserAdminService addUserToGroup should add user to group successfully","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should add user to group successfully"},{"ancestorTitles":["UserAdminService","addUserToGroup"],"duration":31,"failureDetails":[],"failureMessages":[],"fullName":"UserAdminService addUserToGroup should throw UserAlreadyInGroupError if user is already in group","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should throw UserAlreadyInGroupError if user is already in group"},{"ancestorTitles":["UserAdminService","removeUserFromGroup"],"duration":14,"failureDetails":[],"failureMessages":[],"fullName":"UserAdminService removeUserFromGroup should remove user from group successfully","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should remove user from group successfully"},{"ancestorTitles":["UserAdminService","listGroupsForUser"],"duration":6,"failureDetails":[],"failureMessages":[],"fullName":"UserAdminService listGroupsForUser should list groups for a user","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should list groups for a user"},{"ancestorTitles":["UserAdminService","listUsersInGroup"],"duration":9,"failureDetails":[],"failureMessages":[],"fullName":"UserAdminService listUsersInGroup should list users in a group","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should list users in a group"},{"ancestorTitles":["UserAdminService","updateUserGroups"],"duration":10,"failureDetails":[],"failureMessages":[],"fullName":"UserAdminService updateUserGroups should add and remove groups to match the new set of groups","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"should add and remove groups to match the new set of groups"},{"ancestorTitles":["UserAdminService","Permissions"],"duration":8,"failureDetails":[],"failureMessages":[],"fullName":"UserAdminService Permissions should throw ForbiddenError if admin user does not have required role","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should throw ForbiddenError if admin user does not have required role"}],"endTime":1771844460928,"message":"","name":"E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\unit\\application\\services\\user.admin.service.spec.ts","startTime":1771844460178,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["UserAdminController","createUser"],"duration":25,"failureDetails":[],"failureMessages":[],"fullName":"UserAdminController createUser should create a user and return 201 status","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should create a user and return 201 status"},{"ancestorTitles":["UserAdminController","createUser"],"duration":7,"failureDetails":[],"failureMessages":[],"fullName":"UserAdminController createUser should call next with error if service throws","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should call next with error if service throws"},{"ancestorTitles":["UserAdminController","getUser"],"duration":15,"failureDetails":[],"failureMessages":[],"fullName":"UserAdminController getUser should get a user and return 200 status","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should get a user and return 200 status"},{"ancestorTitles":["UserAdminController","getUser"],"duration":7,"failureDetails":[],"failureMessages":[],"fullName":"UserAdminController getUser should return 404 if user not found","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 404 if user not found"},{"ancestorTitles":["UserAdminController","listUsers"],"duration":9,"failureDetails":[],"failureMessages":[],"fullName":"UserAdminController listUsers should list users and return 200 status","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should list users and return 200 status"},{"ancestorTitles":["UserAdminController","updateUserAttributes"],"duration":11,"failureDetails":[],"failureMessages":[],"fullName":"UserAdminController updateUserAttributes should update user attributes and return 204 status","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should update user attributes and return 204 status"},{"ancestorTitles":["UserAdminController","disableUser"],"duration":11,"failureDetails":[],"failureMessages":[],"fullName":"UserAdminController disableUser should disable a user and return 204 status","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should disable a user and return 204 status"},{"ancestorTitles":["UserAdminController","enableUser"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"UserAdminController enableUser should enable a user and return 200 status","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should enable a user and return 200 status"}],"endTime":1771844461058,"message":"","name":"E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\unit\\api\\controllers\\user.admin.controller.spec.ts","startTime":1771844460489,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["PolicyAdminController","createPolicy"],"duration":10,"failureDetails":[],"failureMessages":[],"fullName":"PolicyAdminController createPolicy should create a policy and return 201 status","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should create a policy and return 201 status"},{"ancestorTitles":["PolicyAdminController","createPolicy"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"PolicyAdminController createPolicy should call next with error if service throws","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should call next with error if service throws"},{"ancestorTitles":["PolicyAdminController","getPolicy"],"duration":10,"failureDetails":[],"failureMessages":[],"fullName":"PolicyAdminController getPolicy should get a policy and return 200 status","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should get a policy and return 200 status"},{"ancestorTitles":["PolicyAdminController","getPolicy"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"PolicyAdminController getPolicy should call next with error if policy not found","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should call next with error if policy not found"},{"ancestorTitles":["PolicyAdminController","updatePolicy"],"duration":9,"failureDetails":[],"failureMessages":[],"fullName":"PolicyAdminController updatePolicy should update a policy and return 200 status","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should update a policy and return 200 status"},{"ancestorTitles":["PolicyAdminController","deletePolicy"],"duration":9,"failureDetails":[],"failureMessages":[],"fullName":"PolicyAdminController deletePolicy should delete a policy and return 204 status","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should delete a policy and return 204 status"},{"ancestorTitles":["PolicyAdminController","listPolicies"],"duration":11,"failureDetails":[],"failureMessages":[],"fullName":"PolicyAdminController listPolicies should list policies and return 200 status","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should list policies and return 200 status"},{"ancestorTitles":["PolicyAdminController","getPolicyVersion"],"duration":14,"failureDetails":[],"failureMessages":[],"fullName":"PolicyAdminController getPolicyVersion should get a specific policy version and return 200 status","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should get a specific policy version and return 200 status"},{"ancestorTitles":["PolicyAdminController","getPolicyVersion"],"duration":7,"failureDetails":[],"failureMessages":[],"fullName":"PolicyAdminController getPolicyVersion should call next with error if policy version not found","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should call next with error if policy version not found"},{"ancestorTitles":["PolicyAdminController","listPolicyVersions"],"duration":14,"failureDetails":[],"failureMessages":[],"fullName":"PolicyAdminController listPolicyVersions should list all policy versions and return 200 status","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should list all policy versions and return 200 status"},{"ancestorTitles":["PolicyAdminController","rollbackPolicy"],"duration":9,"failureDetails":[],"failureMessages":[],"fullName":"PolicyAdminController rollbackPolicy should rollback a policy and return 200 status","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should rollback a policy and return 200 status"}],"endTime":1771844461193,"message":"","name":"E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\unit\\api\\controllers\\policy.admin.controller.spec.ts","startTime":1771844460541,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["CircuitBreakerOptions"],"duration":9,"failureDetails":[],"failureMessages":[],"fullName":"CircuitBreakerOptions should define default circuit breaker options","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should define default circuit breaker options"},{"ancestorTitles":["CircuitBreakerOptions"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"CircuitBreakerOptions should define cognito circuit breaker options","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should define cognito circuit breaker options"},{"ancestorTitles":["CircuitBreakerOptions"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"CircuitBreakerOptions should define dynamodb circuit breaker options","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should define dynamodb circuit breaker options"}],"endTime":1771844461281,"message":"","name":"E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\unit\\infrastructure\\resilience\\circuit-breaker.config.spec.ts","startTime":1771844460839,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["DynamoDBProvider"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"DynamoDBProvider should initialize with a provided DynamoDB client and config","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should initialize with a provided DynamoDB client and config"},{"ancestorTitles":["DynamoDBProvider"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"DynamoDBProvider should properly expose client instances","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should properly expose client instances"}],"endTime":1771844461346,"message":"","name":"E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\unit\\infrastructure\\persistence\\dynamodb\\dynamodb.client.spec.ts","startTime":1771844460670,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["ErrorMiddleware"],"duration":45,"failureDetails":[],"failureMessages":[],"fullName":"ErrorMiddleware should handle operational errors in development environment","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"should handle operational errors in development environment"},{"ancestorTitles":["ErrorMiddleware"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"ErrorMiddleware should handle operational errors in production environment","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"should handle operational errors in production environment"},{"ancestorTitles":["ErrorMiddleware"],"duration":12,"failureDetails":[],"failureMessages":[],"fullName":"ErrorMiddleware should handle non-operational errors in development environment","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should handle non-operational errors in development environment"},{"ancestorTitles":["ErrorMiddleware"],"duration":15,"failureDetails":[],"failureMessages":[],"fullName":"ErrorMiddleware should handle non-operational errors in production environment","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should handle non-operational errors in production environment"},{"ancestorTitles":["ErrorMiddleware"],"duration":7,"failureDetails":[],"failureMessages":[],"fullName":"ErrorMiddleware should call next(err) if headers have already been sent","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should call next(err) if headers have already been sent"}],"endTime":1771844461517,"message":"","name":"E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\unit\\api\\middlewares\\error.middleware.spec.ts","startTime":1771844461010,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["applyCircuitBreaker"],"duration":12,"failureDetails":[],"failureMessages":[],"fullName":"applyCircuitBreaker should instantiate CircuitBreaker with the async function and default options","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should instantiate CircuitBreaker with the async function and default options"},{"ancestorTitles":["applyCircuitBreaker"],"duration":13,"failureDetails":[],"failureMessages":[],"fullName":"applyCircuitBreaker should instantiate CircuitBreaker with the async function and specified options","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should instantiate CircuitBreaker with the async function and specified options"},{"ancestorTitles":["applyCircuitBreaker"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"applyCircuitBreaker should call breaker.fire with the correct arguments when the wrapped function is executed","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should call breaker.fire with the correct arguments when the wrapped function is executed"},{"ancestorTitles":["applyCircuitBreaker"],"duration":35,"failureDetails":[],"failureMessages":[],"fullName":"applyCircuitBreaker should propagate rejection from breaker.fire","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should propagate rejection from breaker.fire"},{"ancestorTitles":["applyCircuitBreaker"],"duration":10,"failureDetails":[],"failureMessages":[],"fullName":"applyCircuitBreaker should register logger for circuit breaker events","invocations":1,"location":null,"numPassingAsserts":8,"retryReasons":[],"status":"passed","title":"should register logger for circuit breaker events"},{"ancestorTitles":["applyCircuitBreaker"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"applyCircuitBreaker should call logger.warn when circuit breaker opens","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should call logger.warn when circuit breaker opens"},{"ancestorTitles":["applyCircuitBreaker"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"applyCircuitBreaker should call logger.error when circuit breaker detects failure","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should call logger.error when circuit breaker detects failure"},{"ancestorTitles":["applyCircuitBreaker"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"applyCircuitBreaker should call logger.info when circuit breaker closes","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should call logger.info when circuit breaker closes"},{"ancestorTitles":["applyCircuitBreaker"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"applyCircuitBreaker should call logger.debug when circuit breaker succeeds","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should call logger.debug when circuit breaker succeeds"},{"ancestorTitles":["applyCircuitBreaker"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"applyCircuitBreaker should not register logger events when no logger is provided","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should not register logger events when no logger is provided"},{"ancestorTitles":["applyCircuitBreaker"],"duration":8,"failureDetails":[],"failureMessages":[],"fullName":"applyCircuitBreaker should handle fallback event correctly","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should handle fallback event correctly"},{"ancestorTitles":["applyCircuitBreaker"],"duration":6,"failureDetails":[],"failureMessages":[],"fullName":"applyCircuitBreaker should handle unnamed functions gracefully","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should handle unnamed functions gracefully"}],"endTime":1771844461593,"message":"","name":"E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\unit\\infrastructure\\resilience\\applyResilience.spec.ts","startTime":1771844461074,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Prometheus Metrics"],"duration":18,"failureDetails":[],"failureMessages":[],"fullName":"Prometheus Metrics should initialize a new Registry","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should initialize a new Registry"},{"ancestorTitles":["Prometheus Metrics"],"duration":10,"failureDetails":[],"failureMessages":[],"fullName":"Prometheus Metrics should set default labels on the registry","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should set default labels on the registry"},{"ancestorTitles":["Prometheus Metrics"],"duration":7,"failureDetails":[],"failureMessages":[],"fullName":"Prometheus Metrics should collect default metrics","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should collect default metrics"},{"ancestorTitles":["Prometheus Metrics"],"duration":10,"failureDetails":[],"failureMessages":[],"fullName":"Prometheus Metrics should define httpRequestCounter","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should define httpRequestCounter"},{"ancestorTitles":["Prometheus Metrics"],"duration":8,"failureDetails":[],"failureMessages":[],"fullName":"Prometheus Metrics should define httpRequestDurationMicroseconds","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should define httpRequestDurationMicroseconds"},{"ancestorTitles":["Prometheus Metrics"],"duration":7,"failureDetails":[],"failureMessages":[],"fullName":"Prometheus Metrics should export registry and metrics for external use","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should export registry and metrics for external use"}],"endTime":1771844461754,"message":"","name":"E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\unit\\infrastructure\\monitoring\\metrics.spec.ts","startTime":1771844461305,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["WinstonLogger","initializeLogger"],"duration":17,"failureDetails":[],"failureMessages":[],"fullName":"WinstonLogger initializeLogger should initialize logger with default level and console transport","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"status":"passed","title":"should initialize logger with default level and console transport"},{"ancestorTitles":["WinstonLogger","initializeLogger"],"duration":9,"failureDetails":[],"failureMessages":[],"fullName":"WinstonLogger initializeLogger should initialize logger with custom log level","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should initialize logger with custom log level"},{"ancestorTitles":["WinstonLogger","initializeLogger"],"duration":6,"failureDetails":[],"failureMessages":[],"fullName":"WinstonLogger initializeLogger should add CloudWatch transport in production environment","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should add CloudWatch transport in production environment"},{"ancestorTitles":["WinstonLogger","initializeLogger"],"duration":10,"failureDetails":[],"failureMessages":[],"fullName":"WinstonLogger initializeLogger should add Elasticsearch transport in production environment if host is provided","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should add Elasticsearch transport in production environment if host is provided"},{"ancestorTitles":["WinstonLogger","initializeLogger"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"WinstonLogger initializeLogger should not add CloudWatch or Elasticsearch transports in non-production environment","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should not add CloudWatch or Elasticsearch transports in non-production environment"},{"ancestorTitles":["WinstonLogger","logging methods"],"duration":17,"failureDetails":[],"failureMessages":[],"fullName":"WinstonLogger logging methods info should call _logger.info","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"info should call _logger.info"},{"ancestorTitles":["WinstonLogger","logging methods"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"WinstonLogger logging methods info should not call _logger.info if message is empty","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"info should not call _logger.info if message is empty"},{"ancestorTitles":["WinstonLogger","logging methods"],"duration":7,"failureDetails":[],"failureMessages":[],"fullName":"WinstonLogger logging methods warn should call _logger.warn","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"warn should call _logger.warn"},{"ancestorTitles":["WinstonLogger","logging methods"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"WinstonLogger logging methods warn should not call _logger.warn if message is empty","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"warn should not call _logger.warn if message is empty"},{"ancestorTitles":["WinstonLogger","logging methods"],"duration":48,"failureDetails":[],"failureMessages":[],"fullName":"WinstonLogger logging methods error should call _logger.error with Error instance","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"error should call _logger.error with Error instance"},{"ancestorTitles":["WinstonLogger","logging methods"],"duration":7,"failureDetails":[],"failureMessages":[],"fullName":"WinstonLogger logging methods error should call _logger.error with generic error object","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"error should call _logger.error with generic error object"},{"ancestorTitles":["WinstonLogger","logging methods"],"duration":8,"failureDetails":[],"failureMessages":[],"fullName":"WinstonLogger logging methods error should not call _logger.error if message is empty","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"error should not call _logger.error if message is empty"},{"ancestorTitles":["WinstonLogger","logging methods"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"WinstonLogger logging methods debug should call _logger.debug","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"debug should call _logger.debug"},{"ancestorTitles":["WinstonLogger","logging methods"],"duration":6,"failureDetails":[],"failureMessages":[],"fullName":"WinstonLogger logging methods debug should not call _logger.debug if message is empty","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"debug should not call _logger.debug if message is empty"}],"endTime":1771844461753,"message":"","name":"E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\unit\\infrastructure\\logging\\WinstonLogger.spec.ts","startTime":1771844461227,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["CognitoUserMgmtAdapter Integration Tests"],"duration":113,"failureDetails":[],"failureMessages":[],"fullName":"CognitoUserMgmtAdapter Integration Tests should get the primary user successfully","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should get the primary user successfully"},{"ancestorTitles":["CognitoUserMgmtAdapter Integration Tests"],"duration":504,"failureDetails":[],"failureMessages":[],"fullName":"CognitoUserMgmtAdapter Integration Tests should throw ValidationError when creating a duplicate user","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should throw ValidationError when creating a duplicate user"},{"ancestorTitles":["CognitoUserMgmtAdapter Integration Tests"],"duration":114,"failureDetails":[],"failureMessages":[],"fullName":"CognitoUserMgmtAdapter Integration Tests should return null when getting a non-existent user","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return null when getting a non-existent user"},{"ancestorTitles":["CognitoUserMgmtAdapter Integration Tests"],"duration":159,"failureDetails":[],"failureMessages":[],"fullName":"CognitoUserMgmtAdapter Integration Tests should get the primary group successfully","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should get the primary group successfully"},{"ancestorTitles":["CognitoUserMgmtAdapter Integration Tests"],"duration":223,"failureDetails":[],"failureMessages":[],"fullName":"CognitoUserMgmtAdapter Integration Tests should throw GroupExistsError when creating a duplicate group","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should throw GroupExistsError when creating a duplicate group"},{"ancestorTitles":["CognitoUserMgmtAdapter Integration Tests"],"duration":627,"failureDetails":[],"failureMessages":[],"fullName":"CognitoUserMgmtAdapter Integration Tests should add and remove user from group","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should add and remove user from group"},{"ancestorTitles":["CognitoUserMgmtAdapter Integration Tests"],"duration":256,"failureDetails":[],"failureMessages":[],"fullName":"CognitoUserMgmtAdapter Integration Tests should update user attributes successfully","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should update user attributes successfully"},{"ancestorTitles":["CognitoUserMgmtAdapter Integration Tests"],"duration":598,"failureDetails":[],"failureMessages":[],"fullName":"CognitoUserMgmtAdapter Integration Tests should disable and enable a user","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should disable and enable a user"},{"ancestorTitles":["CognitoUserMgmtAdapter Integration Tests"],"duration":278,"failureDetails":[],"failureMessages":[],"fullName":"CognitoUserMgmtAdapter Integration Tests should set a user password","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should set a user password"},{"ancestorTitles":["CognitoUserMgmtAdapter Integration Tests"],"duration":823,"failureDetails":[],"failureMessages":[],"fullName":"CognitoUserMgmtAdapter Integration Tests should list users, groups, and users in a group","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should list users, groups, and users in a group"}],"endTime":1771844463387,"message":"","name":"E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\Adapter\\CognitoUserMgmtAdapter.integration.spec.ts","startTime":1771844455655,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["DynamoAssignmentRepository Integration Tests - Minimal"],"duration":285,"failureDetails":[],"failureMessages":[],"fullName":"DynamoAssignmentRepository Integration Tests - Minimal should assign a role to a group","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should assign a role to a group"},{"ancestorTitles":["DynamoAssignmentRepository Integration Tests - Minimal"],"duration":168,"failureDetails":[],"failureMessages":[],"fullName":"DynamoAssignmentRepository Integration Tests - Minimal should remove a role from a group","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should remove a role from a group"},{"ancestorTitles":["DynamoAssignmentRepository Integration Tests - Minimal"],"duration":115,"failureDetails":[],"failureMessages":[],"fullName":"DynamoAssignmentRepository Integration Tests - Minimal should find roles by group name","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should find roles by group name"},{"ancestorTitles":["DynamoAssignmentRepository Integration Tests - Minimal"],"duration":188,"failureDetails":[],"failureMessages":[],"fullName":"DynamoAssignmentRepository Integration Tests - Minimal should find groups by role name","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should find groups by role name"},{"ancestorTitles":["DynamoAssignmentRepository Integration Tests - Minimal"],"duration":141,"failureDetails":[],"failureMessages":[],"fullName":"DynamoAssignmentRepository Integration Tests - Minimal should return an empty array when finding roles for a non-existent group","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return an empty array when finding roles for a non-existent group"},{"ancestorTitles":["DynamoAssignmentRepository Integration Tests - Minimal"],"duration":63,"failureDetails":[],"failureMessages":[],"fullName":"DynamoAssignmentRepository Integration Tests - Minimal should return an empty array when finding groups for a non-existent role","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return an empty array when finding groups for a non-existent role"},{"ancestorTitles":["DynamoAssignmentRepository Integration Tests - Minimal"],"duration":82,"failureDetails":[],"failureMessages":[],"fullName":"DynamoAssignmentRepository Integration Tests - Minimal should assign a permission to a role and find it","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should assign a permission to a role and find it"},{"ancestorTitles":["DynamoAssignmentRepository Integration Tests - Minimal"],"duration":152,"failureDetails":[],"failureMessages":[],"fullName":"DynamoAssignmentRepository Integration Tests - Minimal should remove a permission from a role","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should remove a permission from a role"},{"ancestorTitles":["DynamoAssignmentRepository Integration Tests - Minimal"],"duration":111,"failureDetails":[],"failureMessages":[],"fullName":"DynamoAssignmentRepository Integration Tests - Minimal should find roles by permission name","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should find roles by permission name"},{"ancestorTitles":["DynamoAssignmentRepository Integration Tests - Minimal"],"duration":144,"failureDetails":[],"failureMessages":[],"fullName":"DynamoAssignmentRepository Integration Tests - Minimal should assign a custom role to a user and find it","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should assign a custom role to a user and find it"},{"ancestorTitles":["DynamoAssignmentRepository Integration Tests - Minimal"],"duration":147,"failureDetails":[],"failureMessages":[],"fullName":"DynamoAssignmentRepository Integration Tests - Minimal should remove a custom role from a user","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should remove a custom role from a user"},{"ancestorTitles":["DynamoAssignmentRepository Integration Tests - Minimal"],"duration":104,"failureDetails":[],"failureMessages":[],"fullName":"DynamoAssignmentRepository Integration Tests - Minimal should find users by role name","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should find users by role name"},{"ancestorTitles":["DynamoAssignmentRepository Integration Tests - Minimal"],"duration":129,"failureDetails":[],"failureMessages":[],"fullName":"DynamoAssignmentRepository Integration Tests - Minimal should assign a custom permission to a user and find it","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should assign a custom permission to a user and find it"},{"ancestorTitles":["DynamoAssignmentRepository Integration Tests - Minimal"],"duration":170,"failureDetails":[],"failureMessages":[],"fullName":"DynamoAssignmentRepository Integration Tests - Minimal should remove a custom permission from a user","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should remove a custom permission from a user"},{"ancestorTitles":["DynamoAssignmentRepository Integration Tests - Minimal"],"duration":113,"failureDetails":[],"failureMessages":[],"fullName":"DynamoAssignmentRepository Integration Tests - Minimal should find users by permission name","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should find users by permission name"},{"ancestorTitles":["DynamoAssignmentRepository Integration Tests - Minimal"],"duration":300,"failureDetails":[],"failureMessages":[],"fullName":"DynamoAssignmentRepository Integration Tests - Minimal should remove all assignments for a user","invocations":1,"location":null,"numPassingAsserts":7,"retryReasons":[],"status":"passed","title":"should remove all assignments for a user"},{"ancestorTitles":["DynamoAssignmentRepository Integration Tests - Minimal"],"duration":218,"failureDetails":[],"failureMessages":[],"fullName":"DynamoAssignmentRepository Integration Tests - Minimal should remove all assignments for a group","invocations":1,"location":null,"numPassingAsserts":7,"retryReasons":[],"status":"passed","title":"should remove all assignments for a group"},{"ancestorTitles":["DynamoAssignmentRepository Integration Tests - Minimal"],"duration":3800,"failureDetails":[],"failureMessages":[],"fullName":"DynamoAssignmentRepository Integration Tests - Minimal should remove all assignments for a role","invocations":1,"location":null,"numPassingAsserts":10,"retryReasons":[],"status":"passed","title":"should remove all assignments for a role"},{"ancestorTitles":["DynamoAssignmentRepository Integration Tests - Minimal"],"duration":650,"failureDetails":[],"failureMessages":[],"fullName":"DynamoAssignmentRepository Integration Tests - Minimal should remove all assignments for a permission","invocations":1,"location":null,"numPassingAsserts":7,"retryReasons":[],"status":"passed","title":"should remove all assignments for a permission"}],"endTime":1771844463895,"message":"","name":"E:\\NodeJS\\PBAC_Auth\\user-management-service\\tests\\integration\\Persistence\\DynamoAssignmentRepository.integration.spec.ts","startTime":1771844455579,"status":"passed","summary":""}],"wasInterrupted":false}
