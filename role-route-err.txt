[dotenv@17.2.1] injecting env (11) from .env.test -- tip: ≡ƒ¢á∩╕Å  run anywhere with `dotenvx run -- yourcommand`
Table TestPermissions created successfully. Waiting for it to become active...
Table TestAssignments created successfully. Waiting for it to become active...
Table TestPolicies created successfully. Waiting for it to become active...
Table TestRoles created successfully. Waiting for it to become active...
Table TestUsers created successfully. Waiting for it to become active...
  console.info
    [WinstonLogger] Logger initialized with level "info" in "test" environment.

      at WinstonLogger.initializeLogger (src/infrastructure/logging/WinstonLogger.ts:68:17)
          at Array.map (<anonymous>)

{"level":"warn","message":"CORS_ORIGIN is set to \"*\" in a non-development environment. This is insecure!","metadata":{},"timestamp":"2026-02-23T13:08:03.467Z"}
{"level":"info","message":"CORS configured for origin: *","metadata":{},"timestamp":"2026-02-23T13:08:03.472Z"}
{"level":"info","message":"Application setup complete for environment: test","metadata":{},"timestamp":"2026-02-23T13:08:03.476Z"}
{"level":"info","message":"--> POST /api/admin/roles","metadata":{"correlationId":"a0e19c04-054a-402d-bb45-84049aa4059a","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"POST","requestId":"a0e19c04-054a-402d-bb45-84049aa4059a","url":"/api/admin/roles","userId":"anonymous"},"timestamp":"2026-02-23T13:08:03.581Z"}
{"level":"info","message":"[AdminGuard - a0e19c04-054a-402d-bb45-84049aa4059a] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["role-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T13:08:03.584Z"}
  console.log
    Validation Middleware - req.body: {
      roleName: 'role-test-1771852078940',
      description: 'Test Role Description'
    }

      at src/api/middlewares/validation.middleware.ts:21:21

  console.log
    Validation Middleware - Object.keys(req.body): [ 'roleName', 'description' ]

      at src/api/middlewares/validation.middleware.ts:22:21

  console.log
    Validation Middleware - JSON.stringify(req.body): {"roleName":"role-test-1771852078940","description":"Test Role Description"}

      at src/api/middlewares/validation.middleware.ts:23:21

{"level":"info","message":"<-- POST /api/admin/roles 201 47.635ms","metadata":{"contentLength":"76","correlationId":"a0e19c04-054a-402d-bb45-84049aa4059a","durationMs":47.635,"eventType":"finish","requestId":"a0e19c04-054a-402d-bb45-84049aa4059a","statusCode":201,"userId":"anonymous"},"timestamp":"2026-02-23T13:08:03.628Z"}
{"level":"info","message":"--> GET /api/admin/roles","metadata":{"correlationId":"c2bc1af8-11d3-4fdf-b281-0de32a8a3a2e","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"c2bc1af8-11d3-4fdf-b281-0de32a8a3a2e","url":"/api/admin/roles","userId":"anonymous"},"timestamp":"2026-02-23T13:08:03.661Z"}
{"level":"info","message":"[AdminGuard - c2bc1af8-11d3-4fdf-b281-0de32a8a3a2e] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["role-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T13:08:03.663Z"}
{"level":"info","message":"<-- GET /api/admin/roles 200 6.135ms","metadata":{"contentLength":"156","correlationId":"c2bc1af8-11d3-4fdf-b281-0de32a8a3a2e","durationMs":6.135,"eventType":"finish","requestId":"c2bc1af8-11d3-4fdf-b281-0de32a8a3a2e","statusCode":200,"userId":"anonymous"},"timestamp":"2026-02-23T13:08:03.667Z"}
{"level":"info","message":"--> GET /api/admin/roles/test-role","metadata":{"correlationId":"9ae582d1-ae23-4273-a4a4-a1e75ddd1c45","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"9ae582d1-ae23-4273-a4a4-a1e75ddd1c45","url":"/api/admin/roles/test-role","userId":"anonymous"},"timestamp":"2026-02-23T13:08:03.688Z"}
{"level":"info","message":"[AdminGuard - 9ae582d1-ae23-4273-a4a4-a1e75ddd1c45] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["role-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T13:08:03.690Z"}
  console.log
    Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

{"level":"error","message":"Unexpected error during validation middleware [9ae582d1-ae23-4273-a4a4-a1e75ddd1c45]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T13:08:03.706Z"}
{"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"9ae582d1-ae23-4273-a4a4-a1e75ddd1c45","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/roles/test-role","requestId":"9ae582d1-ae23-4273-a4a4-a1e75ddd1c45","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T13:08:03.708Z"}
{"level":"error","message":"<-- GET /api/admin/roles/test-role 500 23.609ms","metadata":{"error":{"contentLength":"3814","correlationId":"9ae582d1-ae23-4273-a4a4-a1e75ddd1c45","durationMs":23.609,"eventType":"finish","requestId":"9ae582d1-ae23-4273-a4a4-a1e75ddd1c45","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T13:08:03.712Z"}
{"level":"info","message":"--> GET /api/admin/roles/test-role","metadata":{"correlationId":"b69f4a12-0700-4f70-a4e9-a32f011be481","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"b69f4a12-0700-4f70-a4e9-a32f011be481","url":"/api/admin/roles/test-role","userId":"anonymous"},"timestamp":"2026-02-23T13:08:03.736Z"}
{"level":"info","message":"[AdminGuard - b69f4a12-0700-4f70-a4e9-a32f011be481] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["role-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T13:08:03.738Z"}
  console.log
    Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

{"level":"error","message":"Unexpected error during validation middleware [b69f4a12-0700-4f70-a4e9-a32f011be481]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T13:08:03.741Z"}
{"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"b69f4a12-0700-4f70-a4e9-a32f011be481","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/roles/test-role","requestId":"b69f4a12-0700-4f70-a4e9-a32f011be481","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T13:08:03.742Z"}
{"level":"error","message":"<-- GET /api/admin/roles/test-role 500 8.618ms","metadata":{"error":{"contentLength":"3814","correlationId":"b69f4a12-0700-4f70-a4e9-a32f011be481","durationMs":8.618,"eventType":"finish","requestId":"b69f4a12-0700-4f70-a4e9-a32f011be481","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T13:08:03.745Z"}
{"level":"info","message":"--> GET /api/admin/roles/test-role","metadata":{"correlationId":"e58e220b-f64a-49d4-94b7-52e3e4a72c87","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"e58e220b-f64a-49d4-94b7-52e3e4a72c87","url":"/api/admin/roles/test-role","userId":"anonymous"},"timestamp":"2026-02-23T13:08:03.757Z"}
{"level":"warn","message":"Authentication: Missing or invalid Authorization header.","metadata":{},"timestamp":"2026-02-23T13:08:03.757Z"}
{"level":"warn","message":"Client error processing request: Authorization header missing or invalid.","metadata":{"correlationId":"e58e220b-f64a-49d4-94b7-52e3e4a72c87","errorMessage":"Authorization header missing or invalid.","errorName":"AuthenticationError","isOperational":true,"method":"GET","path":"/api/admin/roles/test-role","requestId":"e58e220b-f64a-49d4-94b7-52e3e4a72c87","stack":"AuthenticationError: Authorization header missing or invalid.\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:32:25\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:27:70\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestLogger.middleware.ts:84:9\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:32\n    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)\n    at middleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:13)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at addRequestId (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestId.middleware.ts:33:5)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at urlencodedParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\urlencoded.js:68:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at jsonParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\json.js:100:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at requestMetricsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestMetrics.middleware.ts:26:3)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at cors (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:188:7)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:224:17\n    at originCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:214:15)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:531:6)\n    at xXssProtectionMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:311:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPoweredByMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:304:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPermittedCrossDomainPoliciesMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:297:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xFrameOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:281:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDownloadOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:261:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDnsPrefetchControlMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:254:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xContentTypeOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:246:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at strictTransportSecurityMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:239:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at referrerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:207:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at originAgentClusterMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:182:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginResourcePolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:175:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginOpenerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:159:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at contentSecurityPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:124:4)","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T13:08:03.775Z"}
{"level":"warn","message":"<-- GET /api/admin/roles/test-role 401 21.687ms","metadata":{"contentLength":"151","correlationId":"e58e220b-f64a-49d4-94b7-52e3e4a72c87","durationMs":21.687,"eventType":"finish","requestId":"e58e220b-f64a-49d4-94b7-52e3e4a72c87","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T13:08:03.779Z"}
{"level":"info","message":"--> PUT /api/admin/roles/test-role-to-update","metadata":{"correlationId":"73264631-5466-4b5e-ba77-f63c94d48931","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"PUT","requestId":"73264631-5466-4b5e-ba77-f63c94d48931","url":"/api/admin/roles/test-role-to-update","userId":"anonymous"},"timestamp":"2026-02-23T13:08:03.799Z"}
{"level":"info","message":"[AdminGuard - 73264631-5466-4b5e-ba77-f63c94d48931] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["role-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T13:08:03.800Z"}
  console.log
    Validation Middleware - req.body: { description: 'Updated Integration Description' }

      at src/api/middlewares/validation.middleware.ts:21:21

  console.log
    Validation Middleware - Object.keys(req.body): [ 'description' ]

      at src/api/middlewares/validation.middleware.ts:22:21

  console.log
    Validation Middleware - JSON.stringify(req.body): {"description":"Updated Integration Description"}

      at src/api/middlewares/validation.middleware.ts:23:21

{"level":"info","message":"<-- PUT /api/admin/roles/test-role-to-update 200 16.410ms","metadata":{"contentLength":"185","correlationId":"73264631-5466-4b5e-ba77-f63c94d48931","durationMs":16.41,"eventType":"finish","requestId":"73264631-5466-4b5e-ba77-f63c94d48931","statusCode":200,"userId":"anonymous"},"timestamp":"2026-02-23T13:08:03.815Z"}
{"level":"info","message":"--> PUT /api/admin/roles/test-role-to-update","metadata":{"correlationId":"19169bc7-bb92-4201-a8cd-31eb81f0f5ad","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"PUT","requestId":"19169bc7-bb92-4201-a8cd-31eb81f0f5ad","url":"/api/admin/roles/test-role-to-update","userId":"anonymous"},"timestamp":"2026-02-23T13:08:03.837Z"}
{"level":"info","message":"[AdminGuard - 19169bc7-bb92-4201-a8cd-31eb81f0f5ad] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["role-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T13:08:03.837Z"}
  console.log
    Validation Middleware - req.body: { description: 'Updated Integration Description' }

      at src/api/middlewares/validation.middleware.ts:21:21

  console.log
    Validation Middleware - Object.keys(req.body): [ 'description' ]

      at src/api/middlewares/validation.middleware.ts:22:21

  console.log
    Validation Middleware - JSON.stringify(req.body): {"description":"Updated Integration Description"}

      at src/api/middlewares/validation.middleware.ts:23:21

{"level":"warn","message":"<-- PUT /api/admin/roles/test-role-to-update 404 15.425ms","metadata":{"contentLength":"62","correlationId":"19169bc7-bb92-4201-a8cd-31eb81f0f5ad","durationMs":15.425,"eventType":"finish","requestId":"19169bc7-bb92-4201-a8cd-31eb81f0f5ad","statusCode":404,"userId":"anonymous"},"timestamp":"2026-02-23T13:08:03.852Z"}
{"level":"info","message":"--> PUT /api/admin/roles/test-role-to-update","metadata":{"correlationId":"5afea1a2-8744-4444-9f36-7d037d69daad","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"PUT","requestId":"5afea1a2-8744-4444-9f36-7d037d69daad","url":"/api/admin/roles/test-role-to-update","userId":"anonymous"},"timestamp":"2026-02-23T13:08:03.871Z"}
{"level":"warn","message":"Authentication: Missing or invalid Authorization header.","metadata":{},"timestamp":"2026-02-23T13:08:03.872Z"}
{"level":"warn","message":"Client error processing request: Authorization header missing or invalid.","metadata":{"correlationId":"5afea1a2-8744-4444-9f36-7d037d69daad","errorMessage":"Authorization header missing or invalid.","errorName":"AuthenticationError","isOperational":true,"method":"PUT","path":"/api/admin/roles/test-role-to-update","requestId":"5afea1a2-8744-4444-9f36-7d037d69daad","stack":"AuthenticationError: Authorization header missing or invalid.\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:32:25\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:27:70\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestLogger.middleware.ts:84:9\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:32\n    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)\n    at middleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:13)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at addRequestId (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestId.middleware.ts:33:5)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at urlencodedParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\urlencoded.js:57:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\read.js:132:5\n    at AsyncResource.runInAsyncScope (node:async_hooks:214:14)\n    at invokeCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\raw-body@3.0.0\\node_modules\\raw-body\\index.js:238:16)\n    at done (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\raw-body@3.0.0\\node_modules\\raw-body\\index.js:227:7)\n    at IncomingMessage.onEnd (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\raw-body@3.0.0\\node_modules\\raw-body\\index.js:287:7)\n    at IncomingMessage.emit (node:events:519:28)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at processTicksAndRejections (node:internal/process/task_queues:90:21)","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T13:08:03.876Z"}
{"level":"warn","message":"<-- PUT /api/admin/roles/test-role-to-update 401 7.778ms","metadata":{"contentLength":"151","correlationId":"5afea1a2-8744-4444-9f36-7d037d69daad","durationMs":7.778,"eventType":"finish","requestId":"5afea1a2-8744-4444-9f36-7d037d69daad","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T13:08:03.879Z"}
{"level":"info","message":"--> DELETE /api/admin/roles/test-role-to-delete","metadata":{"correlationId":"1b523abc-674b-4cac-b7ba-178fa9452791","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"DELETE","requestId":"1b523abc-674b-4cac-b7ba-178fa9452791","url":"/api/admin/roles/test-role-to-delete","userId":"anonymous"},"timestamp":"2026-02-23T13:08:03.897Z"}
{"level":"info","message":"[AdminGuard - 1b523abc-674b-4cac-b7ba-178fa9452791] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["role-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T13:08:03.899Z"}
  console.log
    Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

{"level":"error","message":"Unexpected error during validation middleware [1b523abc-674b-4cac-b7ba-178fa9452791]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T13:08:03.904Z"}
{"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"1b523abc-674b-4cac-b7ba-178fa9452791","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"DELETE","path":"/api/admin/roles/test-role-to-delete","requestId":"1b523abc-674b-4cac-b7ba-178fa9452791","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T13:08:03.904Z"}
{"level":"error","message":"<-- DELETE /api/admin/roles/test-role-to-delete 500 10.673ms","metadata":{"error":{"contentLength":"3814","correlationId":"1b523abc-674b-4cac-b7ba-178fa9452791","durationMs":10.673,"eventType":"finish","requestId":"1b523abc-674b-4cac-b7ba-178fa9452791","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T13:08:03.908Z"}
{"level":"info","message":"--> DELETE /api/admin/roles/test-role-to-delete","metadata":{"correlationId":"3b6a625a-d077-4e60-bc8a-34bce4f522d6","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"DELETE","requestId":"3b6a625a-d077-4e60-bc8a-34bce4f522d6","url":"/api/admin/roles/test-role-to-delete","userId":"anonymous"},"timestamp":"2026-02-23T13:08:03.930Z"}
{"level":"info","message":"[AdminGuard - 3b6a625a-d077-4e60-bc8a-34bce4f522d6] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["role-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T13:08:03.930Z"}
  console.log
    Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

{"level":"error","message":"Unexpected error during validation middleware [3b6a625a-d077-4e60-bc8a-34bce4f522d6]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T13:08:03.934Z"}
{"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"3b6a625a-d077-4e60-bc8a-34bce4f522d6","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"DELETE","path":"/api/admin/roles/test-role-to-delete","requestId":"3b6a625a-d077-4e60-bc8a-34bce4f522d6","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T13:08:03.935Z"}
{"level":"error","message":"<-- DELETE /api/admin/roles/test-role-to-delete 500 7.135ms","metadata":{"error":{"contentLength":"3814","correlationId":"3b6a625a-d077-4e60-bc8a-34bce4f522d6","durationMs":7.135,"eventType":"finish","requestId":"3b6a625a-d077-4e60-bc8a-34bce4f522d6","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T13:08:03.937Z"}
{"level":"info","message":"--> DELETE /api/admin/roles/test-role-to-delete","metadata":{"correlationId":"175e4a68-52fd-4427-8579-a2813e4508ca","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"DELETE","requestId":"175e4a68-52fd-4427-8579-a2813e4508ca","url":"/api/admin/roles/test-role-to-delete","userId":"anonymous"},"timestamp":"2026-02-23T13:08:03.953Z"}
{"level":"warn","message":"Authentication: Missing or invalid Authorization header.","metadata":{},"timestamp":"2026-02-23T13:08:03.954Z"}
{"level":"warn","message":"Client error processing request: Authorization header missing or invalid.","metadata":{"correlationId":"175e4a68-52fd-4427-8579-a2813e4508ca","errorMessage":"Authorization header missing or invalid.","errorName":"AuthenticationError","isOperational":true,"method":"DELETE","path":"/api/admin/roles/test-role-to-delete","requestId":"175e4a68-52fd-4427-8579-a2813e4508ca","stack":"AuthenticationError: Authorization header missing or invalid.\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:32:25\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:27:70\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at Function.handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:186:3)\n    at router (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:60:12)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestLogger.middleware.ts:84:9\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:32\n    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)\n    at middleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\shared\\utils\\requestContext.ts:40:13)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at addRequestId (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestId.middleware.ts:33:5)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at urlencodedParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\urlencoded.js:68:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at jsonParser (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\body-parser@2.2.0\\node_modules\\body-parser\\lib\\types\\json.js:100:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at requestMetricsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\requestMetrics.middleware.ts:26:3)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at cors (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:188:7)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:224:17\n    at originCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:214:15)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\cors@2.8.5\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:531:6)\n    at xXssProtectionMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:311:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPoweredByMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:304:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xPermittedCrossDomainPoliciesMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:297:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xFrameOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:281:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDownloadOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:261:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xDnsPrefetchControlMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:254:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at xContentTypeOptionsMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:246:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at strictTransportSecurityMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:239:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at referrerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:207:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at originAgentClusterMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:182:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginResourcePolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:175:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at crossOriginOpenerPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:159:3)\n    at internalNext (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:529:6)\n    at contentSecurityPolicyMiddleware (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\helmet@8.1.0\\node_modules\\helmet\\index.cjs:124:4)","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T13:08:03.958Z"}
{"level":"warn","message":"<-- DELETE /api/admin/roles/test-role-to-delete 401 7.733ms","metadata":{"contentLength":"151","correlationId":"175e4a68-52fd-4427-8579-a2813e4508ca","durationMs":7.733,"eventType":"finish","requestId":"175e4a68-52fd-4427-8579-a2813e4508ca","statusCode":401,"userId":"anonymous"},"timestamp":"2026-02-23T13:08:03.961Z"}
{"level":"info","message":"--> POST /api/admin/roles/role-for-permissions/permissions","metadata":{"correlationId":"4857c91a-2186-4e63-a41b-4d020d62ecc3","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"POST","requestId":"4857c91a-2186-4e63-a41b-4d020d62ecc3","url":"/api/admin/roles/role-for-permissions/permissions","userId":"anonymous"},"timestamp":"2026-02-23T13:08:03.980Z"}
{"level":"info","message":"[AdminGuard - 4857c91a-2186-4e63-a41b-4d020d62ecc3] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["role-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T13:08:03.981Z"}
  console.log
    Validation Middleware - req.body: { permissionName: 'permission-for-role' }

      at src/api/middlewares/validation.middleware.ts:21:21

  console.log
    Validation Middleware - Object.keys(req.body): [ 'permissionName' ]

      at src/api/middlewares/validation.middleware.ts:22:21

  console.log
    Validation Middleware - JSON.stringify(req.body): {"permissionName":"permission-for-role"}

      at src/api/middlewares/validation.middleware.ts:23:21

{"level":"info","message":"<-- POST /api/admin/roles/role-for-permissions/permissions 204 14.580ms","metadata":{"correlationId":"4857c91a-2186-4e63-a41b-4d020d62ecc3","durationMs":14.58,"eventType":"finish","requestId":"4857c91a-2186-4e63-a41b-4d020d62ecc3","statusCode":204,"userId":"anonymous"},"timestamp":"2026-02-23T13:08:03.994Z"}
{"level":"info","message":"--> DELETE /api/admin/roles/role-for-permissions/permissions/permission-for-role","metadata":{"correlationId":"e0cdcb82-89b6-4a36-b671-a03ebb994b91","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"DELETE","requestId":"e0cdcb82-89b6-4a36-b671-a03ebb994b91","url":"/api/admin/roles/role-for-permissions/permissions/permission-for-role","userId":"anonymous"},"timestamp":"2026-02-23T13:08:04.012Z"}
{"level":"info","message":"[AdminGuard - e0cdcb82-89b6-4a36-b671-a03ebb994b91] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["role-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T13:08:04.012Z"}
  console.log
    Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

{"level":"error","message":"Unexpected error during validation middleware [e0cdcb82-89b6-4a36-b671-a03ebb994b91]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T13:08:04.017Z"}
{"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"e0cdcb82-89b6-4a36-b671-a03ebb994b91","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"DELETE","path":"/api/admin/roles/role-for-permissions/permissions/permission-for-role","requestId":"e0cdcb82-89b6-4a36-b671-a03ebb994b91","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T13:08:04.018Z"}
{"level":"error","message":"<-- DELETE /api/admin/roles/role-for-permissions/permissions/permission-for-role 500 9.385ms","metadata":{"error":{"contentLength":"3951","correlationId":"e0cdcb82-89b6-4a36-b671-a03ebb994b91","durationMs":9.385,"eventType":"finish","requestId":"e0cdcb82-89b6-4a36-b671-a03ebb994b91","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T13:08:04.021Z"}
{"level":"info","message":"--> GET /api/admin/roles/role-for-permissions/permissions","metadata":{"correlationId":"337fa022-fb20-4573-b541-21073da4ca6b","httpVersion":"1.1","ip":"::ffff:127.0.0.1","method":"GET","requestId":"337fa022-fb20-4573-b541-21073da4ca6b","url":"/api/admin/roles/role-for-permissions/permissions","userId":"anonymous"},"timestamp":"2026-02-23T13:08:04.039Z"}
{"level":"info","message":"[AdminGuard - 337fa022-fb20-4573-b541-21073da4ca6b] Admin authentication successful for user: test-admin (ID: test-admin-id-123)","metadata":{"roles":["role-admin","user"],"userId":"test-admin-id-123","username":"test-admin"},"timestamp":"2026-02-23T13:08:04.041Z"}
  console.log
    Validation Middleware - req.body: undefined

      at src/api/middlewares/validation.middleware.ts:21:21

{"level":"error","message":"Unexpected error during validation middleware [337fa022-fb20-4573-b541-21073da4ca6b]:","metadata":{"error":{"message":"Cannot convert undefined or null to object","name":"TypeError","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"timestamp":"2026-02-23T13:08:04.047Z"}
{"level":"error","message":"Server error processing request: Cannot convert undefined or null to object","metadata":{"error":{"correlationId":"337fa022-fb20-4573-b541-21073da4ca6b","errorMessage":"Cannot convert undefined or null to object","errorName":"TypeError","isOperational":false,"method":"GET","path":"/api/admin/roles/role-for-permissions/permissions","requestId":"337fa022-fb20-4573-b541-21073da4ca6b","stack":"TypeError: Cannot convert undefined or null to object\n    at Function.keys (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:22:82\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\validation.middleware.ts:18:78\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:157:13)\n    at Route.dispatch (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\route.js:117:3)\n    at handle (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:435:11)\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:295:15\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:600:14)\n    at param (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:610:14)\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:664:3)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:62:13\n    at Generator.next (<anonymous>)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:8:71\n    at new Promise (<anonymous>)\n    at Object.<anonymous>.__awaiter (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:4:12)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\admin.auth.guard.middleware.ts:28:85\n    at Layer.handleRequest (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\lib\\layer.js:152:17)\n    at trimPrefix (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:342:13)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:297:9\n    at processParams (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:582:12)\n    at next (E:\\NodeJS\\PBAC_Auth\\user-management-service\\node_modules\\.pnpm\\router@2.2.0\\node_modules\\router\\index.js:291:5)\n    at E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:63:13\n    at Generator.next (<anonymous>)\n    at fulfilled (E:\\NodeJS\\PBAC_Auth\\user-management-service\\src\\api\\middlewares\\jwtAuth.middleware.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T13:08:04.048Z"}
{"level":"error","message":"<-- GET /api/admin/roles/role-for-permissions/permissions 500 11.598ms","metadata":{"error":{"contentLength":"3814","correlationId":"337fa022-fb20-4573-b541-21073da4ca6b","durationMs":11.598,"eventType":"finish","requestId":"337fa022-fb20-4573-b541-21073da4ca6b","statusCode":500,"userId":"anonymous"}},"timestamp":"2026-02-23T13:08:04.051Z"}
FAIL tests/integration/routes/role.admin.routes.integration.spec.ts (10.958 s)
  Integration Tests: Role Admin Routes (/api/admin/roles)
    POST /api/admin/roles
      ΓêÜ should return 201 Created when payload is valid and service succeeds (164 ms)
    GET /api/admin/roles
      ΓêÜ should return 200 OK with a list of roles (30 ms)
    GET /api/admin/roles/:roleName
      ├ù should return 200 OK with role data if role exists (46 ms)
      ├ù should return 404 Not Found if service returns null (27 ms)
      ΓêÜ should return 401 Unauthorized if token is missing (33 ms)
    PUT /api/admin/roles/:roleName
      ΓêÜ should return 200 OK with updated role data if service succeeds (36 ms)
      ΓêÜ should return 404 Not Found if service returns null (35 ms)
      ΓêÜ should return 401 Unauthorized if token is missing (26 ms)
    DELETE /api/admin/roles/:roleName
      ├ù should return 204 No Content if service succeeds (30 ms)
      ├ù should return 404 Not Found if service throws RoleNotFoundError (27 ms)
      ΓêÜ should return 401 Unauthorized if token is missing (23 ms)
    Permissions Management (/api/admin/roles/:roleName/permissions)
      POST /:roleName/permissions
        ΓêÜ should return 204 No Content on successful assignment (33 ms)
      DELETE /:roleName/permissions/:permissionName
        ├ù should return 204 No Content on successful removal (26 ms)
      GET /:roleName/permissions
        ├ù should return 200 OK with a list of permission names (30 ms)

  ΓùÅ Integration Tests: Role Admin Routes (/api/admin/roles) ΓÇ║ GET /api/admin/roles/:roleName ΓÇ║ should return 200 OK with role data if role exists

    expected 200 "OK", got 500 "Internal Server Error"

      142 |                 .get(`${BASE_API_PATH}/${targetRoleName}`)
      143 |                 .set(MOCK_AUTH_HEADER)
    > 144 |                 .expect(HttpStatusCode.OK) // 200
          |                  ^
      145 |                 .expect(res => {
      146 |                     expect(res.body.roleName).toBe(targetRoleName);
      147 |                     expect(res.body.description).toBe('get role');

      at tests/integration/routes/role.admin.routes.integration.spec.ts:144:18
      at tests/integration/routes/role.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/role.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/role.admin.routes.integration.spec.ts:139:77)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Role Admin Routes (/api/admin/roles) ΓÇ║ GET /api/admin/roles/:roleName ΓÇ║ should return 404 Not Found if service returns null

    expected 404 "Not Found", got 500 "Internal Server Error"

      155 |                 .get(`${BASE_API_PATH}/${targetRoleName}`)
      156 |                 .set(MOCK_AUTH_HEADER)
    > 157 |                 .expect(HttpStatusCode.NOT_FOUND); // 404
          |                  ^
      158 |             expect(mockRoleAdminService.getRole).toHaveBeenCalledWith(expect.anything(), targetRoleName);
      159 |         });
      160 |

      at tests/integration/routes/role.admin.routes.integration.spec.ts:157:18
      at tests/integration/routes/role.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/role.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/role.admin.routes.integration.spec.ts:152:78)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Role Admin Routes (/api/admin/roles) ΓÇ║ DELETE /api/admin/roles/:roleName ΓÇ║ should return 204 No Content if service succeeds

    expected 204 "No Content", got 500 "Internal Server Error"

      215 |                 .delete(`${BASE_API_PATH}/${targetRoleName}`)
      216 |                 .set(MOCK_AUTH_HEADER)
    > 217 |                 .expect(HttpStatusCode.NO_CONTENT); // 204
          |                  ^
      218 |             expect(mockRoleAdminService.deleteRole).toHaveBeenCalledWith(expect.anything(), targetRoleName);
      219 |         });
      220 |

      at tests/integration/routes/role.admin.routes.integration.spec.ts:217:18
      at tests/integration/routes/role.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/role.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/role.admin.routes.integration.spec.ts:212:75)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Role Admin Routes (/api/admin/roles) ΓÇ║ DELETE /api/admin/roles/:roleName ΓÇ║ should return 404 Not Found if service throws RoleNotFoundError

    expected 404 "Not Found", got 500 "Internal Server Error"

      226 |                 .delete(`${BASE_API_PATH}/${targetRoleName}`)
      227 |                 .set(MOCK_AUTH_HEADER)
    > 228 |                 .expect(HttpStatusCode.NOT_FOUND); // 404
          |                  ^
      229 |             expect(mockRoleAdminService.deleteRole).toHaveBeenCalledWith(expect.anything(), targetRoleName);
      230 |         });
      231 |

      at tests/integration/routes/role.admin.routes.integration.spec.ts:228:18
      at tests/integration/routes/role.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/role.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/role.admin.routes.integration.spec.ts:221:90)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Role Admin Routes (/api/admin/roles) ΓÇ║ Permissions Management (/api/admin/roles/:roleName/permissions) ΓÇ║ DELETE /:roleName/permissions/:permissionName ΓÇ║ should return 204 No Content on successful removal

    expected 204 "No Content", got 500 "Internal Server Error"

      260 |                     .delete(`${BASE_API_PATH}/${targetRoleName}/permissions/${targetPermissionName}`)
      261 |                     .set(MOCK_AUTH_HEADER)
    > 262 |                     .expect(HttpStatusCode.NO_CONTENT); // 204
          |                      ^
      263 |                 expect(mockRoleAdminService.removePermissionFromRole).toHaveBeenCalledWith(expect.anything(), targetRoleName, targetPermissionName);
      264 |             });
      265 |         });

      at tests/integration/routes/role.admin.routes.integration.spec.ts:262:22
      at tests/integration/routes/role.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/role.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/role.admin.routes.integration.spec.ts:257:81)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

  ΓùÅ Integration Tests: Role Admin Routes (/api/admin/roles) ΓÇ║ Permissions Management (/api/admin/roles/:roleName/permissions) ΓÇ║ GET /:roleName/permissions ΓÇ║ should return 200 OK with a list of permission names

    expected 200 "OK", got 500 "Internal Server Error"

      272 |                     .get(`${BASE_API_PATH}/${targetRoleName}/permissions`)
      273 |                     .set(MOCK_AUTH_HEADER)
    > 274 |                     .expect(HttpStatusCode.OK) // 200
          |                      ^
      275 |                     .expect(res => {
      276 |                         expect(res.body.permissions).toEqual(mockPermissions);
      277 |                     });

      at tests/integration/routes/role.admin.routes.integration.spec.ts:274:22
      at tests/integration/routes/role.admin.routes.integration.spec.ts:8:71
      at Object.<anonymous>.__awaiter (tests/integration/routes/role.admin.routes.integration.spec.ts:4:12)
      at Object.<anonymous> (tests/integration/routes/role.admin.routes.integration.spec.ts:268:83)
      ----
      at Test._assertStatus (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:309:14)
      at node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:365:13
      at Test._assertFunction (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:342:13)
      at Test.assert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:195:23)
      at localAssert (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:138:14)
      at Server.<anonymous> (node_modules/.pnpm/supertest@7.1.4/node_modules/supertest/lib/test.js:152:11)

Test Suites: 1 failed, 1 total
Tests:       6 failed, 8 passed, 14 total
Snapshots:   0 total
Time:        11.169 s, estimated 33 s
Ran all test suites matching /role.admin.routes.integration/i.
Table TestUsers deleted successfully. Waiting for it to be deleted...
Table TestPermissions deleted successfully. Waiting for it to be deleted...
Table TestAssignments deleted successfully. Waiting for it to be deleted...
Table TestRoles deleted successfully. Waiting for it to be deleted...
Table TestPolicies deleted successfully. Waiting for it to be deleted...
